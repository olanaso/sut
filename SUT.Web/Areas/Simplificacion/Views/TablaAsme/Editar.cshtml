@using Sut.Entities;
@model Sut.Entities.TablaAsme
@{
    Sut.Security.UsuarioInfo user = ViewBag.Usuario as Sut.Security.UsuarioInfo;
    List<Sut.Entities.Observacion> obs = ViewBag.Observacion as List<Sut.Entities.Observacion>;

        Sut.Security.Filtros fil2 = ViewBag.filtro as Sut.Security.Filtros;


    Sut.Entities.Observacion obsgeneral = ViewBag.Observaciongeneral as Sut.Entities.Observacion;
    ViewBag.Icon = "fa fa-file-text-o";
    //ViewBag.Title = "Tabla ASME-VM " + Model.Codigo;

    ViewBag.Title = "Tabla ASME-VM - " + Model.Procedimiento.CodigoCorto;
    ViewBag.Descripcion = "";
}

@if (Model.Procedimiento.Expediente.EstadoExpediente == EstadoExpediente.Observado)
{
    <div class="box box-danger">
        <div class="box-body">
            <div class="col-sm-12 col-xs-12" style="border-color:red">

                <div class="pull-left col-sm-12 col-xs-12">

                    <fieldset class="scheduler-border">
                        <legend>
                            Información Complementaria a la Observación
                        </legend> 
                        <div class="form-group">
                            @if (obsgeneral != null)
                            {
                                <textarea rows="5" class="form-control" id="txtaObservarExp" style="border-color:red;background:#ff00002e;"> @obsgeneral.Descripcion</textarea>
                            }
                            else
                            {<textarea rows="5" class="form-control" id="txtaObservarExp" style="border-color:red;background:#ff00002e;"> </textarea>}
                        </div>

                    </fieldset>

                </div>

            </div>
        </div>
    </div>
}
<div id="mensajes">
    @{Html.RenderPartial("_Error");}
</div>
<div class="box box-danger">
    <div class="box-body form-horizontal">
        <div class="form-group">
            <label class="col-sm-2 col-xs-12 control-label" for="Denominacion">Denominación :</label>
            <div class="col-sm-10 col-xs-12">
                @Html.TextBoxFor(model => model.Procedimiento.Denominacion, new { @class = "form-control", @readonly = "readonly" })
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 col-xs-12 control-label">Tipo :</label>
            <div class="col-sm-10 col-xs-12">
                @Html.TipoProcedimiento(Model.Procedimiento.TipoProcedimiento)
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 col-xs-12 control-label">Tabla Asme :</label>
            <div class="col-sm-10 col-xs-12">
                @Html.TextBoxFor(model => model.Descripcion, new { @class = "form-control", @readonly = "readonly" })
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 col-xs-12 control-label">Dependencia a Cargo :</label>
            <div class="col-sm-10 col-xs-12">
                @Html.TextBoxFor(model => model.Procedimiento.UndOrgResponsable.Nombre, new { @class = "form-control", @readonly = "readonly" })
            </div>  
        </div>
        <div class="form-group">
            <label class="col-sm-2 col-xs-12 control-label">Prestaciones Anuales :</label>
            <div class="col-sm-10 col-xs-12">
                @Html.TextBoxFor(model => model.Prestaciones, new { @class = "form-control", @style = " width :15%;border: 2px solid blue; ", @Required = true, @type = "number" })

          
            </div>
        </div>
        @if (@Model.Procedimiento.CargoPordependencia != "")
        {
            <div class="form-group">
                <label class="col-sm-2 col-xs-12 control-label">Otras Dependecias a Cargo :</label>
                <div class="col-sm-10 col-xs-12">
                    <div>
                        @Html.TextAreaFor(model => model.Procedimiento.CargoPordependencia, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @readonly = "readonly", Required = true })

                    </div>
                </div>
            </div>
        }
    </div>
</div>
<input type="hidden" id="hidVerRec" value="0" />
@using (Html.BeginForm("", "", FormMethod.Post, new { @id = "form-asme" }))
{
    @Html.HiddenFor(model => model.TablaAsmeId)
     
    <div id="boxListaAsme" class="box box-default">
        <div class="box-header">
            @*<a id="btnVerRec" class="btn btn-primary" href="#"><i class="fa fa-laptop"></i> Editar Recursos</a>
        <a id="btnVerAct" class="btn btn-warning hidden" href="#"><i class="fa fa-gear"></i> Editar Actividades</a>*@

            @*<a href="/General/Reporte/TablaAsme?TablaAsmeId=@Model.TablaAsmeId" target="_blank" class="btn btn-default"><i class="fa fa-download"></i> Descargar Tabla ASME</a>*@

            <div class="btn-group pull-right">
                @if (@user.rolmenu[0].Importar == true)
                {
                    <a class="btn btn-default dropdown-toggle " data-toggle="dropdown" aria-expanded="false"><i class="fa fa-file-pdf-o"></i> Importar <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        @if (@user.rolmenu[0].Descargar == true)
                        {
                            <li><a id="btnPlantillaAct" href="javascript:sut.Asme.Recurso.openAddRecursoplantilla()"><i class="fa fa-download"></i> Descargar Plantilla</a></li>
                            <li class="divider"></li>
                        }
                        <li><a id="btnImportAct" href="javascript:sut.Asme.importAct()"><i class="fa fa-file-excel-o"></i> Importar Plantilla</a></li>
                    </ul>
                }


            </div>
            @if (@user.rolmenu[0].Descargar == true)
            {
                <a href="@Url.Content("~/General/Reporte/TablaAsme")?TablaAsmeId=@Model.TablaAsmeId" target="_blank" class="btn btn-default"><i class="fa fa-download"></i> Descargar Tabla ASME</a>
            }

            <div class="btn-group pull-right">
                &nbsp;&nbsp;
                @if (@user.rolmenu[0].Agregar == true)
                {
                    <a id="btnAddAct" class="btn btn-success" href="javascript:sut.Asme.addNew()"><i class="fa fa-plus"></i> Agregar</a>
                }

            </div>


            <a class="btn btn-facebook" id="filtro" href="javascript:sut.Asme.filtro()"><i class="fa fa-filter"></i> Filtros</a>
            <a class="btn btn-facebook" id="quitarfiltro" href="javascript:sut.Asme.quitarfiltro()"><i class="fa fa-filter"></i> Quitar Filtro</a>

            <div class="col-sm-12 col-xs-12" id="idFiltros">
                <br />
                <label class="col-sm-1 col-xs-1 control-label">Tipo Actividad :</label>
                <div class="col-sm-2 col-xs-2">
                    @Html.DropDownListFor(model => @fil2.actividad, ViewBag.actividad as List<SelectListItem>, new { @class = "form-control " })
                </div>

                <label class="col-sm-1 col-xs-1 control-label">
                    Tipo Valor  :
                </label>
                <div class="col-sm-2 col-xs-2">
                    @Html.DropDownListFor(model => @fil2.valor, ViewBag.valor as List<SelectListItem>, new { @class = "form-control " })
                </div>
                <label class="col-sm-1 col-xs-1 control-label">
                    Actividad  :
                </label>
                <div class="col-sm-2 col-xs-2">
                    <input id="txtFilterDes" type="text" class="form-control input-sm" />
                </div>
                <a class="btn btn-facebook" id="aplicarfiltro" href="javascript:sut.Asme.aplicarfiltro()"><i class="fa fa-filter"></i> Aplicar</a>
                <br />
            </div>
            @if (@fil2 != null)
            {
                if (@fil2.estado != "1")
                {
                    <script>
                        window.addEventListener("load", function () {
                            $("#idFiltros").hide();
                            $("#quitarfiltro").hide();
                            $("#filtro").show();
                        });
                    </script>
                }
                else
                {
                    <script>

                        window.addEventListener("load", function () {
                            $("#idFiltros").show();
                            $("#quitarfiltro").show();
                            $("#filtro").hide();
                        });
                    </script>
                }
            }
            else
            {
                <script>

                    window.addEventListener("load", function () {
                        $("#idFiltros").hide();
                        $("#quitarfiltro").hide();
                        $("#filtro").show();
                    });
                </script>
            }
        </div>
        <div class="box-body no-padding">
            <div class="table-responsive">
                <table id="tblAsme" class="table table-condensed table-bordered">
                    <thead>
                        <tr class="danger">
                            <th style="width:50px">
                                    </th>
                            <th style="width:50px">
                            </th>
                            <th rowspan="2" style="width:20px">Nro.</th>
                            <th rowspan="2">Actividades</th>
                            <th rowspan="2" style="width: 300px">Unidades de Organización</th>
                            <th rowspan="2" style="width:30px;">Duración (Minutos)</th>
                            <th colspan="5">Tipo de Actividad</th>
                            <th colspan="3">Tipo de Valor</th>
                        </tr>
                        <tr class="danger">
                            <td class="text-center">
                                <a class="btn btn-success btn-xs" id="idEditarorden" href="javascript:sut.Asme.editarorden(@Model.TablaAsmeId);" data-placement="right" title="Editar el # del la tabla"><i class="fa fa-list-ol"></i></a>
                                <a class="btn btn-primary btn-xs" id="GuardarEditarorden" data-placement="right" title="Guardar el # del los PA" href="javascript:sut.Asme.guardareditarorden(@Model.TablaAsmeId);"><i class="fa fa-floppy-o"></i></a>
                                 
                                <a class="btn btn-danger btn-xs" id="CancelarOrdenar" data-placement="right" title="Cancelar los # del los PA" href="javascript:sut.Asme.cancelarCampos();"><i class="fa fa-ban"></i></a>


                            </td>
                            <td class="text-center">
                                @*<a class="btn btn-success btn-xs" id="idOrdenar" href="javascript:sut.Asme.ordenarCampos();" data-placement="right" title="Ordenar automaticamente los # del los PA"><i class="fa fa-sort-numeric-asc"></i></a>*@
                                <a class="btn btn-primary btn-xs" id="GuardarOrdenar" data-placement="right" title="Generar automaticamente los # del los PA" href="javascript:sut.Asme.generarorden(@Model.TablaAsmeId);"><i class="fa fa-floppy-o"></i></a>
                                 
                                <a class="btn btn-danger btn-xs" id="CancelarEditarorden" data-placement="right" title="Cancelar el # del los PA" href="javascript:sut.Asme.cancelareditarorden(@Model.TablaAsmeId);"><i class="fa fa-ban"></i></a>
                            </td>
                            <th><i class="fa fa-circle" data-toggle="tooltip" data-placement="bottom" title="Operación"></i></th>
                            <th><i class="fa fa-stop" data-toggle="tooltip" data-placement="bottom" title="Revisión"></i></th>
                            <th><i class="glyphicon glyphicon-arrow-right" data-toggle="tooltip" data-placement="bottom" title="Traslado"></i></th>
                            <th><div class="semi-circulo-2" data-toggle="tooltip" data-placement="bottom" title="Espera"></div></th>
                            <th><i class="glyphicon glyphicon-triangle-bottom" data-toggle="tooltip" data-placement="bottom" title="Archivo"></i></th>
                            <th>VA</th>
                            <th>Con.</th>
                            <th>SVA</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                    <tfoot>
                        <tr class="danger"> 
                            <td colspan="5">Plazo de atención <span>0</span> días hábiles.</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        @*<div class="box-footer">
            <a class="btn btn-default" href="#"><i class="fa fa-download"></i> Tabla ASME Actual</a>
                <div class="btn-group pull-right">
                    <a href="javascript:window.history.go(-1)" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>
                    <a id="btnSaveAsme" href="javascript:sut.Asme.guardar()" class="btn btn-primary pull-right" ><i class="fa fa-save"></i> Guardar</a>
                </div>
            </div>*@

    </div>
}
<div id="divOculto" class="hidden">
    <table id="tableOculto">
        <tbody>
            <tr id="trDetalle">
                <td colspan="13">
                    @using (Html.BeginForm("", "", FormMethod.Post, new { @id = "form-detalle" }))
                    {
                        <div class="col-sm-12 col-xs-12">
                            <div class="col-sm-12 col-xs-12">
                                <div class="btn-group pull-right">
                                    @if (@user.rolmenu[0].Agregar == true)
                                    {
                                        <a id="btnAddRec" href="javascript:sut.Asme.Recurso.openAddRecurso()" class="btn btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                    }
                                    @if (@user.rolmenu[0].Eliminar == true)
                                    {
                                        <a id="btnDelRec" href="javascript:sut.Asme.Recurso.delete()" class="btn btn-danger"><i class="fa fa-remove"></i> Eliminar</a>
                                    }
                                </div>
                                <input id="hidActividadId" name="ActividadId" type="hidden" value="0" />

                                <input id="hidNro" name="Nro" type="hidden" value="0" />
                                <input id="hidActividad" name="Actividad" type="hidden" value="0" />
                                <input id="hidUnidadOrganizacion" name="UnidadOrganizacion" type="hidden" value="0" />
                                <input id="hidDuracion" name="Duracion" type="hidden" value="0" />
                            </div>
                            <div class="col-sm-6 col-xs-12">
                                <div id="boxListaRecIdent" class="box box-danger">
                                    <div class="box-body no-padding">
                                        <table id="tblAsmeRecIdent" class="table table-condensed table-bordered">
                                            <thead>
                                                <tr>
                                                    <th style="width:20px"></th>
                                                    <th>Recursos Identificables</th>
                                                    <th style="width:140px">Tipo</th>
                                                    <th style="width:50px">Cantidad</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-xs-12">
                                <div id="boxListaRecNoIdent" class="box box-danger">
                                    <div class="box-body no-padding">
                                        <table id="tblAsmeRecNoIdent" class="table table-condensed table-bordered">
                                            <thead>
                                                <tr>
                                                    <th style="width:20px"></th>
                                                    <th>Recursos No Identificables</th>
                                                    <th style="width:140px">Tipo</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-xs-12">
                                @if (@user.rolmenu[0].Guardar == true)
                                {
                                <a id="btnSaveRec" href="javascript:sut.Asme.Recurso.guardar()" class="btn btn-primary pull-right"><i class="fa fa-save"></i> Guardar</a>
                                }
                            </div>
                        </div>
                    }
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div style="position: fixed;right: 15px;top: 60px; margin-bottom: 0;">
    @*<a class="btn btn-default" href="#"><i class="fa fa-download"></i> Tabla ASME Actual</a>*@
    
        @*<a href="javascript:sut.Asme.salir('/Simplificacion/Procedimiento/TablaAsme/@Model.ProcedimientoId')" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>*@
        <a href="javascript:sut.Asme.salir('@Url.Content("~/Simplificacion/Procedimiento/TablaAsme/")@Model.ProcedimientoId')" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>
        @if (@user.rolmenu[0].Guardar == true)
        {
            <a id="btnSaveAsme" href="javascript:sut.Asme.guardar()" class="btn btn-primary"><i class="fa fa-save"></i> Guardar</a>
        }  
</div>
<div class="modal fade" id="modal-ventana">
    <div id="ventana-container">
    </div>
</div>

<div class="minmaxConayuda">
    <div class="modal fade mymodal" id="modalAyudaAvatar1">
        <div class="modal-dialog  ">
            <div class="modal-content">
                <div class="modal-body" id="contenido" style="padding:0px">
                    <div class="bar-title" id="tituloocultar">
                        <a class="close modalMinimize" style="padding:110px; right: 20px;  top: -100px; background: transparent"> <i class='fa fa-clone '></i> </a>
                        <span>
                            <h3 id="ihtitulo1" style="font-size: x-large;text-align: center;font-family: initial;"> Hola @user.Nombres </h3>
                        </span>
                    </div>
                    <div>
                        <div id="idtitulo1" style="text-align:left">
                            <div class="col-sm-3 col-xs-2">
                                <a class="modalMinimize" title="Minimizar" style="color:black"> <i class='fa fa-minus fa-2x'></i> </a>
                                <img src="~/dist/img/hola.png" class="img-rounded" alt="Cinque Terre" />
                            </div>
                            <div class="caja col-sm-5" id="mensaje1" style="display: none; width:409px;height:100%;top:137px">
                                <sp style="text-align: left;font-family: initial;"> Clic </sp>
                                <a class="btn btn-success btn-xs" href="#"><i class="fa fa-plus"></i> Agregar</a>
                                <l style="text-align: left;font-family: initial;"> completar el registro y clic en "GUARDAR"  ¡Suerte!</l>
                            </div>
                            <div class="caja col-sm-5" id="mensaje2" style="display: none; width:440px;height:100%;top:103px">
                                <j2 style="text-align: left;font-family: initial;">¡Felicidades! a hora asigna los recursos. Clic </j2>
                                <a id="clic" style="display: none;" class="btn btn-primary" href="#"><i class="fa fa-laptop"></i>Editar Recursos</a>
                                <l1 style="text-align: left;font-family: initial;"> y luego seleccione una fila y clic, Para continuar clic en "GUARDAR" luego "VOLVER". ¡Tú puedes! </l1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="minmaxCon"></div>




@section Style{
    <style type="text/css">
        #tblAsme thead tr th {
            text-align: center !important;
            vertical-align: middle !important;
        }

        #tblAsme tfoot tr td {
            text-align: center !important;
            vertical-align: middle !important;
            font-weight: bold !important;
        }

        #tblAsme tbody tr td.colNro {
            text-align: center !important;
            vertical-align: middle !important;
        }

        #tblAsme tbody tr td.colRadio {
            text-align: center !important;
            vertical-align: middle !important;
            width: 15px;
        }

        .semi-circulo-2 {
            width: 15px;
            height: 15px;
            background: #000;
            -moz-border-radius: 0 15px 15px 0;
            -webkit-border-radius: 0 15px 15px 0;
            border-radius: 0 15px 15px 0;
        }

        .dragged {
            position: absolute;
            opacity: 0.5;
            z-index: 2000;
        }

        #tblAsme tbody tr.placeholder {
            display: block;
            background: red;
            position: relative;
            margin: 0;
            padding: 0;
            border: none;
        }

            #tblAsme tbody tr.placeholder:before {
                content: "";
                position: absolute;
                width: 0;
                height: 0;
                border: 5px solid transparent;
                border-left-color: red;
                margin-top: -5px;
                left: 0px;
                border-right: none;
            }

        #tblAsmeRecIdent tbody tr td {
            vertical-align: middle !important;
        }
    </style>
}
@section Script {
    <script>
        sut.Asme = {
            UnidadesOrganicas: @Html.Raw(ViewBag.ListaUndOrg != null ? ViewBag.ListaUndOrg : "[]"),
            comboUndOrg: function (index, id) {
                var cb = sut.string.format('<select class="form-control" name="Actividad[{0}].UnidadOrganicaId"  >', index);
                $.each(sut.Asme.UnidadesOrganicas, function (i, r) {
                    cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.UnidadOrganicaId, r.Nombre, r.UnidadOrganicaId == id ? 'selected' : '');
                });
                cb += '</select>';
                return cb;
            },
            salir: function (expediente) {
                debugger;


                 if (Number($('#hidVerRec').val()) == 0) {
                    var valid = true;
                    var uos = $('#tblAsme tbody tr td select[name$="UnidadOrganicaId"] option:selected');
                    $.each(uos, function (i, uo) {
                        if (Number($(uo).val()) == 0) valid = false;
                    });
                    debugger;
                    //if(!valid) sut.error.clientErrorShow('mensajes', 'Debe seleccionar una Unidad Orgánica para cada Actividad.');
                    if ("@user.TipoTupa" != "2") {

                        if (!valid) showNotification('top', 'right', 'Debe seleccionar una Unidad Orgánica para cada Actividad.', 2);

                    }

                     if ($('#form-asme').valid() && valid) {

                         //$(location).attr('href', expediente);
                        var model = $('#form-asme').serialize();
                        $.ajax({
                            type: 'POST',
                            //url: '/Simplificacion/TablaAsme/GuardarTablaAsme',
                            url: '@Url.Content("~/Simplificacion/TablaAsme/ElimiarActividadBlanco")',
                            data: model,
                            dataType: 'json',
                            beforeSend: function () {
                                $("#mensajes").hide();
                            },
                            complete: function () {

                            },
                            success: function (result) {

                                    $(location).attr('href', expediente);

                            },
                            error: function (result) {
                                sut.error.show('mensajes', result.responseText);
                            }
                        });
                    }
                }

            },

            filtro: function () {

                $("#idFiltros").show();
                $("#quitarfiltro").show();
                $("#filtro").hide();

            },
            init2: function () {
                $("#idFiltros").hide();
                $("#quitarfiltro").hide();
                $("#filtro").show();
            },
            quitarfiltro:function () {

                $.ajax({
                    type: "POST",
                    //url: '/Simplificacion/Expediente/QuitarFiltro',
                    url: '@Url.Content("~/Simplificacion/TablaAsme/QuitarFiltro")',
                    data: {  },
                    cache: false,
                    beforeSend: function () {
                        sut.wait.appendProgress('.modal-footer');
                    },
                    complete: function () {
                        sut.wait.removeProgress('.modal-footer');
                    },
                    success: function (data) {
                        window.location.reload();
                        $('#modal-ventana').modal('hide');
                        $("#idFiltros").hide();
                        $("#quitarfiltro").hide();
                        $("#filtro").show();
                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });
            },
            aplicarfiltro : function(){
                sut.Asme.init();
            },
            ordenarCampos: function () {
                $("#idEditarorden").css({ "display": "none" });
          /*      $("#idOrdenar").css({ "display": "none" });*/

                $("#GuardarOrdenar").css({ "display": "" });
                $("#CancelarOrdenar").css({ "display": "" });
            },
            cancelarCampos: function () {
                $("#idEditarorden").css({ "display": "" });
                //$("#idOrdenar").css({ "display": "" });

                $("#GuardarOrdenar").css({ "display": "none" });
                $("#CancelarOrdenar").css({ "display": "none" });
            },

            generarorden : function(idExpediente){
                 $.ajax({
                      type: "POST",
                      //url: '/Simplificacion/Expediente/EditarExpediente',
                      url: '@Url.Content("~/Simplificacion/procedimiento/GenerarNumeroPA")',
                      data: { id: idExpediente},
                      cache: false,
                      beforeSend: function () {
                           sut.wait.modal('ventana-container');
                           $('#modal-ventana').modal('show');
                      },
                      success: function (data) {
                          debugger;
                          if(data=="False")
                          {
                               showNotification('top', 'right', 'No Existe Información', 2);
                               return;
                           }
                           window.location.reload();
                       },
                      error: function (result) {
                           $('#modal-ventana').modal('hide');
                           sut.error.show('mensajes', result.responseText);
                      }
                 });
            },

            editarorden: function (TablaAsmeId){
                        $.ajax({
                            type: "POST",
                            //url: '/Simplificacion/Expediente/EditarExpediente',
                            url: '@Url.Content("~/Simplificacion/TablaAsme/Editarorden")',
                            data: { id: TablaAsmeId, num: '1'},
                            cache: false,
                            beforeSend: function () {
                                sut.wait.modal('ventana-container');
                                $('#modal-ventana').modal('show');
                            },
                            success: function (data) {
                                debugger;
                                if(data=="False")
                                {
                                    showNotification('top', 'right', 'No Existe Información', 2);
                                    return;
                                }
                                window.location.reload();
                            },
                            error: function (result) {
                                $('#modal-ventana').modal('hide');
                                sut.error.show('mensajes', result.responseText);
                            }
                        });
                    },

            cancelareditarorden: function (TablaAsmeId){

                        $.ajax({
                            type: "POST",
                            //url: '/Simplificacion/Expediente/EditarExpediente',
                            url: '@Url.Content("~/Simplificacion/TablaAsme/Editarorden")',
                            data: { id: TablaAsmeId, num: '0'},
                            cache: false,
                            beforeSend: function () {
                                sut.wait.modal('ventana-container');
                                $('#modal-ventana').modal('show');
                            },
                            success: function (data) {

                                window.location.reload();

                            },
                            error: function (result) {
                                $('#modal-ventana').modal('hide');
                                sut.error.show('mensajes', result.responseText);
                            }
                        });
                    },



             guardareditarorden: function(idExpediente){
                        debugger;
                        var inputs = $('#tblAsme tbody tr td input:text[name^="Actividad"]');
                        var data = [];

                        if (inputs.length > 0) {
                            inputs.each(function (i, input) {
                                var ver = input.parentNode.className;
                                if (ver === "colNro") {
                                    var orden = $(input).val();
                                    var actividadId = $(input).siblings('input:hidden').val();
                                    var obj = { Orden: orden, ActividadId: actividadId };
                                    data.push(obj);
                                    //showNotification('top', 'right', orden + ' - ' + actividadId, 2);
                                }
                            });
                            //showNotification('top', 'right', JSON.stringify(data), 2);
                        }
                        
                        var model = $('#form-asme').serialize();
                        $.ajax({
                            type: "POST",
                            //url: '/Simplificacion/TablaAsme/guardareditarorden',
                            //url: ' Url.Content("~/Simplificacion/TablaAsme/guardareditarorden")',
                            //data: { id: idExpediente, orden: data, tipoorder:1},
                            //cache: false,
                            url: '@Url.Content("~/Simplificacion/TablaAsme/GuardarTablaAsme")',
                            data: model,
                            dataType: 'json',
                            beforeSend: function () {
                                sut.wait.modal('ventana-container');
                                $('#modal-ventana').modal('show');
                            },
                            success: function (data) {
                                debugger;
                                if(data=="False")
                                {
                                    showNotification('top', 'right', 'No Existe Información', 2);
                                    return;
                                }
                                sut.Asme.cancelareditarorden(idExpediente);
                            },
                            error: function (result) {
                                $('#modal-ventana').modal('hide');
                                sut.error.show('mensajes', result.responseText);
                            }
                        });
              },


            importAct: () => {
                $.ajax({
                    type: "GET",
                    //url: '/Simplificacion/TablaAsme/ImportarActividades',
                    url: '@Url.Content("~/Simplificacion/TablaAsme/ImportarActividades")',
                    data: {tablaAsmeId: @Model.TablaAsmeId },
                    cache: false,
                    beforeSend: function () {
                        sut.wait.modal('ventana-container');
                        $('#modal-ventana').modal('show');
                    },
                    success: function (data) {
                        debugger;
                        $('#ventana-container').html(data);

                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });
            },

            plantillaAct: () => {
                $.ajax({
                    type: "GET",
                    //url: '/Simplificacion/TablaAsme/ImportarActividades',
                    url: '@Url.Content("~/Simplificacion/TablaAsme/ImportarActividades")',
                    data: {tablaAsmeId: @Model.TablaAsmeId },
                    cache: false,
                    beforeSend: function () {
                        sut.wait.modal('ventana-container');
                        $('#modal-ventana').modal('show');
                    },
                    success: function (data) {
                        $('#ventana-container').html(data);
                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });
            },
            addImportAct: (data) => {
                var orden = $('#tblAsme tbody tr').size() + 1;
                $.each(data, (i, r) => {
                    var uo = sut.Asme.UnidadesOrganicas.find((d) => { return d.Nombre == r.NomUnidadOrganica; });
                    if (typeof(uo) != 'undefined') r.UnidadOrganicaId = uo.UnidadOrganicaId;
                    r.Orden = orden + i;
                    sut.Asme.add(r);
                });
                sut.Asme.sum();
            },
            addNew: function () {
                debugger;

                if (Number($('#hidVerRec').val()) == 0) {
                    $.ajax({
                        url: '@Url.Content("~/Simplificacion/TablaAsme/GetActividades/")@Model.TablaAsmeId',
                        type: 'GET',
                        beforeSend: function () {
                            sut.wait.appendOverlay('#boxListaAsme');
                        },
                        success: function (data) {
                            sut.Asme.add({
                                ActividadId: 0,
                                Orden: data.length  + 1,
                                Descripcion: '',
                                Duracion: 0,
                                TipoActividad: 1,
                                TipoValor: 1
                            });

                            sut.Asme.guardaritem();

                        },
                        error: function (data) {
                            sut.wait.removeOverlay('#boxListaAsme');
                            sut.error.show('mensajes', data.responseText);
                        }
                    });

                } else {

                }
            },
            add: function (act) {
                var tbody = $('#tblAsme tbody');

                if (act.Orden == "0") {
                    var i = act.Orden;
                } else {

                    var i = act.Orden - 1;
                }
                debugger;

                var row = '';
                var num=i;
                //generar la tabla
                if ("@Model.Procedimiento.Expediente.EstadoExpediente"=="@EstadoExpediente.Observado") {
                    row  += sut.string.format('<tr data-index="1{0}" class="filaActividad">', num);
                    row  += '<td colspan="13">';
                    row  += '<div class="form-group">';
                    row += '<div class="col-sm-10 col-xs-12">';
                    debugger;
                    var listaObservacionAsme = @Html.Raw(ViewBag.ListaObservacionAsme != null ? ViewBag.ListaObservacionAsme : "[]");

                    if (@obs.Count != 0) {
                        var cont1 = 0;
                        var texto1 = "";
                        for (var Mi = 0; Mi < listaObservacionAsme.length; Mi += 1) {
                            if (listaObservacionAsme[Mi].Pantalla == "Tabla Asme" && listaObservacionAsme[Mi].NombreCampo == "NombredelosTablaAsme" + i) {
                                if (listaObservacionAsme[Mi].CodValidacion == "2") {
                                    row += sut.string.format('<a class="btn btn-warning btn-xs"  id="aSustentarObservarExpTablaAsme' + num + '" data-placement="right" title="Refutar Observación" href="javascript:sut.Asme.sustentarObservarExpTablaAsme({0});"><i class="fa fa-pencil-square-o"></i></a>',num);
                                    row += sut.string.format('<a class="btn btn-primary btn-xs" style="display:none"  id="aGuardarSustentarExpTablaAsme' + num + '"  data-placement="right" title="Guardar Sustento"  href="javascript:sut.Asme.guardarSustentarExpTablaAsme({0},{1},{2},{3});"><i class="fa fa-floppy-o"></i></a>',@Model.Procedimiento.ExpedienteId,@Model.ProcedimientoId,num,act.ActividadId);
                                    row += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none"  id="aCancelarSustentarExpTablaAsme' + num + '"  data-placement="right" title="Quitar Sustento"   href="javascript:sut.Asme.CancelarSustentarExpTablaAsme({0},{1},{2},{3});"><i class="fa fa-power-off"></i></a>',@Model.Procedimiento.ExpedienteId,@Model.ProcedimientoId,num,act.ActividadId);
                                }
                            }
                        }
                    }


                    row += '<label id="mensajeTablaAsme' + num + '" style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>';

                    row += '</div>';
                    row += '</div>';
                    row += '</td>';
                    row += '</tr>';

                    //row  += sut.string.format('<tr data-index="1{0}" id="divTablaAsme0' + num + '"  class="filaActividad">', num);
                    //row += '</tr>';
                    row  += sut.string.format('<tr data-index="1{0}" id="divTablaAsme1' + num + '"  class="filaActividad">', num);
                    row += '</tr>';
                    row  += sut.string.format('<tr data-index="1{0}" id="divTablaAsme2' + num + '"  class="filaActividad">', num);
                    row += '</tr>';
                }


                row +=sut.string.format('<tr data-index="{0}" id="{1}" class="filaActividad" >', i,'trTablaAsme' + num + '');
                //row +=sut.string.format('<tr data-index="{0}" class="filaActividad" >', i);
                row += '<td class="colNro" style="width: 1px;">';
                row += sut.string.format('<a class="btn  btn-lg"  data-placement="right" title="Detalle Actividades" href="javascript:sut.Asme.Recurso.abrirDetalle({0},{1})" >Recurso</a>', i,act.ActividadId);
                //row += sut.string.format('<input id="chkAct_{0}" type="checkbox" class="checkFila" />', i);
                row += '</td>';
                row += '<td class="colNro" style="width: 1px;">';
                if ("@user.rolmenu[0].Eliminar" == "True"){
                    row += sut.string.format('<a class="btn btn-lg"  data-placement="right" title="Eliminar" href="javascript:javascript:sut.Asme.delete({0},{1},{2})" ><i class="fa fa-trash"></i></a>', i,act.ActividadId,@Model.TablaAsmeId);
                }
                //row += sut.string.format('<input id="chkAct_{0}" type="checkbox" class="checkFila" />', i);
                row += '</td>';

                if ("@Model.EditarNumAsme" == "1")
                {
                    row += '<td class="colNro" >';
                    row += sut.string.format('<input type="text" class="form-control"  style="width: 50px;" name="Actividad[{0}].Orden" value="{1}" />', i, act.Orden);
                    row += sut.string.format('<input type="hidden" class="form-control" name="Actividad[{0}].ActividadId" value="{1}" />', i, act.ActividadId);
                    row += '</td>';
                }
                else
                {
                    row += '<td class="colNro" >';
                    row += sut.string.format('<div class="tdOrden">{0}</div>', act.Orden);
                    row += sut.string.format('<input type="hidden" name="Actividad[{0}].Orden" value="{1}" />', i, act.Orden);
                    row += sut.string.format('<input type="hidden" name="Actividad[{0}].ActividadId" value="{1}" />', i, act.ActividadId);
                    row += '</td>';

                }




                var desac=act.Descripcion;

                if(desac==null){
                    desac='';
                }

                row += sut.string.format('<td><textarea type="text" class="form-control" name="Actividad[{0}].Descripcion" value="{1}" required >{1}</textarea></td>', i, desac);
                row += sut.string.format('<td>{0}</td>', sut.Asme.comboUndOrg(i, act.UnidadOrganicaId));
                row += sut.string.format('<td><input type="text" class="form-control" name="Actividad[{0}].Duracion" value="{1}" min="1" /></td>', i, act.Duracion);
                for (var k = 1; k <= 5; k++) {
                    row += sut.string.format('<td class="colRadio info"><input type="radio" name="Actividad[{0}].TipoActividad" value="{1}" class="checkTipoActividad" {2} /></td>', i, k, act.TipoActividad == k ? 'checked' : '');
                }
                for (var k = 1; k <= 3; k++) {
                    row += sut.string.format('<td class="colRadio warning"><input type="radio" name="Actividad[{0}].TipoValor" value="{1}" class="checkTipoValor" {2} /></td>', i, k, act.TipoValor == k ? 'checked' : '');
                }
                row += '</tr>';

                tbody.append(row);
            },
            sum: function () {
                var sum = 0;
                $.each($('#tblAsme tbody tr td input[name$="Duracion"]'), function (i, r) {
                    sum += Number($(r).val());
                });
                $('#tblAsme tfoot tr td').eq(0).find('span').html(Math.ceil(sum/480));
                $('#tblAsme tfoot tr td').eq(1).html(sum);

                // Tipo Actividad
                sum = 0;
                $.each($('#tblAsme tbody tr td:nth-child(7) input:checked'), function (i, r) {
                    sum += 1;
                });
                $('#tblAsme tfoot tr td').eq(2).html(sum);
                sum = 0;
                $.each($('#tblAsme tbody tr td:nth-child(8) input:checked'), function (i, r) {
                    sum += 1;
                });
                $('#tblAsme tfoot tr td').eq(3).html(sum);
                sum = 0;
                $.each($('#tblAsme tbody tr td:nth-child(9) input:checked'), function (i, r) {
                    sum += 1;
                });
                $('#tblAsme tfoot tr td').eq(4).html(sum);
                sum = 0;
                $.each($('#tblAsme tbody tr td:nth-child(10) input:checked'), function (i, r) {
                    sum += 1;
                });
                $('#tblAsme tfoot tr td').eq(5).html(sum);
                sum = 0;
                $.each($('#tblAsme tbody tr td:nth-child(11) input:checked'), function (i, r) {
                    sum += 1;
                });
                $('#tblAsme tfoot tr td').eq(6).html(sum);

                // Tipo Valor
                sum = 0;
                $.each($('#tblAsme tbody tr td:nth-child(12) input:checked'), function (i, r) {
                    sum += 1;
                });
                $('#tblAsme tfoot tr td').eq(7).html(sum);
                sum = 0;
                $.each($('#tblAsme tbody tr td:nth-child(13) input:checked'), function (i, r) {
                    sum += 1;
                });
                $('#tblAsme tfoot tr td').eq(8).html(sum);
                sum = 0;
                $.each($('#tblAsme tbody tr td:nth-child(14) input:checked'), function (i, r) {
                    sum += 1;
                });
                $('#tblAsme tfoot tr td').eq(9).html(sum);
            },
            actIndex: function () {
                var rows = $('#tblAsme tbody tr');
                $.each(rows, function (i, tr) {
                    $(tr).data('index', i);
                    $(tr).find('td input[id^="chkAct_"]').attr('id', 'chkAct_' + i);
                    $(tr).find('td input[name$="Orden"]').attr('name', sut.string.format('Actividad[{0}].Orden', i)).val(i + 1);
                    $(tr).find('div.tdOrden').html(i + 1);
                    $(tr).find('td input[name$="ActividadId"]').attr('name', sut.string.format('Actividad[{0}].ActividadId', i));
                    $(tr).find('td textarea[name$="Descripcion"]').attr('name', sut.string.format('Actividad[{0}].Descripcion', i));
                    $(tr).find('td select[name$="UnidadOrganicaId"]').attr('name', sut.string.format('Actividad[{0}].UnidadOrganicaId', i));
                    $(tr).find('td input[name$="Duracion"]').attr('name', sut.string.format('Actividad[{0}].Duracion', i));
                    $(tr).find('td input[name$="TipoActividad"]').attr('name', sut.string.format('Actividad[{0}].TipoActividad', i));
                    $(tr).find('td input[name$="TipoValor"]').attr('name', sut.string.format('Actividad[{0}].TipoValor', i));
                });
            },
            delete: function(numero,idactividad,tablaasmeid) {
                //if (Number($('#hidVerRec').val()) == 0) {
                //    var inputs = $('#tblAsme tbody tr td:nth-child(1) input:checked');
                //    if (inputs.length > 0) {
                //        sut.msg.confirm('Se eliminarán lo registros seleccionados.', function () {
                //            $.each(inputs, function (i, r) {
                //                var tr = $(r).parent().parent();
                //                tr.remove();
                //            });
                //            sut.Asme.actIndex();
                //            sut.Asme.sum();
                //        });
                //    }
                //} else {

                //}
                debugger;
                sut.msg.confirm('Se eliminarán el registros está seguro?.', function () {
                    $.ajax({
                        type: 'POST',
                        //url: '/Simplificacion/TablaAsme/GuardarTablaAsme',
                        url: '@Url.Content("~/Simplificacion/TablaAsme/EliminarTablaAsme")',
                        data: {id:idactividad,idasme:tablaasmeid},
                        dataType: 'json',
                        beforeSend: function () {
                            $("#mensajes").hide();
                        },
                        complete: function () {

                        },
                        success: function (result) {
                            sut.msg.success(result.mensaje, function () {
                                //sut.Asme.init();
                                location.reload();
                            });
                            //location.reload();
                            //showNotification('top', 'right', 'El Registro de Guardo Satisfactoriamente', 1);
                            //sut.Asme.init();
                        },
                        error: function (result) {
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                });
            },
            guardar: function () {

                if (Number($('#hidVerRec').val()) == 0) {


                    var valid = true;
                    var uos = $('#tblAsme tbody tr td select[name$="UnidadOrganicaId"] option:selected');
                    $.each(uos, function (i, uo) {
                        if (Number($(uo).val()) == 0) valid = false;
                    });
                    debugger;
                    //if(!valid) sut.error.clientErrorShow('mensajes', 'Debe seleccionar una Unidad Orgánica para cada Actividad.');
                    if ("@user.TipoTupa" != "2") {

                        if (!valid) showNotification('top', 'right', 'Debe seleccionar una Unidad Orgánica para cada Actividad.', 2);

                    }



                    if ($('#form-asme').valid() && valid) {
                        debugger;
                        var prestaciones = $('input[name="Prestaciones"]').val();
                        if (prestaciones == "0" || prestaciones == "") {

                            showNotification('top', 'right', 'Debe ingresar un valor superior a 0.', 2);
                            //$('input[name="Prestaciones"]').val(1);
                            return;

                        }


                        //alert(parseInt(texto));
                        var model = $('#form-asme').serialize();


                        $.ajax({
                            type: 'POST',
                            //url: '/Simplificacion/TablaAsme/GuardarTablaAsme',
                            url: '@Url.Content("~/Simplificacion/TablaAsme/GuardarTablaAsme")',
                            data: model,
                            dataType: 'json',
                            beforeSend: function () {
                                $("#mensajes").hide();
                            },
                            complete: function () {

                            },
                            success: function (result) {
                                //sut.msg.success(result.mensaje, function () {
                                    //sut.Asme.init();
                                    //location.reload();

                                             $.ajax({
                                                type: 'POST',
                                                //url: '/Simplificacion/TablaAsme/GuardarTablaAsme',
                                                url: '@Url.Content("~/Simplificacion/TablaAsme/GuardarDerecho")',
                                                 data: { id: @Model.TablaAsmeId, Prestaciones: prestaciones },
                                                dataType: 'json',
                                                beforeSend: function () {
                                                    $("#mensajes").hide();
                                                },
                                                complete: function () {

                                                },
                                                success: function (result) {
                                                    sut.msg.success(result.mensaje, function () {
                                                        //sut.Asme.init();
                                                        location.reload();
                                                    });

                                                    //showNotification('top', 'right', 'El Registro de Guardo Satisfactoriamente', 1);
                                                    //sut.Asme.init();
                                                },
                                                error: function (result) {
                                                    sut.error.show('mensajes', result.responseText);
                                                }
                                            });

                                //});

                                //showNotification('top', 'right', 'El Registro de Guardo Satisfactoriamente', 1);
                                //sut.Asme.init();
                            },
                            error: function (result) {
                                sut.error.show('mensajes', result.responseText);
                            }
                        });
                    }
                }
            },
            volvervalidar: function () {

                if (Number($('#hidVerRec').val()) == 0) {
                    var valid = true;
                    var uos = $('#tblAsme tbody tr td select[name$="UnidadOrganicaId"] option:selected');
                    $.each(uos, function (i, uo) {
                        if (Number($(uo).val()) == 0) valid = false;
                    });
                    debugger;
                    //if(!valid) sut.error.clientErrorShow('mensajes', 'Debe seleccionar una Unidad Orgánica para cada Actividad.');
                    if ("@user.TipoTupa" != "2") {

                        if (!valid) showNotification('top', 'right', 'Debe seleccionar una Unidad Orgánica para cada Actividad.', 2);

                    }

                    if ($('#form-asme').valid() && valid) {


                    }
                }
            },

            guardaritem: function () {

                var model = $('#form-asme').serialize();
                $.ajax({
                    type: 'POST',
                    url: '@Url.Content("~/Simplificacion/TablaAsme/GuardarTablaAsme")',
                    data: model,
                    dataType: 'json',
                    beforeSend: function () {
                        $("#mensajes").hide();
                    },
                    complete: function () {

                    },
                    success: function (result) {
                        sut.msg.success(result.mensaje, function () {
                            //sut.Asme.init();
                            location.reload();
                        });
                    },
                    error: function (result) {
                        sut.error.show('mensajes', result.responseText);
                    }
                });
            },
            init: function () {

                     debugger;
                var model = {

                    'filtros.actividad': $('#fil2_actividad').val(),
                    'filtros.valor': $('#fil2_valor').val(),
                     des: $('#txtFilterDes').val(),
                        id: @Model.TablaAsmeId,
                };

                $.ajax({
                    @*url: '/Simplificacion/TablaAsme/GetActividades/@Model.TablaAsmeId',*@
                  type: 'GET',

                    //url: '@Url.Content("~/Simplificacion/TablaAsme/GetActividades/")@Model.TablaAsmeId',
                   url: '@Url.Content("~/Simplificacion/TablaAsme/GetActividades")',
              /*      data: { tipo: 2, multi: true, fnAdd: 'sut.Procedimiento.Estandar.add' },*/
                    data: model,
                    cache: false,
                    beforeSend: function () {
                        sut.wait.appendOverlay('#boxListaAsme');
                    },
                    success: function (data) {

                        debugger;
                        sut.wait.removeOverlay('#boxListaAsme');
                        $('#tblAsme tbody tr').remove();
                        var listaObservacionAsme = @Html.Raw(ViewBag.ListaObservacionAsme != null ? ViewBag.ListaObservacionAsme : "[]");

                        if (data.length == 0)
                        {
                            $('#mensaje2').hide();
                            $('#mensaje1').show();
                        }else
                        {
                            $('#mensaje2').show();
                            $('#mensaje1').hide();
                            sut.control.Actualizartexto();
                        }
                        for (var i = 0; i < data.length; i++) {

                            debugger;
                            sut.Asme.add(data[i]);

                            if ("@Model.Procedimiento.Expediente.EstadoExpediente"=="@EstadoExpediente.Observado") {
                                if (@obs.Count != 0) {
                                    var cont1 = 0;
                                    var texto1 = "";
                                    for (var Mi = 0; Mi < listaObservacionAsme.length; Mi += 1) {


                                        if (listaObservacionAsme[Mi].Pantalla == "Tabla Asme" && listaObservacionAsme[Mi].NombreCampo == "NombredelosTablaAsme" + i) {

                                            if (listaObservacionAsme[Mi].CodValidacion == "1") {
                                                texto1 = listaObservacionAsme[Mi].Descripcion;
                                            }
                                            else if (listaObservacionAsme[Mi].CodValidacion == "4") {
                                                valiarbotonesModalidad('TablaAsme', i);
                                                $("#mensajeTablaAsme" + i).show();
                                                document.querySelector("#mensajeTablaAsme" + i).innerText = 'Validado';

                                            }
                                            else if (listaObservacionAsme[Mi].CodValidacion == "2") {
                                                sut.Asme.textoobservacionTablaAsme("" + texto1 + "", "" + listaObservacionAsme[Mi].Descripcion + "", 4, "" + listaObservacionAsme[Mi].EstadoExpediente + "", i);
                                                //});
                                            }

                                            else if (listaObservacionAsme[Mi].CodValidacion == "5") {

                                                canceladobotonesModalidad('TablaAsme', i);
                                            }
                                            else if (listaObservacionAsme[Mi].CodValidacion == "3") {
                                                $("#mensajeTablaAsme" + i).show();
                                                sustentobotones('TablaAsme', i);
                                                document.querySelector("#mensajeTablaAsme" + i).innerText  = 'Se refuto con éxito';
                                                sut.Asme.textosustentoTablaAsme("" + listaObservacionAsme[Mi].Descripcion + "", 4, "" + listaObservacionAsme[Mi].EstadoExpediente + "", i);
                                            }
                                        }
                                    }

                                }
                            }


                        }

                        sut.Asme.sum();
                    },
                    error: function (data) {
                        sut.wait.removeOverlay('#boxListaAsme');
                        sut.error.show('mensajes', data.responseText);
                    }
                });
            },

            textoobservacionTablaAsme: function (Descripcion, Descripcion2, estado, nomcampo, num) {
                debugger;

                var Des = Descripcion.split(";:;");
                debugger;
                var NombreCampo = 'TablaAsme';
                var rows = '';
                var rows1 = '';
                var che1=3;

                //rows += '<tr id="trdivTablaAsme0_' + num + '">'
                rows1 += sut.string.format('<td colspan="3"> Observado </td>');
                //rows1 += sut.string.format('<td colspan="12" ><textarea name="TablaAsme2' + num + '" id="TablaAsme2' + num + '" class="form-control" style="border-color:red;background:#ff00002e;" readonly>{0}</textarea></td>', Descripcion2);
                rows1 += sut.string.format('<td colspan="12" ><label class="form-control" name="TablaAsmeObs2' + num + '" id="TablaAsmeObs2' + num + '"  style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2);
                //rows += '</tr>';

                $('#divTablaAsme0' + num + '').append(rows);
                $('#divTablaAsme1' + num + '').append(rows1);


                $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });


            },
            sustentarObservarExpTablaAsme: function (num) {


                debugger;
                //var Descripcion = $('#DesModalidad' + num).val() + ";:;" + $('#chekModalidad' + num).val() + ";:;" + $('#PreModalidad' + num).val() + ";:;" + $('#CostoModalidad' + num).val();
                var NombreCampo = 'TablaAsme';
                var rows1 = '';
                rows1 += sut.string.format('<td colspan="3" id="tdTablaAsme1' + num + '" style="width:100px;">Refutar Observación: </td>');
                rows1 += sut.string.format('<td colspan="12" id="tdTablaAsme2' + num + '" ><textarea name="TablaAsme3' + num + '" id="TablaAsme3' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;" >{0}</textarea></td>', '');


                $('#divTablaAsme2' + num + '').append(rows1);



                $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });

            },
            guardarSustentarExpTablaAsme: function (idExpediente,procedimientoId,numero,ActividadId) {

                if ($('#TablaAsme3'+numero+'').val().trim() == "") {

                    showNotification('top', 'right', 'No puedes Guardar una justificación en blanco', 2);
                    return;
                }
                var model = {
                    'filtro.ExpedienteId': idExpediente,
                    'filtro.ProcedimientoId': procedimientoId,
                    'filtro.Descripcion': $('#TablaAsme3'+numero+'').val(),
                    'filtro.CodValidacion': '3',
                    'filtro.TipoEstado': '3',
                    'filtro.NombreCampo': 'NombredelosTablaAsme' + numero,
                    'filtro.Pantalla': 'Tabla Asme',
                    'filtro.TablaAsmeId': @Model.TablaAsmeId,
                    'filtro.Estado': '1',
                    'filtro.ActividadId': ActividadId,
                };
                $.ajax({
                    type: "POST",
                    //url: '/Simplificacion/Expediente/AgregarObservacion',
                    url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                    data: model,
                    cache: false,
                    beforeSend: function () {
                        //sut.wait.modal('ventana-container');
                        //$('#modal-ventana').modal('show');
                    },
                    success: function (data) {

                        $('#modal-ventana').modal('hide');

                        $('#mensajeTablaAsme'+numero+'').show();
                        document.querySelector('#mensajeTablaAsme'+numero+'').innerText = 'Se refuto con éxito';

                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });

                comentario = "";
            },
            comentario: "",
            CancelarSustentarExpTablaAsme: function (idExpediente,procedimientoId,numero,ActividadId) {
                var NombreCampo = 'TablaAsme';
                var model = {
                    'filtro.ExpedienteId': idExpediente,
                    'filtro.ProcedimientoId': procedimientoId,
                    'filtro.Descripcion': $('#TablaAsme3'+numero+'').val(),
                    'filtro.CodValidacion': '3',
                    'filtro.TipoEstado': '3',
                    'filtro.NombreCampo': 'NombredelosTablaAsme' + numero,
                    'filtro.Pantalla': 'Tabla Asme',
                    'filtro.TablaAsmeId': @Model.TablaAsmeId,
                    'filtro.Estado': '1',
                    'filtro.ActividadId': ActividadId,
                };

                $.ajax({
                    type: "POST",
                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                    data: model,
                    cache: false,
                    beforeSend: function () {
                        //sut.wait.modal('ventana-container');
                        //$('#modal-ventana').modal('show');
                    },
                    success: function (data) {
                        debugger;
                        $('#modal-ventana').modal('hide');

                        $('#aSustentarObservarExp'+NombreCampo+numero+'').css({ "display": "" });
                        $('#aGuardarSustentarExp'+NombreCampo+numero+'').css({ "display": "none" });
                        $('#aCancelarSustentarExp'+NombreCampo+numero+'').css({ "display": "none" });

                        //$('#divTablaAsme2'+numero+'').remove();
                        $('#tdTablaAsme1'+numero+'').remove();
                        $('#tdTablaAsme2'+numero+'').remove();
                        $('#mensajeTablaAsme'+numero+'').hide();
                        document.querySelector('#mensajeTablaAsme'+numero+'').innerText = '';


                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });

                comentario = "";

            },
            textosustentoTablaAsme: function (Descripcion2, estado, nomcampo, num) {


                var NombreCampo = 'TablaAsme';
                var rows1 = '';
                rows1 += sut.string.format('<td colspan="3" id="tdTablaAsme1' + num + '" style="width:100px;"> Refutar Observación:</td>');
                rows1 += sut.string.format('<td colspan="12" id="tdTablaAsme2' + num + '" ><textarea name="TablaAsme3' + num + '" id="TablaAsme3' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;" >{0}</textarea></td>',Descripcion2);


                $('#divTablaAsme2' + num + '').append(rows1);


                $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
            },



            Recurso: {
                cerrarDetalle: function () {
                    if ($('#tableOculto tbody tr').size() == 0) {
                        $('#tableOculto tbody').append($('tr#trDetalle'));
                    }
                },
                abrirDetalle: function (index, actividad) {

                    debugger;
                    if ($('#tableOculto tbody tr').size() == 0) {
                        $('#tableOculto tbody').append($('tr#trTablaAsme' + index + '#trDetalle'));
                    }

                        $('#tblAsme tbody tr#trTablaAsme' + index + '.success').removeClass('success');



                        var tr = $('#tblAsme tbody tr#trTablaAsme' + index).eq(0);
                        //debugger;
                        //if ($('#tableOculto tbody tr').size() == 0) {
                        //    $('#tableOculto tbody').append($('tr#trDetalle'));
                        //}

                        //$('#tblAsme tbody tr.success').removeClass('success');

                        //var tr = $('#tblAsme tbody tr').eq(index);

                        //var id = Number(tr.find('input[name$="ActividadId"]').val());

                        var id = Number(actividad);
                        var rbEspera = tr.find('input[name$="TipoActividad"]').eq(3);

                        var Nro = tr.find('input[name$="Orden"]').val();
                        var Actividad = tr.find('input[name$="Descripcion"]').val();
                        var UnidadOrganizacion = $(tr).find('select[name$="UnidadOrganicaId"] option:selected').text();
                        var Duracion = $(tr).find('input[name$="Duracion"]').val();


                        if (id == 0) {
                            showNotification('top', 'right', 'Debe guardar la información para poder reconocer la fila.', 2);
                        }
                        else if (id > 0 && !rbEspera.is(':checked')) {
                            tr.addClass('success');
                            $('tr#trDetalle').insertAfter(tr);
                            sut.Asme.Recurso.load(id, Nro, Actividad, UnidadOrganizacion, Duracion);
                        } else {
                            showNotification('top', 'right', 'Marco la Opción espera.', 2);
                        }
                },
                load: function (id,Nro,Actividad,UnidadOrganizacion,Duracion) {
                    $('#hidActividadId').val(id);
                    $('#tblAsmeRecIdent tbody tr').remove();
                    $('#tblAsmeRecNoIdent tbody tr').remove();

                    $('#hidNro').val(Nro);
                    $('#hidActividad').val(Actividad);
                    $('#hidUnidadOrganizacion').val(UnidadOrganizacion);
                    $('#hidDuracion').val(Duracion);


                    debugger;
                    if (id > 0) {
                        $.ajax({
                            //url: '/Simplificacion/TablaAsme/GetRecursos/' + id,
                            url: '@Url.Content("~/Simplificacion/TablaAsme/GetRecursos")',
                            type: 'GET',
                            data: { id: id, Nro: Nro,Actividad: Actividad,UnidadOrganizacion: UnidadOrganizacion,Duracion: Duracion },
                            beforeSend: function () {
                                sut.wait.appendOverlay('#boxListaRecIdent');
                                sut.wait.appendOverlay('#boxListaRecNoIdent');
                            },
                            success: function (data) {
                                sut.wait.removeOverlay('#boxListaRecIdent');
                                sut.wait.removeOverlay('#boxListaRecNoIdent');

                                sut.Asme.Recurso.add(data);
                            },
                            error: function (data) {
                                sut.wait.removeOverlay('#boxListaRecIdent');
                                sut.wait.removeOverlay('#boxListaRecNoIdent');
                                sut.error.show('mensajes', data.responseText);
                            }
                        });
                    } else {

                    }
                },
                tipos: ['', 'Personal Directo', 'Material Fungible', 'Servicio Identificable',
                            'Material No Fungible', 'Servicio de Tercero', 'Depreciación', 'Costo Fijo'],
                add: function (data) {
                    var nro = $('#tblAsmeRecIdent tbody tr').size() + $('#tblAsmeRecNoIdent tbody tr').size();

                    for (var i = 0; i < data.length; i++) {
                        var tbody = data[i].TipoId < 4 ? $('#tblAsmeRecIdent tbody') : $('#tblAsmeRecNoIdent tbody');

                        var row = '<tr>';
                        row += '<td class="colNro">';
                        row += sut.string.format('<input id="chkRec_{0}" type="checkbox" />', nro);
                        row += sut.string.format('<input name="ActividadRecurso[{0}].RecursoId" type="hidden" value="{1}" />', nro, data[i].RecursoId);
                        row += '</td>';
                        row += sut.string.format('<td>{0}</td>', data[i].Nombre);
                        row += sut.string.format('<td>{0}</td>', sut.Asme.Recurso.tipos[data[i].TipoId]);
                        if (data[i].TipoId < 4)
                            row += sut.string.format('<td><input type="text" name="ActividadRecurso[{0}].Cantidad" class="form-control input-sm" value="{1}" /></td>', nro, data[i].Cantidad);
                        row += '</tr>';

                        tbody.append(row);
                        nro++;
                    }

                },
                openAddRecurso: function () {
                    debugger;


                    $.ajax({
                        type: "GET",
                        //url: '/Simplificacion/Recurso/Select',
                        url: '@Url.Content("~/Simplificacion/Recurso/Select")',
                        data: { multi: true, fnAdd: 'sut.Asme.Recurso.setAddRecurso',Nro:  $('#hidNro').val(),Actividad:$('#hidActividad').val() ,UnidadOrganizacion:   $('#hidUnidadOrganizacion').val(), Duracion: $('#hidDuracion').val()},
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {
                            $('#ventana-container').html(data);
                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                },
                openAddRecursoplantilla: function () {



                    $.ajax({
                        type: "GET",
                        //url: '/Simplificacion/Recurso/Select',
                        url: '@Url.Content("~/Simplificacion/Recurso/SelectPlantilla")',
                        data: { multi: true, fnAdd: 'sut.Asme.Recurso.setAddRecurso',tablaAsmeId: @Model.TablaAsmeId },
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {
                            $('#ventana-container').html(data);
                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                },
                setAddRecurso: function (data) {
                    if (data.length > 0) {
                        var inputs = $('#tblAsmeRecIdent tbody tr td:nth-child(1) input[name$="RecursoId"], #tblAsmeRecNoIdent tbody tr td:nth-child(1) input[name$="RecursoId"]');
                        var lista = [];
                        for (var i = 0; i < data.length; i++) {
                            data[i].Cantidad = 1;
                            var exists = inputs.filter(function (index) { return $(this).val() == data[i].RecursoId; });

                            if (exists.size() == 0) lista.push(data[i]);
                        }
                        sut.Asme.Recurso.add(lista);
                    }
                    $('#modal-ventana').modal('hide');
                },
                delete: function() {
                    var inputs = $('#tblAsmeRecIdent tbody tr td:nth-child(1) input:checked, #tblAsmeRecNoIdent tbody tr td:nth-child(1) input:checked');
                    if (inputs.length > 0) {
                        sut.msg.confirm('Se eliminarán lo registros seleccionados.', function () {
                            $.each(inputs, function (i, r) {
                                var tr = $(r).parent().parent();
                                tr.remove();
                            });
                            sut.Asme.Recurso.actIndex();
                        });
                    }
                },
                actIndex: function () {
                    var rows = $('#tblAsmeRecIdent tbody tr, #tblAsmeRecNoIdent tbody tr');
                    $.each(rows, function (i, tr) {
                        $(tr).find('td input[id^="chkRec_"]').attr('id', 'chkRec_' + i);
                        $(tr).find('td input[name$="RecursoId"]').attr('name', sut.string.format('ActividadRecurso[{0}].RecursoId', i));
                        if ($(tr).find('td input[name$="Cantidad"]')) {
                            $(tr).find('td input[name$="Cantidad"]').attr('name', sut.string.format('ActividadRecurso[{0}].Cantidad', i));
                        }
                    });
                },
                guardar: function () {
                    var nro = $('#tblAsmeRecIdent tbody tr').size() + $('#tblAsmeRecNoIdent tbody tr').size();
                    if ($('#form-detalle').valid() && nro > 0) {
                        var model = $('#form-detalle').serialize();
                        $.ajax({
                            type: 'POST',
                            //url: '/Simplificacion/TablaAsme/GuardarRecurso',
                            url: '@Url.Content("~/Simplificacion/TablaAsme/GuardarRecurso")',
                            data: model,
                            dataType: 'json',
                            beforeSend: function () {
                                $("#mensajes").hide();
                                sut.wait.appendOverlay('#boxListaRecIdent');
                                sut.wait.appendOverlay('#boxListaRecNoIdent');
                            },
                            complete: function () {
                                sut.wait.removeOverlay('#boxListaRecIdent');
                                sut.wait.removeOverlay('#boxListaRecNoIdent');
                            },
                            success: function (result) {
                                sut.msg.success('Recursos guardados satisfactoriamente.', function () {

                                });
                            },
                            error: function (result) {
                                sut.wait.removeOverlay('#boxListaRecIdent');
                                sut.wait.removeOverlay('#boxListaRecNoIdent');
                                sut.error.show('mensajes', result.responseText);
                            }
                        });
                    }
                },
            }
        };

        $(function () {

            sut.Asme.init2();


            sut.Asme.init();

              $('#txtFilterDes').keypress(function (e) {
                    var key = e.keyCode || event.keyCode;
                    if (key == 13)         sut.Asme.init();
                });



            $('#chkTodo').on('change', function (e) {
                $('input[id^="chkAct"]').prop({checked : $('#chkTodo').is(':checked')});
            });
            $('#tblAsme tbody').delegate('tr td input[name$="Duracion"]', 'change', function (e) {
                sut.Asme.sum();
            });

            $('#tblAsme tbody').delegate('tr td input.checkTipoActividad').on('change', function (e) {
                sut.Asme.sum();
            });
            $('#tblAsme tbody').delegate('tr td input.checkTipoValor').on('change', function (e) {
                sut.Asme.sum();
            });

            //$('#tblAsme tbody').delegate('tr.filaActividad', 'click', function (e) {
            //    debugger;
            //    if (Number($('#hidVerRec').val()) > 0) {
            //        if ($(this).attr('id') != 'trDetalle') {
            //            sut.Asme.Recurso.abrirDetalle($(this).data('index'));
            //        }
            //    }
            //});


              //generar orden
                $("#GuardarOrdenar").css({ "display": "none" });
                $("#CancelarOrdenar").css({ "display": "none" });


                $("#GuardarEditarorden").css({ "display": "none" });
                $("#CancelarEditarorden").css({ "display": "none" });

                //fin


                if(@Model.EditarNumAsme =="1"){
                    $("#idEditarorden").css({ "display": "none" });
        /*            $("#idOrdenar").css({ "display": "none" });*/

                    $("#GuardarEditarorden").css({ "display": "" });
                    $("#CancelarEditarorden").css({ "display": "" });
                }



            $('#btnVerRec').click(function (e) {
                $('#btnVerRec').addClass('hidden');
                $('#btnVerAct').removeClass('hidden');
                $('#hidVerRec').val(1);

                $('#btnAddAct').attr('disabled', 'disabled');
                $('#btnDelAct').attr('disabled', 'disabled');
                //$('#btnSaveAsme').attr('disabled', 'disabled');
                $('#btnSaveAsme').hide();

                var rows = $('#tblAsme tbody tr');
                $.each(rows, function (i, tr) {
                    $(tr).find('td input[id^="chkAct_"]').attr('disabled', 'disabled');
                    $(tr).find('td input[name$="Descripcion"]').attr('disabled', 'disabled');
                    $(tr).find('td select[name$="UnidadOrganicaId"]').attr('disabled', 'disabled');
                    $(tr).find('td input[name$="Duracion"]').attr('disabled', 'disabled');
                    $(tr).find('td input[name$="TipoActividad"]').attr('disabled', 'disabled');
                    $(tr).find('td input[name$="TipoValor"]').attr('disabled', 'disabled');
                });

                //$('#tblAsme').sortable('disable');
            });
            $('#btnVerAct').click(function (e) {

                $('#btnVerAct').addClass('hidden');
                $('#btnVerRec').removeClass('hidden');
                $('#hidVerRec').val(0);

                $('#btnAddAct').removeAttr('disabled');
                $('#btnDelAct').removeAttr('disabled');
                //$('#btnSaveAsme').removeAttr('disabled');
                $('#btnSaveAsme').show();

                $('#tblAsme tbody tr.success').removeClass('success');

                var rows = $('#tblAsme tbody tr');
                $.each(rows, function (i, tr) {
                    $(tr).find('td input[id^="chkAct_"]').removeAttr('disabled');
                    $(tr).find('td input[name$="Descripcion"]').removeAttr('disabled');
                    $(tr).find('td select[name$="UnidadOrganicaId"]').removeAttr('disabled');
                    $(tr).find('td input[name$="Duracion"]').removeAttr('disabled');
                    $(tr).find('td input[name$="TipoActividad"]').removeAttr('disabled');
                    $(tr).find('td input[name$="TipoValor"]').removeAttr('disabled');
                });

                sut.Asme.Recurso.cerrarDetalle();

                //$('#tblAsme').sortable('enable');
            });

            //$('#tblAsme').sortable({
            //    containerSelector: 'table',
            //    itemPath: '> tbody',
            //    itemSelector: 'tr',
            //    placeholder: '<tr class="placeholder"/>',
            //    onDrop: function ($item, container, _super) {
            //        _super($item, container);
            //        sut.Asme.actIndex();
            //    }
            //});

            $('#form-asme').validate({
                errorPlacement: function (error, element) {
                    if (element.parent('div.input-group').length > 0) {
                        error.insertAfter(element.parent('div.input-group'));
                    } else {
                        error.insertAfter(element);
                    }
                },
                rules: {

                },
                messages: {

                }
            });

            $('#form-detalle').validate({
                errorPlacement: function (error, element) {
                    if (element.parent('div.input-group').length > 0) {
                        error.insertAfter(element.parent('div.input-group'));
                    } else {
                        error.insertAfter(element);
                    }
                },
                rules: {

                },
                messages: {

                }
            });





            /*desarrollo de la ayuda*/
            /*minimizar un modal*/

            var $content, $modal, $apnData, $modalCon;

            $content = $(".min");


            //To fire modal
            $(".mdlFire").click(function (e) {
                debugger;
                e.preventDefault();

                var $id = $(this).attr("data-target");

                $($id).modal({ backdrop: false, keyboard: false });

            });

            debugger;

            if(@user.Ayuda==1){
                $('#edit-fase-preparatoria').addClass('active');
                $('a[href="#edit-fase-preparatoria"]').parent().addClass('active');


                $('#tituloocultar').hide();


                $('#modalAyudaAvatar1').modal({backdrop: 'static', keyboard: false})
                $modal = "#modalAyudaAvatar1"
                $($modal).toggleClass("min");
                $modal = "#modalAyudaAvatar1";
                $(".modal-backdrop").addClass("display-none");
                $(".minmaxConayuda").append($apnData);
                $(".modal").css({
                    backgroundColor: "transparent"
                });

            }



            /*fin*/

            $(".modalMinimize").on("click", function(){
                debugger;
                $modalCon = $(this).closest(".mymodal").attr("id");
                $apnData = $(this).closest(".mymodal");
                $modal = "#" + $modalCon;
                $(".modal-backdrop").addClass("display-none");

                $($modal).toggleClass("min2");
                if ( $($modal).hasClass("min2") ){
                    $('#tituloocultar').show();
                    $(".minmaxCon").append($apnData);
                    //$(this).find("i").toggleClass( 'fa-minus fa-2x').toggleClass( 'fa-clone fa-2x');
                    $(".modal").css({
                        backgroundColor: "transparent"
                    });
                }
                else {
                    $('#tituloocultar').hide();
                    $(".minmaxConayuda").append($apnData);
                    //$(this).find("i").toggleClass( 'fa-clone fa-2x').toggleClass( 'fa-minus fa-2x');
                    $(".modal").css({
                        backgroundColor: "transparent"
                    });
                };
            });



        });


        function observarbotonesModalidad(NombreCampo,num) {
            $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
            $('#aAsignarCancelarObservarExp' + NombreCampo + num +  '').css({ "display": "" });

            $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
            $('#aCancelarGeneralExp' + NombreCampo +  num +'').css("display", "none");
            $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
            $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });
        }
        function valiarbotonesModalidad(NombreCampo, num) {
            //$('#aValidarObservarExp' + NombreCampo + num +  '').css("display", "");
            $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "");
            $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
            $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "none" });
        }
        function canceladobotonesModalidad(NombreCampo, num) {
            $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "none" });
            $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "none" });
            //$('#aValidarObservarExp' + NombreCampo + num + '').css("display", "");
            $('#aCancelarGeneralExp' + NombreCampo + num +  '').css("display", "none");
            $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "" });
            $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "none" });
        }
        function sustentobotones(NombreCampo, num) {


            $('#aSustentarObservarExp'+NombreCampo+  num + '').css({ "display": "none" });
            $('#aGuardarSustentarExp'+NombreCampo+ num + '').css({ "display": "" });
            $('#aCancelarSustentarExp'+NombreCampo+ num + '').css({ "display": "" });

        }




    </script>
}