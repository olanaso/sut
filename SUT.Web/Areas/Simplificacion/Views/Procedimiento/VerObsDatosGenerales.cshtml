@using Sut.Entities;
@model Sut.Entities.Procedimiento
@{
    Sut.Security.UsuarioInfo user = ViewBag.Usuario as Sut.Security.UsuarioInfo;
    List<Sut.Entities.Observacion> obs = ViewBag.Observacion as List<Sut.Entities.Observacion>;

    Sut.Entities.Expediente exp = ViewBag.Expediente as Sut.Entities.Expediente;
    ViewBag.Icon = "fa fa-file-text-o";
    ViewBag.Title = "Datos Generales " + Model.Codigo;
    ViewBag.Descripcion = "";
}
<div id="mensajes">
    @{Html.RenderPartial("_Error");}
</div>

@if (exp.EstadoExpediente == EstadoExpediente.Observado || exp.EstadoExpediente == EstadoExpediente.Subsanado || exp.EstadoExpediente == EstadoExpediente.Aprobado  ||
                                exp.EstadoExpediente == EstadoExpediente.Presentado)
{
    <div class="box box-danger">
        <div class="box-body">
            <div class="col-sm-12 col-xs-12" style="border-color:red">

                <div class="pull-left col-sm-12 col-xs-12">

                    <fieldset class="scheduler-border">
                        <legend>
                            Información Complementaria a la Observación
                        </legend>
                        <br />
                        <div class="form-group">

                            @if (obs.Count != 0)
                            {
                                var count = 0;
                                foreach (var item in obs)
                                {
                                    if (@item.NombreCampo == "Nota de Ayuda Datos Generales")
                                    {
                                        <textarea rows="7" class="form-control" id="txtaObservarExp" style="border-color:red;background:#ff00002e;"> @item.Descripcion</textarea>
                                        count = 1;
                                    }
                                }
                                if (count == 0)
                                {
                                    <textarea rows="7" class="form-control" id="txtaObservarExp" style="border-color:red;background:#ff00002e;"></textarea>
                                }
                            }
                            else
                            {<textarea rows="7" class="form-control" id="txtaObservarExp" style="border-color:red;background:#ff00002e;"> </textarea>}
                        </div>

                    </fieldset>

                </div>

            </div>
        </div>
    </div>
}
@using (Html.BeginForm("DatosGenerales", "Procedimiento", new { @area = "Simplificacion" }, FormMethod.Post, new { @id = "form-editar" }))
{
    @Html.HiddenFor(model => model.ProcedimientoId)
    @Html.HiddenFor(model => model.ExpedienteId)
    @Html.HiddenFor(model => model.Codigo)
    @Html.HiddenFor(model => model.Operacion)
    @Html.HiddenFor(model => model.TipoProcedimiento)
    @Html.HiddenFor(model => model.CategoriaProcedimientoId)
    @Html.HiddenFor(model => model.TipoProcedimientoId)

    @Html.HiddenFor(model => model.SustentoEliminacion)
    @Html.HiddenFor(model => model.SustTecCalificacion)

    @Html.HiddenFor(model => model.DatosGeneralesTerminado)


    @Html.HiddenFor(model => model.Numero)
    @Html.HiddenFor(model => model.PlazoAtencionEstandar)



    <div class="box box-danger">
        <div class="box-body form-horizontal">
            <div class="form-group">
                <label class="col-sm-2 col-xs-12 control-label" for="Denominacion">Denominación :</label>
                <div class="col-sm-10 col-xs-12">
                    @if (!ViewBag.EsTupaEstandar && Model.TipoProcedimiento != TipoProcedimiento.Estandar)
                    {
                        @Html.TextBoxFor(model => model.Denominacion, new { @class = "form-control", @readonly = true })
                    }
                    else if (ViewBag.EsTupaEstandar && Model.TipoProcedimiento == TipoProcedimiento.Estandar)
                    {
                        @Html.TextBoxFor(model => model.Denominacion, new { @class = "form-control", @readonly = true })
                    }
                    else
                    {
                        @Html.TextBoxFor(model => model.Denominacion, new { @class = "form-control", @readonly = true })
                    }
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 col-xs-12 control-label">Tipo :</label>
                <div class="col-sm-10 col-xs-12">
                    @Html.TipoProcedimiento(Model.TipoProcedimiento)
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 col-xs-12 control-label">Dependencia a Cargo :</label>
                <div class="col-sm-10 col-xs-12">
                    @Html.HiddenFor(model => model.UndOrgResponsableId)
                    @Html.TextBoxFor(model => model.UndOrgResponsable.Nombre, new { @class = "form-control", @readonly = "readonly", Required = true })
                </div>
            </div>
        </div>
    </div>
     

    <div class="box box-default">
        <div class="box-body">
            <div class="nav-tabs-custom">
                <ul class="nav nav-tabs">
                    <li>
                        <a href="#edit-info-basica" data-toggle="tab" aria-expanded="false" style="border-radius: 10px;"><i class="fa fa-file"></i> Información Básica</a>
                    </li>
                    <li>
                        <a href="#edit-modalidades" data-toggle="tab" aria-expanded="false" style="border-radius: 10px;"><i class="fa fa-table"></i> Modalidades de Atención</a>
                    </li>
                    <li>
                        <a href="#edit-requisitos" data-toggle="tab" aria-expanded="false" style="border-radius: 10px;"><i class="fa fa-copy"></i> Requisitos</a>
                    </li>
                    <li>
                        <a href="#edit-base-legal" data-toggle="tab" aria-expanded="false" style="border-radius: 10px;"><i class="fa fa-legal"></i> Base Legal del PA/SE</a>
                    </li>
                </ul>
                <div class="tab-content ">
                    <div id="edit-info-basica" class="tab-pane">
                        <div class="form-horizontal">
                            @if (Model.Expediente.TipoExpediente != TipoExpediente.CargaInicial)
                            {
                                if (Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso) { 
                                /*Inicio*/
                                <div class="form-group">
                                    <label class="col-sm-2 col-xs-12 control-label"></label>
                                    <div class="col-sm-10 col-xs-12"> 
                                        @if (obs.Count != 0)
                                        {
                                            var cont = 0;
                                            var texto1 = "";
                                            foreach (var item in obs)
                                            {
                                                if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Objetivo")
                                                {
                                                    cont = 1;

                                                    if (@item.TipoEstado == "1")
                                                    { 
                                                        texto1 = @item.Descripcion;
                                                    }
                                                    else  if (@item.TipoEstado == "2")
                                                    { 
                                                        <script> 
                                                            window.addEventListener("load", function() { 
                                                                sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divobjeto','divobjetodetalle','Descripción :','Objetivo1','Objetivo2',10,"@exp.EstadoExpediente",'Objetivo');

                                                            });
                                                        </script>
                                                    } 
                                                    else if (@item.TipoEstado == "3")
                                                    {
                                                        <script>

                                                            window.addEventListener("load", function () {  
                                                                sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divobjeto','divobjetosustento','Descripción :','ObjetivoSustento',10);
                                                            });
                                                        </script>
                                                    }

                                                }
                                            } 
                                        }

                                    </div>
                                </div>
                                <div id="divobjeto" >
                                </div>
                                    /*Fin*/
                                }
                            }

                            <div class="form-group">
                                <label class="col-sm-2 col-xs-12 control-label" id="Objetivolabel" for="Objetivo">Descripción :</label>

                                <div class="col-sm-10 col-xs-12">
 
                                        <label  id="Objetivo" name="Objetivo" class="form-control"style="border-color:#ddd;background: #eeeeee;font-weight: 600;height: 100%;">@Html.DisplayFor(model => model.Objetivo)</label>
                                    
                                </div>

                            </div> 

                            @if (Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                            {
                                if (Model.TipoProcedimiento != TipoProcedimiento.Servicio)
                                {
                                @*/*Inicio Calificacion*/*@
                                <div class="form-group">
                                    <label class="col-sm-2 col-xs-12 control-label"></label>
                                    <div class="col-sm-10 col-xs-12">
                                        
                                        @if (obs.Count != 0)
                                        {
                                            var cont = 0;
                                            var texto1 = "";
                                            foreach (var item in obs)
                                            {
                                                if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Calificacion")
                                                {
                                                    cont = 1; 
                                                    if (@item.TipoEstado == "1")
                                                    { 
                                                        texto1 = @item.Descripcion;
                                                    }
                                                    else if (@item.TipoEstado == "2")
                                                    { 
                                                        <script> 
                                                            window.addEventListener("load", function() { 
                                                                sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divCalificacion','divCalificaciondetalle','Calificación :','Calificacion1','Calificacion2',4, "@exp.EstadoExpediente",'NombreCalificacion');
                                                            });
                                                        </script>
                                                    } 
                                                    else if (@item.TipoEstado == "3")
                                                    {
                                                        <script> 
                                                            window.addEventListener("load", function() { 
                                                                sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divCalificacion','divCalificacionSustento','Calificación :','CalificacionSustento',4);
                                                            });
                                                        </script>
                                                    }
                                                }
                                            } 
                                        }

                                    </div>
                                </div>
                                <div id="divCalificacion">
                                </div>
                                @*/*Fin*/*@
                                }
                            }

                            <div class="form-group">
                                @if (Model.TipoProcedimiento == TipoProcedimiento.Servicio)
                                {
                                    <div class="col-sm-6"></div>
                                    @Html.HiddenFor(model => model.Calificacion)
                                }
                                else
                                {
                                    <label class="col-sm-2 col-xs-12 control-label" id="NombreCalificacionlabel">Calificación :</label>
                                    <div class="col-sm-4 col-xs-12">
                                        @Html.HiddenFor(model => model.Calificacion)
                                        @{
                                            string calificacion = string.Empty;
                                            List<SelectListItem> lstCalificacion = ViewBag.Calificacion as List<SelectListItem>;
                                            calificacion = lstCalificacion.First(x => x.Value == ((short)Model.Calificacion).ToString()).Text;
                                        } 
                                        <label id="NombreCalificacion" name="NombreCalificacion" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.Calificacion)</label>
                                     </div>
                                 }
                            </div>
                            @if (Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                            { 
                            @*/*Inicio PlazoAtencion*/*@
                            <div class="form-group">
                                <label class="col-sm-2 col-xs-12 control-label"></label>
                                <div class="col-sm-10 col-xs-12">
                                   
                                    @if (obs.Count != 0)
                                    {
                                        var cont = 0;
                                        var texto1 = "";
                                        foreach (var item in obs)
                                        {
                                            if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "PlazoAtencion")
                                            {
                                                cont = 1; 
                                                if (@item.TipoEstado == "1")
                                                { 
                                                    texto1 = @item.Descripcion;
                                                }
                                                else if (@item.TipoEstado == "2")
                                                { 
                                                    <script> 
                                                        window.addEventListener("load", function() { 
                                                            sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divPlazoAtencion','divPlazoAtenciondetalle','Plazo de Atención :','PlazoAtencion1','PlazoAtencion2',4, "@exp.EstadoExpediente",'PlazoAtencion');
                                                        });
                                                    </script>
                                                } 
                                                else if (@item.TipoEstado == "3")
                                                {
                                                    <script> 
                                                        window.addEventListener("load", function() { 
                                                            sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divPlazoAtencion','divPlazoAtencionSustento','Plazo de Atención :','PlazoAtencionSustento',4);
                                                        });
                                                    </script>
                                                }
                                            }
                                        } 
                                    }

                                </div>
                            </div>
                            <div id="divPlazoAtencion">
                            </div>
                            @*/*Fin*/*@
                            }
                            <div class="form-group">
                                <label class="col-sm-2 col-xs-12 control-label" id="PlazoAtencionlabel" for="PlazoAtencion">Plazo de Atención :</label>
                                <div class="col-sm-3 col-xs-1">
                                  
                                    <label id="PlazoAtencion" name="PlazoAtencion" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.PlazoAtencion)</label>
                                     
                                </div>
                                <div class="col-sm-1 col-xs-1">
                                    @Html.HiddenFor(model => model.TipoPlazo)
                                    @{
                                        string TipoPlazo = string.Empty;
                                        List<SelectListItem> lstTipoPlazo = ViewBag.tipoplazo as List<SelectListItem>;
                                        TipoPlazo = lstTipoPlazo.First(x => x.Value == ((short)Model.TipoPlazo).ToString()).Text;
                                    }


                                    <label id="NombreTipoPlazo" name="NombreTipoPlazo" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.TipoPlazo)</label>

                                    @*@Html.DropDownListFor(model => model.TipoPlazo, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })*@
                                </div> 
                                @*FVN Inicio*@

                            </div>
                            @*/*Inicio Baselegal*/*@
                            <div id="idplazoantencionObservar">
                                <div class="form-group">
                                    <label class="col-sm-2 col-xs-12 control-label"></label>
                                    <div class="col-sm-10 col-xs-12">
                                         
                                        @if (obs.Count != 0)
                                        {
                                            var cont = 0;
                                            var texto1 = "";
                                            foreach (var item in obs)
                                            {
                                                if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Baselegal")
                                                {
                                                    cont = 1; 
                                                    if (@item.TipoEstado == "1")
                                                    { 
                                                        texto1 = @item.Descripcion;
                                                    }
                                                    else  if (@item.TipoEstado == "2")
                                                    { 
                                                        <script> 
                                                            window.addEventListener("load", function() { 
                                                                sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divBaselegal','divBaselegaldetalle','Base legal del Plazo de Atención:','Baselegal1','Baselegal2',4, "@exp.EstadoExpediente",'SustentoPlazo');
                                                            });
                                                        </script>
                                                    } 
                                                    else if (@item.TipoEstado == "3")
                                                    {
                                                        <script> 
                                                            window.addEventListener("load", function() { 
                                                                sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divBaselegal','divBaselegalSustento','Base legal del Plazo de Atención:','BaselegalSustento',4);
                                                            });
                                                        </script>
                                                    }
                                                }
                                            } 
                                        }

                                    </div>
                                </div>
                                <div id="divBaselegal" >
                                </div>
                            </div>
                            @*/*Fin*/*@                          
                        </div>
                        @if (Model.TipoProcedimiento != TipoProcedimiento.Servicio)
                        {
                            <hr />
                                <div class="table-responsive">
                                    <table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">
                                        <thead>
                                            <tr>
                                                <th style="width: 120px;"></th>
                                                <th style="text-align: center;width: 40%;">Cargo</th>
                                                <th style="text-align: center;">Unidad de Organización</th>
                                                <th style="text-align: center; width: 100px;">Días a Presentar</th>
                                                <th style="text-align: center; width: 100px;">Días a Resolver</th>
                                            </tr>
                                        </thead>
                                    </table>

                                @if (Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso){
                                    @*/*Inicio Reconsideracion*/*@
                                    <div class="form-group">
                                        <label class="col-sm-2 col-xs-12 control-label"></label>
                                        <div class="col-sm-10 col-xs-12">
                                            
                                            @if (obs.Count != 0)
                                            {
                                                var cont = 0;
                                                var texto1 = "";
                                                foreach (var item in obs)
                                                {
                                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Reconsideracion")
                                                    {
                                                        cont = 1; 
                                                        if (@item.TipoEstado == "1")
                                                        { 
                                                            texto1 = @item.Descripcion;
                                                        }
                                                        else if (@item.TipoEstado == "2")
                                                        { 
                                                            <script> 
                                                                window.addEventListener("load", function() { 
                                                                    sut.editProcedimiento.textoobservacionReconsideracion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divReconsideracion','divReconsideraciondetalle','Reconsideración','Reconsideracion1','Reconsideracion2',4, "@exp.EstadoExpediente",'NombreReconsideracion');
                                                                });
                                                            </script>
                                                        } 
                                                        else if (@item.TipoEstado == "3")
                                                        {
                                                            <script> 
                                                                window.addEventListener("load", function() { 
                                                                    sut.editProcedimiento.textosustentoReconsideracion("@item.Descripcion.Replace("\n", " ")",'divReconsideracion','divReconsideracionSustento','Reconsideración','ReconsideracionSustento',4);
                                                                });
                                                            </script>
                                                        }
                                                    }
                                                } 
                                            }

                                        </div>
                                    </div>
                                    <div id="divReconsideracion" >
                                    </div>
                                    @*/*Fin*/*@
                                    }
                                    <table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="tablaReconsideracion1">
                                        <tbody>
                                            <tr>
                                                <td style="width: 120px;">Reconsideración</td>
                                                <td style="text-align: center;width: 40%;"> 
                                                    <label id="CargoReconsideracion" name="CargoReconsideracion" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.CargoReconsideracion)</label>
                                                </td>
                                                <td style="text-align: center;">
                                                    @Html.HiddenFor(model => model.UndOrgReconsideracionId) 
                                                    <label id="UndOrgReconsideracion_Nombre" name="UndOrgReconsideracion.Nombre" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.UndOrgReconsideracion.Nombre)</label>
                                                </td>
                                                <td style="text-align: center; width: 100px;"> 
                                                    <label id="PzoReconPresent" name="PzoReconPresent" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.PzoReconPresent)</label>
                                                </td>
                                                <td style="text-align: center; width: 100px;"> 
                                                    <label id="PzoReconResol" name="PzoReconResol" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.PzoReconResol)</label>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                @if (Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso) { 
                                    @*/*Inicio Apelacion*/*@
                                    <div class="form-group">
                                        <label class="col-sm-2 col-xs-12 control-label"></label>
                                        <div class="col-sm-10 col-xs-12">
                                             

                                            @if (obs.Count != 0)
                                            {
                                                var cont = 0;
                                                var texto1 = "";
                                                foreach (var item in obs)
                                                {
                                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Apelacion")
                                                    {
                                                        cont = 1;

                                                        if (@item.TipoEstado == "1")
                                                        { 
                                                            texto1 = @item.Descripcion;
                                                        }
                                                        else  if (@item.TipoEstado == "2")
                                                        { 
                                                            <script> 
                                                                window.addEventListener("load", function() { 
                                                                    sut.editProcedimiento.textoobservacionApelacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divApelacion','divApelaciondetalle','Apelación','Apelacion1','Apelacion2',4, "@exp.EstadoExpediente",'NombreApelacion');
                                                                });
                                                            </script>
                                                        } 
                                                        else if (@item.TipoEstado == "3")
                                                        {
                                                            <script> 
                                                                window.addEventListener("load", function() { 
                                                                    sut.editProcedimiento.sustentarObservarExpApelacion("@item.Descripcion.Replace("\n", " ")",'divApelacion','divApelacionSustento','Apelación','ApelacionSustento',4);
                                                                });
                                                            </script>
                                                        }
                                                    }
                                                } 
                                            }

                                        </div>
                                    </div>
                                    <div id="divApelacion" >
                                    </div>
                                    @*/*Fin*/*@
                                }
                                    <table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="tablaApelacion1">
                                        <tbody>
                                            <tr>
                                                <td style="width: 120px;">Apelación</td>
                                                <td style="text-align: center;width: 40%;"> 
                                                    <label id="CargoApelacion" name="CargoApelacion" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.CargoApelacion)</label>
                                                </td>
                                                <td style="text-align: center;">
                                                    @Html.HiddenFor(model => model.UndOrgApelacionId) 
                                                    <label id="UndOrgApelacion_Nombre" name="UndOrgApelacion.Nombre" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.UndOrgApelacion.Nombre)</label>
                                                <td style="text-align: center; width: 100px;"> 
                                                    <label id="PzoApelPresent" name="PzoApelPresent" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.PzoApelPresent)</label>
                                                </td>
                                                <td style="text-align: center; width: 100px;"> 
                                                    <label id="PzoApelResol" name="PzoApelResol" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.PzoApelResol)</label>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                        }
                        @if (!ViewBag.EsTupaEstandar)
                        {
                            <hr /> 
                                <div class="table-responsive" style="display:none;visibility:collapse;">
                                    <table id="tblSede" class="table table-condensed table-bordered table-striped" data-cant="0">
                                        <thead>
                                            <tr>
                                                <th style="width:100px;">
                                                    <a href="javascript:sut.editProcedimiento.Sede.openSelect()" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                                </th>
                                                <th>Sede de atención del trámite</th>
                                                <th style="width:50px;"></th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                        }

                        @*<hr />*@

                        <div class="table-responsive" style="display:none;visibility:collapse;">
                            <table id="tblNota" class="table table-condensed table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                            <a href="javascript:sut.editProcedimiento.Nota.add()" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                        </th>
                                        <th colspan="2">Notas al Ciudadano</th>
                                        <th style="width:50px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        @*<hr />*@
                        <div class="table-responsive" style="display:none;visibility:collapse;">
                            <table id="tblPasoSeguir" class="table table-condensed table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="width:100px;"> 
                                        </th>
                                        <th colspan="1">Pasos a Seguir</th>
                                        <th style="width:50px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        @if (!ViewBag.EsTupaEstandar)
                        { 
                            <div class="table-responsive" style="display:none;visibility:collapse;">
                                <table id="tblCanales" class="table table-condensed table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th style="width:50px;"></th>
                                            <th>Canales de Atención</th>
                                            <th>Comentarios</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            int i = 0;
                                        }
                                        @if (Model.ProcedimientoDatoAdicional.Count(x => x.Tipo == 1) > 0)
                                        {
                                            for (i = 0; i < Model.ProcedimientoDatoAdicional.Count(x => x.Tipo == 1); i++)
                                            {
                                                <tr>
                                                    <td>
                                                        @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].ProcedimientoId)
                                                        @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].MetaDatoId)
                                                        @Html.CheckBoxFor(model => model.ProcedimientoDatoAdicional[i].Checked)
                                                    </td>
                                                    <td>@Model.ProcedimientoDatoAdicional[i].MetaDato.Nombre</td>
                                                    <td>@Html.TextBoxFor(model => model.ProcedimientoDatoAdicional[i].Comentario, new { @class = "form-control input-sm" })</td>
                                                </tr>
                                            }
                                        }
                                        else
                                        {
                                            <tr><td colspan="3">NO SE TIENEN CANALES DE ATENCIÓN DISPONIBLES</td></tr>
                                        }
                                    </tbody>
                                </table>
                            </div> 
                                @*<hr />*@ 
                                            <div class="table-responsive" style="display:none;visibility:collapse;">
                                                <table id="tblFormasPago" class="table table-condensed table-bordered table-striped">
                                                    <thead>
                                                        <tr>
                                                            <th style="width:50px;"></th>
                                                            <th>Formas de Pago</th>
                                                            <th>Comentarios</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @if (Model.ProcedimientoDatoAdicional.Count(x => x.Tipo == 2) > 0)
                                                        {
                                                            for (; i < Model.ProcedimientoDatoAdicional.Count(); i++)
                                                            {
                                                                if (Model.ProcedimientoDatoAdicional[i].MetaDato.Entero01 != Model.ProcedimientoDatoAdicional[i - 1].MetaDato.Entero01)
                                                                {
                                                                    <tr>
                                                                        <td></td>
                                                                        <td><strong>@Model.ProcedimientoDatoAdicional[i].MetaDato.Padre.Nombre</strong></td>
                                                                        <td></td>
                                                                    </tr>
                                                                }
                                                                <tr>
                                                                    <td>
                                                                        @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].ProcedimientoId)
                                                                        @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].MetaDatoId)
                                                                        @Html.CheckBoxFor(model => model.ProcedimientoDatoAdicional[i].Checked)
                                                                    </td>
                                                                    <td>@Model.ProcedimientoDatoAdicional[i].MetaDato.Nombre</td>
                                                                    <td>@Html.TextBoxFor(model => model.ProcedimientoDatoAdicional[i].Comentario, new { @class = "form-control input-sm" })</td>
                                                                </tr>
                                                            }
                                                        }
                                                        else
                                                        {
                                                            <tr><td colspan="3">NO SE TIENEN FORMAS DE PAGO DISPONIBLES</td></tr>
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>

                                                @*<hr />*@

                                                <div class="form-horizontal" style="display:none;visibility:collapse;"> 
                                                    <hr />
                                                    <h3>Atención de Consultas sobre el Procedimiento:</h3>
                                                    <div class="form-group">
                                                        <label class="col-sm-4 col-xs-12 control-label">Teléfono :</label>
                                                        <div class="col-sm-8 col-xs-12">
                                                            @Html.TextBoxFor(model => model.Telefono, new { @class = "form-control" })
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-4 col-xs-12 control-label">Anexo :</label>
                                                        <div class="col-sm-8 col-xs-12">
                                                            @Html.TextBoxFor(model => model.Anexo, new { @class = "form-control" })
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-4 col-xs-12 control-label">Correo Electrónico :</label>
                                                        <div class="col-sm-8 col-xs-12">
                                                            @Html.TextBoxFor(model => model.Correo, new { @class = "form-control" })
                                                        </div>
                                                    </div>
                                                </div> 
                                            }
                    </div>

                    @*/*Modalidad validar*/*@
                    <div id="edit-modalidades" class="tab-pane">
                        <div class="callout callout-warning" style="height: inherit;padding: inherit;display: block;">
                            Solo en el caso que se requiera diferentes tasas de derecho de tramitacion para el procedimiento administrativo o servicio prestado en exclusividad.
                        </div>
                        <div class="table-responsive">
                            <table id="tblModalidad" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                        </th>
                                        @*<th style="width:120px;">Código</th>*@
                                        <th>Nombre de la Modalidad</th>
                                        <th style="width:120px">Gratuito</th>
                                        @if (ViewBag.EsCargaInicial)
                                        {
                                            <th style="width:100px;">Derecho de Tramitación (S/)</th>
                                        }
                                        else
                                        {
                                            <th style="width:100px;">Prestaciones Anuales</th>
                                        }
                                        <th style="width:50px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    @*/*Modalidad Modificar*/*@
                    <div id="edit-requisitos" class="tab-pane">
                        <h4>Requisitos Generales</h4>
                        <div class="table-responsive">
                            <table id="tblRequisitoGeneral" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                             
                                        </th>
                                        <th>Nombre</th> 
                                        <th style="width:30px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="table-responsive"> 
                            <h4>Notas</h4>
                            <table id="tblRequisitoEspecifico" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                           
                                        </th>
                                        <th>Nombre</th> 
                                        <th style="width:30px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    <div id="edit-base-legal" class="tab-pane">
                        @Html.HiddenFor(model => model.BaseLegalId)
                        @Html.HiddenFor(model => model.BaseLegal.BaseLegalId)

                        <div class="callout callout-warning"style="height: inherit;padding: inherit;display: block;">
                            Agregar la base legal del procedimiento administrativo o servicio prestado en exclusividad
                        </div>
                        <div class="table-responsive">
                            <table id="tblBaseLegal" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                        </th>
                                        <th style="width: 8%; text-align: center;">Artículo	</th>
                                        <th style="width: 34.5%; text-align: center;">Denominación </th>
                                        <th style="width: 17%; text-align: center;">Tipo de Norma</th>
                                        <th style="width: 13%; text-align: center;">Número	</th>
                                        <th style="width: 19%; text-align: center;">Fecha de Publicación</th> 
                                        <th style="width:60px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
                                            }


<div style="position: fixed;right: 15px;top: 60px; margin-bottom: 0; z-index: 5;"> 
        <a href="@Url.Content("~/Simplificacion/Expediente/VerObservacion/")?id=@Model.ExpedienteId&&entidadid=@ViewBag.entidadver" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>  
</div>

<div class="modal fade" id="modal-ventana">
    <div id="ventana-container">
    </div>
</div>
@section Style{
    <style>
        #tblCanales thead tr th, #tblFormasPago thead tr th {
            text-align: center;
        }

        #divBotones {
            /*position: relative;
                    width: 100%;
                    display: block;*/
        }
            /*.menu-compensador {
                    position: relative;
                    width: 100%;
                    display: none;
                }*/
            #divBotones.fixed {
                /*z-index: 1000;
                    position: fixed;*/
                /*top: 0;
                    left: 0;
                    right: 0;*/
            }
        /*.menu-compensador.fixed {
                    display: block;
                }*/

        fieldset.scheduler-border {
            border: 1px groove #ddd !important;
            padding: 0 1.4em 0 1.4em !important;
            margin: 0 0 1.5em 0 !important;
            -webkit-box-shadow: 0px 0px 0px 0px #000;
            box-shadow: 0px 0px 0px 0px #000;
        }

        .scheduler-border legend {
            font-size: 1.2em !important;
            font-weight: bold !important;
            text-align: left !important;
            width: auto !important;
            margin-bottom: 0px !important;
            padding: 0px !important;
            border-bottom: none;
        }
    </style>
}
@section Script {
    <script>

                sut.editProcedimiento = {
                    @*tab: '@Request.QueryString["tab"]',*@
                    tab: '@ViewBag.Tabvalue',
                    esProcEstadar: @Html.Raw(Model.TipoProcedimiento == TipoProcedimiento.Estandar ? "true" : "false") ,
                    esCargaInicial: @MvcHtmlString.Create(ViewBag.EsCargaInicial ? "true" : "false") ,
                    esTupaEstandar: @MvcHtmlString.Create(ViewBag.EsTupaEstandar ? "true" : "false") ,

                    ObsVervisualizarSustento: function (evt, input) {
                        debugger;
                        var key = window.Event ? evt.which : evt.keyCode;
                        var chark = String.fromCharCode(key);
                        var tempValue = input.value + chark;
                        var id = input.id;
                        var txt = $(evt.target);
                        var valor = id.replace(/\d/g, "");

                        $('#mensaje' + valor).hide();
                        document.querySelector('#mensaje' + valor).innerText = '';

                    },
                    ObsVervisualizarSustentomodalidad: function (evt, input) {
                        debugger;
                        var key = window.Event ? evt.which : evt.keyCode;
                        var chark = String.fromCharCode(key);
                        var tempValue = input.value + chark;
                        var id = input.id;
                        var txt = $(evt.target);
                        var valor = id.substring(10);
                        $('#mensajeModalidad' + valor).hide();
                        document.querySelector('#mensajeModalidad' + valor).innerText = '';
                    },

                    ObsVervisualizarSustentorequisitos: function (evt, input) {
                        debugger;
                        var key = window.Event ? evt.which : evt.keyCode;
                        var chark = String.fromCharCode(key);
                        var tempValue = input.value + chark;
                        var id = input.id;
                        var txt = $(evt.target);
                        var valor = id.substring(11);
                        $('#mensajeRequisitos' + valor).hide();
                        document.querySelector('#mensajeRequisitos' + valor).innerText = '';
                    },

                    ObsVervisualizarSustentobaselegal: function (evt, input) {
                        debugger;
                        var key = window.Event ? evt.which : evt.keyCode;
                        var chark = String.fromCharCode(key);
                        var tempValue = input.value + chark;
                        var id = input.id;
                        var txt = $(evt.target);
                        var valor = id.substring(10);
                        $('#mensajeBaseLegal' + valor).hide();
                        document.querySelector('#mensajeBaseLegal' + valor).innerText = '';
                    },
                    openSelectUndOrg: function (fnAdd) {
                        $.ajax({
                            type: "GET",
                            //url: '/Simplificacion/UnidadOrganica/Select',
                            url: '@Url.Content("~/Simplificacion/UnidadOrganica/Select")',
                            data: { multi: false, fnAdd: fnAdd },
                            cache: false,
                            beforeSend: function () {
                                sut.wait.modal('ventana-container');
                                $('#modal-ventana').modal('show');
                            },
                            success: function (data) {
                                $('#ventana-container').html(data);
                            },
                            error: function (result) {
                                $('#modal-ventana').modal('hide');
                                sut.error.show('mensajes', result.responseText);
                            }
                        });
                    },
                    setUndOrgResp: function (data) {
                        $('#modal-ventana').modal('hide');
                        $('input[name="UndOrgResponsableId"]').val(data.id);
                        $('input[name="UndOrgResponsable.Nombre"]').val(data.nombre);
                    },
                    setUndOrgRecon: function (data) {
                        $('#modal-ventana').modal('hide');
                        $('input[name="UndOrgReconsideracionId"]').val(data.id);
                        $('input[name="UndOrgReconsideracion.Nombre"]').val(data.nombre);
                    },
                    setUndOrgApel: function (data) {
                        $('#modal-ventana').modal('hide');
                        $('input[name="UndOrgApelacionId"]').val(data.id);
                        $('input[name="UndOrgApelacion.Nombre"]').val(data.nombre);
                    },
                    setUndOrgPres: function (data) {
                        $('#modal-ventana').modal('hide');
                        $('input[name="UndOrgPresentDocumentacionId"]').val(data.id);
                        $('input[name="UndOrgPresentDocumentacion.Nombre"]').val(data.nombre);
                    },
                    Observarexp: {
                        comentario: "",
                        editarObservarExp: function () {
                            $("#aEditarObservarExp").css({ "display": "none" });
                            $("#aGuardarObservarExp").css({ "display": "" });
                            $("#aCancelarObservarExp").css({ "display": "" });
                            $("#txtaObservarExp").prop("disabled", false);
                            comentario = $("#txtaObservarExp").val();
                        },
                        guardarObservarExp: function (idExpediente, procedimientoId) {
                            debugger;

                            if ($('#txtaObservarExp').val().trim() == ""){
                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#txtaObservarExp').val().trim(),
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': 'Nota de Ayuda Datos Generales',
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');
                                    $("#aCancelarObservarExp").css({ "display": "none" });
                                    $("#aGuardarObservarExp").css({ "display": "none" });
                                    $("#aEditarObservarExp").css({ "display": "" });
                                    $("#txtaObservarExp").prop("disabled", true);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarObservarExp: function () {
                            $("#aCancelarObservarExp").css({ "display": "none" });
                            $("#aGuardarObservarExp").css({ "display": "none" });
                            $("#aEditarObservarExp").css({ "display": "" });
                            $("#txtaObservarExp").prop("disabled", true);
                            $("#txtaObservarExp").val(comentario);
                        }
                    },
                    Sede: {
                        openSelect: function () {
                            $.ajax({
                                type: "GET",
                                //url: '/Simplificacion/Sede/Select',
                                url: '@Url.Content("~/Simplificacion/Sede/Select")',
                                data: { multi: true, fnAdd: 'sut.editProcedimiento.Sede.add' },
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        init: function () {
                            var lista = @Html.Raw(ViewBag.ListaSede != null ? ViewBag.ListaSede : "[]");
                            var tblSede = $('#tblSede tbody');

                            if (lista.length > 0) {
                                var rows = ""
                                $.each(lista, function (i, r) {

                                    rows += sut.string.format('<tr data-rowPadre="{0}">',i);

                                    rows += '<td>';
                                    rows += sut.string.format('<span>{0}</span><input type="hidden" name="ProcedimientoSede[{1}].SedeId" value="{2}" />', i + 1,i, r.SedeId);
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoId" value="{1}" />',i,r.ProcedimientoId);
                                    rows += '</td>';

                                    rows += sut.string.format('<td>{0}<br />{1}<br />{2}<br /></td>', r.Nombre || '', r.Direccion || '', r.Horario || '');
                                    rows += '<td><div class="btn-group">';
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Sede.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                    rows += '</div></td>';
                                    rows += '</tr>';

                                    rows += sut.string.format('<tr><td colspan="5"><table class="table table-condensed table-bordered"  style="margin-bottom: 0px;" data-indexParent="{0}">',i);
                                    rows += '<thead><tr><th style="width:100px;"></th><th style="width:100px;">';
                                    rows += sut.string.format('<a href="javascript:sut.editProcedimiento.UndOrgRecepcion.openSelectUndOrg({0},{1},{2})" data-UndOrg="1" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>',r.ProcedimientoId,r.SedeId,i);
                                    rows += '</th><th>Unidades donde se presenta la documentación:</th><th style="width:100px;"></th></tr></thead><tbody>';
                                    rows += sut.editProcedimiento.UndOrgRecepcion.newFila(i,JSON.parse(r.UndOrgRecepcionDocumentos),r.ProcedimientoId,r.SedeId);
                                    rows += '</tbody></table></td></tr>';
                                    rows += "</tr>";


                                    tblSede.append(rows);

                                });
                            }
                        },
                        add: function (data) {

                            debugger;
                            $('#modal-ventana').modal('hide');
                            $.ajax({
                                type: "GET",
                                //url: '/Simplificacion/MaestroFijo/GetOneByEntidad',
                                url: '@Url.Content("~/Simplificacion/MaestroFijo/GetOneByEntidad")',
                                data: { EntidadId: @Model.Expediente.EntidadId },
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container-editar');
                                    //$('#modal-ventana-editar').modal('show');
                                },
                                success: function (LstUndOrg) {
                                    //$('#ventana-container-editar').html(data);
                                    var d = data;
                                    var x = JSON.parse(LstUndOrg);

                                    $.each(d,function(i,r){
                                        d[i].ListaUndOrganica = [];

                                        $.each(x,function(index,result){
                                            if(r.SedeId === result.SedeId){
                                                d[i].ListaUndOrganica.push(result);
                                            }
                                        });
                                    });


                                    sut.editProcedimiento.Sede.generar(d);
                                },
                                error: function (result) {
                                    $('#modal-ventana-editar').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        delete: function (id) {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var num = 1;
                                $.each($('#tblSede tbody tr[data-rowPadre]'), function (index, tr) {
                                    if (index == id){
                                        $(tr).remove();
                                        $('table[data-indexparent='+ id +']').remove();
                                    }
                                });

                                sut.editProcedimiento.Sede.update();
                            });
                        },
                        update: function () {

                            var concatLstOrganica = "";
                            var count = 0;
                            $.each($('#tblSede tbody tr[data-rowPadre]'), function (i, tr) {

                                oldParentId = $(this).attr("data-rowPadre");
                                ProcedimientoId = $(tr).find('td input[name="ProcedimientoId"]').val();


                                $(tr).attr("data-rowPadre",count);
                                $(tr).find('td span').html(count + 1);
                                $(tr).find('td input[name$="SedeId"]').attr('name', sut.string.format('ProcedimientoSede[{0}].SedeId', count));
                                $(tr).find('td a').attr("href",sut.string.format('javascript:sut.editProcedimiento.Sede.delete({0})', count));

                                $.each($('#tblSede tbody tr table'), function (idx, trc) {
                                    if($(trc).attr("data-indexParent") === oldParentId){


                                        var rowsUndOrg = $(trc).find("tbody tr");

                                        $.each(rowsUndOrg,function(x,y){
                                            $(y).attr('data-indexParent',count);
                                            $(y).find('td input[name$="UnidadOrganicaId"]').attr("name", sut.string.format('ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].UnidadOrganicaId', count, x));
                                            $(y).find('td input[name$="ProcedimientoId"]').attr("name", sut.string.format('ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].ProcedimientoId', count, x));
                                            $(y).find('td input[name$="SedeId"]').attr("name", sut.string.format('ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].SedeId', count, x));
                                            $(y).find('td a').attr("href",sut.string.format('javascript:sut.editProcedimiento.UndOrgRecepcion.borrar({0},{1})', count ,x));
                                        })

                                        $(trc).attr("data-indexParent",count);
                                    }
                                });

                                count++;
                            });


                            $.each($("#tblCanales tbody tr"), function (i, v) {

                                var c = $(this).find("input:checkbox");
                                var t = $(this).find("input:text");


                                if (concatLstOrganica === "") {

                                    if ($(c).attr("original") !== "1") {
                                        if ($(c).attr("oficinaAutocompletar") === "1") {

                                            $(t).val(concatLstOrganica);
                                            $(c).prop("checked", false);

                                        }
                                    }
                                } else {
                                    if ($(c).attr("original") !== "1") {
                                        if ($(c).attr("oficinaAutocompletar") === "1") {

                                            $(t).val(concatLstOrganica);
                                            $(c).prop("checked", true);
                                        }
                                    }
                                }
                            });
                        },
                        generar : function(data){

                            var tblSede = $('#tblSede tbody[data-principal]');
                            var s = tblSede.find('tr[data-rowPadre]').size();


                            var trSedes = $("#tblSede tbody tr[data-rowPadre]");
                            $.each(trSedes,function(i,r){
                                var v = parseInt($(r).find('td input[name$="SedeId"]').val());
                                var find = false;
                                $.each(data,function(idx,re){
                                    if(re.SedeId === v){
                                        data.splice(idx,1);
                                        find = true;
                                    }

                                    if(find)
                                        return false;
                                })

                            });

                            $.each(data,function(i,r){
                                var rows = "";
                                rows += sut.string.format('<tr data-rowPadre="{0}">',s);

                                rows += '<td>';
                                rows += sut.string.format('<span>{0}</span><input type="hidden" name="ProcedimientoSede[{1}].SedeId" value="{2}" />', s + 1,s, r.SedeId);
                                rows += sut.string.format('<input type="hidden" name="ProcedimientoId" value="{0}" />',null);
                                rows += '</td>';

                                rows += sut.string.format('<td>{0}<br />{1}<br />{2}<br /></td>', r.Nombre || '', r.Direccion || '', r.Horario || '');
                                rows += '<td><div class="btn-group">';
                                rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Sede.delete({0})" ><i class="fa fa-close" ></i></a>', s);
                                rows += '</div></td>';
                                rows += '</tr>';

                                rows += sut.string.format('<tr><td colspan="5"><table class="table table-condensed table-bordered"  style="margin-bottom: 0px;"data-indexParent="{0}">',s);
                                rows += '<thead><tr><th style="width:100px;"></th><th style="width:100px;">';
                                rows += sut.string.format('<a href="javascript:sut.editProcedimiento.UndOrgRecepcion.openSelectUndOrg({0},{1},{2})" data-UndOrg="1" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>',null,r.SedeId,s);
                                rows += '</th><th>Unidades donde se presenta la documentación:</th><th style="width:100px;"></th></tr></thead><tbody>';
                                rows += '</tbody></table></td></tr>';
                                rows += "</tr>";


                                tblSede.append(rows);
                                s++;
                                sut.editProcedimiento.Sede.update();
                            });


                        }
                    },
                    UndOrgRecepcion : {
                        UndOrgProcediemientoId:0,
                        UndOrgSedeIdProcedimiento:0,
                        IndexParent : 0,
                        newFila : function(pIndexParent,UndOrgSede,pProcedimientoId,pSedeId){

                            var rows = "";
                            $.each(UndOrgSede,function(i,r){

                                if(pSedeId == r.SedeId){
                                    rows += sut.string.format('<tr data-index="{0}" data-indexParent="{1}" class="UndOrg" >', i,pIndexParent);
                                    rows += "<td></td>";
                                    rows += '<td>';
                                    //rows += sut.string.format('<span>{0}</span>', i + 1);
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].UnidadOrganicaId" value="{2}" />', pIndexParent,i, r.UnidadOrganicaId);
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].ProcedimientoId" value="{2}" />', pIndexParent, i , pProcedimientoId);
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].SedeId" value="{2}" />', pIndexParent,i, r.SedeId);
                                    rows += '</td>';
                                    rows += sut.string.format("<td>{0}</td>",r.nombre);
                                    rows += sut.string.format('<td><a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.UndOrgRecepcion.borrar({0},{1})" ><i class="fa fa-close" ></i></a></td>', pIndexParent,i);
                                    rows += '</tr>'
                                }
                            });

                            return rows;
                        },
                        openSelectUndOrg: function (pProcedimientoId,pSedeId,pIndexParent) {

                            UndOrgProcediemientoId = pProcedimientoId;
                            UndOrgSedeIdProcedimiento = pSedeId;
                            IndexParent = pIndexParent;


                            $.ajax({
                                type: "GET",
                                //url: '/Simplificacion/UnidadOrganica/Select',
                                url: '@Url.Content("~/Simplificacion/UnidadOrganica/Select")',
                                data: { multi: true, fnAdd: 'sut.editProcedimiento.UndOrgRecepcion.setUndOrg' },
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container-editar');
                                    $('#modal-ventana-editar').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container-editar').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana-editar').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        setUndOrg: function (data) {
                            debugger;
                            $('#modal-ventana-editar').modal('hide');

                            if (!$.isArray(data)) data = [data];


                            var tabla = $('table[data-indexParent=' + IndexParent +'] tbody').eq(0);
                            var s = tabla.children('tr').size();

                            var trUndOrg =  $('table[data-indexParent=' + IndexParent +'] tbody tr');

                            $.each(trUndOrg,function(i,v){

                                var idUndOrg = parseInt($(v).find("td input[name$=UnidadOrganicaId]").val());
                                var find = false;
                                $.each(data,function(ix,vx){
                                    if(vx.id === idUndOrg){
                                        data.splice(ix,1);
                                        find = true;
                                    }

                                    if(find)
                                        return false;
                                })
                            });

                            var rows = '';

                            $.each(data, (i, r) => {
                                rows += sut.string.format('<tr data-index="{0}" class="UndOrg" >', i);
                                rows += "<td></td>";
                                rows += '<td>';
                                //rows += sut.string.format('<span>{0}</span>', i + 1);
                                rows += sut.string.format('<input type="hidden" name="ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].ProcedimientoId" value="{2}" />', IndexParent,s, UndOrgProcediemientoId);
                                rows += sut.string.format('<input type="hidden" name="ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].SedeId" value="{2}" />', IndexParent,s, UndOrgSedeIdProcedimiento);
                                rows += sut.string.format('<input type="hidden" name="ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].UnidadOrganicaId" value="{2}" />', IndexParent,s, r.id);

                                rows += '</td>';
                                rows += sut.string.format("<td>{0}</td>",r.nombre);
                                rows += sut.string.format('<td><a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.UndOrgRecepcion.borrar({0},{1})" ><i class="fa fa-close" ></i></a></td>', IndexParent,s);
                                rows += '</tr>'
                            });

                            tabla.append(rows);

                            sut.editProcedimiento.UndOrgRecepcion.actualizar(IndexParent);


                        },
                        borrar : function(pIndexParent, index){
                            var tr = $('table[data-indexParent=' + pIndexParent +'] tbody tr');

                            $(tr).eq(index).remove();;


                            sut.editProcedimiento.UndOrgRecepcion.actualizar(pIndexParent);
                        },
                        actualizar : function(pIndexParent){

                            var rows = $('table[data-indexParent=' + pIndexParent +'] tbody').eq(0).find("tr");

                            $.each(rows,function(i,tr){
                                $(tr).data("index",i);
                                //$(tr).find('td span').html(i+1);
                                $(tr).find('td input[name$="ProcedimientoId"]').attr("name", sut.string.format('ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].ProcedimientoId', pIndexParent, i));
                                $(tr).find('td input[name$="SedeId"]').attr("name", sut.string.format('ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].SedeId', pIndexParent, i));
                                $(tr).find('td input[name$="UnidadOrganicaId"]').attr("name", sut.string.format('ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].UnidadOrganicaId', pIndexParent, i));
                                $(tr).find('td a').attr('href',sut.string.format('javascript:sut.editProcedimiento.UndOrgRecepcion.borrar({0},{1})', pIndexParent ,i));
                            });
                        }
                    },
                    Nota: {
                        tipos: @Html.Raw(ViewBag.TipoNota != null ? ViewBag.TipoNota : "[]"),
                        comboTipo: function (index, id) {
                            var cb = sut.string.format('<select class="form-control" name="NotaCiudadano[{0}].TipoNotaId" >', index);
                            $.each(sut.editProcedimiento.Nota.tipos, function (i, r) {
                                cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.MetaDatoId, r.Nombre, r.MetaDatoId == id ? 'selected' : '');
                            });
                            cb += '</select>';
                            return cb;
                        },
                        init: function () {
                            var lista = @Html.Raw(ViewBag.ListaNota != null ? ViewBag.ListaNota : "[]");
                            var tabla = $('#tblNota tbody');

                            if (lista.length > 0) {
                                var data = [];
                                $.each(lista, function (i, r) {
                                    var rows = '';
                                    rows += '<tr>';
                                    rows += '<td>';
                                    rows += sut.string.format('<span>{0}</span>', i + 1);
                                    rows += sut.string.format('<input type="hidden" name="NotaCiudadano[{0}].NotaCiudadanoId" value="{1}" />', i, r.NotaCiudadanoId);
                                    rows += sut.string.format('<input type="hidden" name="NotaCiudadano[{0}].Orden" value="{1}" />', i, i + 1);
                                    rows += '</td>';
                                    rows += sut.string.format('<td>{0}</td>', sut.editProcedimiento.Nota.comboTipo(i, r.TipoNotaId));
                                    rows += sut.string.format('<td><textarea name="NotaCiudadano[{0}].Nota" class="form-control" required >{1}</textarea></td>', i, r.Nota || '');
                                    rows += '<td><div class="btn-group">';
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Nota.delete({0})" ><i class="fa fa-close" ></i></a>', r.NotaCiudadanoId);
                                    rows += '</div></td>';
                                    rows += '</tr>';

                                    tabla.append(rows);
                                });
                            }
                        },
                        add: function () {
                            var tabla = $('#tblNota tbody');
                            var rows = '';
                            rows += '<tr>';
                            rows += '<td>';
                            rows += '<span>0</span>';
                            rows += '<input type="hidden" name="NotaCiudadano[0].NotaCiudadanoId" value="0" />';
                            rows += '<input type="hidden" name="NotaCiudadano[0].Orden" value="0" />';
                            rows += '</td>';
                            rows += sut.string.format('<td>{0}</td>', sut.editProcedimiento.Nota.comboTipo(0, 0));
                            rows += sut.string.format('<td><textarea name="NotaCiudadano[0].Nota" class="form-control" required></textarea></td>', '');
                            rows += '<td><div class="btn-group">';
                            rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Nota.delete({0})" ><i class="fa fa-close" ></i></a>', 0);
                            rows += '</div></td>';
                            rows += '</tr>';

                            tabla.append(rows);
                            sut.editProcedimiento.Nota.update();
                        },
                        delete: function (id) {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var num = 1;
                                $.each($('#tblNota tbody tr'), function (index, tr) {
                                    var NotaCiudadanoId = Number($(tr).find('td input[name$="NotaCiudadanoId"]').val());
                                    if (NotaCiudadanoId == id) $(tr).remove();
                                });
                                sut.editProcedimiento.Nota.update();
                            });
                        },
                        update: function () {
                            $.each($('#tblNota tbody tr'), function (i, tr) {
                                $(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="NotaCiudadanoId"]').attr('name', sut.string.format('NotaCiudadano[{0}].NotaCiudadanoId', i)).val(i + 1)
                                $(tr).find('td input[name$="Orden"]').attr('name', sut.string.format('NotaCiudadano[{0}].Orden', i)).val(i + 1)
                                $(tr).find('td textarea[name$="Nota"]').attr('name', sut.string.format('NotaCiudadano[{0}].Nota', i))
                                $(tr).find('td select[name$="TipoNotaId"]').attr('name', sut.string.format('NotaCiudadano[{0}].TipoNotaId', i))
                                $(tr).find('td div a').attr('href', sut.string.format('javascript:sut.editProcedimiento.Nota.delete({0})', i + 1));
                            });
                        }
                    },
                    PasoSeguir: {
                        init: function () {
                            var lista = @Html.Raw(ViewBag.ListaPasoSeguir != null ? ViewBag.ListaPasoSeguir : "[]");
                            var tabla = $('#tblPasoSeguir tbody');

                            if (lista.length > 0) {
                                var data = [];
                                $.each(lista, function (i, r) {
                                    var rows = '';
                                    rows += '<tr>';
                                    rows += '<td>';
                                    rows += sut.string.format('<span>{0}</span>', i + 1);
                                    rows += sut.string.format('<input type="hidden" name="PasoSeguir[{0}].PasoSeguirId" value="{1}" />', i, r.PasoSeguirId);
                                    rows += '</td>';
                                    rows += sut.string.format('<td><textarea name="PasoSeguir[{0}].Descripcion" class="form-control" readonly >{1}</textarea></td>', i, r.Descripcion || '');
                                    rows += '<td><div class="btn-group">';
                                    //rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.PasoSeguir.delete({0})" ><i class="fa fa-close" ></i></a>', r.PasoSeguirId);
                                    rows += '</div></td>';
                                    rows += '</tr>';

                                    tabla.append(rows);
                                });
                            }
                        },
                        add: function () {
                            var tabla = $('#tblPasoSeguir tbody');
                            var rows = '';
                            rows += '<tr>';
                            rows += '<td>';
                            rows += '<span>0</span>';
                            rows += '<input type="hidden" name="PasoSeguir[0].PasoSeguirId" value="0" />';
                            rows += '</td>';
                            rows += sut.string.format('<td><textarea name="PasoSeguir[0].Descripcion" class="form-control" required ></textarea></td>', '');
                            rows += '<td><div class="btn-group">';
                            rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.PasoSeguir.delete({0})" ><i class="fa fa-close" ></i></a>', 0);
                            rows += '</div></td>';
                            rows += '</tr>';

                            tabla.append(rows);
                            sut.editProcedimiento.PasoSeguir.update();
                        },
                        delete: function (id) {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var num = 1;
                                $.each($('#tblPasoSeguir tbody tr'), function (index, tr) {
                                    var PasoSeguirId = Number($(tr).find('td input[name$="PasoSeguirId"]').val());
                                    if (PasoSeguirId == id) $(tr).remove();
                                });
                                sut.editProcedimiento.PasoSeguir.update();
                            });
                        },
                        update: function () {
                            $.each($('#tblPasoSeguir tbody tr'), function (i, tr) {
                                $(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="PasoSeguirId"]').attr('name', sut.string.format('PasoSeguir[{0}].PasoSeguirId', i)).val(i + 1);
                                $(tr).find('td textarea[name$="Descripcion"]').attr('name', sut.string.format('PasoSeguir[{0}].Descripcion', i));
                                $(tr).find('td div a').attr('href', sut.string.format('javascript:sut.editProcedimiento.PasoSeguir.delete({0})', i + 1));
                            });
                        }
                    },
                    Modalidad : {
                        init: function () {
                            debugger;

                            var lista = @Html.Raw(ViewBag.ListaModalidad != null ? ViewBag.ListaModalidad : "[]");
                            var listaobservaciones = @Html.Raw(ViewBag.ListaObservacion != null ? ViewBag.ListaObservacion : "[]");
                            var tabla = $('#tblModalidad tbody');
                            var num = 1;
                            if (lista.length > 0) {
                                var data = [];
                                $.each(lista, function (i, r) {
                                    debugger;
                                    num = i ;
                                    var rows = '';


                                        rows += sut.string.format('<tr data-index="{0}" >', num);
                                        rows += '<td colspan="5">';
                                        rows += '<div class="form-group">';
                                        rows += '</div>';
                                        rows += '<table id="divModalidad0' + num + '" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">';
                                        rows += '<tbody></tbody>';
                                        rows += '</table>';
                                        rows += '</td>';
                                        rows += '</tr>';


                                    rows += sut.string.format('<tr data-index="{0}"  id="trModalidad' + num + '" >', i);
                                    rows += '<td>';
                                    rows += sut.string.format('<span>{0}</span>', i + 1);
                                    rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].TablaAsmeId" value="{1}" />', i, r.TablaAsmeId);
                                    rows += '</td>';
                                    //rows += sut.string.format('<td><input type="text" name="TablaAsme[{0}].Codigo" value="{1}" class="form-control" readonly /></td>', i, r.Codigo);

                                    debugger;
                                    rows += sut.string.format('<td>');
                                    if(lista.length > 1){
                                        var descr='';
                                        if(r.Descripcion!=null && r.Descripcion!='null' ){
                                            descr=r.Descripcion;
                                        }
                                        rows += sut.string.format('<input type="text" id="DesModalidad'+i+'" name="TablaAsme[{0}].Descripcion" value="{1}" class="form-control" {2} />', i, r.Descripcion, 'readonly');
                                    }


                                    rows += sut.string.format('</td>');


                                    rows += sut.string.format('<td><input type="checkbox" id="chekModalidad' + i +'" name="TablaAsme[{0}].EsGratuito"  {1} {2} /></td>', i, r.EsGratuito ? 'checked' : '', 'disabled');

                                    if(sut.editProcedimiento.esTupaEstandar) {
                                        rows += sut.string.format('<td><input id="PreModalidad' + i +'" name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" readonly /></td>', i, r.Prestaciones);
                                    } else if (sut.editProcedimiento.esCargaInicial) {
                                        if (!sut.editProcedimiento.esProcEstadar) {
                                            rows += sut.string.format('<td><input id="CostoModalidad' + i + '" name="TablaAsme[{0}].CostoUnitario" value="{1}" class="form-control" type="number" min="1" readonly /></td>', i, r.CostoUnitario);
                                        } else {
                                            rows += sut.string.format('<td><input id="PreModalidad' + i + '" name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" readonly /></td>', i, r.Prestaciones);

                                        }
                                    } else {
                                        //if (!sut.editProcedimiento.esProcEstadar) {
                                        rows += sut.string.format('<td><input id="PreModalidad' + i +'" name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" readonly /></td>', i, r.Prestaciones);
                                        //}
                                    }

                                    rows += '<td><div class="btn-group">';
                                    if (i > 0) {
                                        //rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                    }
                                    rows += '</div></td>';
                                    rows += '</tr>';

                                    tabla.append(rows);
                                        if (@obs.Count != 0) {
                                            var cont1 = 0;
                                            var texto1 = "";
                                            for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {
                                                if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {

                                                    if (listaobservaciones[Mi].TipoEstado == "1") {
                                                        texto1 = listaobservaciones[Mi].Descripcion;
                                                    }
                                                    else if (listaobservaciones[Mi].TipoEstado == "2") {
                                                        sut.editProcedimiento.textoobservacionModalidad("" + texto1 + "", "" + listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i,lista.length);
                                                        //});
                                                    }
                                                    else if (listaobservaciones[Mi].TipoEstado == "3") {
                                                        sut.editProcedimiento.textosustentoModalidad( listaobservaciones[Mi] + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i);

                                                    }
                                                }
                                            }
                                        }
                                });
                            }
                        },
                        add: function () {
                            var tabla = $('#tblModalidad tbody');

                            var i = tabla.children('tr').size();

                            var rows = '';
                            rows += sut.string.format('<tr data-index="{0}" >', i);
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].TablaAsmeId" value="{1}" />', i, 0);
                            rows += '</td>';
                            //rows += sut.string.format('<td><input type="text" name="TablaAsme[{0}].Codigo" value="{1}" class="form-control" readonly /></td>', i, '-');
                            rows += sut.string.format('<td><input type="text" name="TablaAsme[{0}].Descripcion" value="{1}" class="form-control" /></td>', i, '');
                            rows += sut.string.format('<td><input type="checkbox" name="TablaAsme[{0}].EsGratuito" /></td>', i);

                            if (sut.editProcedimiento.esTupaEstandar) {
                                rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" /></td>', i, 0);
                            } else if (sut.editProcedimiento.esCargaInicial) {
                                if (!sut.editProcedimiento.esProcEstadar) {
                                    rows += sut.string.format('<td><input name="TablaAsme[{0}].CostoUnitario" value="{1}" class="form-control" type="number" min="1" /></td>', i, 0);
                                }
                            } else {
                                if (!sut.editProcedimiento.esProcEstadar) {
                                    rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" /></td>', i, 0);
                                }
                            }

                            rows += '<td><div class="btn-group">';
                            if (i > 0) {
                                rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                            }
                            rows += '</div></td>';
                            rows += '</tr>';

                            tabla.append(rows);
                            sut.editProcedimiento.Modalidad.update();
                        },
                        delete: function (id) {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                $.each($('#tblModalidad tbody tr'), function (index, tr) {
                                    var i = Number($(tr).data('index'));
                                    if (i == id) $(tr).remove();
                                });
                                sut.editProcedimiento.Modalidad.update();
                            });
                        },
                        update: function () {
                            $.each($('#tblModalidad tbody tr'), function (i, tr) {
                                $(tr).data('index', i);
                                $(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="TablaAsmeId"]').attr('name', sut.string.format('TablaAsme[{0}].TablaAsmeId', i));
                                //$(tr).find('td input[name$="Codigo"]').attr('name', sut.string.format('TablaAsme[{0}].Codigo', i));
                                $(tr).find('td input[name$="Descripcion"]').attr('name', sut.string.format('TablaAsme[{0}].Descripcion', i));
                                $(tr).find('td input[name$="EsGratuito"]').attr('name', sut.string.format('TablaAsme[{0}].EsGratuito', i));
                                $(tr).find('td input[name$="Prestaciones"]').attr('name', sut.string.format('TablaAsme[{0}].Prestaciones', i));

                                $(tr).find('td div a').attr('href', sut.string.format('javascript:sut.editProcedimiento.Modalidad.delete({0})', i));
                            });
                        }
                    },
                    Requisito: {
                        indexReq: 0,
                        textCadenaTramite: (val, index) => {
                            rows = '';
                            rows += '<div class="input-group">';
                            rows += sut.string.format('<input type="text" name="Requisito[{0}].CadenaTramite" value="{1}" class="form-control input-sm" />', index, val || '');
                            rows += '<div class="input-group-btn">';
                            rows += sut.string.format('<a href="javascript:sut.editProcedimiento.Requisito.openCadenaTramite({0})" class="cadenaTramite btn btn-danger btn-sm"><i class="fa fa-ellipsis-h"></i></a>', index);
                            rows += '</div>';
                            rows += '</div>';
                            return rows;
                        },
                        setCadenaTramite: (data) => {
                            $('#modal-ventana').modal('hide');

                            var index = sut.editProcedimiento.Requisito.indexReq;
                            var req = $('#tblRequisito tbody tr.requisito').eq(index);
                            req.find('input[name$="CadenaTramite"]').val(data.Codigo);
                        },
                        openCadenaTramite: (index) => {
                            sut.editProcedimiento.Requisito.indexReq = index;
                            $.ajax({
                                type: "GET",
                                //url: '/Simplificacion/Procedimiento/Select',
                                url: '@Url.Content("~/Simplificacion/Procedimiento/Select")',
                                data: { tipo: 1, multi: false, fnAdd: 'sut.editProcedimiento.Requisito.setCadenaTramite' },
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        init: function () {
                            debugger;
                            var lista = @Html.Raw(ViewBag.ListaRequisito != null ? ViewBag.ListaRequisito : "[]");
                            var tabla = $('#tblRequisito tbody');

                            if (lista.length > 0) {
                                var lista = @Html.Raw(ViewBag.ListaRequisito != null ? ViewBag.ListaRequisito : "[]");
                                var listaObservacionRequisitos = @Html.Raw(ViewBag.ListaObservacionRequisitos != null ? ViewBag.ListaObservacionRequisitos : "[]");
                                var tablaRGeneral = $('#tblRequisitoGeneral tbody');
                                var tablaREspecifico = $('#tblRequisitoEspecifico tbody');
                                var counttablaRGeneral = 0;
                                var counttablaREspecifico = 0;


                                if (lista.length > 0) {
                                    var data = [];
                                    $.each(lista, function (i, r) {
                                        var num = i;

                                        var rows = '';

                                        i = counttablaRGeneral + counttablaREspecifico;

                                            rows += sut.string.format('<tr data-index="{0}" >', num);
                                            rows += '<td colspan="5">';
                                            rows += '<table id="divRequisitos0' + num + '" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">';
                                            rows += '<tbody></tbody>';
                                            rows += '</table>';
                                            rows += '</td>';
                                            rows += '</tr>';

                                        rows += sut.string.format('<tr data-index="{0}" class="requisito" id="trRequisitos' + num + '" >', i);
                                        rows += '<td>';
                                        rows += sut.string.format('<span>{0}</span>', r.RecNum);


                                        rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoId" value="{1}" />', i, r.RequisitoId);
                                        rows += sut.string.format('<input type="hidden" name="Requisito[{0}].BaseLegalId" value="{1}" />', i, r.BaseLegalId);
                                        rows += sut.string.format('<input type="hidden" name="Requisito[{0}].SustentoTecnico" value="{1}" />', i, r.SustentoTecnico || '');
                                        rows += sut.string.format('<input type="hidden" name="Requisito[{0}].TipoRequisito" value="{1}" />', i, r.TipoRequisito);
                                        rows += '</td>';


                                        rows += sut.string.format('<td colspan="2"><label  class="form-control" id="Nombre' + num + '" style="border-color:#ddd;background: #eeeeee;font-weight: 600;height: 100%;" name="Requisito[{0}].Nombre">{1}</label></td>', i, r.Nombre || '');

                                        rows += '</tr>';
                                        if (r.TipoRequisito === 1) {
                                            rows += '<tr><td colspan="4"><table class="table table-condensed table-bordered" style="margin-bottom: 0px;">';
                                            rows += '<thead><tr><th style="width:100px;"></th><th style="width:100px;">';
                                            rows += '</th><th>Formulario</th><th style="width:60px;">Archivo</th><th style="width:100px;"></th></tr></thead><tbody>';
                                        }
                                        $.each(r.RequisitoFormulario, (k, f) => {
                                            f.indexReq = r.TipoRequisito === 1 ? counttablaRGeneral : counttablaREspecifico;
                                            f.indexForm = k;
                                            f.TipoRequisito = r.TipoRequisito;
                                            rows += sut.editProcedimiento.Formulario.newFila(f);
                                        });

                                        rows += '</tbody></table></td></tr>';

                                        if (r.TipoRequisito === 1) {
                                            tablaRGeneral.append(rows);
                                            counttablaRGeneral++;
                                        } else {
                                            tablaREspecifico.append(rows);
                                            counttablaREspecifico++;
                                        }

                                            if (@obs.Count != 0) {
                                                var cont1 = 0;
                                                var texto1 = "";
                                                for (var Mi = 0; Mi < listaObservacionRequisitos.length; Mi += 1) {

                                                    if (listaObservacionRequisitos[Mi].Pantalla == "Datos Generales" && listaObservacionRequisitos[Mi].NombreCampo == "NombredelosRequisitos" + i) {

                                                        if (listaObservacionRequisitos[Mi].TipoEstado == "1") {
                                                            texto1 = listaObservacionRequisitos[Mi].Descripcion;
                                                        }
                                                        else if (listaObservacionRequisitos[Mi].TipoEstado == "2") {
                                                            sut.editProcedimiento.textoobservacionRequisitos("" + texto1 + "", "" + listaObservacionRequisitos[Mi].Descripcion + "", 4, "" + listaObservacionRequisitos[Mi].EstadoExpediente + "", i);

                                                        }
                                                        else if (listaObservacionRequisitos[Mi].TipoEstado == "3") {
                                                            sut.editProcedimiento.textosustentoRequisitos( listaObservacionRequisitos[Mi].Descripcion + "", 4, "" + listaObservacionRequisitos[Mi].EstadoExpediente + "", i);
                                                        }
                                                    }
                                                }
                                            }
                                    });
                                    sut.editProcedimiento.Requisito.update();

                                }
                            }
                        },
                        add: function () {
                            var tabla = $('#tblRequisito tbody').eq(0);

                            var i = tabla.children('tr.requisito').size();

                            var rows = '';
                            rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoId" value="{1}" />', i, 0);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].BaseLegalId" value="{1}" />', i, 0);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].SustentoTecnico" value="{1}" />', i, '');
                            rows += '</td>';
                            rows += sut.string.format('<td><input type="text" name="Requisito[{0}].Nombre" value="{1}" class="form-control" required /></td>', i, '');
                            rows += '<td class="text-center" ><div class="btn-group">';
                            rows += sut.string.format('<a class="delRequisito btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Requisito.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                            rows += '</div></td>';
                            rows += '</tr>';

                            tabla.append(rows);
                            sut.editProcedimiento.Requisito.update();
                        },
                        delete: function (index) {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var req = $('#tblRequisito tbody tr.requisito').eq(index);
                                if (Number(req.find('td input[name$="RequisitoId"]').val()) > 0) req.next().remove();
                                req.remove();
                                sut.editProcedimiento.Requisito.update();
                            });
                        },
                        update: function () {
                            var cont = 0;

                            $.each($('#tblRequisitoGeneral tbody tr.requisito'), function (i, tr) {
                                $(tr).data('index', i);
                                //$(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="RequisitoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoId', cont));
                                $(tr).find('td input[name$="TipoRequisito"]').attr('name', sut.string.format('Requisito[{0}].TipoRequisito', cont));
                                $(tr).find('td input[name$="BaseLegalId"]').attr('name', sut.string.format('Requisito[{0}].BaseLegalId', cont));
                                $(tr).find('td input[name$="SustentoTecnico"]').attr('name', sut.string.format('Requisito[{0}].SustentoTecnico', cont));
                                $(tr).find('td textarea[name$="Nombre"]').attr('name', sut.string.format('Requisito[{0}].Nombre', cont));
                                $(tr).find('td input[name$="CadenaTramite"]').attr('name', sut.string.format('Requisito[{0}].CadenaTramite', cont));
                                $(tr).find('td input[name$="Descripcion"]').attr('name', sut.string.format('Requisito[{0}].Descripcion', cont));
                                $(tr).find('td div div a.cadenaTramite').attr('href', sut.string.format('javascript:sut.editProcedimiento.Requisito.openCadenaTramite({0},1)', cont));
                                //$(tr).find('td div a.delRequisito').attr('href', sut.string.format('javascript:sut.editProcedimiento.Requisito.delete({0})', cont));

                                if($(tr).find('td input[name$="RequisitoId"]').val() != '0') {
                                    $.each($(tr).next().find('td table tbody tr.formulario'), (k, f) => {
                                        $(f).data('index', k);
                                        $(f).find('td span').html(k + 1);
                                        $(f).find('td input[name$="RequisitoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].RequisitoId', cont, k));
                                        $(f).find('td input[name$="FormularioId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].FormularioId', cont, k));
                                        $(f).find('td input[name$="Nombre"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].Nombre', cont, k));
                                        $(f).find('td input[name$="Url"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].Url', cont, k));
                                        $(f).find('td input[name$="ArchivoAdjuntoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].ArchivoAdjuntoId', cont, k));
                                    });
                                }

                                cont++;
                            });


                            $.each($('#tblRequisitoEspecifico tbody tr.requisito'), function (i, tr) {
                                $(tr).data('index', i);
                                //$(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="RequisitoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoId', cont));
                                $(tr).find('td input[name$="TipoRequisito"]').attr('name', sut.string.format('Requisito[{0}].TipoRequisito', cont));
                                $(tr).find('td input[name$="BaseLegalId"]').attr('name', sut.string.format('Requisito[{0}].BaseLegalId', cont));
                                $(tr).find('td input[name$="SustentoTecnico"]').attr('name', sut.string.format('Requisito[{0}].SustentoTecnico', cont));
                                $(tr).find('td input[name$="Nombre"]').attr('name', sut.string.format('Requisito[{0}].Nombre', cont));
                                $(tr).find('td input[name$="CadenaTramite"]').attr('name', sut.string.format('Requisito[{0}].CadenaTramite', cont));
                                $(tr).find('td input[name$="Descripcion"]').attr('name', sut.string.format('Requisito[{0}].Descripcion', cont));
                                $(tr).find('td div div a.cadenaTramite').attr('href', sut.string.format('javascript:sut.editProcedimiento.Requisito.openCadenaTramite({0},2)', cont));
                                //$(tr).find('td div a.delRequisito').attr('href', sut.string.format('javascript:sut.editProcedimiento.Requisito.delete({0})', cont));

                                //if ($(tr).find('td input[name$="RequisitoId"]').val() != '0') {
                                //    $.each($(tr).next().find('td table tbody tr.formulario'), (k, f) => {
                                //        $(f).data('index', k);
                                //        $(f).find('td span').html(k + 1);
                                //        $(f).find('td input[name$="RequisitoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].RequisitoId', cont, k));
                                //        $(f).find('td input[name$="FormularioId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].FormularioId', cont, k));
                                //        $(f).find('td input[name$="Nombre"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].Nombre', cont, k));
                                //        $(f).find('td input[name$="Url"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].Url', cont, k));
                                //        $(f).find('td input[name$="ArchivoAdjuntoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].ArchivoAdjuntoId', cont, k));
                                //    });
                                //}

                                cont++;
                            });
                        }
                    },
                    Formulario: {
                        newFila: (r) => {
                            var rows = sut.string.format('<tr data-index="{0}" class="formulario" >', r.indexForm);
                            rows += '<td></td>';
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', r.indexForm + 1);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].RequisitoId" value="{2}" />', r.indexReq, r.indexForm, r.RequisitoId);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].FormularioId" value="{2}" />', r.indexReq, r.indexForm, r.FormularioId);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].Nombre" value="{2}" />', r.indexReq, r.indexForm, r.Nombre);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].Url" value="{2}" />', r.indexReq, r.indexForm, r.Url || '');
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].ArchivoAdjuntoId" value="{2}" />', r.indexReq, r.indexForm, r.ArchivoAdjuntoId);
                            rows += '</td>';
                            rows += sut.string.format('<td>{0}</td>', r.Nombre);
                            rows += '<td class="text-center" ><div class="btn-group">';
                            if (r.Url || '' != '') {
                                rows += sut.string.format('<a class="btn btn-default btn-xs" href="{0}" ><i class="fa fa-link" ></i></a>', r.Url);
                            } else {
                                rows += sut.string.format('<a class="btn btn-primary btn-xs" href="@Url.Content("~/General/Adjunto/Descargar/"){0}" ><i class="fa fa-download" ></i></a>', r.ArchivoAdjuntoId);
                            }
                            rows += '</div></td>';
                            rows += '<td class="text-center" ><div class="btn-group">';
                            //rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.Formulario.edit({0}, {1})" ><i class="fa fa-pencil" ></i></a>', r.indexReq, r.indexForm);
                            //rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Formulario.delete({0}, {1})" ><i class="fa fa-close" ></i></a>', r.indexReq, r.indexForm);
                            rows += '</div></td>';
                            rows += '</tr>';
                            return rows;
                        },
                        add: (r) => {
                            $('#modal-ventana').modal('hide');
                            var tabla = $('table#tblRequisito tbody tr.requisito').eq(r.indexReq).next().find('td[colspan="4"] table tbody');
                            if (r.Nuevo == 1) {
                                r.indexForm = tabla.find('tr.formulario').size();
                                tabla.append(sut.editProcedimiento.Formulario.newFila(r));
                            } else {
                                var tr = tabla.find('tr.formulario').eq(r.indexForm);
                                tr.find('td input[name$="RequisitoId"]').val(r.RequisitoId);
                                tr.find('td input[name$="FormularioId"]').val(r.FormularioId);
                                tr.find('td input[name$="Nombre"]').val(r.Nombre);
                                tr.find('td input[name$="Url"]').val(r.Url);
                                tr.find('td input[name$="ArchivoAdjuntoId"]').val(r.ArchivoAdjuntoId);
                                tr.find('td').eq(2).html(r.Nombre);
                            }
                        },
                        edit: (indexReq, indexForm) => {
                            var model = {};

                            if (indexForm != null) {
                                var r = $('table#tblRequisito tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr.formulario').eq(indexForm);
                                model['model.RequisitoId'] = r.find('td input[name$="RequisitoId"]').val();
                                model['model.FormularioId'] = r.find('td input[name$="FormularioId"]').val();
                                model['model.Nombre'] = r.find('td input[name$="Nombre"]').val();
                                model['model.Url'] = r.find('td input[name$="Url"]').val();
                                model['model.ArchivoAdjuntoId'] = r.find('td input[name$="ArchivoAdjuntoId"]').val();
                            } else {
                                model['model.RequisitoId'] = $('table#tblRequisito tbody tr.requisito').eq(indexReq).find('td input[name$=RequisitoId]').val();
                                model['model.FormularioId'] = $('table#tblRequisito tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr.formulario').size() + 1;
                            }

                            model['nuevo'] = indexForm == null ? 1 : 0;
                            model['indexForm'] = indexForm == null ? 0 : indexForm;
                            model['indexReq'] = indexReq;
                            model['fnAdd'] = 'sut.editProcedimiento.Formulario.add';

                            $.ajax({
                                type: "GET",
                                //url: '/Simplificacion/Procedimiento/EditarFormulario',
                                url: '@Url.Content("~/Simplificacion/Procedimiento/EditarFormulario")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        delete: (indexReq, indexForm) => {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var tr = $('table#tblRequisito tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr').eq(indexForm);
                                tr.remove();
                                sut.editProcedimiento.Requisito.update();
                            });
                        }
                    },
                    Formulario: {
                        newFila: (r) => {
                            var rows = sut.string.format('<tr data-index="{0}" class="formulario" >', r.indexForm);
                            rows += '<td></td>';
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', r.indexForm + 1);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].RequisitoId" value="{2}" />', r.indexReq, r.indexForm, r.RequisitoId);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].FormularioId" value="{2}" />', r.indexReq, r.indexForm, r.FormularioId);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].Nombre" value="{2}" />', r.indexReq, r.indexForm, r.Nombre);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].Url" value="{2}" />', r.indexReq, r.indexForm, r.Url || '');
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].ArchivoAdjuntoId" value="{2}" />', r.indexReq, r.indexForm, r.ArchivoAdjuntoId);
                            rows += '</td>';
                            rows += sut.string.format('<td>{0}</td>', r.Nombre);
                            rows += '<td class="text-center" ><div class="btn-group">';
                            if (r.Url || '' != '') {
                                rows += sut.string.format('<a class="btn btn-default btn-xs" href="{0}" ><i class="fa fa-link" ></i></a>', r.Url);
                            } else {
                                //rows += sut.string.format('<a class="btn btn-primary btn-xs" href="/General/Adjunto/Descargar/{0}" ><i class="fa fa-download" ></i></a>', r.ArchivoAdjuntoId);
                                rows += sut.string.format('<a class="btn btn-primary btn-xs" href="@Url.Content("~/General/Adjunto/Descargar/"){0}" ><i class="fa fa-download" ></i></a>', r.ArchivoAdjuntoId);
                            }
                            rows += '</div></td>';
                            rows += '<td class="text-center" ><div class="btn-group">';
                            //rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.Formulario.edit({0}, {1})" ><i class="fa fa-pencil" ></i></a>', r.indexReq, r.indexForm);
                            //rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Formulario.delete({0}, {1})" ><i class="fa fa-close" ></i></a>', r.indexReq, r.indexForm);
                            rows += '</div></td>';
                            rows += '</tr>';
                            return rows;
                        },
                        add: (r) => {
                            $('#modal-ventana').modal('hide');
                            var tabla = $('table#tblRequisito tbody tr.requisito').eq(r.indexReq).next().find('td[colspan="4"] table tbody');
                            if (r.Nuevo == 1) {
                                r.indexForm = tabla.find('tr.formulario').size();
                                tabla.append(sut.editProcedimiento.Formulario.newFila(r));
                            } else {
                                var tr = tabla.find('tr.formulario').eq(r.indexForm);
                                tr.find('td input[name$="RequisitoId"]').val(r.RequisitoId);
                                tr.find('td input[name$="FormularioId"]').val(r.FormularioId);
                                tr.find('td input[name$="Nombre"]').val(r.Nombre);
                                tr.find('td input[name$="Url"]').val(r.Url);
                                tr.find('td input[name$="ArchivoAdjuntoId"]').val(r.ArchivoAdjuntoId);
                                tr.find('td').eq(2).html(r.Nombre);
                            }
                        },
                        edit: (indexReq, indexForm) => {
                            var model = {};

                            if (indexForm != null) {
                                var r = $('table#tblRequisito tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr.formulario').eq(indexForm);
                                model['model.RequisitoId'] = r.find('td input[name$="RequisitoId"]').val();
                                model['model.FormularioId'] = r.find('td input[name$="FormularioId"]').val();
                                model['model.Nombre'] = r.find('td input[name$="Nombre"]').val();
                                model['model.Url'] = r.find('td input[name$="Url"]').val();
                                model['model.ArchivoAdjuntoId'] = r.find('td input[name$="ArchivoAdjuntoId"]').val();
                            } else {
                                model['model.RequisitoId'] = $('table#tblRequisito tbody tr.requisito').eq(indexReq).find('td input[name$=RequisitoId]').val();
                                model['model.FormularioId'] = $('table#tblRequisito tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr.formulario').size() + 1;
                            }

                            model['nuevo'] = indexForm == null ? 1 : 0;
                            model['indexForm'] = indexForm == null ? 0 : indexForm;
                            model['indexReq'] = indexReq;
                            model['fnAdd'] = 'sut.editProcedimiento.Formulario.add';

                            $.ajax({
                                type: "GET",
                                //url: '/Simplificacion/Procedimiento/EditarFormulario',
                                url: '@Url.Content("~/Simplificacion/Procedimiento/EditarFormulario")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        delete: (indexReq, indexForm) => {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var tr = $('table#tblRequisito tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr').eq(indexForm);
                                tr.remove();
                                sut.editProcedimiento.Requisito.update();
                            });
                        }
                    },
                    BaseLegal: {
                        data: @Html.Raw(ViewBag.ListaBaseLegal != null ? ViewBag.ListaBaseLegal : "[]") ,
                        init: () => {
                            sut.editProcedimiento.BaseLegal.generar();
                        },
                        edit: (index) => {
                            var model = {};
                            if (index != null) {
                                var r = sut.editProcedimiento.BaseLegal.data[index];
                                model['model.BaseLegalNormaId'] = r.BaseLegalNormaId;
                                model['model.TipoBaseLegal'] = r.TipoBaseLegal;
                                model['model.NormaId'] = r.NormaId;
                                model['model.Descripcion'] = r.Descripcion == 'null' ? '' : r.Descripcion;
                                model['model.TipoNormaId'] = r.TipoNormaId;
                                model['model.Numero'] = r.Numero;
                                model['model.FechaPublicacion'] = r.FechaPublicacion;
                                model['model.Articulo'] = r.Articulo;
                                model['model.Url'] = r.Url == 'null' ? '' : r.Url;
                                model['model.ArchivoAdjuntoId'] = r.ArchivoAdjuntoId;
                            }

                            model['nuevo'] = index == null ? 1 : 0;
                            model['index'] = index == null ? 0 : index;
                            model['fnAdd'] = 'sut.editProcedimiento.BaseLegal.add';

                            $.ajax({
                                type: "GET",
                                //url: '/General/BaseLegal/EditarDetalle',
                                url: '@Url.Content("~/General/BaseLegal/EditarDetalle")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        generar: () => {

                            var tabla = $('#tblBaseLegal tbody');
                            $('#tblBaseLegal tbody tr').remove();
                            if (sut.editProcedimiento.BaseLegal.data.length > 0) {
                                var rows = '';
                                var listaObservacionBaseLegal = @Html.Raw(ViewBag.ListaObservacionBaseLegal != null ? ViewBag.ListaObservacionBaseLegal : "[]");

                                $.each(sut.editProcedimiento.BaseLegal.data, function (i, r) {
                                    var num = i;



                                        rows += sut.string.format('<tr data-index="{0}" >', num);
                                        rows += '<td colspan="7">';
                                        rows += '<table id="divBaseLegal0' + num + '" class="table table-condensed table-bordered table-striped" style=" margin-bottom: 0px;visibility: collapse;">';
                                        rows += '<thead>';
                                        rows += '    <tr>';
                                        rows += '        <th style="width:100px;background: #f9f9f9;">';
                                        rows += '        </th>';
                                        rows += '        <th  style="color: white;width: 8%;background: #f9f9f9;"></th>';
                                        rows += '        <th  style="color: white;width: 34.5%;background: #f9f9f9;"></th>';
                                        rows += '        <th  style="color: white;width: 17%;background: #f9f9f9;"></th>';
                                        rows += '        <th  style="color: white;width: 13%;background: #f9f9f9;"></th>';
                                        rows += '        <th  style="color: white;width: 19%;background: #f9f9f9;"></th>';
                                        rows += '        <th style="width:60px;background: #f9f9f9;"></th>';
                                        rows += '    </tr>';
                                        rows += '</thead>';
                                        rows += '<tbody></tbody>';
                                        rows += '</table>';
                                        rows += '</td>';
                                        rows += '</tr>';




                                    rows += sut.string.format('<tr data-index="{0}" id="trBaseLegal' + num + '">', i);
                                    rows += '<td>';
                                    rows += sut.string.format('<span>{0}</span>', i + 1);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].BaseLegalId" value="{1}" />', i, r.BaseLegalId);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].BaseLegalNormaId" value="{1}" />', i, r.BaseLegalNormaId);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].TipoBaseLegal" value="{1}" />', i, r.TipoBaseLegal);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].NormaId" value="{1}" />', i, r.NormaId);
                                    rows += sut.string.format('<input type="hidden" id="BDescripcion' + i + '" name="BaseLegal.BaseLegalNorma[{0}].Descripcion" value="{1}" />', i, r.Descripcion);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].TipoNormaId" value="{1}" />', i, r.TipoNormaId);
                                    rows += sut.string.format('<input type="hidden" id="BNumero' + i + '" name="BaseLegal.BaseLegalNorma[{0}].Numero" value="{1}" />', i, r.Numero);
                                    rows += sut.string.format('<input type="hidden" id="BFechaPublicacion' + i + '" name="BaseLegal.BaseLegalNorma[{0}].FechaPublicacion" value="{1}" />', i, r.FechaPublicacion);
                                    rows += sut.string.format('<input type="hidden" id="BArticulo' + i + '" name="BaseLegal.BaseLegalNorma[{0}].Articulo" value="{1}" />', i, r.Articulo);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].ArchivoAdjuntoId" value="{1}" />', i, r.ArchivoAdjuntoId);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].Url" value="{1}" />', i, r.Url);
                                    rows += sut.string.format('<input type="hidden" id="BNormaTipo' + i + '"  name="BaseLegal.BaseLegalNorma[{0}].BaseLegalId" value="{1}" />', i, r.NormaTipo);
                                    rows += sut.string.format('<input type="hidden" id="BEstadoACR' + i + '"  name="BaseLegal.BaseLegalNorma[{0}].EstadoACR" value="{1}" />', i, r.EstadoACR);
                                    rows += sut.string.format('<input type="hidden" id="BDescripcionACR' + i + '"  name="BaseLegal.BaseLegalNorma[{0}].DescripcionACR" value="{1}" />', i, r.DescripcionACR);
                                    rows += '</td>';

                                    debugger;
                                    if (r.EstadoACR==2){
                                        rows += sut.string.format('<td colspan="6">{0}</td>', r.DescripcionACR);
                                    }else{
                                        rows += sut.string.format('<td>{0}</td>', r.Articulo);
                                        rows += sut.string.format('<td>{0}</td>', r.Descripcion);
                                        rows += sut.string.format('<td>{0}</td>', r.NormaTipo);
                                        rows += sut.string.format('<td>{0}</td>', r.Numero);
                                        rows += sut.string.format('<td>{0}</td>', r.FechaPublicacion);
                                    }
                                    rows += '<td><div class="btn-group">';
                                    rows += '</div></td>';
                                    rows += '</tr>';
                                });
                                tabla.append(rows);
                                $.each(sut.editProcedimiento.BaseLegal.data, function (i, r) {
                                        if (@obs.Count != 0) {
                                            var cont1 = 0;
                                            var texto1 = "";
                                            for (var Mi = 0; Mi < listaObservacionBaseLegal.length; Mi += 1) {


                                                if (listaObservacionBaseLegal[Mi].Pantalla == "Datos Generales" && listaObservacionBaseLegal[Mi].NombreCampo == "NombredelosBaseLegal" + i) {

                                                    if (listaObservacionBaseLegal[Mi].TipoEstado == "1") {
                                                        texto1 = listaObservacionBaseLegal[Mi].Descripcion;
                                                    }
                                                    else if (listaObservacionBaseLegal[Mi].TipoEstado == "2") {
                                                        sut.editProcedimiento.textoobservacionBaseLegal("" + texto1 + "", "" + listaObservacionBaseLegal[Mi].Descripcion + "", 4, "" + listaObservacionBaseLegal[Mi].EstadoExpediente + "", i);

                                                    }
                                                    else if (listaObservacionBaseLegal[Mi].CodValidacion == "3") {
                                                        sut.editProcedimiento.textosustentoBaseLegal( listaObservacionBaseLegal[Mi].Descripcion + "", 4, "" + listaObservacionBaseLegal[Mi].EstadoExpediente + "", i);

                                                    }
                                                }
                                            }

                                        }

                                });

                            }
                        },
                        add: (r) => {
                            $('#modal-ventana').modal('hide');
                            if (r.Nuevo == 1) {
                                sut.editProcedimiento.BaseLegal.data.push(r);
                            } else {
                                var arr = [];
                                $.each(sut.editProcedimiento.BaseLegal.data, function (i, d) {
                                    if (i != r.Index) arr.push(d);
                                    else arr.push(r);
                                });
                                sut.editProcedimiento.BaseLegal.data = arr;
                            }
                            sut.editProcedimiento.BaseLegal.generar();
                        },
                        delete: (index) => {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var arr = [];
                                $.each(sut.editProcedimiento.BaseLegal.data, function (i, d) {
                                    if (i != index) arr.push(d);
                                });
                                sut.editProcedimiento.BaseLegal.data = arr;
                                sut.editProcedimiento.BaseLegal.generar();
                            });
                        }
                    },

                    guardar: function () {
                        var valid = true;

                        //if(valid) {
                        //    valid = Number($('select[name="TipoAtencionId"]').find('option:selected').val()) > 0;
                        //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe seleccionar el Tipo de Atención.');
                        //}

                        //if (valid) {
                        //    valid = $('#tblRequisito tbody tr').size() > 0;
                        //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un Requisito.');
                        //}

                        //if (valid) {
                        //    valid = $('#tblBaseLegal tbody tr').size() > 0;
                        //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un registro de Base Legal.');
                        //}

                        //if (valid) {
                        //    var tablas = $('#tblModalidad tbody tr td input[name$="Prestaciones"]');
                        //    $.each(tablas, (i, p) => {
                        //        if (Number($(p).val()) == 0) valid = false;
                        //    });
                        //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe indicar la cantidad de prestaciones.');
                        //}

                        if ($('#form-editar').valid() && valid) {
                            var model = $('#form-editar').serialize();
                            $.ajax({
                                type: 'POST',
                                //url: '/Simplificacion/Procedimiento/DatosGenerales',
                                url: '@Url.Content("~/Simplificacion/Procedimiento/DatosGenerales")',
                                data: model,
                                dataType: 'json',
                                beforeSend: function () {
                                    $("#mensajes").hide();
                                },
                                complete: function () {

                                },
                                success: function (result) {
                                    sut.msg.success(result.mensaje, function () {
                                        //window.location = '/Simplificacion/Procedimiento/DatosGenerales/@Model.ProcedimientoId';
                                        window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;
                                    });
                                },
                                error: function (result) {
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        }
                    },
                    terminar: function () {
                        var valid = true;

                        if (valid) {
                            valid = $('#tblRequisito tbody tr').size() > 0;
                            if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un Requisito.');
                        }

                        if (valid) {
                            valid = $('#tblBaseLegal tbody tr').size() > 0;
                            if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un registro de Base Legal.');
                        }

                        if (valid) {
                            var tablas = $('#tblModalidad tbody tr td input[name$="Prestaciones"]');
                            $.each(tablas, (i, p) => {
                                if (Number($(p).val()) == 0) valid = false;
                            });
                            if (!valid) sut.error.clientErrorShow('mensajes', 'Debe indicar la cantidad de prestaciones.');
                        }

                        if (valid && !sut.editProcedimiento.esTupaEstandar) {
                            valid = $('#tblSede tbody tr').size() > 0;
                            if(!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos una Sede donde se atiende el trámite.');
                        }

                        if (valid) {
                            valid = $('#tblPasoSeguir tbody tr').size() > 0;
                            if (!valid) sut.error.clientErrorShow('mensajes', 'Debe indicar los pasos a seguir para la realización del trámite.');
                        }

                        if (valid) {
                            sut.msg.confirm('Si finaliza el registro no podrá modificarlo nuevamente.', () => {
                                if ($('#form-editar').valid()) {
                                    var model = $('#form-editar').serialize();
                                    $.ajax({
                                        type: 'POST',
                                        //url: '/Simplificacion/Procedimiento/DatosGenerales',
                                        url: '@Url.Content("~/Simplificacion/Procedimiento/DatosGenerales")',
                                        data: model,
                                        dataType: 'json',
                                        beforeSend: function () {
                                            $("#mensajes").hide();
                                        },
                                        complete: function () {

                                        },
                                        success: function (result) {

                                            $.ajax({
                                                type: 'POST',
                                                //url: '/Simplificacion/Procedimiento/TerminarSustento',
                                                url: '@Url.Content("~/Simplificacion/Procedimiento/TerminarSustento")',
                                                data: {tipo: 1, ProcedimientoId: @Model.ProcedimientoId},
                                                dataType: 'json',
                                                beforeSend: function () {
                                                    $("#mensajes").hide();
                                                },
                                                complete: function () {

                                                },
                                                success: function (result) {
                                                    sut.msg.success(result.mensaje, function () {
                                                        //window.location = '/Simplificacion/Procedimiento/DatosGenerales/@Model.ProcedimientoId';
                                                        window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;
                                                    });
                                                },
                                                error: function (result) {
                                                    sut.error.show('mensajes', result.responseText);
                                                }
                                            });

                                        },
                                        error: function (result) {
                                            sut.error.show('mensajes', result.responseText);
                                        }
                                    });
                                }
                            });
                        }

                    },
                    activar : function(){
                        sut.msg.confirm('Si activa el registro podrá modificarlo nuevamente.', () => {
                            $.ajax({
                                type: 'POST',
                                //url: '/Simplificacion/Procedimiento/ActivarSustento',
                                url: '@Url.Content("~/Simplificacion/Procedimiento/ActivarSustento")',
                                data: {tipo: 1, ProcedimientoId: @Model.ProcedimientoId},
                                dataType: 'json',
                                beforeSend: function () {
                                    $("#mensajes").hide();
                                },
                                complete: function () {

                                },
                                success: function (result) {
                                    sut.msg.success(result.mensaje, function () {
                                        //window.location = '/Simplificacion/Procedimiento/DatosGenerales/@Model.ProcedimientoId';
                                        window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;
                                    });
                                    //showNotification('top', 'right', 'El Registro se Activo Satisfactoriamente', 1);
                                    //setTimeout("reFresh()", 800);
                                },
                                error: function (result) {
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        });

                    },
                    /*Validacion*/
                    ValObservarexp: {
                        validarObservarExp: function (idExpediente,procedimientoId,Descripcion,NombreCampo,Pantalla) {
                            //if ($('#'+Descripcion+'').val().trim()== ""){
                            //    showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                            //    return;
                            //}

                            debugger;
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': document.getElementById(''+Descripcion+'').innerHTML,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');

                                    $('#aValidarObservarExp'+NombreCampo+'').css("display","none");
                                    $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "");

                                    $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "none" });
                                    $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "none" });
                                    $('#mensaje'+NombreCampo+'').show();
                                    document.querySelector('#mensaje'+NombreCampo+'').innerText = 'Se valido con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        validarObservarExpModalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {


                            debugger;
                            var DesModalidad=$('#DesModalidad' + numero).val();

                            if(DesModalidad == undefined){
                                DesModalidad='';
                            }

                            var PreModalidad=$('#PreModalidad' + numero).val();

                            if(PreModalidad == undefined){
                                PreModalidad='';
                            }


                            var CostoModalidad=$('#CostoModalidad' + numero).val();

                            if(CostoModalidad == undefined){
                                CostoModalidad='';
                            }


                            var Descripcion = DesModalidad + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + PreModalidad + ";:;" + CostoModalidad;
                            //var Descripcion = $('#DesModalidad' + numero).val() + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + $('#PreModalidad' + numero ).val() + ";:;" + $('#CostoModalidad' + numero ).val();
                            var NombreCampo = 'Modalidad';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.TablaAsmeId': TablaAsmeId,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');

                                    $('#aValidarObservarExp' + NombreCampo + numero +'').css("display", "none");
                                    $('#aCancelarGeneralExp' + NombreCampo + numero + '').css("display", "");

                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aMasivoObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#mensajeModalidad' + numero).show();
                                    document.querySelector('#mensajeModalidad' + numero).innerText = 'Se valido con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        validarObservarExpRequisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {
                            debugger;


                            //var Descripcion = $('#Nombre' + numero).val();
                            var Descripcion = document.getElementById('Nombre'+numero+'').innerHTML
                            var NombreCampo = 'Requisitos';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.RequisitoId': RequisitoId,

                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');

                                    $('#aValidarObservarExp' + NombreCampo + numero + '').css("display", "none");
                                    $('#aCancelarGeneralExp' + NombreCampo + numero + '').css("display", "");

                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aMasivoObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#mensajeRequisitos' + numero).show();
                                    document.querySelector('#mensajeRequisitos' + numero).innerText = 'Se valido con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        validarObservarExpBaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {

                            debugger;
                            var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();
                            var NombreCampo = 'BaseLegal';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');

                                    $('#aValidarObservarExp' + NombreCampo + numero + '').css("display", "none");
                                    $('#aCancelarGeneralExp' + NombreCampo + numero + '').css("display", "");

                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aMasivoObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#mensajeBaseLegal' + numero).show();
                                    document.querySelector('#mensajeBaseLegal' + numero).innerText = 'Se valido con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        validarObservarExpReconsideracion: function (idExpediente, procedimientoId, Descripcion, NombreCampo, Pantalla) {
                            debugger;
                            //var Descripcion = $('#CargoReconsideracion').val() + ";:;" + $('#UndOrgReconsideracion_Nombre').val() + ";:;" + $('#PzoReconPresent').val() + ";:;" + $('#PzoReconResol').val();
                            var Descripcion = document.getElementById('CargoReconsideracion').innerHTML  + ";:;" + document.getElementById('UndOrgReconsideracion_Nombre').innerHTML + ";:;" + document.getElementById('PzoReconPresent').innerHTML + ";:;" + document.getElementById('PzoReconResol').innerHTML;
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');

                                    $('#aValidarObservarExp' + NombreCampo + '').css("display", "none");
                                    $('#aCancelarGeneralExp' + NombreCampo + '').css("display", "");

                                    $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "none" });
                                    $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                    $('#mensaje' + NombreCampo + '').show();
                                    document.querySelector('#mensaje' + NombreCampo + '').innerText = 'Se valido con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        validarObservarExpApelacion: function (idExpediente, procedimientoId, Descripcion, NombreCampo, Pantalla) {
                            debugger;
                            //var Descripcion = $('#CargoApelacion').val() + ";:;" + $('#UndOrgApelacion_Nombre').val() + ";:;" + $('#PzoApelPresent').val() + ";:;" + $('#PzoApelResol').val();
                            var Descripcion = document.getElementById('CargoApelacion').innerHTML  + ";:;" + document.getElementById('UndOrgApelacion_Nombre').innerHTML + ";:;" + document.getElementById('PzoApelPresent').innerHTML + ";:;" + document.getElementById('PzoApelResol').innerHTML;
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');

                                    $('#aValidarObservarExp' + NombreCampo + '').css("display", "none");
                                    $('#aCancelarGeneralExp' + NombreCampo + '').css("display", "");

                                    $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "none" });
                                    $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                    $('#mensaje' + NombreCampo + '').show();
                                    document.querySelector('#mensaje' + NombreCampo + '').innerText = 'Se valido con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        comentario: "",
                        observareditarExp: function (Descripcion1,Descripcion2,nombdiv,nombdivdetalle,NombreCampo,dato, titulo,numcol) {
                            debugger;


                            var rows = '';
                            rows += '<div id="'+nombdivdetalle+'">';
                            rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">'+titulo+'</label>';
                            rows += '<div class="col-sm-'+numcol+' col-xs-12">';

                            rows += sut.string.format('<td><label class="form-control" name="' + Descripcion1 + '"  id="' + Descripcion1 +'" style="border-color:green;background:#00a65a36;font-weight: 600;height: 100%;">{0}</label></td>', document.getElementById(''+dato+'').innerHTML );
                            rows += '</div>';
                            rows += '<br/>';
                            rows += '<br/>';
                            rows += '<br/>';
                            rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">Observar:</label>';
                            rows += '<div class="col-sm-' + numcol + ' col-xs-12">';
                            rows += sut.string.format('<td><textarea name="' + Descripcion2 + '" id="' + Descripcion2 + '" class="form-control"  onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustento(event,this);" style="border-color:red;background:#ff00002e;"></textarea></td>', '');
                            rows += '</div>';
                            rows += '</div>';

                            $('#'+nombdiv+'').append(rows);

                            $('#aAsignarGuardarObservarExp'+NombreCampo+'').css({ "display": "" });
                            $('#aAsignarCancelarObservarExp'+NombreCampo+'').css({ "display": "" });

                            $('#aValidarObservarExp'+NombreCampo+'').css("display","none");
                            $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "none");
                            $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "none" });
                            $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "" });

                            $('#'+dato+'').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#'+dato+'label').hide();


                            comentario = $("#txtaObservarExp").val();
                        },

                        comentario: "",
                        observareditarExpModalidad: function (num, numeromod) {
                            var tabla = $('#divModalidad0' + num + ' tbody');
                            debugger;
                            //var Descripcion = $('#DesModalidad' + num).val() + ";" + $('#chekModalidad' + num).val() + ";" + $('#PreModalidad' + num).val() + ";" + $('#CostoModalidad' + num).val();
                            var NombreCampo = 'Modalidad';
                            var rows = '';
                            //alert($('input:checkbox[id=chekModalidad' + num+']:checked').val());
                            //if ($('#chekModalidad' + num).prop('checked')) {
                            //    alert('Seleccionado');
                            //}
                            //if ($('#chekModalidad' + num).attr('checked')) {
                            //    alert('Seleccionado');
                            //}
                            //if ($('#chekModalidad' + num).attr('checked')) {
                            //    alert('Seleccionado');
                            //}
                            rows += sut.string.format('<tr data-index="{0}" id="trdivModalidad0' + num + '"  >', num);
                            rows += sut.string.format('<td style="width:100px;"> Modalidad :</td>');



                            var desmodalidad=$('#DesModalidad' + num).val();
                            //var descr='';
                            //if(desmodalidad!=null && desmodalidad!='null' ){
                            //    descr=desmodalidad;
                            //}
                            //rows += sut.string.format('<td style="width: 80%;"><input  style="border-color:green;background:#00a65a36;" type="text" id="DesModalidadD' + num + '"  value="{0}" class="form-control" readonly /></td>',descr , 'readonly');




                            debugger;
                            rows += sut.string.format('<td style="width: 80%;">');
                            if(numeromod > 1){
                                var descr='';
                                if(desmodalidad!=null && desmodalidad!='null' ){
                                    descr=desmodalidad;
                                }
                                rows += sut.string.format('<input type="text" name="TablaAsme[{0}].Descripcion" value="{1}" class="form-control" {2} />', i, descr, sut.editProcedimiento.esProcEstadar ? '' : '');
                            }


                            rows += sut.string.format('</td>');





                            rows += sut.string.format('<td style="width:120px"><input type="checkbox" id="chekModalidadD' + num + '"  {0} disabled /></td>', $('#chekModalidad' + num).prop('checked') ? 'checked' : '', 'disabled');

                            if (sut.editProcedimiento.esTupaEstandar) {
                                rows += sut.string.format('<td style="width:100px;"><input  style="border-color:green;background:#00a65a36;"  id="PreModalidadD' + num + '" value="{0}" class="form-control" type="number" min="1" readonly /></td>', $('#PreModalidad' + num).val());
                            } else if (sut.editProcedimiento.esCargaInicial) {
                                if (!sut.editProcedimiento.esProcEstadar) {
                                    rows += sut.string.format('<td style="width:100px;"><input  style="border-color:green;background:#00a65a36;" id="CostoModalidadD' + num + '" value="{0}" class="form-control" type="number" min="1" readonly /></td>', $('#CostoModalidad' + num).val());
                                }
                            } else {
                                if (!sut.editProcedimiento.esProcEstadar) {
                                    rows += sut.string.format('<td style="width:100px;"><input  style="border-color:green;background:#00a65a36;" id="PreModalidadD' + num + '"  value="{0}" class="form-control" type="number" min="1" readonly /></td>', $('#PreModalidad' + num).val());
                                }
                            }
                            rows += '<td><div class="btn-group">';

                            rows += '</div></td>';
                            rows += '</tr>'
                            rows += '<tr id="trdivModalidad0_' + num +'">'
                            rows += sut.string.format('<td style="width:100px;">Observar : </td>');
                            rows += sut.string.format('<td colspan="3" ><textarea name="Modalidad2' + num + '" id="Modalidad2' + num +'" onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustentomodalidad(event,this);" class="form-control" style="border-color:red;background:#ff00002e;"></textarea></td>', '');
                            rows += '</tr>';;

                            tabla.append(rows);

                            $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                            $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                            $('#aValidarObservarExp' + NombreCampo + num +  '').css("display", "none");
                            $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                            $('#aObservarEditarExp' + NombreCampo + num +'').css({ "display": "none" });
                            $('#aMasivoObservarExp' + NombreCampo + num +'').css({ "display": "" });

                            $('#trModalidad' + num +'').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            //$('#' + dato + 'label').hide();

                        },

                        comentario: "",
                        observareditarExpRequisitos: function (num) {
                            debugger;
                            var tabla = $('#divRequisitos0' + num + ' tbody');
                            debugger;
                            var NombreCampo = 'Requisitos';
                            var rows = '';

                            rows += sut.string.format('<tr data-index="{0}" id="trdivRequisitos0' + num + '">', num);
                            rows += sut.string.format('<td style="width:100px;">Descripción: </td>');
                            rows += sut.string.format('<td><label class="form-control" style="border-color:green;background:#00a65a36;font-weight: 600;height: 100%;"  name="NombreD' + num + '"  id="NombreD' + num + '">{0}</label> </td>', document.getElementById('Nombre' + num).innerHTML);
                            rows += '</tr>'

                            rows += '<tr id="trdivRequisitos0_' + num + '">'
                            rows += sut.string.format('<td style="width:100px;">Observar : </td>');
                            rows += sut.string.format('<td colspan="3" ><textarea name="Requisitos2' + num + '" id="Requisitos2' + num + '" onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustentorequisitos(event,this);" class="form-control" style="border-color:red;background:#ff00002e;"></textarea></td>', '');
                            rows += '</tr>';;

                            tabla.append(rows);

                            $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                            $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                            $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                            $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                            $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                            $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });

                            $('#trRequisitos' + num + '').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            //$('#' + dato + 'label').hide();

                        },

                        comentario: "",
                        observareditarExpBaseLegal: function (num) {

                            debugger;


                            document.getElementById('divBaseLegal0'+num+'').style.visibility = "initial";
                            var tabla = $('#divBaseLegal0' + num + ' tbody');
                            debugger;
                            var NombreCampo = 'BaseLegal';
                            var rows = '';


                            rows += sut.string.format('<tr data-index="{0}" id="trdivBaseLegal0' + num + '">', num);
                            var asd=$('#BDescripcionACR' + num).val();
                            if($('#BEstadoACR' + num).val()=="2")
                            {
                                rows += sut.string.format('<td style="width:4.4%;">Descripción: </td>');
                                rows += sut.string.format('<td colspan="6" style="border-color:#00a65a00;background:#00a65a36;width:10%">{0}</td>', $('#BDescripcionACR' + num).val());
                            }
                            else
                            {
                                rows += sut.string.format('<td>Descripción: </td>');
                                rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', $('#BArticulo' + num).val());
                                rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', $('#BDescripcion' + num).val());
                                rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', $('#BNormaTipo' + num).val());
                                rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', $('#BNumero' + num).val());
                                rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', $('#BFechaPublicacion' + num).val());
                                rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;"> </td>');

                            }




                            rows += '</tr>'

                            rows += '<tr id="trdivBaseLegal0_' + num + '">'
                            rows += sut.string.format('<td style="width:100px;"> Observar: </td>');
                            rows += sut.string.format('<td colspan="6" ><textarea name="BaseLegal2' + num + '"  onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustentobaselegal(event,this);" id="BaseLegal2' + num + '" class="form-control" style="border-color:red;background:#ff00002e;"></textarea></td>', '');
                            rows += '</tr>';;

                            tabla.append(rows);

                            $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                            $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                            $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                            $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                            $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                            $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });

                            $('#trBaseLegal' + num + '').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            //$('#' + dato + 'label').hide();

                        },
                        comentario: "",
                        observareditarExpReconsideracion: function (Descripcion1, Descripcion2, nombdiv, nombdivdetalle, NombreCampo, dato, titulo, numcol) {
                            debugger;
                            var rows = '';
                            rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                            rows += '<tbody>';
                            rows += '<tr>';
                            rows += '<td style="width: 120px;">'+titulo+'</td>';
                            rows += sut.string.format('<td style="text-align: center;"><textarea name="CargoReconsideracion"  id="CargoReconsideracion" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>',  document.getElementById('CargoReconsideracion').innerHTML);
                            rows += sut.string.format('<td style="text-align: center;"><textarea name="UndOrgReconsideracion_Nombre"  id="UndOrgReconsideracion_Nombre" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>',document.getElementById('UndOrgReconsideracion_Nombre').innerHTML);
                            rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoReconPresent"  id="PzoReconPresent" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', document.getElementById('PzoReconPresent').innerHTML);
                            rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoReconResol"  id="PzoReconResol" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>',document.getElementById('PzoReconResol').innerHTML);
                            rows += '</tr>';
                            rows += '<tr>';
                            rows += '<td style="width: 120px;">Observar</td>';
                            rows += sut.string.format('<td colspan="4" ><textarea name="Reconsideracion2" id="Reconsideracion2" onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustento(event,this);"  class="form-control" style="border-color:red;background:#ff00002e;"></textarea></td>', '');
                            rows += '</tr>';

                            rows += '</tbody>';
                            rows += '</table>';
                            $('#' + nombdiv + '').append(rows);

                            $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "" });
                            $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "" });

                            $('#aValidarObservarExp' + NombreCampo + '').css("display", "none");
                            $('#aCancelarGeneralExp' + NombreCampo + '').css("display", "none");
                            $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "none" });
                            $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "" });

                            $('#tablaReconsideracion1').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#' + dato + 'label').hide();


                            comentario = $("#txtaObservarExp").val();
                        },
                        observareditarExpApelacion: function (Descripcion1, Descripcion2, nombdiv, nombdivdetalle, NombreCampo, dato, titulo, numcol) {
                            debugger;
                            var rows = '';
                            rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                            rows += '<tbody>';
                            rows += '<tr>';
                            rows += '<td style="width: 120px;">'+titulo+'</td>';
                            rows += sut.string.format('<td style="text-align: center;"><textarea name="CargoApelacion"  id="CargoApelacion" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', document.getElementById('CargoApelacion').innerHTML);
                            rows += sut.string.format('<td style="text-align: center;"><textarea name="UndOrgApelacion_Nombre"  id="UndOrgApelacion_Nombre" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>',document.getElementById('UndOrgApelacion_Nombre').innerHTML);
                            rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoApelPresent"  id="PzoApelPresent" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>',document.getElementById('PzoApelPresent').innerHTML);
                            rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoApelResol"  id="PzoApelResol" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', document.getElementById('PzoApelResol').innerHTML);
                            rows += '</tr>';
                            rows += '<tr>';
                            rows += '<td style="width: 120px;">Observar</td>';
                            rows += sut.string.format('<td colspan="4" ><textarea name="Apelacion2" id="Apelacion2" class="form-control" onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustento(event,this);"  style="border-color:red;background:#ff00002e;"></textarea></td>', '');
                            rows += '</tr>';

                            rows += '</tbody>';
                            rows += '</table>';
                            $('#' + nombdiv + '').append(rows);

                            $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "" });
                            $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "" });

                            $('#aValidarObservarExp' + NombreCampo + '').css("display", "none");
                            $('#aCancelarGeneralExp' + NombreCampo + '').css("display", "none");
                            $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "none" });
                            $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "" });

                            $('#tablaApelacion1').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#' + dato + 'label').hide();


                            comentario = $("#txtaObservarExp").val();
                        },

                        sustentarObservarExp: function (Descripcion1,nombdiv,nombdivdetalle,NombreCampo,titulo,numcol) {

                            debugger;
                            var rows = '';
                            rows += '<div id="'+nombdivdetalle+'">';
                            rows += '<br/>';
                            rows += '<br/>';
                            rows += '<br/>';
                            rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">'+titulo+'</label>';
                            rows += '<div class=col-sm-'+numcol+' col-xs-12">';
                            rows += sut.string.format('<td><textarea name="' + Descripcion1 + '"  id="' + Descripcion1 +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;" readonly></textarea></td>');
                            rows += '</div>';
                            rows += '</div>';
                            $('#'+nombdiv+'').append(rows);

                            $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "none" });
                            $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "" });
                            $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "" });

                        },
                        masivoObservarExp: function (expedienteId, datocampo,nombre1,nombre2) {

                            debugger;

                            if ($('#' + nombre2 + '').val().trim() == "") {

                                showNotification('top', 'right', 'No puedes Guardar Masiva mente una obseración en blanco', 2);
                                return;
                            }
                            debugger;

                            $.ajax({
                                type: "GET",
                                //url: "/Simplificacion/Procedimiento/SelectMasivo",
                                url: '@Url.Content("~/Simplificacion/Procedimiento/SelectMasivo")',
                                data: { multi: true, expedienteId: expedienteId, datocampo: datocampo, fnAdd: 'sut.editProcedimiento.ValObservarexp.GuardarObservarMasiva', texto1 :  $('#' + nombre1).val(),texto2 :  $('#' + nombre2).val() },
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });



                        },


                        GuardarObservarMasiva: function (data) {

                            debugger;
                            var d = data;
                            for (i = 0; i < data.length; i++){
                                var ProcedimientoId=data[i].ProcedimientoId;
                                var condicion=data[i].datocampo;
                                var texto1=data[i].Texto1;
                                var texto2=data[i].Texto2;


                                sut.editProcedimiento.ValObservarexp.GuardarObservarMasiva2( ProcedimientoId,condicion,''+texto1+'',''+texto2+'');

                            }
                            location.reload();
                            comentario = "";
                        },

                        GuardarObservarMasiva2: function (ProcedimientoId,condicion,texto1,texto2) {

                            debugger;


                            var model = {
                                'filtro.ExpedienteId': @Model.ExpedienteId,
                                'filtro.ProcedimientoId': ProcedimientoId,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.Estado': '1',
                                'codval':condicion,
                                'texto1':texto1,
                                'texto2':texto2,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacionMasivo")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    sut.editProcedimiento.ValObservarexp.GuardarObservarMasiva3( ProcedimientoId,condicion,''+texto1+'',''+texto2+'');
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        GuardarObservarMasiva3: function ( ProcedimientoId,condicion,texto1,texto2) {
                            debugger;
                            var model = {
                                'filtro.ExpedienteId': @Model.ExpedienteId,
                                'filtro.ProcedimientoId': ProcedimientoId,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.Estado': '1',
                                'codval':condicion,
                                'texto1':texto1,
                                'texto2':texto2,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacionMasivo")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');
                                    location.reload();
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });


                            comentario = "";
                        },
                        CancelarGeneralExp: function (idExpediente,procedimientoId,idOpcion,Descripcion,NombreCampo,Pantalla) {

                            if(idOpcion==1){
                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': document.getElementById(''+Descripcion+'').innerHTML,
                                    'filtro.CodValidacion': '4',
                                    'filtro.TipoEstado': '4',
                                    'filtro.NombreCampo': NombreCampo,
                                    'filtro.Pantalla': Pantalla,
                                    'filtro.Estado': '1',
                                };
                            }

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');


                                    //$('#aValidarObservarExp'+NombreCampo+'').css("display","");
                                    $('#aObservarEditarExp'+NombreCampo+'').css("display", "");
                                    //$("#aSustentarObservarExpObjetivo").css("display","");
                                    //$("#aMasivoObservarExpObjetivo").css("display","");

                                    $('#aCancelarGeneralExp'+NombreCampo+'').css({ "display": "none" });

                                    $('#mensaje'+NombreCampo+'').hide();
                                    document.querySelector('#mensaje'+NombreCampo+'').innerText = '';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarGeneralExpReconsideracion: function (idExpediente, procedimientoId, idOpcion, Descripcion, NombreCampo, Pantalla) {
                            //var Descripcion = $('#CargoReconsideracion').val() + ";:;" + $('#UndOrgReconsideracion_Nombre').val() + ";:;" + $('#PzoReconPresent').val() + ";:;" + $('#PzoReconResol').val();
                            var Descripcion = document.getElementById('CargoReconsideracion').innerHTML  + ";:;" + document.getElementById('UndOrgReconsideracion_Nombre').innerHTML + ";:;" + document.getElementById('PzoReconPresent').innerHTML + ";:;" + document.getElementById('PzoReconResol').innerHTML;
                            if (idOpcion == 1) {
                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '4',
                                    'filtro.TipoEstado': '4',
                                    'filtro.NombreCampo': NombreCampo,
                                    'filtro.Pantalla': Pantalla,
                                    'filtro.Estado': '1',
                                };
                            }

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');


                                    //$('#aValidarObservarExp' + NombreCampo + '').css("display", "");
                                    $('#aObservarEditarExp' + NombreCampo + '').css("display", "");
                                    //$("#aSustentarObservarExpObjetivo").css("display","");
                                    //$("#aMasivoObservarExpObjetivo").css("display","");

                                    $('#aCancelarGeneralExp' + NombreCampo + '').css({ "display": "none" });

                                    $('#mensaje' + NombreCampo + '').hide();
                                    document.querySelector('#mensaje' + NombreCampo + '').innerText = '';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarGeneralExpApelacion: function (idExpediente, procedimientoId, idOpcion, Descripcion, NombreCampo, Pantalla) {
                            //var Descripcion = $('#CargoApelacion').val() + ";:;" + $('#UndOrgApelacion_Nombre').val() + ";:;" + $('#PzoApelPresent').val() + ";:;" + $('#PzoApelResol').val();
                            var Descripcion = document.getElementById('CargoApelacion').innerHTML  + ";:;" + document.getElementById('UndOrgApelacion_Nombre').innerHTML + ";:;" + document.getElementById('PzoApelPresent').innerHTML + ";:;" + document.getElementById('PzoApelResol').innerHTML;
                            if (idOpcion == 1) {
                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '4',
                                    'filtro.TipoEstado': '4',
                                    'filtro.NombreCampo': NombreCampo,
                                    'filtro.Pantalla': Pantalla,
                                    'filtro.Estado': '1',
                                };
                            }

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');


                                    //$('#aValidarObservarExp' + NombreCampo + '').css("display", "");
                                    $('#aObservarEditarExp' + NombreCampo + '').css("display", "");
                                    //$("#aSustentarObservarExpObjetivo").css("display","");
                                    //$("#aMasivoObservarExpObjetivo").css("display","");

                                    $('#aCancelarGeneralExp' + NombreCampo + '').css({ "display": "none" });

                                    $('#mensaje' + NombreCampo + '').hide();
                                    document.querySelector('#mensaje' + NombreCampo + '').innerText = '';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarGeneralExpModalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {



                            debugger;
                            var DesModalidad=$('#DesModalidad' + numero).val();

                            if(DesModalidad == undefined){
                                DesModalidad='';
                            }

                            var PreModalidad=$('#PreModalidad' + numero).val();

                            if(PreModalidad == undefined){
                                PreModalidad='';
                            }


                            var CostoModalidad=$('#CostoModalidad' + numero).val();

                            if(CostoModalidad == undefined){
                                CostoModalidad='';
                            }


                            var Descripcion = DesModalidad + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + PreModalidad + ";:;" + CostoModalidad;



                            //var Descripcion = $('#DesModalidad' + numero).val() + ";:;" + $('#chekModalidad' + numero).prop('checked') + ";:;" + $('#PreModalidad' + numero).val() + ";:;" + $('#CostoModalidad' + numero).val();
                            var NombreCampo = 'Modalidad';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.TablaAsmeId': TablaAsmeId,
                            };


                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');


                                    //$('#aValidarObservarExp' + NombreCampo + numero + '').css("display", "");
                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css("display", "");
                                    //$("#aSustentarObservarExpObjetivo").css("display","");
                                    //$("#aMasivoObservarExpObjetivo").css("display","");

                                    $('#aCancelarGeneralExp' + NombreCampo + numero + '').css({ "display": "none" });

                                    $('#mensajeModalidad' + numero + '').hide();
                                    document.querySelector('#mensajeModalidad' + numero + '').innerText = '';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarGeneralExpRequisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {


                            //var Descripcion = $('#Nombre' + numero).val().trim();
                            var Descripcion =  document.getElementById('Nombre'+numero+'').innerHTML
                            var NombreCampo = 'Requisitos';


                            debugger;
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.RequisitoId': RequisitoId,

                            };


                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');


                                    //$('#aValidarObservarExp' + NombreCampo + numero + '').css("display", "");
                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css("display", "");
                                    //$("#aSustentarObservarExpObjetivo").css("display","");
                                    //$("#aMasivoObservarExpObjetivo").css("display","");

                                    $('#aCancelarGeneralExp' + NombreCampo + numero + '').css({ "display": "none" });

                                    $('#mensajeRequisitos' + numero + '').hide();
                                    document.querySelector('#mensajeRequisitos' + numero + '').innerText = '';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarGeneralExpBaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {
                            var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();
                            var NombreCampo = 'BaseLegal';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };


                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');


                                    //$('#aValidarObservarExp' + NombreCampo + numero + '').css("display", "");
                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css("display", "");
                                    //$("#aSustentarObservarExpObjetivo").css("display","");
                                    //$("#aMasivoObservarExpObjetivo").css("display","");

                                    $('#aCancelarGeneralExp' + NombreCampo + numero + '').css({ "display": "none" });

                                    $('#mensajeBaseLegal' + numero + '').hide();
                                    document.querySelector('#mensajeBaseLegal' + numero + '').innerText = '';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        }
                    },

                    AsignarObservarexp: {
                        asignarguardarObservarExp: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {

                            if ($('#' + Descripcion2 + '').val().trim() == "") {

                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }
                            debugger;
                            sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp1(idExpediente,procedimientoId,Descripcion1,Descripcion2,NombreCampo,Pantalla);
                        },

                        GuardarObservarExp1: function (idExpediente,procedimientoId,Descripcion1,Descripcion2,NombreCampo,Pantalla) {
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': document.getElementById(''+Descripcion1+'').innerHTML,
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                success: function (data) {
                                    sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp2(idExpediente,procedimientoId,Descripcion1,Descripcion2,NombreCampo,Pantalla);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        GuardarObservarExp2: function (idExpediente,procedimientoId,Descripcion1,Descripcion2,NombreCampo,Pantalla) {
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#'+Descripcion2+'').val().trim(),
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');
                                    $("#aCancelarObservarExp").css({ "display": "none" });
                                    $("#aGuardarObservarExp").css({ "display": "none" });
                                    $("#aEditarObservarExp").css({ "display": "" });

                                    $('#mensaje'+NombreCampo+'').show();
                                    document.querySelector('#mensaje'+NombreCampo+'').innerText = 'Se observo con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        comentario: "",
                        asignarCancelarObservarExp: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {


                            debugger;
                            sut.editProcedimiento.AsignarObservarexp.CancelarObservacion1(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                        },
                        CancelarObservacion1: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            var descripcion=$('#' + Descripcion1 + '').val().trim();

                            if(descripcion!='')
                            {

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#' + Descripcion1 + '').val().trim(),
                                        'filtro.CodValidacion': '1',
                                        'filtro.TipoEstado': '1',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                    comentario = "";

                            }else {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                            }
                        },
                        CancelarObservacion2: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            var descripcion=$('#' + Descripcion2 + '').val().trim();

                            if(descripcion!='')
                            {

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#' + Descripcion2 + '').val().trim(),
                                        'filtro.CodValidacion': '2',
                                        'filtro.TipoEstado': '2',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                            }
                        },
                        CancelarObservacion3: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {
                            debugger;
                            var descripcion=$('#' + nomsustento + '').val();

                            if(descripcion == undefined){
                                descripcion='';
                            }


                            if(descripcion!='')
                            {

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#' + nomsustento + '').val().trim(),
                                        'filtro.CodValidacion': '3',
                                        'filtro.TipoEstado': '3',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {
                                        debugger;
                                        $('#modal-ventana').modal('hide');

                                        $('#' + nomcampo + '').show();
                                        //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                        //visible
                                        $('#' + nomcampo + 'label').show();

                                        //$('#aValidarObservarExp' + NombreCampo + '').css({ "display": "" });
                                        $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "" });

                                        $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                        $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "none" });
                                        $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "none" });

                                        $('#' + divsustento + '').remove();
                                        $('#' + nombdivdetalle + '').remove();
                                        $('#mensaje' + NombreCampo + '').hide();
                                        document.querySelector('#mensaje' + NombreCampo + '').innerText = '';




                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });


                                comentario = "";

                            }
                            else
                            {
                                debugger;
                                $('#modal-ventana').modal('hide');

                                $('#' + nomcampo + '').show();
                                //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                //visible
                                $('#' + nomcampo + 'label').show();

                                //$('#aValidarObservarExp' + NombreCampo + '').css({ "display": "" });
                                $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "" });

                                $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "none" });
                                $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "none" });

                                $('#' + divsustento + '').remove();
                                $('#' + nombdivdetalle + '').remove();
                                $('#mensaje' + NombreCampo + '').hide();
                                document.querySelector('#mensaje' + NombreCampo + '').innerText = '';
                            }
                        },
                        asignarguardarObservarExpReconsideracion: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {

                            if ($('#' + Descripcion2 + '').val().trim() == "") {

                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }
                            debugger;
                            sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp1Reconsideracion(idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla);
                        },

                        GuardarObservarExp1Reconsideracion: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {
                            var Descripcion = $('#CargoReconsideracion').val().trim() + ";:;" + $('#UndOrgReconsideracion_Nombre').val().trim() + ";:;" + $('#PzoReconPresent').val().trim() + ";:;" + $('#PzoReconResol').val().trim();

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion.trim(),
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                success: function (data) {
                                    sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp2Reconsideracion(idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        GuardarObservarExp2Reconsideracion: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {


                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#Reconsideracion2').val().trim(),
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');
                                    $("#aCancelarObservarExp").css({ "display": "none" });
                                    $("#aGuardarObservarExp").css({ "display": "none" });
                                    $("#aEditarObservarExp").css({ "display": "" });

                                    $('#mensaje' + NombreCampo + '').show();
                                    document.querySelector('#mensaje' + NombreCampo + '').innerText = 'Se observo con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        asignarguardarObservarExpApelacion: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {

                            if ($('#' + Descripcion2 + '').val() == "") {

                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }
                            debugger;
                            sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp1Apelacion(idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla);
                        },

                        GuardarObservarExp1Apelacion: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {
                            var Descripcion = $('#CargoApelacion').val() + ";:;" + $('#UndOrgApelacion_Nombre').val() + ";:;" + $('#PzoApelPresent').val() + ";:;" + $('#PzoApelResol').val();


                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                success: function (data) {
                                    sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp2Apelacion(idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        GuardarObservarExp2Apelacion: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#Apelacion2').val().trim(),
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');
                                    $("#aCancelarObservarExp").css({ "display": "none" });
                                    $("#aGuardarObservarExp").css({ "display": "none" });
                                    $("#aEditarObservarExp").css({ "display": "" });

                                    $('#mensaje' + NombreCampo + '').show();
                                    document.querySelector('#mensaje' + NombreCampo + '').innerText = 'Se observo con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        comentario: "",
                        asignarCancelarObservarExpReconsideracion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            sut.editProcedimiento.AsignarObservarexp.CancelarObservacion1Reconsideracion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                        },
                        CancelarObservacion1Reconsideracion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {
                            var Descripcion = $('#CargoReconsideracion').val() + ";:;" + $('#UndOrgReconsideracion_Nombre').val() + ";:;" + $('#PzoReconPresent').val() + ";:;" + $('#PzoReconResol').val();

                            debugger;
                            if(Descripcion!=''){


                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': Descripcion,
                                        'filtro.CodValidacion': '1',
                                        'filtro.TipoEstado': '1',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Reconsideracion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";

                            }else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Reconsideracion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                            }
                        },
                        CancelarObservacion2Reconsideracion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            debugger;
                            var descripcion=$('#Reconsideracion2').val();

                            if(descripcion.trim()!=''){

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#Reconsideracion2').val(),
                                        'filtro.CodValidacion': '2',
                                        'filtro.TipoEstado': '2',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Reconsideracion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Reconsideracion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                            }
                        },
                        CancelarObservacion3Reconsideracion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            debugger;
                            var descripcion=$('#' + nomsustento + '').val();

                            if(descripcion == undefined){
                                descripcion='';
                            }


                            if(descripcion!='')
                            {

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#' + nomsustento + '').val(),
                                        'filtro.CodValidacion': '3',
                                        'filtro.TipoEstado': '3',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {
                                        debugger;
                                        $('#modal-ventana').modal('hide');

                                        $('#tablaReconsideracion1').show();
                                        //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                        //visible
                                        $('#' + nomcampo + 'label').show();

                                        //$('#aValidarObservarExp' + NombreCampo + '').css({ "display": "" });
                                        $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "" });

                                        $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                        $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "none" });
                                        $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "none" });

                                        $('#' + divsustento + '').remove();
                                        $('#' + nombdivdetalle + '').remove();
                                        $('#mensaje' + NombreCampo + '').hide();
                                        document.querySelector('#mensaje' + NombreCampo + '').innerText = '';




                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });


                                comentario = "";
                            }else
                            {
                                debugger;
                                $('#modal-ventana').modal('hide');

                                $('#tablaReconsideracion1').show();
                                //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                //visible
                                $('#' + nomcampo + 'label').show();

                                //$('#aValidarObservarExp' + NombreCampo + '').css({ "display": "" });
                                $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "" });

                                $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "none" });
                                $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "none" });

                                $('#' + divsustento + '').remove();
                                $('#' + nombdivdetalle + '').remove();
                                $('#mensaje' + NombreCampo + '').hide();
                                document.querySelector('#mensaje' + NombreCampo + '').innerText = '';

                            }
                        } ,
                        comentario: "",
                        asignarCancelarObservarExpApelacion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            sut.editProcedimiento.AsignarObservarexp.CancelarObservacion1Apelacion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                        },
                        CancelarObservacion1Apelacion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {
                            var Descripcion = $('#CargoApelacion').val() + ";:;" + $('#UndOrgApelacion_Nombre').val() + ";:;" + $('#PzoApelPresent').val() + ";:;" + $('#PzoApelResol').val();

                            debugger;
                            if(Descripcion!='')
                            {

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': Descripcion,
                                        'filtro.CodValidacion': '1',
                                        'filtro.TipoEstado': '1',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Apelacion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }
                            else{
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Apelacion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                            }
                        },
                        CancelarObservacion2Apelacion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {
                            debugger;
                            var descripcion= $('#Apelacion2').val().trim();



                            if(descripcion.trim()!=''){

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#Apelacion2').val().trim(),
                                        'filtro.CodValidacion': '2',
                                        'filtro.TipoEstado': '2',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Apelacion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Apelacion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                            }
                        },
                        CancelarObservacion3Apelacion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            debugger;
                            var descripcion=$('#' + nomsustento + '').val();

                            if(descripcion == undefined){
                                descripcion='';
                            }


                            if(descripcion!='')
                            {


                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#' + nomsustento + '').val(),
                                        'filtro.CodValidacion': '3',
                                        'filtro.TipoEstado': '3',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {
                                        debugger;
                                        $('#modal-ventana').modal('hide');

                                        $('#tablaApelacion1').show();
                                        //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                        //visible
                                        $('#' + nomcampo + 'label').show();

                                        //$('#aValidarObservarExp' + NombreCampo + '').css({ "display": "" });
                                        $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "" });

                                        $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                        $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "none" });
                                        $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "none" });

                                        $('#' + divsustento + '').remove();
                                        $('#' + nombdivdetalle + '').remove();
                                        $('#mensaje' + NombreCampo + '').hide();
                                        document.querySelector('#mensaje' + NombreCampo + '').innerText = '';




                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });


                                comentario = "";
                            }else
                            {
                                debugger;
                                $('#modal-ventana').modal('hide');

                                $('#tablaApelacion1').show();
                                //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                //visible
                                $('#' + nomcampo + 'label').show();

                                //$('#aValidarObservarExp' + NombreCampo + '').css({ "display": "" });
                                $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "" });

                                $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "none" });
                                $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "none" });

                                $('#' + divsustento + '').remove();
                                $('#' + nombdivdetalle + '').remove();
                                $('#mensaje' + NombreCampo + '').hide();
                                document.querySelector('#mensaje' + NombreCampo + '').innerText = '';
                            }
                        },
                        ///*trabajar*/
                        asignarguardarObservarExpModalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {

                            if ($('#Modalidad2' + numero).val() == "") {

                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }
                            debugger;
                            sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp1Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);
                        },

                        GuardarObservarExp1Modalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {

                            debugger;
                            var DesModalidad=$('#DesModalidad' + numero).val();

                            if(DesModalidad == undefined){
                                DesModalidad='';
                            }

                            var PreModalidad=$('#PreModalidad' + numero).val();

                            if(PreModalidad == undefined){
                                PreModalidad='';
                            }


                            var CostoModalidad=$('#CostoModalidad' + numero).val();

                            if(CostoModalidad == undefined){
                                CostoModalidad='';
                            }


                            var Descripcion = DesModalidad + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + PreModalidad + ";:;" + CostoModalidad;



                            //var Descripcion = $('#DesModalidad' + numero).val() + ";" + $('#chekModalidad' + numero).prop('checked')+ ";" + $('#PreModalidad' + numero).val() + ";" + $('#CostoModalidad' + numero).val();

                            var NombreCampo = 'Modalidad';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.TablaAsmeId': TablaAsmeId,
                            };

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                success: function (data) {
                                    sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp2Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        GuardarObservarExp2Modalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {
                            var NombreCampo = 'Modalidad';
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#Modalidad2' + numero).val(),
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.TablaAsmeId': TablaAsmeId,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');


                                    $('#aCancelarObservarExp' + NombreCampo + numero + '').css("display", "none");
                                    $('#aGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aEditarObservarExp' + NombreCampo + numero + '').css({ "display": "" });

                                    $('#mensajeModalidad' + numero).show();
                                    document.querySelector('#mensajeModalidad' + numero).innerText = 'Se observo con éxito';


                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        ///*trabajar*/
                        asignarguardarObservarExpRequisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {

                            if ($('#Requisitos2' + numero).val().trim() == "") {

                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }
                            debugger;
                            sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp1Requisitos(idExpediente, procedimientoId, numero,RequisitoId);
                        },

                        GuardarObservarExp1Requisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {

                            //$('#Nombre' + numero).val().trim();
                            var Descripcion =  document.getElementById('Nombre' + numero).innerHTML;
                            var NombreCampo = 'Requisitos';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion.trim(),
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.RequisitoId': RequisitoId,

                            };

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                success: function (data) {
                                    sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp2Requisitos(idExpediente, procedimientoId, numero,RequisitoId);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        GuardarObservarExp2Requisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {
                            var NombreCampo = 'Requisitos';
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#Requisitos2' + numero).val(),
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.RequisitoId': RequisitoId,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');


                                    $('#aCancelarObservarExp' + NombreCampo + numero + '').css("display", "none");
                                    $('#aGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aEditarObservarExp' + NombreCampo + numero + '').css({ "display": "" });

                                    $('#mensajeRequisitos' + numero).show();
                                    document.querySelector('#mensajeRequisitos' + numero).innerText = 'Se observo con éxito';


                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        ///*trabajar*/
                        asignarguardarObservarExpBaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {
                            if ($('#BaseLegal2' + numero).val().trim() == "") {

                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }
                            debugger;
                            sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp1BaseLegal(idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId);
                        },

                        GuardarObservarExp1BaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {
                            debugger;
                            var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();

                            //var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();


                            var NombreCampo = 'BaseLegal';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                success: function (data) {
                                    sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp2BaseLegal(idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        GuardarObservarExp2BaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {
                            var NombreCampo = 'BaseLegal';
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#BaseLegal2' + numero).val(),
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');


                                    $('#aCancelarObservarExp' + NombreCampo + numero + '').css("display", "none");
                                    $('#aGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aEditarObservarExp' + NombreCampo + numero + '').css({ "display": "" });

                                    $('#mensajeBaseLegal' + numero).show();
                                    document.querySelector('#mensajeBaseLegal' + numero).innerText = 'Se observo con éxito';


                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        comentario: "",
                        asignarCancelarObservarExpModalidad: function (idExpediente, procedimientoId,numero,TablaAsmeId) {

                            sut.editProcedimiento.AsignarObservarexp.CancelarObservacion1Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);

                        },
                        CancelarObservacion1Modalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {

                            debugger;
                            var DesModalidad=$('#DesModalidad' + numero).val();

                            if(DesModalidad == undefined){
                                DesModalidad='';
                            }

                            var PreModalidad=$('#PreModalidad' + numero).val();

                            if(PreModalidad == undefined){
                                PreModalidad='';
                            }


                            var CostoModalidad=$('#CostoModalidad' + numero).val();

                            if(CostoModalidad == undefined){
                                CostoModalidad='';
                            }


                            var Descripcion = DesModalidad + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + PreModalidad + ";:;" + CostoModalidad;

                            debugger;
                            if(Descripcion!='')
                            {


                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '1',
                                    'filtro.TipoEstado': '1',
                                    'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                    'filtro.Pantalla': 'Datos Generales',
                                    'filtro.Estado': '1',
                                    'filtro.TablaAsmeId': TablaAsmeId,
                                };

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);
                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }
                            else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);
                            }
                        },
                        CancelarObservacion2Modalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {



                            debugger;
                            var DesModalidad=$('#DesModalidad' + numero).val();

                            if(DesModalidad == undefined){
                                DesModalidad='';
                            }

                            var PreModalidad=$('#PreModalidad' + numero).val();

                            if(PreModalidad == undefined){
                                PreModalidad='';
                            }


                            var CostoModalidad=$('#CostoModalidad' + numero).val();

                            if(CostoModalidad == undefined){
                                CostoModalidad='';
                            }


                            var Descripcion = DesModalidad + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + PreModalidad + ";:;" + CostoModalidad;

                            //var Descripcion = $('#DesModalidad' + numero).val() + ";" + $('#chekModalidad' + numero).prop('checked')+ ";" + $('#PreModalidad' + numero).val() + ";" + $('#CostoModalidad' + numero).val();


                            debugger;
                            if(Descripcion!='')
                            {

                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '2',
                                    'filtro.TipoEstado': '2',
                                    'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                    'filtro.Pantalla': 'Datos Generales',
                                    'filtro.Estado': '1',
                                    'filtro.TablaAsmeId': TablaAsmeId,
                                };


                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);

                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }else{
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);
                            }
                        },
                        CancelarObservacion3Modalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {

                            debugger;
                            var DesModalidad=$('#DesModalidad' + numero).val();

                            if(DesModalidad == undefined){
                                DesModalidad='';
                            }

                            var PreModalidad=$('#PreModalidad' + numero).val();

                            if(PreModalidad == undefined){
                                PreModalidad='';
                            }


                            var CostoModalidad=$('#CostoModalidad' + numero).val();

                            if(CostoModalidad == undefined){
                                CostoModalidad='';
                            }


                            var Descripcion = DesModalidad + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + PreModalidad + ";:;" + CostoModalidad;

                            //var Descripcion = $('#DesModalidad' + numero).val() + ";" + $('#chekModalidad' + numero).prop('checked')+ ";" + $('#PreModalidad' + numero).val() + ";" + $('#CostoModalidad' + numero).val();
                            var NombreCampo = 'Modalidad';


                            debugger;
                            if(Descripcion!='')
                            {


                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '3',
                                    'filtro.TipoEstado': '3',
                                    'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                    'filtro.Pantalla': 'Datos Generales',
                                    'filtro.Estado': '1',
                                    'filtro.TablaAsmeId': TablaAsmeId,
                                };

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {
                                        debugger;
                                        $('#modal-ventana').modal('hide');

                                        //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                        //visible
                                        $('#trModalidad' + numero + '').show();

                                        //$('#aValidarObservarExp' + NombreCampo + numero + '').css({ "display": "" });
                                        $('#aObservarEditarExp' + NombreCampo + numero +  '').css({ "display": "" });

                                        $('#aMasivoObservarExp' + NombreCampo + numero +  '').css({ "display": "none" });
                                        $('#aAsignarGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                        $('#aAsignarCancelarObservarExp' + NombreCampo + numero +  '').css({ "display": "none" });


                                        $('#trdivModalidad0' + numero + '').remove();
                                        $('#trdivModalidad0_' + numero + '').remove();
                                        $('#mensajeModalidad' + numero).hide();
                                        document.querySelector('#mensajeModalidad' + numero).innerText = '';



                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });


                                comentario = "";

                            }else
                            {
                                debugger;
                                $('#modal-ventana').modal('hide');

                                //visible
                                $('#trModalidad' + numero + '').show();

                                //$('#aValidarObservarExp' + NombreCampo + numero + '').css({ "display": "" });
                                $('#aObservarEditarExp' + NombreCampo + numero +  '').css({ "display": "" });

                                $('#aMasivoObservarExp' + NombreCampo + numero +  '').css({ "display": "none" });
                                $('#aAsignarGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                $('#aAsignarCancelarObservarExp' + NombreCampo + numero +  '').css({ "display": "none" });


                                $('#trdivModalidad0' + numero + '').remove();
                                $('#trdivModalidad0_' + numero + '').remove();
                                $('#mensajeModalidad' + numero).hide();
                                document.querySelector('#mensajeModalidad' + numero).innerText = '';

                            }
                        },
                        asignarCancelarObservarExpRequisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {

                            sut.editProcedimiento.AsignarObservarexp.CancelarObservacion1Requisitos(idExpediente, procedimientoId, numero,RequisitoId);

                        },
                        CancelarObservacion1Requisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {
                            debugger;

                            debugger;
                            //var Descripcion = $('#Nombre' + numero).val().trim();
                            var Descripcion =  document.getElementById('Nombre' + numero).innerHTML;
                            if(Descripcion.trim() != ''){

                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '1',
                                    'filtro.TipoEstado': '1',
                                    'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                    'filtro.Pantalla': 'Datos Generales',
                                    'filtro.Estado': '1',
                                    'filtro.RequisitoId': RequisitoId,


                                };

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Requisitos(idExpediente, procedimientoId, numero,RequisitoId);
                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Requisitos(idExpediente, procedimientoId, numero,RequisitoId);
                            }
                        },
                        CancelarObservacion2Requisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {
                            //var Descripcion = $('#Nombre' + numero).val().trim();
                            var Descripcion =  document.getElementById('Nombre' + numero).innerHTML;
                            debugger;
                            if(Descripcion.trim() != ''){
                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '2',
                                    'filtro.TipoEstado': '2',
                                    'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                    'filtro.Pantalla': 'Datos Generales',
                                    'filtro.Estado': '1',
                                    'filtro.RequisitoId': RequisitoId,
                                };


                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Requisitos(idExpediente, procedimientoId, numero,RequisitoId);

                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Requisitos(idExpediente, procedimientoId, numero,RequisitoId);
                            }
                        },
                        CancelarObservacion3Requisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {

                            debugger;
                            var Descripcion =  document.getElementById('Nombre' + numero).innerHTML;
                            //var Descripcion = $('#Nombre' + numero).val();
                            var NombreCampo = 'Requisitos';
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '3',
                                'filtro.TipoEstado': '3',
                                'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.RequisitoId': RequisitoId,
                            };


                            if(Descripcion != ''){

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {
                                        debugger;
                                        $('#modal-ventana').modal('hide');

                                        //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                        //visible
                                        $('#trRequisitos' + numero + '').show();

                                        //$('#aValidarObservarExp' + NombreCampo + numero + '').css({ "display": "" });
                                        $('#aObservarEditarExp' + NombreCampo + numero + '').css({ "display": "" });

                                        $('#aMasivoObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                        $('#aAsignarGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                        $('#aAsignarCancelarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });


                                        $('#trdivRequisitos0' + numero + '').remove();
                                        $('#trdivRequisitos0_' + numero + '').remove();
                                        $('#mensajeRequisitos' + numero).hide();
                                        document.querySelector('#mensajeRequisitos' + numero).innerText = '';



                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });


                                comentario = "";

                            }else
                            {

                                debugger;
                                $('#modal-ventana').modal('hide');

                                //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                //visible
                                $('#trRequisitos' + numero + '').show();

                                //$('#aValidarObservarExp' + NombreCampo + numero + '').css({ "display": "" });
                                $('#aObservarEditarExp' + NombreCampo + numero + '').css({ "display": "" });

                                $('#aMasivoObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                $('#aAsignarGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                $('#aAsignarCancelarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });


                                $('#trdivRequisitos0' + numero + '').remove();
                                $('#trdivRequisitos0_' + numero + '').remove();
                                $('#mensajeRequisitos' + numero).hide();
                                document.querySelector('#mensajeRequisitos' + numero).innerText = '';
                            }
                        },
                        asignarCancelarObservarExpBaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {

                            sut.editProcedimiento.AsignarObservarexp.CancelarObservacion1BaseLegal(idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId);

                        },
                        CancelarObservacion1BaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {

                            var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();


                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2BaseLegal(idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarObservacion2BaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {

                            var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();


                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };


                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3BaseLegal(idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId);

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarObservacion3BaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {
                            var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();
                            var NombreCampo = 'BaseLegal';
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '3',
                                'filtro.TipoEstado': '3',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');

                                    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                    //visible
                                    $('#trBaseLegal' + numero + '').show();

                                    //$('#aValidarObservarExp' + NombreCampo + numero + '').css({ "display": "" });
                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css({ "display": "" });

                                    $('#aMasivoObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aAsignarGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aAsignarCancelarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });


                                    $('#trdivBaseLegal0' + numero + '').remove();
                                    $('#trdivBaseLegal0_' + numero + '').remove();
                                    $('#mensajeBaseLegal' + numero).hide();
                                    document.querySelector('#mensajeBaseLegal' + numero).innerText = '';
                                    document.getElementById('divBaseLegal0'+numero+'').style.visibility = "collapse";


                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });


                            comentario = "";
                        }

                    },
                    AsignarSustentarexp: {
                        guardarSustentarExp: function (idExpediente,procedimientoId,Descripcion,NombreCampo,Pantalla) {
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#'+Descripcion+'').val(),
                                'filtro.CodValidacion': '3',
                                'filtro.TipoEstado': '3',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');

                                    $('#mensaje'+NombreCampo+'').show();
                                    document.querySelector('#mensaje'+NombreCampo+'').innerText = 'Sustento';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        comentario: "",
                        CancelarSustentarExp: function (idExpediente,procedimientoId,Descripcion,NombreCampo,Pantalla,nombdivdetalle) {

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#'+Descripcion+'').val(),
                                'filtro.CodValidacion': '3',
                                'filtro.TipoEstado': '3',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    debugger;
                                    $('#modal-ventana').modal('hide');

                                    $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "" });
                                    $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "none" });
                                    $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "none" });

                                    $('#'+nombdivdetalle+'').remove();
                                    $('#mensaje'+NombreCampo+'').show();
                                    document.querySelector('#mensaje'+NombreCampo+'').innerText = 'Se observo con éxito';


                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";



                        }
                    },

                    textoobservacion: function (Descripcion1,Descripcion2,nombdiv,nombdivdetalle,titulo,campo1,campo2,numcol,estado,nomcampo) {
                        debugger;
                        var rows = '';
                        rows += '<div id="'+nombdivdetalle+'">';
                        rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">'+titulo+' </label>';
                        rows += '<div class="col-sm-'+numcol+' col-xs-12">';
                        rows += sut.string.format('<td><label class="form-control" name="'+campo1+'"  id="'+campo1+'"  style="border-color:green;background:#00a65a36;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion1 );
                        rows += '</div>';
                        rows += '<br/>';
                        rows += '<br/>';
                        rows += '<br/>';
                        rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">Observar: </label>';
                        rows += '<div class="col-sm-'+numcol+' col-xs-12">';
                        rows += sut.string.format('<td><textarea name="' + campo2 + '" id="' + campo2 +'" class="form-control"  onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustento(event,this);" style="border-color:red;background:#ff00002e;">{0}</textarea></td>', Descripcion2);
                        rows += '</div>';
                        rows += '</div>';
                        $('#'+nombdiv+'').append(rows);

                        if(estado== 'Presentado'){
                            $('#'+nomcampo+'').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#'+nomcampo+'label').hide();

                        }else{
                            $('#'+nomcampo+'').show();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#'+nomcampo+'label').show();
                        }


                    },


                    textoobservacionReconsideracion: function (Descripcion1, Descripcion2, nombdiv, nombdivdetalle, titulo, campo1, campo2, numcol, estado, nomcampo) {

                        debugger;


                        var Des = Descripcion1.split(";:;");


                        var rows = '';
                        rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                        rows += '<tbody>';
                        rows += '<tr>';
                        rows += '<td style="width: 120px;">Reconsideración</td>';
                        rows += sut.string.format('<td style="text-align: center;"><textarea name="CargoReconsideracion"  id="CargoReconsideracion" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[0]);
                        rows += sut.string.format('<td style="text-align: center;"><textarea name="UndOrgReconsideracion_Nombre"  id="UndOrgReconsideracion_Nombre" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[1]);
                        rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoReconPresent"  id="PzoReconPresent" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[2]);
                        rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoReconResol"  id="PzoReconResol" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[3]);
                        rows += '</tr>';
                        rows += '<tr>';
                        rows += '<td style="width: 120px;">Observar</td>';
                        rows += sut.string.format('<td colspan="4" ><textarea name="Reconsideracion2"   onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustento(event,this);" id="Reconsideracion2" class="form-control" style="border-color:red;background:#ff00002e;">{0}</textarea></td>', Descripcion2);
                        rows += '</tr>';

                        rows += '</tbody>';
                        rows += '</table>';
                        $('#' + nombdiv + '').append(rows);


                        if (estado == 'Presentado') {
                            $('#' + nomcampo + '').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#' + nomcampo + 'label').hide();

                        } else {
                            $('#' + nomcampo + '').show();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#' + nomcampo + 'label').show();
                        }


                    },
                    textoobservacionApelacion: function (Descripcion1, Descripcion2, nombdiv, nombdivdetalle, titulo, campo1, campo2, numcol, estado, nomcampo) {

                        debugger;


                        var Des = Descripcion1.split(";:;");
                        var asdasd = Des[0];

                        var rows = '';
                        rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                        rows += '<tbody>';
                        rows += '<tr>';
                        rows += '<td style="width: 120px;">Apelacion</td>';
                        rows += sut.string.format('<td style="text-align: center;"><textarea name="CargoReconsideracion"  id="CargoReconsideracion" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[0]);
                        rows += sut.string.format('<td style="text-align: center;"><textarea name="UndOrgReconsideracion_Nombre"  id="UndOrgReconsideracion_Nombre" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[1]);
                        rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoReconPresent"  id="PzoReconPresent" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[2]);
                        rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoReconResol"  id="PzoReconResol" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[3]);
                        rows += '</tr>';
                        rows += '<tr>';
                        rows += '<td style="width: 120px;">Observar:</td>';
                        rows += sut.string.format('<td colspan="4" ><textarea name="Reconsideracion2" id="Apelacion2"  onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustento(event,this);" class="form-control" style="border-color:red;background:#ff00002e;">{0}</textarea></td>', Descripcion2);
                        rows += '</tr>';

                        rows += '</tbody>';
                        rows += '</table>';
                        $('#' + nombdiv + '').append(rows);


                        if (estado == 'Presentado') {
                            $('#' + nomcampo + '').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#' + nomcampo + 'label').hide();

                        } else {
                            $('#' + nomcampo + '').show();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#' + nomcampo + 'label').show();
                        }


                    },
                    textoobservacionModalidad: function (Descripcion, Descripcion2, estado, nomcampo, num,numeromod) {
                        debugger;

                        var Des = Descripcion.split(";:;");
                        var tabla = $('#divModalidad0' + num + ' tbody');
                        debugger;
                        //var Descripcion = $('#DesModalidad' + num).val() + ";" + $('#chekModalidad' + num).val() + ";" + $('#PreModalidad' + num).val() + ";" + $('#CostoModalidad' + num).val();
                        var NombreCampo = 'Modalidad';
                        var rows = '';



                        rows += sut.string.format('<tr data-index="{0}" id="trdivModalidad0' + num + '"  >', num);
                        rows += sut.string.format('<td style="width:100px;"> Modalidad :</td>');


                        var desmodalidad=Des[0];
                        debugger;
                        rows += sut.string.format('<td style="width: 80%;">');
                        if(numeromod > 1){
                            var descr='';
                            if(desmodalidad!=null && desmodalidad!='null' ){
                                descr=desmodalidad;
                            }
                            rows += sut.string.format('<input type="text"  style="border-color:green;background:#00a65a36;" id="DesModalidadD' + num + '"  value="{0}" class="form-control" readonly />', descr, 'readonly');
                        }


                        rows += sut.string.format('</td>');





                        if (Des[1]=='false')
                        {
                            Des[1]=0;
                        }
                        else
                        {
                            Des[1]=1
                        }

                        rows += sut.string.format('<td style="width:120px"><input   type="checkbox" id="chekModalidadD' + num + '"  {0} disabled /></td>', Des[1] ? 'checked' : '', 'disabled');

                        if (sut.editProcedimiento.esTupaEstandar) {
                            rows += sut.string.format('<td style="width:100px;"><input  id="PreModalidadD' + num + '" value="{0}" class="form-control" type="number" min="1" readonly /></td>', Des[2]);
                        } else if (sut.editProcedimiento.esCargaInicial) {
                            if (!sut.editProcedimiento.esProcEstadar) {
                                rows += sut.string.format('<td style="width:100px;"><input  style="border-color:green;background:#00a65a36;" id="CostoModalidadD' + num + '" value="{0}" class="form-control" type="number" min="1" readonly /></td>', Des[3]);
                            }
                        } else {
                            if (!sut.editProcedimiento.esProcEstadar) {
                                rows += sut.string.format('<td style="width:100px;"><input   style="border-color:green;background:#00a65a36;" id="PreModalidadD' + num + '"  value="{0}" class="form-control" type="number" min="1" readonly /></td>', Des[2]);
                            }
                        }
                        rows += '<td><div class="btn-group">';

                        rows += '</div></td>';
                        rows += '</tr>'
                        rows += '<tr id="trdivModalidad0_' + num + '">'
                        rows += sut.string.format('<td style="width:100px;">Observar :  </td>');
                        rows += sut.string.format('<td colspan="3" ><textarea name="Modalidad2' + num + '" id="Modalidad2' + num + '" class="form-control"   onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustentomodalidad(event,this);" style="border-color:red;background:#ff00002e;">{0}</textarea></td>', Descripcion2);
                        rows += '</tr>';;

                        tabla.append(rows);

                        $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                        $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                        $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                        $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                        $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                        $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });








                        //if (estado == 'Presentado') {
                        //    $('#' + nomcampo + '').hide();
                        //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                        //    //visible
                        //    $('#' + nomcampo + 'label').hide();

                        //} else {
                        //    $('#' + nomcampo + '').show();
                        //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                        //    //visible
                        //    $('#' + nomcampo + 'label').show();
                        //}


                    },

                    textoobservacionRequisitos: function (Descripcion, Descripcion2, estado, nomcampo, num) {
                        debugger;


                        var tabla = $('#divRequisitos0' + num + ' tbody');
                        debugger;
                        //var Descripcion = $('#DesRequisitos' + num).val() + ";" + $('#chekRequisitos' + num).val() + ";" + $('#PreRequisitos' + num).val() + ";" + $('#CostoRequisitos' + num).val();
                        var NombreCampo = 'Requisitos';
                        var rows = '';

                        rows += sut.string.format('<tr data-index="{0}" id="trdivRequisitos0' + num + '"  >', num);
                        rows += sut.string.format('<td style="width:100px;"> Descripción: </td>');
                        rows += sut.string.format('<td><label class="form-control"  style="border-color:green;background:#00a65a36;font-weight: 600;height: 100%;"  name="NombreD' + num + '" id="NombreD' + num + '" >{0}</label></td>', Descripcion);
                        rows += '</tr>'

                        rows += '<tr id="trdivRequisitos0_' + num + '">'
                        rows += sut.string.format('<td style="width:100px;">Observar : </td>');
                        rows += sut.string.format('<td colspan="3" ><textarea name="Requisitos2' + num + '" id="Requisitos2' + num + '"  onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustentorequisitos(event,this);" class="form-control" style="border-color:red;background:#ff00002e;">{0}</textarea></td>', Descripcion2);
                        rows += '</tr>';;

                        tabla.append(rows);


                        $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                        $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                        $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                        $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                        $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                        $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });




                        //if (estado == 'Presentado') {
                        //    $('#' + nomcampo + '').hide();
                        //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                        //    //visible
                        //    $('#' + nomcampo + 'label').hide();

                        //} else {
                        //    $('#' + nomcampo + '').show();
                        //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                        //    //visible
                        //    $('#' + nomcampo + 'label').show();
                        //}


                    },
                    textoobservacionBaseLegal: function (Descripcion, Descripcion2, estado, nomcampo, num) {
                        debugger;

                        var Des = Descripcion.split(";:;");
                        document.getElementById('divBaseLegal0'+num+'').style.visibility = "initial";
                        var tabla = $('#divBaseLegal0' + num + ' tbody');
                        debugger;
                        var NombreCampo = 'BaseLegal';
                        var rows = '';



                        rows += sut.string.format('<tr data-index="{0}" id="trdivBaseLegal0' + num + '">', num);
                        rows += sut.string.format('<td>Descripción: </td>');
                        rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', Des[4]);
                        rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', Des[2]);
                        rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', Des[0]);
                        rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', Des[1]);
                        rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', Des[3]);
                        rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;"> </td>');
                        rows += '</tr>'
                        rows += '<tr id="trdivBaseLegal0_' + num + '">'
                        rows += sut.string.format('<td style="width:100px;">Observar : </td>');
                        rows += sut.string.format('<td colspan="6" ><textarea name="BaseLegal2' + num + '" id="BaseLegal2' + num + '" onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustentobaselegal(event,this);" class="form-control"  onkeypress="javascript:sut.editProcedimiento.ObsVervisualizarSustento(event,this);" style="border-color:red;background:#ff00002e;">{0}</textarea></td>', Descripcion2);
                        rows += '</tr>';;

                        tabla.append(rows);

                        $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                        $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                        $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                        $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                        $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                        $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });



                        //if (estado == 'Presentado') {
                        //    $('#' + nomcampo + '').hide();
                        //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                        //    //visible
                        //    $('#' + nomcampo + 'label').hide();

                        //} else {
                        //    $('#' + nomcampo + '').show();
                        //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                        //    //visible
                        //    $('#' + nomcampo + 'label').show();
                        //}


                    },
                    textosustento: function (Descripcion1,nombdiv,nombdivdetalle,titulo,campo,numcol) {

                        debugger;
                        var rows = '';
                        rows += '<div id="'+nombdivdetalle+'">';
                        rows += '<br/>';
                        rows += '<br/>';
                        rows += '<br/>';
                        rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">'+titulo+'</label>';
                        rows += '<div class="col-sm-'+numcol+' col-xs-12">';
                        rows += sut.string.format('<td><textarea name="' + campo + '"  id="' + campo +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;" readonly >{0}</textarea></td>', Descripcion1 );
                        rows += '</div>';
                        rows += '</div>';
                        $('#'+nombdiv+'').append(rows);
                    },
                    textosustentoReconsideracion: function (Descripcion1,nombdiv,nombdivdetalle,titulo,campo,numcol) {

                        debugger;
                        var rows = '';


                        var rows = '';
                        rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                        rows += '<tbody>';
                        rows += '<tr>';
                        rows += '<div id="'+nombdivdetalle+'">';
                        rows += '<td style="width: 120px;">Reconsideración</td>';
                        rows += sut.string.format('<td colspan="4"><textarea name="' + campo + '"  id="' + campo +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;" readonly>{0}</textarea></td>', Descripcion1 );
                        rows += '</div>';
                        rows += '</div>';
                        rows += '</tr>';
                        rows += '</tbody>';
                        rows += '</table>';
                        $('#' + nombdiv + '').append(rows);

                    },
                    sustentarObservarExpApelacion: function (Descripcion1,nombdiv,nombdivdetalle,titulo,campo,numcol) {

                        debugger;
                        var NombreCampo='Apelacion';
                        var rows = '';
                        rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                        rows += '<tbody>';
                        rows += '<tr>';
                        rows += '<div id="'+nombdivdetalle+'">';
                        rows += '<td style="width: 120px;">Apelación</td>';
                        rows += sut.string.format('<td colspan="4"><textarea name="' + campo + '"  id="' + campo +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"readonly >{0}</textarea></td>', '' );
                        rows += '</div>';
                        rows += '</div>';
                        rows += '</tr>';
                        rows += '</tbody>';
                        rows += '</table>';
                        $('#' + nombdiv + '').append(rows);
                        $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "none" });
                        $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "" });
                        $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "" });

                    },
                    textosustentoModalidad: function (Descripcion2, estado, nomcampo, num) {


                        var tabla = $('#divModalidad0' + num + ' tbody');
                        debugger;
                        //var Descripcion = $('#DesModalidad' + num).val() + ";" + $('#chekModalidad' + num).val() + ";" + $('#PreModalidad' + num).val() + ";" + $('#CostoModalidad' + num).val();
                        var NombreCampo = 'Modalidad';
                        var rows = '';


                        rows += '<tr id="trdivModalidad0_' + num + '">'
                        rows += sut.string.format('<td style="width:100px;"> </td>');
                        rows += sut.string.format('<td colspan="3" ><textarea name="Modalidad2' + num + '" id="Modalidad2' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;" readonly>{0}</textarea></td>', Descripcion2);
                        //rows += sut.string.format('<td><textarea   id="Sustento' + num +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                        rows += '</tr>';;

                        tabla.append(rows);


                        $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                        $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                        $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                    },
                    textosustentoRequisitos: function (Descripcion2, estado, nomcampo, num) {


                        var tabla = $('#divRequisitos0' + num + ' tbody');
                        debugger;
                        //var Descripcion = $('#DesModalidad' + num).val() + ";" + $('#chekModalidad' + num).val() + ";" + $('#PreModalidad' + num).val() + ";" + $('#CostoModalidad' + num).val();
                        var NombreCampo = 'Requisitos';
                        var rows = '';


                        rows += '<tr id="trdivRequisitos0_' + num + '">'
                        rows += sut.string.format('<td style="width:100px;"> </td>');
                        rows += sut.string.format('<td colspan="3" ><textarea name="Requisitos2' + num + '" id="Requisitos2' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;" readonly>{0}</textarea></td>', Descripcion2);
                        //rows += sut.string.format('<td><textarea   id="Sustento' + num +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                        rows += '</tr>';;

                        tabla.append(rows);


                        $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                        $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                        $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                    },

                    textosustentoBaseLegal: function (Descripcion2, estado, nomcampo, num) {


                        var tabla = $('#divBaseLegal0' + num + ' tbody');
                        debugger;
                        //var Descripcion = $('#DesModalidad' + num).val() + ";" + $('#chekModalidad' + num).val() + ";" + $('#PreModalidad' + num).val() + ";" + $('#CostoModalidad' + num).val();
                        var NombreCampo = 'BaseLegal';
                        var rows = '';


                        rows += '<tr id="trdivBaseLegal0_' + num + '">'
                        rows += sut.string.format('<td style="width:100px;"> </td>');
                        rows += sut.string.format('<td colspan="12" ><textarea name="BaseLegal2' + num + '" id="BaseLegal2' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;" readonly>{0}</textarea></td>', Descripcion2);
                        //rows += sut.string.format('<td><textarea   id="Sustento' + num +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                        rows += '</tr>';;

                        tabla.append(rows);


                        $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                        $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                        $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                    },
                    /*fin de la validacion*/
                    Scroll: {
                        pos : 0,
                        init: () => {
                            debugger;
                            //$('.menu-compensador').css('height', $('#divBotones').height());
                            //sut.editProcedimiento.Scroll.pos = $('#divBotones').offset().top;
                            //window.onscroll = sut.editProcedimiento.Scroll.ejecutar;
                            //sut.editProcedimiento.Scroll.ejecutar();
                        },
                        ejecutar: () => {
                            var sc = window.pageYOffset;
                            var menu = $('#divBotones');
                            //var mot = menu.offset().top;
                            if (sc > sut.editProcedimiento.Scroll.pos) {
                                if (!menu.hasClass('fixed')) {
                                    menu.addClass('fixed');
                                    menu.appendTo($('.menu-fijo'));
                                    $('.menu-compensador').show();
                                }
                            } else if (menu.hasClass('fixed')) {
                                menu.removeClass('fixed');
                                menu.appendTo($('.menu-movil'));
                                $('.menu-compensador').hide();
                            }
                        },
                        getScrollOffsets: () => {
                            /* Esto funciona para todos los navegadores excepto para IE8 y anteriores */
                            if (window.pageXOffset != null) {
                                return {
                                    x: window.pageXOffset,
                                    y: window.pageYOffset
                                };
                            }

                            /* Funciona para navegadores standards */
                            var doc = window.document;
                            if (document.compatMode === "CSS1Compat") {
                                return {
                                    x: doc.documentElement.scrollLeft,
                                    y: doc.documentElement.scrollTop
                                };
                            }

                            /* Funciona para navegadores con compatibilidad con navegadores antiguos */
                            return {
                                x: doc.body.scrollLeft,
                                y: doc.body.scrollTop
                            };
                        }
                    }
                };

                $(function () {
                    sut.editProcedimiento.Scroll.init();

                    /*habilitar observación*/
                    $("#aCancelarObservarExp").css({ "display": "none" });
                    $("#aGuardarObservarExp").css({ "display": "none" });
                    $("#aEditarObservarExp").css({ "display": "" });
                    $("#txtaObservarExp").prop("disabled", true)

                    /*fin observación*/


                    /*Ocultar iconos generales*/

                    //$("#aCancelarGeneralExpObjetivo").css({ "display": "none" });
                    //$("#aAsignarGuardarObservarExpObjetivo").css({ "display": "none" });
                    //$("#aAsignarCancelarObservarExpObjetivo").css({ "display": "none" });
                    //$("#aGuardarSustentarExpObjetivo").css({ "display": "none" });
                    //$("#aCancelarSustentarExpObjetivo").css({ "display": "none" });
                    /*fin*/

                    $('a[href|="#edit"]').on('click', (e) => {
                        var href = $(e.target).attr('href');
                        sut.editProcedimiento.tab = href.substr(1, href.length - 1);
                    });



                    if (sut.editProcedimiento.tab == '') {
                        $('#edit-info-basica').addClass('active');
                        $('a[href="#edit-info-basica"]').parent().addClass('active');
                    } else {
                        $('#' + sut.editProcedimiento.tab).addClass('active');
                        $('a[href="#' + sut.editProcedimiento.tab + '"]').parent().addClass('active');
                    }


                    sut.editProcedimiento.Sede.init();
                    sut.editProcedimiento.Nota.init();
                    sut.editProcedimiento.PasoSeguir.init();
                    sut.editProcedimiento.Modalidad.init();
                    sut.editProcedimiento.Requisito.init();
                    sut.editProcedimiento.BaseLegal.init();

                    $.each($('#tblCanales input[type="checkbox"], #tblFormasPago input[type="checkbox"]'), (i, r) => {
                        var chk = $(r);
                        if(!chk.is(':checked')) {
                            chk.parent().next().next().find('input[type="text"]').attr('disabled', 'disabled').val('');
                        }
                    });

                    $('#tblCanales input[type="checkbox"], #tblFormasPago input[type="checkbox"]').on('change', (e) => {
                        var chk = $(e.target);
                        if(!chk.is(':checked')) {
                            chk.parent().next().next().find('input[type="text"]').attr('disabled', 'disabled').val('');
                        } else {
                            chk.parent().next().next().find('input[type="text"]').removeAttr('disabled');
                        }
                    });

                    $('#tblModalidad').on('change', 'tbody tr td input[name$="EsGratuito"]', null, (e) => {
                        var chk = $(e.target);
                        var txtPrestaciones = chk.parent().parent().find('input[name$="Prestaciones"]');
                        var txtCostoUnitario = chk.parent().parent().find('input[name$="CostoUnitario"]');
                        if (sut.editProcedimiento.esCargaInicial) {
                            if (chk.is(':checked')) {
                                txtCostoUnitario.val(0).attr('min', 0).attr('disabled', 'disabled');
                            } else {
                                txtCostoUnitario.val(0).attr('min', 1).removeAttr('disabled');
                            }
                        }
                    });

                    $('#form-editar').validate({
                        errorPlacement: function (error, element) {
                            if (element.parent('div.input-group').length > 0) {
                                error.insertAfter(element.parent('div.input-group'));
                            } else {
                                error.insertAfter(element);
                            }
                        },
                        //rules: {
                        //    PlazoAtencion : 'integer',
                        //    PzoReconPresent: 'integer',
                        //    PzoReconResol: 'integer',
                        //    PzoApelPresent: 'integer',
                        //    PzoApelResol: 'integer',
                        //    Correo: 'email',
                        //    Telefono: 'digits',
                        //    Anexo: 'digits'
                        //},
                        messages: {

                        }
                    });
                    var tempValue = $("#PlazoAtencion").val();
                    if (tempValue>30){
                        $("#idplazoantencion").css("display", "block");
                        $("#idplazoantencionObservar").css("display", "block");
                    }else{
                        $("#idplazoantencion").css("display", "none");
                        $("#idplazoantencionObservar").css("display", "none");
                    }



                });

                function reFresh() {

                    window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;
                }


                function observarbotones(NombreCampo) {
                    $('#aAsignarGuardarObservarExp'+NombreCampo+'').css({ "display": "" });
                    $('#aAsignarCancelarObservarExp'+NombreCampo+'').css({ "display": "" });

                    $('#aValidarObservarExp'+NombreCampo+'').css("display","none");
                    $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "none");
                    $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "none" });
                    $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "" });
                }
                function valiarbotones(NombreCampo) {
                    //$('#aValidarObservarExp'+NombreCampo+'').css("display","");
                    $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "");
                    $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "none" });
                    $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "none" });
                }
                function sustentobotones(NombreCampo) {


                    $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "none" });
                    $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "" });
                    $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "" });

                }
                function canceladobotones(NombreCampo) {
                    $('#aAsignarGuardarObservarExp'+NombreCampo+'').css({ "display": "none" });
                    $('#aAsignarCancelarObservarExp'+NombreCampo+'').css({ "display": "none" });
                    //$('#aValidarObservarExp'+NombreCampo+'').css("display","");
                    $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "none");
                    $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "" });
                    $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "none" });
                }


                function observarbotonesModalidad(NombreCampo,num) {
                    $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                    $('#aAsignarCancelarObservarExp' + NombreCampo + num +  '').css({ "display": "" });

                    $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                    $('#aCancelarGeneralExp' + NombreCampo +  num +'').css("display", "none");
                    $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                    $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });
                }
                function valiarbotonesModalidad(NombreCampo, num) {
                    //$('#aValidarObservarExp' + NombreCampo + num +  '').css("display", "");
                    $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "");
                    $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                    $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "none" });
                }
                function canceladobotonesModalidad(NombreCampo, num) {
                    $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "none" });
                    $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "none" });
                    //$('#aValidarObservarExp' + NombreCampo + num + '').css("display", "");
                    $('#aCancelarGeneralExp' + NombreCampo + num +  '').css("display", "none");
                    $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "" });
                    $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "none" });
                }


                function sustentobotonesModalidad(NombreCampo,num) {


                    $('#aSustentarObservarExp'+NombreCampo+ num +'').css({ "display": "none" });
                    $('#aGuardarSustentarExp'+NombreCampo+ num +'').css({ "display": "" });
                    $('#aCancelarSustentarExp'+NombreCampo+ num +'').css({ "display": "" });

                }


                function canceladobotonessustento(NombreCampo) {
                    $('#aSustentarObservarExp' + NombreCampo + '').css({ "display": "none" });
                }
    </script>
}
