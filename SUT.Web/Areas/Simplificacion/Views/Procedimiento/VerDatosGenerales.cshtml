@using Sut.Entities;
@model Sut.Entities.Procedimiento
@{
    Sut.Security.UsuarioInfo user = ViewBag.Usuario as Sut.Security.UsuarioInfo;
    List<Sut.Entities.Observacion> obs = ViewBag.Observacion as List<Sut.Entities.Observacion>;

    Sut.Entities.Expediente exp = ViewBag.Expediente as Sut.Entities.Expediente;
    ViewBag.Icon = "fa fa-file-text-o";
    ViewBag.Title = "Datos Generales - " + Model.CodigoCorto;
    ViewBag.Descripcion = "";
}
<div id="mensajes">
    @{Html.RenderPartial("_Error");}
</div>

@if (exp.EstadoExpediente == EstadoExpediente.Observado || exp.EstadoExpediente == EstadoExpediente.Subsanado || exp.EstadoExpediente == EstadoExpediente.Aprobado ||
                                exp.EstadoExpediente == EstadoExpediente.Presentado)
{
    <div class="box box-danger">
        <div class="box-body">
            <div class="col-sm-12 col-xs-12" style="border-color:red">

                <div class="pull-left col-sm-12 col-xs-12">

                    <fieldset class="scheduler-border">
                        <legend>
                            Información Complementaria a la Observación
                            <a class="btn btn-danger btn-xs" id="aEditarObservarExp" href="javascript:sut.editProcedimiento.Observarexp.editarObservarExp();" data-placement="right" title="Editar"><i class="fa fa-pencil"></i></a>
                            <a class="btn btn-primary btn-xs" id="aGuardarObservarExp" href="javascript:sut.editProcedimiento.Observarexp.guardarObservarExp(@exp.ExpedienteId,@Model.ProcedimientoId);"><i class="fa fa-floppy-o"></i></a>
                            <a class="btn btn-danger btn-xs" id="aCancelarObservarExp" href="javascript:sut.editProcedimiento.Observarexp.CancelarObservarExp();"><i class="fa fa-power-off"></i></a>
                            <label id="mensajedatos" style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>
                        </legend>
                        <br />
                        <div class="form-group">

                            @if (obs.Count != 0)
                            {
                                var count = 0;
                                foreach (var item in obs)
                                {
                                    if (@item.NombreCampo == "Nota de Ayuda Datos Generales")
                                    {
                                        <textarea rows="7" class="form-control" id="txtaObservarExp" style="border-color:red;background:#ff00002e;"> @item.Descripcion</textarea>
                                        count = 1;

                                        <script>
                                                            window.addEventListener("load", function () {


                                                                //$('#aValidarObservarExpDenominacion').css("display","none");
                                                                if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                {
                                                                    document.querySelector('#mensajedatos').innerText = 'Se valido con éxito';
                                                                }
                                                                else
                                                                {
                                                                    document.querySelector('#mensajedatos').innerText = '';
                                                                }

                                                            });
                                        </script>
                                    }


                                }
                                if (count == 0)
                                {
                                    <textarea rows="7" class="form-control" id="txtaObservarExp" style="border-color:red;background:#ff00002e;"></textarea>


                                }
                            }
                            else
                            {<textarea rows="7" class="form-control" id="txtaObservarExp" style="border-color:red;background:#ff00002e;"> </textarea>}
                        </div>

                    </fieldset>

                </div>

            </div>
        </div>
    </div>
}
@using (Html.BeginForm("DatosGenerales", "Procedimiento", new { @area = "Simplificacion" }, FormMethod.Post, new { @id = "form-editar" }))
{
    @Html.HiddenFor(model => model.ProcedimientoId)
    @Html.HiddenFor(model => model.ExpedienteId)
    @Html.HiddenFor(model => model.Codigo)
    @Html.HiddenFor(model => model.Operacion)
    @Html.HiddenFor(model => model.TipoProcedimiento)
    @Html.HiddenFor(model => model.CategoriaProcedimientoId)
    @Html.HiddenFor(model => model.TipoProcedimientoId)

    @Html.HiddenFor(model => model.SustentoEliminacion)
    @Html.HiddenFor(model => model.SustTecCalificacion)

    @Html.HiddenFor(model => model.DatosGeneralesTerminado)


    @Html.HiddenFor(model => model.Numero)
    @Html.HiddenFor(model => model.PlazoAtencionEstandar)
    @Html.HiddenFor(model => model.ObsDG)
    @Html.HiddenFor(model => model.ObsDGH)
    @Html.HiddenFor(model => model.ObsSTL)
    @Html.HiddenFor(model => model.ObsSTLH)
    @Html.HiddenFor(model => model.ObsASME)
    @Html.HiddenFor(model => model.ObsASMEH)


    <div class="box box-danger">
        <div class="box-body form-horizontal">
            @if (Model.Expediente.TipoExpediente != TipoExpediente.CargaInicial)
            {
                if (Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                {
                    /*Inicio*/
                    <div class="form-group">
                        <label class="col-sm-2 col-xs-12 control-label"></label>
                        <div class="col-sm-10 col-xs-12">
                            @if ((user.Rol == 8 || user.Rol == 6 || user.Rol == 7) && Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                            {
                                @*/*botones unicos*/*@
                                <a class="btn btn-success btn-xs" style="display:none" id="aValidarObservarExpDenominacion" data-placement="right" title="Validar" href="javascript:sut.editProcedimiento.ValObservarexp.validarObservarExp(@exp.ExpedienteId,@Model.ProcedimientoId,'Denominacion','Denominacion','Datos Generales');"><i class="fa fa-thumbs-o-up"></i></a>
                                <a class="btn btn-info btn-xs" id="aObservarEditarExpDenominacion" data-placement="right" title="Observar" href="javascript:sut.editProcedimiento.ValObservarexp.observareditarExp('Denominacion1','Denominacion2','divoDenominacion','divoDenominaciondetalle','Denominacion','Denominacion','Descripción:',10);"><i class="fa fa-eye"></i></a>

                                @*<a class="btn btn-info btn-xs" style="display:none" id="aMasivoObservarExpDenominacion" data-placement="right" title="Masivo" href="javascript:sut.editProcedimiento.ValObservarexp.masivoObservarExp(@exp.ExpedienteId,1,'Denominacion1','Denominacion2');"><i class="fa fa-comments-o"></i></a>*@

                                <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarGeneralExpDenominacion" data-placement="right" title="Quitar Validación" href="javascript:sut.editProcedimiento.ValObservarexp.CancelarGeneralExp(@exp.ExpedienteId,@Model.ProcedimientoId,1,'Denominacion','Denominacion','Datos Generales');"><i class="fa fa-power-off"></i></a>

                                <a class="btn btn-primary btn-xs" style="display:none" data-placement="right" title="Guardar" id="aAsignarGuardarObservarExpDenominacion" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarguardarObservarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'Denominacion1','Denominacion2','Denominacion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                <a class="btn btn-danger btn-xs" style="display:none" data-placement="right" title="Cancelar" id="aAsignarCancelarObservarExpDenominacion" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarCancelarObservarExp(@exp.ExpedienteId,@Model.ProcedimientoId,1,'Denominacion1','Denominacion2','Denominacion','Datos Generales','divoDenominaciondetalle','DenominacionSustento','divoDenominacionsustento','Denominacion');"><i class="fa fa-power-off"></i></a>
                                @*/*botones Generados*/*@
                            }


                            <label id="mensajeDenominacion" style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>

                            @if (obs.Count != 0)
                            {
                                var cont = 0;
                                var texto1 = "";
                                foreach (var item in obs)
                                {
                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Denominacion")
                                    {
                                        cont = 1;

                                        if (@item.CodValidacion == "1")
                                        {

                                            texto1 = @item.Descripcion;
                                        }
                                        else

                                        if (@item.CodValidacion == "4")
                                        {
                                            <script>
                                                            window.addEventListener("load", function () {

                                                                valiarbotones('Denominacion');
                                                                //$('#aValidarObservarExpDenominacion').css("display","none");
                                                                if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                {
                                                                    document.querySelector('#mensajeDenominacion').innerText = 'Se valido con éxito';
                                                                }
                                                                else
                                                                {
                                                                    document.querySelector('#mensajeDenominacion').innerText = '';
                                                                }

                                                            });
                                            </script>
                                        }
                                        else if (@item.CodValidacion == "2")
                                        {

                                            <script>

                                                            window.addEventListener("load", function() {
                                                                debugger;
                                                                observarbotones('Denominacion');
                                                                if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                {
                                                                    document.querySelector('#mensajeDenominacion').innerText = 'Se observo con éxito';
                                                                }
                                                                else
                                                                {
                                                                    document.querySelector('#mensajeDenominacion').innerText = '';
                                                                }

                                                                sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divoDenominacion','divoDenominaciondetalle','Descripción :','Denominacion1','Denominacion2',10,"@exp.EstadoExpediente",'Denominacion');

                                                            });
                                            </script>
                                        }
                                        else if (@item.CodValidacion == "5")
                                        {
                                            <script>
                                                window.addEventListener("load", function () {
                                                    canceladobotones('Denominacion');
                                                });
                                            </script>
                                        }
                                        else if (@item.CodValidacion == "3")
                                        {
                                            <script>

                                                            window.addEventListener("load", function () {
                                                                debugger;
                                                                if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                 { }
                                                                 else{ document.querySelector('#mensajeDenominacion').innerText = ''; }
                                                                     //document.querySelector('#mensajeDenominacion').innerText = 'Sustento';
                                                                     //sustentobotones('Denominacion');

                                                                     sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divoDenominacion','divoDenominacionsustento','Descripción :','DenominacionSustento',10);
                                                                 });
                                            </script>
                                        }

                                    }
                                }
                                if (cont == 0)
                                {
                                    <script>
                                        window.addEventListener("load", function () {
                                            canceladobotonessustento('Denominacion');
                                        });
                                    </script>
                                }
                            }

                        </div>
                    </div>
                    <div id="divoDenominacion">
                    </div>
                    /*Fin*/
                }
            }
            <div class="form-group">
                <label class="col-sm-2 col-xs-12 control-label" for="Denominacion">Denominación :</label>
                <div class="col-sm-10 col-xs-12">
                    @if (!ViewBag.EsTupaEstandar && Model.TipoProcedimiento != TipoProcedimiento.Estandar)
                    {
                        @Html.TextBoxFor(model => model.Denominacion, new { @class = "form-control", @readonly = true })
                    }
                    else if (ViewBag.EsTupaEstandar && Model.TipoProcedimiento == TipoProcedimiento.Estandar)
                    {
                        @Html.TextBoxFor(model => model.Denominacion, new { @class = "form-control", @readonly = true })
                    }
                    else
                    {
                        @Html.TextBoxFor(model => model.Denominacion, new { @class = "form-control", @readonly = true })
                    }
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 col-xs-12 control-label">Tipo :</label>
                <div class="col-sm-10 col-xs-12">
                    @Html.TipoProcedimiento(Model.TipoProcedimiento)
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 col-xs-12 control-label">Dependencia a Cargo :</label>
                <div class="col-sm-10 col-xs-12">
                    @Html.HiddenFor(model => model.UndOrgResponsableId)
                    @Html.TextBoxFor(model => model.UndOrgResponsable.Nombre, new { @class = "form-control", @readonly = "readonly" })
                </div>
            </div>
            @if (@Model.CargoPordependencia != "")
            {
                <div class="form-group">
                    <label class="col-sm-2 col-xs-12 control-label">Otras Dependecias a Cargo :</label>
                    <div class="col-sm-10 col-xs-12">
                        <div>
                            @Html.TextAreaFor(model => model.CargoPordependencia, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @readonly = "readonly", Required = true })

                        </div>
                    </div>
                </div>
            }
        </div>
    </div>


    <div class="box box-default">
        <div class="box-body">
            <div class="nav-tabs-custom">
                <ul class="nav nav-tabs">
                    <li>
                        <a href="#edit-info-basica" data-toggle="tab" aria-expanded="false" style="border-radius: 10px;"><i class="fa fa-file"></i> Información Básica</a>
                    </li>
                    <li>
                        <a href="#edit-modalidades" data-toggle="tab" aria-expanded="false" style="border-radius: 10px;"><i class="fa fa-table"></i> Modalidades de Atención</a>
                    </li>
                    <li>
                        <a href="#edit-requisitos" data-toggle="tab" aria-expanded="false" style="border-radius: 10px;"><i class="fa fa-copy"></i> Requisitos</a>
                    </li>
                    <li>
                        <a href="#edit-base-legal" data-toggle="tab" aria-expanded="false" style="border-radius: 10px;"><i class="fa fa-legal"></i> Base Legal del PA/SE</a>
                    </li>
                </ul>
                <div class="tab-content ">
                    <div id="edit-info-basica" class="tab-pane">
                        <div class="form-horizontal">
                            @if (Model.Expediente.TipoExpediente != TipoExpediente.CargaInicial)
                            {
                                if (Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                                {
                                    /*Inicio*/
                                    <div class="form-group">
                                        <label class="col-sm-2 col-xs-12 control-label"></label>
                                        <div class="col-sm-10 col-xs-12">
                                            @if ((user.Rol == 8 || user.Rol == 6 || user.Rol == 7) && Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                                            {
                                                @*/*botones unicos*/*@
                                                <a class="btn btn-success btn-xs" style="display:none" id="aValidarObservarExpObjetivo" data-placement="right" title="Validar" href="javascript:sut.editProcedimiento.ValObservarexp.validarObservarExp(@exp.ExpedienteId,@Model.ProcedimientoId,'Objetivo','Objetivo','Datos Generales');"><i class="fa fa-thumbs-o-up"></i></a>
                                                <a class="btn btn-info btn-xs" id="aObservarEditarExpObjetivo" data-placement="right" title="Observar" href="javascript:sut.editProcedimiento.ValObservarexp.observareditarExp('Objetivo1','Objetivo2','divobjeto','divobjetodetalle','Objetivo','Objetivo','Descripción:',10);"><i class="fa fa-eye"></i></a>

                                                <a class="btn btn-info btn-xs" style="display:none" id="aMasivoObservarExpObjetivo" data-placement="right" title="Masivo" href="javascript:sut.editProcedimiento.ValObservarexp.masivoObservarExp(@exp.ExpedienteId,1,'Objetivo1','Objetivo2');"><i class="fa fa-comments-o"></i></a>

                                                <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarGeneralExpObjetivo" data-placement="right" title="Quitar Validación" href="javascript:sut.editProcedimiento.ValObservarexp.CancelarGeneralExp(@exp.ExpedienteId,@Model.ProcedimientoId,1,'Objetivo','Objetivo','Datos Generales');"><i class="fa fa-power-off"></i></a>

                                                <a class="btn btn-primary btn-xs" style="display:none" data-placement="right" title="Guardar" id="aAsignarGuardarObservarExpObjetivo" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarguardarObservarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'Objetivo1','Objetivo2','Objetivo','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                                <a class="btn btn-danger btn-xs" style="display:none" data-placement="right" title="Cancelar" id="aAsignarCancelarObservarExpObjetivo" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarCancelarObservarExp(@exp.ExpedienteId,@Model.ProcedimientoId,1,'Objetivo1','Objetivo2','Objetivo','Datos Generales','divobjetodetalle','ObjetivoSustento','divobjetosustento','Objetivo');"><i class="fa fa-power-off"></i></a>
                                                @*/*botones Generados*/*@
                                            } 


                                            <label id="mensajeObjetivo" style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>

                                            @if (obs.Count != 0)
                                            {
                                                var cont = 0;
                                                var texto1 = "";
                                                foreach (var item in obs)
                                                {
                                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Objetivo")
                                                    {
                                                        cont = 1;

                                                        if (@item.CodValidacion == "1")
                                                        {

                                                            texto1 = @item.Descripcion;
                                                        }
                                                        else

                                                        if (@item.CodValidacion == "4")
                                                        {
                                                            <script>
                                                            window.addEventListener("load", function () {

                                                                valiarbotones('Objetivo');
                                                                //$('#aValidarObservarExpObjetivo').css("display","none");
                                                                if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                {
                                                                    document.querySelector('#mensajeObjetivo').innerText = 'Se valido con éxito';
                                                                }
                                                                else
                                                                {
                                                                    document.querySelector('#mensajeObjetivo').innerText = '';
                                                                }

                                                            });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "2")
                                                        {

                                                            <script>

                                                            window.addEventListener("load", function() {
                                                               
                                                                observarbotones('Objetivo');
                                                                if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                {
                                                                    document.querySelector('#mensajeObjetivo').innerText = 'Se observo con éxito';
                                                                }
                                                                else
                                                                {
                                                                    document.querySelector('#mensajeObjetivo').innerText = '';
                                                                }

                                                                sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divobjeto','divobjetodetalle','Descripción :','Objetivo1','Objetivo2',10,"@exp.EstadoExpediente",'Objetivo');

                                                            });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "5")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    canceladobotones('Objetivo');
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "3")
                                                        {
                                                            <script>

                                                            window.addEventListener("load", function () {
                                                               
                                                                if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                 { }
                                                                 else{ document.querySelector('#mensajeObjetivo').innerText = ''; }
                                                                     //document.querySelector('#mensajeObjetivo').innerText = 'Sustento';
                                                                     //sustentobotones('Objetivo');

                                                                     sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divobjeto','divobjetosustento','Descripción :','ObjetivoSustento',10);
                                                                 });
                                                            </script>
                                                        }

                                                    }
                                                }
                                                if (cont == 0)
                                                {
                                                    <script>
                                                        window.addEventListener("load", function () {
                                                            canceladobotonessustento('Objetivo');
                                                        });
                                                    </script>
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div id="divobjeto">
                                    </div>
                                    /*Fin*/
                                }
                            }

                            <div class="form-group">
                                <label class="col-sm-2 col-xs-12 control-label" id="Objetivolabel" for="Objetivo">Descripción :</label>

                                <div class="col-sm-10 col-xs-12">

                                    @*@if (!ViewBag.EsTupaEstandar && Model.TipoProcedimiento != TipoProcedimiento.Estandar)
                    {

                        <label  id="Objetivo" name="Objetivo" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;height: 100%;">@Html.DisplayFor(model => model.Objetivo)</label>
                    }
                    else if (ViewBag.EsTupaEstandar && Model.TipoProcedimiento == TipoProcedimiento.Estandar)
                    {
                        <label  id="Objetivo" name="Objetivo" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;height: 100%;">@Html.TextBoxFor(model => model.Objetivo)</label>
                    }
                    else
                    {*@
                                    <label id="Objetivo" name="Objetivo" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;height: 100%;">@Html.DisplayFor(model => model.Objetivo)</label>
                                    @*}*@

                                    @*@if (!ViewBag.EsTupaEstandar && Model.TipoProcedimiento != TipoProcedimiento.Estandar)
                    {

                        @Html.TextAreaFor(model => model.Objetivo, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @readonly = true })
                    }
                    else if (ViewBag.EsTupaEstandar && Model.TipoProcedimiento == TipoProcedimiento.Estandar)
                    {
                        @Html.TextAreaFor(model => model.Objetivo, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @readonly = true })
                    }
                    else
                    {
                        @Html.TextAreaFor(model => model.Objetivo, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @readonly = true })
                    }*@
                                </div>

                            </div>

                            @if (Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                            {
                                if ((Model.TipoProcedimiento != TipoProcedimiento.Servicio && Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio))
                                {
                                    @*/*Inicio Calificacion*/*@
                                    <div class="form-group">
                                        <label class="col-sm-2 col-xs-12 control-label"></label>
                                        <div class="col-sm-10 col-xs-12">
                                            @if ((user.Rol == 8 || user.Rol == 6 || user.Rol == 7) && Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                                            {
                                                @*/*botones unicos*/*@
                                                <a class="btn btn-success btn-xs" style="display:none" id="aValidarObservarExpCalificacion" data-placement="right" title="Validar" href="javascript:sut.editProcedimiento.ValObservarexp.validarObservarExp(@exp.ExpedienteId,@Model.ProcedimientoId,'NombreCalificacion','Calificacion','Datos Generales');"><i class="fa fa-thumbs-o-up"></i></a>

                                                <a class="btn btn-info btn-xs" id="aObservarEditarExpCalificacion" data-placement="right" title="Observar" href="javascript:sut.editProcedimiento.ValObservarexp.observareditarExp('Calificacion1','Calificacion2','divCalificacion','divCalificaciondetalle','Calificacion','NombreCalificacion','Calificación :',4);"><i class="fa fa-eye"></i></a>


                                                <a class="btn btn-info btn-xs" style="display:none" id="aMasivoObservarExpCalificacion" data-placement="right" title="Masivo" href="javascript:sut.editProcedimiento.ValObservarexp.masivoObservarExp(@exp.ExpedienteId,2,'Calificacion1','Calificacion2');"><i class="fa fa-comments-o"></i></a>

                                                <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarGeneralExpCalificacion" data-placement="right" title="Quitar Validación" href="javascript:sut.editProcedimiento.ValObservarexp.CancelarGeneralExp(@exp.ExpedienteId,@Model.ProcedimientoId,1,'NombreCalificacion','Calificacion','Datos Generales');"><i class="fa fa-power-off"></i></a>

                                                <a class="btn btn-primary btn-xs" style="display:none" data-placement="right" title="Guardar" id="aAsignarGuardarObservarExpCalificacion" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarguardarObservarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'Calificacion1','Calificacion2','Calificacion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                                <a class="btn btn-danger btn-xs" style="display:none" data-placement="right" title="Cancelar" id="aAsignarCancelarObservarExpCalificacion" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarCancelarObservarExp(@exp.ExpedienteId,@Model.ProcedimientoId,1,'Calificacion1','Calificacion2','Calificacion','Datos Generales','divCalificaciondetalle','CalificacionSustento','divCalificacionSustento','NombreCalificacion');"><i class="fa fa-power-off"></i></a>
                                                @*/*botones Generados*/*@


                                            }
                                            @*else if (exp.EstadoExpediente == EstadoExpediente.Observado && Model.DatosGeneralesTerminado == false)
                            {
                                if (obs.Count != 0)
                                {
                                    <a class="btn btn-warning btn-xs" id="aSustentarObservarExpCalificacion"  data-placement="right" title="Sustentar" href="javascript:sut.editProcedimiento.ValObservarexp.sustentarObservarExp('CalificacionSustento','divCalificacion','divCalificacionSustento','Calificacion','Calificación :',4);"><i class="fa fa-exclamation"></i></a>

                                    /*botones unicos sustentar*/
                                    <a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpCalificacion" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'CalificacionSustento','Calificacion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                    <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpCalificacion" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'CalificacionSustento','Calificacion','Datos Generales','divCalificacionSustento');"><i class="fa fa-power-off"></i></a>
                                    /*botones Generados*/
                                }
                            }*@
                                            <label id="mensajeCalificacion" style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>

                                            @if (obs.Count != 0)
                                            {
                                                var cont = 0;
                                                var texto1 = "";
                                                foreach (var item in obs)
                                                {
                                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Calificacion")
                                                    {
                                                        cont = 1;

                                                        if (@item.CodValidacion == "1")
                                                        {

                                                            texto1 = @item.Descripcion;
                                                        }
                                                        else

                                                        if (@item.CodValidacion == "4")
                                                        {
                                                            <script>
                                                            window.addEventListener("load", function () {
                                                                valiarbotones('Calificacion');
                                                                $('#aValidarObservarExpCalificacion').css("display","none");
                                                                if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                {
                                                                    document.querySelector('#mensajeCalificacion').innerText = 'Se valido con éxito';
                                                                }
                                                                else
                                                                {
                                                                    document.querySelector('#mensajeCalificacion').innerText = '';
                                                                }

                                                            });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "2")
                                                        {

                                                            <script>


                                                            window.addEventListener("load", function() {
                                                                observarbotones('Calificacion');
                                                                if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                {
                                                                    document.querySelector('#mensajeCalificacion').innerText = 'Se observo con éxito';
                                                                }
                                                                else
                                                                {
                                                                    document.querySelector('#mensajeCalificacion').innerText = '';
                                                                }

                                                                sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divCalificacion','divCalificaciondetalle','Calificación :','Calificacion1','Calificacion2',4, "@exp.EstadoExpediente",'NombreCalificacion');
                                                            });
                                                            </script>
                                                        }

                                                        else if (@item.CodValidacion == "5")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    canceladobotones('Calificacion');
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "3")
                                                        {
                                                            <script>

                                                            window.addEventListener("load", function() {
                                                               
                                                            if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                            { }
                                                            else{ document.querySelector('#mensajeCalificacion').innerText = ''; }
                                                                //sustentobotones('Calificacion');
                                                                //document.querySelector('#mensajeCalificacion').innerText = 'Sustento';
                                                                sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divCalificacion','divCalificacionSustento','Calificación :','CalificacionSustento',4);
                                                            });
                                                            </script>
                                                        }
                                                    }
                                                }
                                                if (cont == 0)
                                                {
                                                    <script>
                                                        window.addEventListener("load", function () {
                                                            canceladobotonessustento('Calificacion');
                                                        });
                                                    </script>
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div id="divCalificacion">
                                    </div>
                                    @*/*Fin*/*@
                                }
                            }

                            <div class="form-group">
                                @if (Model.TipoProcedimiento == TipoProcedimiento.Servicio || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio)
                                {
                                    <div class="col-sm-6"></div>
                                    @Html.HiddenFor(model => model.Calificacion)
                                }
                                else
                                {
                                    <label class="col-sm-2 col-xs-12 control-label" id="NombreCalificacionlabel">Calificación :</label>
                                    <div class="col-sm-4 col-xs-12">
                                        @Html.HiddenFor(model => model.Calificacion)
                                        @{
                                            string calificacion = string.Empty;
                                            List<SelectListItem> lstCalificacion = ViewBag.Calificacion as List<SelectListItem>;
                                            calificacion = lstCalificacion.First(x => x.Value == ((short)Model.Calificacion).ToString()).Text;
                                        }


                                        @*<label id="NombreCalificacion" name="NombreCalificacion" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.Calificacion)</label>*@
                                        <label id="NombreCalificacion" name="NombreCalificacion" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@calificacion</label>

                                        @*@Html.TextBox("NombreCalificacion", calificacion, new { @class = "form-control", @readonly = true })*@
                                    </div>
                                }
                            </div>
                            @if (Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                            {
                                @*/*Inicio PlazoAtencion*/*@
                                <div class="form-group">
                                    <label class="col-sm-2 col-xs-12 control-label"></label>
                                    <div class="col-sm-10 col-xs-12">
                                        @if ((user.Rol == 8 || user.Rol == 6 || user.Rol == 7) && Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                                        {
                                            @*/*botones unicos*/*@
                                            <a class="btn btn-success btn-xs" style="display:none" id="aValidarObservarExpPlazoAtencion" data-placement="right" title="Validar" href="javascript:sut.editProcedimiento.ValObservarexp.validarObservarExp(@exp.ExpedienteId,@Model.ProcedimientoId,'PlazoAtencion','PlazoAtencion','Datos Generales');"><i class="fa fa-thumbs-o-up"></i></a>

                                            <a class="btn btn-info btn-xs" id="aObservarEditarExpPlazoAtencion" data-placement="right" title="Observar" href="javascript:sut.editProcedimiento.ValObservarexp.observareditarExp('PlazoAtencion1','PlazoAtencion2','divPlazoAtencion','divPlazoAtenciondetalle','PlazoAtencion','PlazoAtencion','Plazo de Atención :',4);"><i class="fa fa-eye"></i></a>


                                            <a class="btn btn-info btn-xs" style="display:none" id="aMasivoObservarExpPlazoAtencion" data-placement="right" title="Masivo" href="javascript:sut.editProcedimiento.ValObservarexp.masivoObservarExp(@exp.ExpedienteId,3,'PlazoAtencion1','PlazoAtencion2');"><i class="fa fa-comments-o"></i></a>

                                            <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarGeneralExpPlazoAtencion" data-placement="right" title="Quitar Validación" href="javascript:sut.editProcedimiento.ValObservarexp.CancelarGeneralExp(@exp.ExpedienteId,@Model.ProcedimientoId,1,'PlazoAtencion','PlazoAtencion','Datos Generales');"><i class="fa fa-power-off"></i></a>

                                            <a class="btn btn-primary btn-xs" style="display:none" data-placement="right" title="Guardar" id="aAsignarGuardarObservarExpPlazoAtencion" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarguardarObservarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'PlazoAtencion1','PlazoAtencion2','PlazoAtencion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                            <a class="btn btn-danger btn-xs" style="display:none" data-placement="right" title="Cancelar" id="aAsignarCancelarObservarExpPlazoAtencion" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarCancelarObservarExp(@exp.ExpedienteId,@Model.ProcedimientoId,1,'PlazoAtencion1','PlazoAtencion2','PlazoAtencion','Datos Generales','divPlazoAtenciondetalle','PlazoAtencionSustento','divPlazoAtencionSustento','PlazoAtencion');"><i class="fa fa-power-off"></i></a>
                                            @*/*botones Generados*/*@


                                        }
                                        @*else if (exp.EstadoExpediente == EstadoExpediente.Observado && Model.DatosGeneralesTerminado == false)
                        {
                            if (obs.Count != 0)
                            {
                                <a class="btn btn-warning btn-xs" id="aSustentarObservarExpPlazoAtencion"  data-placement="right" title="Sustentar" href="javascript:sut.editProcedimiento.ValObservarexp.sustentarObservarExp('PlazoAtencionSustento','divPlazoAtencion','divPlazoAtencionSustento','PlazoAtencion','Plazo de Atención :',4);"><i class="fa fa-exclamation"></i></a>

                                /*botones unicos sustentar*/
                                <a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpPlazoAtencion" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'PlazoAtencionSustento','PlazoAtencion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpPlazoAtencion" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'PlazoAtencionSustento','PlazoAtencion','Datos Generales','divPlazoAtencionSustento');"><i class="fa fa-power-off"></i></a>
                                /*botones Generados*/
                            }
                        }*@
                                        <label id="mensajePlazoAtencion" style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>

                                        @if (obs.Count != 0)
                                        {
                                            var cont = 0;
                                            var texto1 = "";
                                            foreach (var item in obs)
                                            {
                                                if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "PlazoAtencion")
                                                {
                                                    cont = 1;

                                                    if (@item.CodValidacion == "1")
                                                    {

                                                        texto1 = @item.Descripcion;
                                                    }
                                                    else

                                                    if (@item.CodValidacion == "4")
                                                    {
                                                        <script>
                                                        window.addEventListener("load", function () {
                                                            valiarbotones('PlazoAtencion');
                                                            $('#aValidarObservarExpPlazoAtencion').css("display","none");
                                                            if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                            {
                                                                document.querySelector('#mensajePlazoAtencion').innerText = 'Se valido con éxito';
                                                            }
                                                            else
                                                            {
                                                                document.querySelector('#mensajePlazoAtencion').innerText = '';
                                                            }

                                                        });
                                                        </script>
                                                    }
                                                    else if (@item.CodValidacion == "2")
                                                    {

                                                        <script>


                                                        window.addEventListener("load", function() {
                                                            observarbotones('PlazoAtencion');
                                                            if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                            {
                                                                document.querySelector('#mensajePlazoAtencion').innerText = 'Se observo con éxito';
                                                            }
                                                            else
                                                            {
                                                                document.querySelector('#mensajePlazoAtencion').innerText = '';
                                                            }

                                                            sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divPlazoAtencion','divPlazoAtenciondetalle','Plazo de Atención :','PlazoAtencion1','PlazoAtencion2',4, "@exp.EstadoExpediente",'PlazoAtencion');
                                                        });
                                                        </script>
                                                    }

                                                    else if (@item.CodValidacion == "5")
                                                    {
                                                        <script>
                                                            window.addEventListener("load", function () {
                                                                canceladobotones('PlazoAtencion');
                                                            });
                                                        </script>
                                                    }
                                                    else if (@item.CodValidacion == "3")
                                                    {
                                                        <script>

                                                        window.addEventListener("load", function() {
                                                           
                                                            if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                            { }
                                                            else{ document.querySelector('#mensajePlazoAtencion').innerText = ''; }

                                                            //sustentobotones('PlazoAtencion');
                                                            //document.querySelector('#mensajePlazoAtencion').innerText = 'Sustento';
                                                            sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divPlazoAtencion','divPlazoAtencionSustento','Plazo de Atención :','PlazoAtencionSustento',4);
                                                        });
                                                        </script>
                                                    }
                                                }
                                            }
                                            if (cont == 0)
                                            {
                                                <script>
                                                    window.addEventListener("load", function () {
                                                        canceladobotonessustento('PlazoAtencion');
                                                    });
                                                </script>
                                            }
                                        }

                                    </div>
                                </div>
                                <div id="divPlazoAtencion">
                                </div>
                                @*/*Fin*/*@
                            }
                            <div class="form-group">
                                <label class="col-sm-2 col-xs-12 control-label" id="PlazoAtencionlabel" for="PlazoAtencion">Plazo de Atención :</label>
                                <div class="col-sm-4 col-xs-1">
                                    @*<div class="input-group col-sm-4 col-xs-1">*@
                                    <label id="PlazoAtencion" name="PlazoAtencion" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.PlazoAtencion)</label>

                                    @*<div class="input-group-addon"  style="padding: 0px 4px;border: 0px">
                    @Html.HiddenFor(model => model.TipoPlazo)
                    @{
                        string TipoPlazo = string.Empty;
                        List<SelectListItem> lstTipoPlazo = ViewBag.tipoplazo as List<SelectListItem>;
                        TipoPlazo = lstTipoPlazo.First(x => x.Value == ((short)Model.TipoPlazo).ToString()).Text;
                    }
                        <label id="NombreTipoPlazo" name="NombreTipoPlazo" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.TipoPlazo)</label>
                    </div>*@
                                </div>

                                @*@Html.DropDownListFor(model => model.TipoPlazo, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })*@

                                @*FVN Inicio*@
                                <div class="col-sm-1 col-xs-1" style="width: 24.7%;">
                                    @Html.DropDownListFor(model => model.TipoPlazo, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control", style = "width: 32%", disabled = "disabled" })
                                </div>



                            </div>
                            @*/*Inicio Baselegal*/*@
                            <div id="idplazoantencionObservar">
                                <div class="form-group">
                                    <label class="col-sm-2 col-xs-12 control-label"></label>
                                    <div class="col-sm-10 col-xs-12">
                                        @if ((user.Rol == 8 || user.Rol == 6 || user.Rol == 7) && Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                                        {
                                            @*/*botones unicos*/*@
                                            <a class="btn btn-success btn-xs" style="display:none" id="aValidarObservarExpBaselegal" data-placement="right" title="Validar" href="javascript:sut.editProcedimiento.ValObservarexp.validarObservarExp(@exp.ExpedienteId,@Model.ProcedimientoId,'Baselegal','Baselegal','Datos Generales');"><i class="fa fa-thumbs-o-up"></i></a>

                                            <a class="btn btn-info btn-xs" id="aObservarEditarExpBaselegal" data-placement="right" title="Observar" href="javascript:sut.editProcedimiento.ValObservarexp.observareditarExp('Baselegal1','Baselegal2','divBaselegal','divBaselegaldetalle','Baselegal','SustentoPlazo','Base legal del Plazo de Atención:',4);"><i class="fa fa-eye"></i></a>


                                            <a class="btn btn-info btn-xs" style="display:none" id="aMasivoObservarExpBaselegal" data-placement="right" title="Masivo" href="javascript:sut.editProcedimiento.ValObservarexp.masivoObservarExp(@exp.ExpedienteId,4,'Baselegal1','Baselegal2');"><i class="fa fa-comments-o"></i></a>

                                            <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarGeneralExpBaselegal" data-placement="right" title="Quitar Validación" href="javascript:sut.editProcedimiento.ValObservarexp.CancelarGeneralExp(@exp.ExpedienteId,@Model.ProcedimientoId,1,'SustentoPlazo','Baselegal','Datos Generales');"><i class="fa fa-power-off"></i></a>

                                            <a class="btn btn-primary btn-xs" style="display:none" data-placement="right" title="Guardar" id="aAsignarGuardarObservarExpBaselegal" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarguardarObservarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'Baselegal1','Baselegal2','Baselegal','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                            <a class="btn btn-danger btn-xs" style="display:none" data-placement="right" title="Cancelar" id="aAsignarCancelarObservarExpBaselegal" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarCancelarObservarExp(@exp.ExpedienteId,@Model.ProcedimientoId,1,'Baselegal1','Baselegal2','Baselegal','Datos Generales','divBaselegaldetalle','BaselegalSustento','divBaselegalSustento','SustentoPlazo');"><i class="fa fa-power-off"></i></a>
                                            @*/*botones Generados*/*@


                                        }
                                        @*else if (exp.EstadoExpediente == EstadoExpediente.Observado && Model.DatosGeneralesTerminado == false)
                        {
                            if (obs.Count != 0)
                            {
                                <a class="btn btn-warning btn-xs" id="aSustentarObservarExpBaselegal"  data-placement="right" title="Sustentar" href="javascript:sut.editProcedimiento.ValObservarexp.sustentarObservarExp('BaselegalSustento','divBaselegal','divBaselegalSustento','Baselegal','Base legal del Plazo de Atención:',4);"><i class="fa fa-exclamation"></i></a>

                                /*botones unicos sustentar*/
                                <a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpBaselegal" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'BaselegalSustento','Baselegal','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpBaselegal" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'BaselegalSustento','Baselegal','Datos Generales','divBaselegalSustento');"><i class="fa fa-power-off"></i></a>
                                /*botones Generados*/
                            }
                        }*@
                                        <label id="mensajeBaselegal" style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>

                                        @if (obs.Count != 0)
                                        {
                                            var cont = 0;
                                            var texto1 = "";
                                            foreach (var item in obs)
                                            {
                                                if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Baselegal")
                                                {
                                                    cont = 1;

                                                    if (@item.CodValidacion == "1")
                                                    {

                                                        texto1 = @item.Descripcion;
                                                    }
                                                    else

                                                    if (@item.CodValidacion == "4")
                                                    {
                                                        <script>
                                                            window.addEventListener("load", function () {
                                                                valiarbotones('Baselegal');
                                                                if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                {
                                                                    document.querySelector('#mensajeBaselegal').innerText = 'Se valido con éxito';
                                                                }
                                                                else
                                                                {
                                                                    document.querySelector('#mensajeBaselegal').innerText = '';
                                                                }

                                                            });
                                                        </script>
                                                    }
                                                    else if (@item.CodValidacion == "2")
                                                    {

                                                        <script>


                                                            window.addEventListener("load", function() {
                                                                observarbotones('Baselegal');
                                                                if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                {
                                                                    document.querySelector('#mensajeBaselegal').innerText = 'Se observo con éxito';
                                                                }
                                                                else
                                                                {
                                                                    document.querySelector('#mensajeBaselegal').innerText = '';
                                                                }

                                                                sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divBaselegal','divBaselegaldetalle','Base legal del Plazo de Atención:','Baselegal1','Baselegal2',4, "@exp.EstadoExpediente",'SustentoPlazo');
                                                            });
                                                        </script>
                                                    }

                                                    else if (@item.CodValidacion == "5")
                                                    {
                                                        <script>
                                                            window.addEventListener("load", function () {
                                                                canceladobotones('Baselegal');
                                                            });
                                                        </script>
                                                    }
                                                    else if (@item.CodValidacion == "3")
                                                    {
                                                        <script>

                                                            window.addEventListener("load", function() {
                                                               
                                                                if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                { }
                                                                else{ document.querySelector('#mensajeBaselegal').innerText = ''; }
                                                                //sustentobotones('Baselegal');
                                                                //document.querySelector('#mensajeBaselegal').innerText = 'Sustento';
                                                                sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divBaselegal','divBaselegalSustento','Base legal del Plazo de Atención:','BaselegalSustento',4);
                                                            });
                                                        </script>
                                                    }
                                                }
                                            }
                                            if (cont == 0)
                                            {
                                                <script>
                                                    window.addEventListener("load", function () {
                                                        canceladobotonessustento('Baselegal');
                                                    });
                                                </script>
                                            }
                                        }

                                    </div>
                                </div>
                                <div id="divBaselegal">
                                </div>
                            </div>
                            @*/*Fin*/*@
                        </div>

                        @if (Model.Activar == 1 || Model.listplazoatencion.Count() > 0)
                        {
                            <div class="form-group"> 
                                <label class="col-sm-2 col-xs-12 control-label" for="PlazoAtencion"></label>
                                <div class="col-sm-4 col-xs-12">
                                    <table id="tblPlazoAtencion" data-formtable="0" class="table table-condensed table-bordered">
                                        <thead>
                                            <tr> 
                                                <th style="width:40px;"></th> 
                                                <th style="width:400px;">Descripción</th>
                                                <th style="width:60px;">Plazo</th>
                                                <th style="width:90px;">Tipo Plazo</th> 
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @if (Model.listplazoatencion.Count() > 0)
                                            {
                                                int i = 0;
                                                foreach (PlazoAtencion p in Model.listplazoatencion)
                                                {
                                                    <tr>
                                                        <td style="width:40px;">@MvcHtmlString.Create((++i).ToString())</td>
                                                        <td style="width:400px;">@p.Descripcion</td>
                                                        <td style="width:60px;">@p.Plazo</td>
                                                        <td style="width:90px;">@p.TipoPlazo </td> 
                                                    </tr>
                                                }
                                            }
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                            <br><br><br> <br><br><br> <br><br>
                        }
                         
                        @if (Model.TipoProcedimiento != TipoProcedimiento.Servicio && Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)
                        {

                            <hr />
                            <div class="table-responsive">
                                <table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">
                                    <thead>
                                        <tr>
                                            <th style="width: 120px;"></th>
                                            <th style="text-align: center;width: 40%;">Cargo</th>
                                            <th style="text-align: center;">Unidad de Organización</th>
                                            <th style="text-align: center; width: 100px;">Presentar</th>
                                            <th style="text-align: center; width: 150px;"></th>
                                            <th style="text-align: center; width: 100px;">Resolver</th>
                                            <th style="text-align: center; width: 150px;"></th>
                                        </tr>
                                    </thead>
                                </table>

                                @if (Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                                {
                                    @*/*Inicio Reconsideracion*/*@
                                    <div class="form-group">
                                        @*<label class="col-sm-2 col-xs-12 control-label"></label>*@
                                        <div class="col-sm-10 col-xs-12">
                                            @if ((user.Rol == 8 || user.Rol == 6 || user.Rol == 7) && Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                                            {
                                                @*/*botones unicos*/*@
                                                <a class="btn btn-success btn-xs" style="display:none" id="aValidarObservarExpReconsideracion" data-placement="right" title="Validar" href="javascript:sut.editProcedimiento.ValObservarexp.validarObservarExpReconsideracion(@exp.ExpedienteId,@Model.ProcedimientoId,'Reconsideracion','Reconsideracion','Datos Generales');"><i class="fa fa-thumbs-o-up"></i></a>

                                                <a class="btn btn-info btn-xs" id="aObservarEditarExpReconsideracion" data-placement="right" title="Observar" href="javascript:sut.editProcedimiento.ValObservarexp.observareditarExpReconsideracion('Reconsideracion1','Reconsideracion2','divReconsideracion','divReconsideraciondetalle','Reconsideracion','NombreReconsideracion','Reconsideración',4);"><i class="fa fa-eye"></i></a>


                                                <a class="btn btn-info btn-xs" style="display:none" id="aMasivoObservarExpReconsideracion" data-placement="right" title="Masivo" href="javascript:sut.editProcedimiento.ValObservarexp.masivoObservarExp(@exp.ExpedienteId,7,'Reconsideracion1','Reconsideracion2');"><i class="fa fa-comments-o"></i></a>

                                                <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarGeneralExpReconsideracion" data-placement="right" title="Quitar Validación" href="javascript:sut.editProcedimiento.ValObservarexp.CancelarGeneralExpReconsideracion(@exp.ExpedienteId,@Model.ProcedimientoId,1,'NombreReconsideracion','Reconsideracion','Datos Generales');"><i class="fa fa-power-off"></i></a>

                                                <a class="btn btn-primary btn-xs" style="display:none" data-placement="right" title="Guardar" id="aAsignarGuardarObservarExpReconsideracion" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarguardarObservarExpReconsideracion(@Model.ExpedienteId,@Model.ProcedimientoId,'Reconsideracion1','Reconsideracion2','Reconsideracion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                                <a class="btn btn-danger btn-xs" style="display:none" data-placement="right" title="Cancelar" id="aAsignarCancelarObservarExpReconsideracion" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarCancelarObservarExpReconsideracion(@exp.ExpedienteId,@Model.ProcedimientoId,1,'Reconsideracion1','Reconsideracion2','Reconsideracion','Datos Generales','divReconsideraciondetalle','ReconsideracionSustento','divReconsideracionSustento','NombreReconsideracion');"><i class="fa fa-power-off"></i></a>
                                                @*/*botones Generados*/*@


                                            }
                                            @*else if (exp.EstadoExpediente == EstadoExpediente.Observado && Model.DatosGeneralesTerminado == false)
                            {
                                if (obs.Count != 0)
                                {
                                    <a class="btn btn-warning btn-xs" id="aSustentarObservarExpReconsideracion"  data-placement="right" title="Sustentar" href="javascript:sut.editProcedimiento.ValObservarexp.sustentarObservarExp('ReconsideracionSustento','divReconsideracion','divReconsideracionSustento','Reconsideracion','Reconsideración',4);"><i class="fa fa-exclamation"></i></a>

                                    /*botones unicos sustentar*/
                                    <a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpReconsideracion" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'ReconsideracionSustento','Reconsideracion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                    <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpReconsideracion" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'ReconsideracionSustento','Reconsideracion','Datos Generales','divReconsideracionSustento');"><i class="fa fa-power-off"></i></a>
                                    /*botones Generados*/
                                }
                            }*@
                                            <label id="mensajeReconsideracion" style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>

                                            @if (obs.Count != 0)
                                            {
                                                var cont = 0;
                                                var texto1 = "";
                                                foreach (var item in obs)
                                                {
                                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Reconsideracion")
                                                    {
                                                        cont = 1;

                                                        if (@item.CodValidacion == "1")
                                                        {

                                                            texto1 = @item.Descripcion;
                                                        }
                                                        else

                                                        if (@item.CodValidacion == "4")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    valiarbotones('Reconsideracion');
                                                                    $('#aValidarObservarExpReconsideracion').css("display","none");
                                                                    if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                    {
                                                                        document.querySelector('#mensajeReconsideracion').innerText = 'Se valido con éxito';
                                                                    }
                                                                    else
                                                                    {
                                                                        document.querySelector('#mensajeReconsideracion').innerText = '';
                                                                    }


                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "2")
                                                        {

                                                            <script>


                                                                window.addEventListener("load", function() {
                                                                    observarbotones('Reconsideracion');
                                                                    if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                    {
                                                                        document.querySelector('#mensajeReconsideracion').innerText = 'Se observo con éxito';
                                                                    }
                                                                    else
                                                                    {
                                                                        document.querySelector('#mensajeReconsideracion').innerText = '';
                                                                    }

                                                                    sut.editProcedimiento.textoobservacionReconsideracion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divReconsideracion','divReconsideraciondetalle','Reconsideración','Reconsideracion1','Reconsideracion2',4, "@exp.EstadoExpediente",'NombreReconsideracion');
                                                                });
                                                            </script>
                                                        }

                                                        else if (@item.CodValidacion == "5")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    canceladobotones('Reconsideracion');
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "3")
                                                        {
                                                            <script>

                                                                window.addEventListener("load", function() {
                                                                   
                                                                    if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                    { }
                                                                    else{ document.querySelector('#mensajeReconsideracion').innerText = ''; }
                                                                    //sustentobotones('Reconsideracion');
                                                                    //document.querySelector('#mensajeReconsideracion').innerText = 'Sustento';
                                                                    sut.editProcedimiento.textosustentoReconsideracion("@item.Descripcion.Replace("\n", " ")",'divReconsideracion','divReconsideracionSustento','Reconsideración','ReconsideracionSustento',4);
                                                                });
                                                            </script>
                                                        }
                                                    }
                                                }
                                                if (cont == 0)
                                                {
                                                    <script>
                                                        window.addEventListener("load", function () {
                                                            canceladobotonessustento('Reconsideracion');
                                                        });
                                                    </script>
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div id="divReconsideracion">
                                    </div>
                                    @*/*Fin*/*@
                                }
                                <table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="tablaReconsideracion1">
                                    <tbody>
                                        <tr>


                                            @if (Model.reclamacion == 1)
                                            {

                                                <td style="width: 120px;">Reclamación</td>
                                            }
                                            else
                                            {
                                                <td style="width: 120px;">Reconsideración</td>
                                            }




                                            <td style="text-align: center;width: 40%;">
                                                @*@Html.TextBoxFor(model => model.CargoReconsideracion, new { @class = "form-control", @readonly = true })*@
                                                <label id="CargoReconsideracion" name="CargoReconsideracion" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.CargoReconsideracion)</label>
                                            </td>
                                            <td style="text-align: center;">
                                                @Html.HiddenFor(model => model.UndOrgReconsideracionId)
                                                @*@Html.TextBoxFor(model => model.UndOrgReconsideracion.Nombre, new { @class = "form-control", @readonly = true })*@
                                                <label id="UndOrgReconsideracion_Nombre" name="UndOrgReconsideracion.Nombre" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.UndOrgReconsideracion.Nombre)</label>
                                            </td>
                                            <td style="text-align: center; width: 100px;">
                                                @*@Html.TextBoxFor(model => model.PzoReconPresent, new { @class = "form-control", @type = "number", min = 0, @readonly = true })*@
                                                <label id="PzoReconPresent" name="PzoReconPresent" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.PzoReconPresent)</label>
                                            </td>
                                            <td style="text-align: center; width: 150px;">
                                                @Html.DropDownListFor(model => model.TipoReconPresent, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control", disabled = "disabled" })
                                            </td>
                                            <td style="text-align: center; width: 100px;">
                                                @if (Model.Expediente.ActivarResolver == 0 && Model.Operacion == OperacionExpediente.Ninguna && (Model.Expediente.EstadoExpediente == EstadoExpediente.EnProceso || Model.Expediente.EstadoExpediente == EstadoExpediente.Observado))
                                                {

                                                    @Html.TextBoxFor(model => model.PzoReconResol, new { @class = "form-control", @type = "number", min = 0, Required = true })
                                                }
                                                else
                                                {
                                                    <label id="PzoReconResol" name="PzoReconResol" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.PzoReconResol)</label>



                                                }



                                            </td>
                                            <td style="text-align: center; width: 150px;">
                                                @Html.DropDownListFor(model => model.TipoReconResol, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control", disabled = "disabled" })
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                                @if (Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                                {
                                    @*/*Inicio Apelacion*/*@
                                    <div class="form-group">
                                        @*<label class="col-sm-2 col-xs-12 control-label"></label>*@
                                        <div class="col-sm-10 col-xs-12">
                                            @if ((user.Rol == 8 || user.Rol == 6 || user.Rol == 7) && Model.Expediente.EstadoExpediente != EstadoExpediente.EnProceso)
                                            {
                                                @*/*botones unicos*/*@
                                                <a class="btn btn-success btn-xs" style="display:none" id="aValidarObservarExpApelacion" data-placement="right" title="Validar" href="javascript:sut.editProcedimiento.ValObservarexp.validarObservarExpApelacion(@exp.ExpedienteId,@Model.ProcedimientoId,'Apelacion','Apelacion','Datos Generales');"><i class="fa fa-thumbs-o-up"></i></a>

                                                <a class="btn btn-info btn-xs" id="aObservarEditarExpApelacion" data-placement="right" title="Observar" href="javascript:sut.editProcedimiento.ValObservarexp.observareditarExpApelacion('Apelacion1','Apelacion2','divApelacion','divApelaciondetalle','Apelacion','NombreApelacion','Apelación',4);"><i class="fa fa-eye"></i></a>


                                                <a class="btn btn-info btn-xs" style="display:none" id="aMasivoObservarExpApelacion" data-placement="right" title="Masivo" href="javascript:sut.editProcedimiento.ValObservarexp.masivoObservarExp(@exp.ExpedienteId,8,'Apelacion1','Apelacion2');"><i class="fa fa-comments-o"></i></a>

                                                <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarGeneralExpApelacion" data-placement="right" title="Quitar Validación" href="javascript:sut.editProcedimiento.ValObservarexp.CancelarGeneralExpApelacion(@exp.ExpedienteId,@Model.ProcedimientoId,1,'NombreApelacion','Apelacion','Datos Generales');"><i class="fa fa-power-off"></i></a>

                                                <a class="btn btn-primary btn-xs" style="display:none" data-placement="right" title="Guardar" id="aAsignarGuardarObservarExpApelacion" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarguardarObservarExpApelacion(@Model.ExpedienteId,@Model.ProcedimientoId,'Apelacion1','Apelacion2','Apelacion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                                <a class="btn btn-danger btn-xs" style="display:none" data-placement="right" title="Cancelar" id="aAsignarCancelarObservarExpApelacion" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarCancelarObservarExpApelacion(@exp.ExpedienteId,@Model.ProcedimientoId,1,'Apelacion1','Apelacion2','Apelacion','Datos Generales','divApelaciondetalle','ApelacionSustento','divApelacionSustento','NombreApelacion');"><i class="fa fa-power-off"></i></a>
                                                @*/*botones Generados*/*@


                                            }
                                            @*else if (exp.EstadoExpediente == EstadoExpediente.Observado && Model.DatosGeneralesTerminado == false)
                            {
                                if (obs.Count != 0)
                                {
                                    <a class="btn btn-warning btn-xs" id="aSustentarObservarExpApelacion"  data-placement="right" title="Sustentar" href="javascript:sut.editProcedimiento.ValObservarexp.sustentarObservarExp('ApelacionSustento','divApelacion','divApelacionSustento','Apelacion','Apelación',4);"><i class="fa fa-exclamation"></i></a>

                                    /*botones unicos sustentar*/
                                    <a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpApelacion" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'ApelacionSustento','Apelacion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                    <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpApelacion" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'ApelacionSustento','Apelacion','Datos Generales','divApelacionSustento');"><i class="fa fa-power-off"></i></a>
                                    /*botones Generados*/
                                }
                            }*@
                                            <label id="mensajeApelacion" style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>

                                            @if (obs.Count != 0)
                                            {
                                                var cont = 0;
                                                var texto1 = "";
                                                foreach (var item in obs)
                                                {
                                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Apelacion")
                                                    {
                                                        cont = 1;

                                                        if (@item.CodValidacion == "1")
                                                        {

                                                            texto1 = @item.Descripcion;
                                                        }
                                                        else

                                                        if (@item.CodValidacion == "4")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    valiarbotones('Apelacion');
                                                                    $('#aValidarObservarExpApelacion').css("display","none");
                                                                    if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                    {
                                                                        document.querySelector('#mensajeApelacion').innerText = 'Se valido con éxito';
                                                                    }
                                                                    else
                                                                    {
                                                                        document.querySelector('#mensajeApelacion').innerText = '';
                                                                    }


                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "2")
                                                        {

                                                            <script>


                                                                window.addEventListener("load", function() {
                                                                    observarbotones('Apelacion');
                                                                    if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                    {
                                                                        document.querySelector('#mensajeApelacion').innerText = 'Se observo con éxito';
                                                                    }
                                                                    else
                                                                    {
                                                                        document.querySelector('#mensajeApelacion').innerText = '';
                                                                    }

                                                                    sut.editProcedimiento.textoobservacionApelacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divApelacion','divApelaciondetalle','Apelación','Apelacion1','Apelacion2',4, "@exp.EstadoExpediente",'NombreApelacion');
                                                                });
                                                            </script>
                                                        }

                                                        else if (@item.CodValidacion == "5")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    canceladobotones('Apelacion');
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "3")
                                                        {
                                                            <script>

                                                                window.addEventListener("load", function() {
                                                                   
                                                                    if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                                    { }
                                                                    else{ document.querySelector('#mensajeApelacion').innerText = ''; }
                                                                    //sustentobotones('Apelacion');
                                                                    //document.querySelector('#mensajeApelacion').innerText = 'Sustento';
                                                                    sut.editProcedimiento.sustentarObservarExpApelacion("@item.Descripcion.Replace("\n", " ")",'divApelacion','divApelacionSustento','Apelación','ApelacionSustento',4);
                                                                });
                                                            </script>
                                                        }
                                                    }
                                                }
                                                if (cont == 0)
                                                {
                                                    <script>
                                                        window.addEventListener("load", function () {
                                                            canceladobotonessustento('Apelacion');
                                                        });
                                                    </script>
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div id="divApelacion">
                                    </div>
                                    @*/*Fin*/*@
                                }
                                <table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="tablaApelacion1">
                                    <tbody>
                                        <tr>
                                            <td style="width: 120px;">Apelación</td>
                                            <td style="text-align: center;width: 40%;">
                                                @*@Html.TextBoxFor(model => model.CargoApelacion, new { @class = "form-control", @readonly = true })*@
                                                <label id="CargoApelacion" name="CargoApelacion" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.CargoApelacion)</label>
                                            </td>
                                            <td style="text-align: center;">
                                                @Html.HiddenFor(model => model.UndOrgApelacionId)
                                                @*@Html.TextBoxFor(model => model.UndOrgApelacion.Nombre, new { @class = "form-control", @readonly = true })*@
                                                <label id="UndOrgApelacion_Nombre" name="UndOrgApelacion.Nombre" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.UndOrgApelacion.Nombre)</label>
                                            <td style="text-align: center; width: 100px;">
                                                @*@Html.TextBoxFor(model => model.PzoApelPresent, new { @class = "form-control", @type = "number", min = 0, @readonly = true })*@
                                                <label id="PzoApelPresent" name="PzoApelPresent" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.PzoApelPresent)</label>
                                            </td>
                                            <td style="text-align: center; width: 150px;">
                                                @Html.DropDownListFor(model => model.TipoApelPresent, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control", disabled = "disabled" })
                                            </td>
                                            <td style="text-align: center; width: 100px;">
                                                @*@Html.TextBoxFor(model => model.PzoApelResol, new { @class = "form-control", @type = "number", min = 0, @readonly = true })*@
                                                <label id="PzoApelResol" name="PzoApelResol" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.PzoApelResol)</label>
                                            </td>
                                            <td style="text-align: center; width: 150px;">
                                                @Html.DropDownListFor(model => model.TipoApelResol, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control", disabled = "disabled" })
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                @if (Model.revision == 1)
                                {
                                    <table class="table table-condensed table-bordered table-striped" id="tablaOtros1" style="margin-bottom: 0px;">
                                        <tbody>

                                            <tr>
                                                <td style="width: 120px;">Revisión</td>
                                                <td style="text-align: center;width: 40%;">
                                                    <label id="CargoOtros" name="CargoOtros" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.CargoOtros)</label>
                                                </td>


                                                <td style="text-align: center;">
                                                    @Html.HiddenFor(model => model.UndOrgIdOtros)
                                                    @*@Html.TextBoxFor(model => model.UndOrgApelacion.Nombre, new { @class = "form-control", @readonly = true })*@
                                                    <label id="UndOrgOtros_Nombre" name="UndOrgOtros.Nombre" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.UndOrgOtros.Nombre)</label>
                                                <td style="text-align: center; width: 100px;">
                                                    @*@Html.TextBoxFor(model => model.PzoApelPresent, new { @class = "form-control", @type = "number", min = 0, @readonly = true })*@
                                                    <label id="PzoPresentOtros" name="PzoPresentOtros" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.PzoPresentOtros)</label>
                                                </td>
                                                <td style="text-align: center; width: 150px;">
                                                    @Html.DropDownListFor(model => model.TipoOtrosPresent, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control", disabled = "disabled" })
                                                </td>
                                                <td style="text-align: center; width: 100px;">
                                                    @*@Html.TextBoxFor(model => model.PzoApelResol, new { @class = "form-control", @type = "number", min = 0, @readonly = true })*@
                                                    <label id="PzoResolOtros" name="PzoResolOtros" class="form-control" style="border-color:#ddd;background: #eeeeee;font-weight: 600;">@Html.DisplayFor(model => model.PzoResolOtros)</label>
                                                </td>
                                                <td style="text-align: center; width: 150px;">
                                                    @Html.DropDownListFor(model => model.TipoOtrosResol, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control", disabled = "disabled" })
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                }
                            </div>
                        }
                        @if (!ViewBag.EsTupaEstandar)
                        {
                            <hr />

                            <div class="table-responsive" style="display:none;visibility:collapse;">
                                <table id="tblSede" class="table table-condensed table-bordered table-striped" data-cant="0">
                                    <thead>
                                        <tr>
                                            <th style="width:100px;">
                                                <a href="javascript:sut.editProcedimiento.Sede.openSelect()" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                            </th>
                                            <th>Sede de atención del trámite</th>
                                            <th style="width:50px;"></th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        }

                        @*<hr />*@

                        <div class="table-responsive" style="display:none;visibility:collapse;">
                            <table id="tblNota" class="table table-condensed table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                            <a href="javascript:sut.editProcedimiento.Nota.add()" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                        </th>
                                        <th colspan="2">Notas al Ciudadano</th>
                                        <th style="width:50px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        @*<hr />*@
                        <div class="table-responsive" style="display:none;visibility:collapse;">
                            <table id="tblPasoSeguir" class="table table-condensed table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                            @*<a href="javascript:sut.editProcedimiento.PasoSeguir.add()" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>*@
                                        </th>
                                        <th colspan="1">Pasos a Seguir</th>
                                        <th style="width:50px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        @if (!ViewBag.EsTupaEstandar)
                        {
                            @*<hr />*@

                            <div class="table-responsive" style="display:none;visibility:collapse;">
                                <table id="tblCanales" class="table table-condensed table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th style="width:50px;"></th>
                                            <th>Canales de Atención</th>
                                            <th>Comentarios</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            int i = 0;
                                        }
                                        @if (Model.ProcedimientoDatoAdicional.Count(x => x.Tipo == 1) > 0)
                                        {
                                            for (i = 0; i < Model.ProcedimientoDatoAdicional.Count(x => x.Tipo == 1); i++)
                                            {
                                                <tr>
                                                    <td>
                                                        @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].ProcedimientoId)
                                                        @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].MetaDatoId)
                                                        @Html.CheckBoxFor(model => model.ProcedimientoDatoAdicional[i].Checked)
                                                    </td>
                                                    <td>@Model.ProcedimientoDatoAdicional[i].MetaDato.Nombre</td>
                                                    <td>@Html.TextBoxFor(model => model.ProcedimientoDatoAdicional[i].Comentario, new { @class = "form-control input-sm" })</td>
                                                </tr>
                                            }
                                        }
                                        else
                                        {
                                            <tr><td colspan="3">NO SE TIENEN CANALES DE ATENCIÓN DISPONIBLES</td></tr>
                                        }
                                    </tbody>
                                </table>
                            </div>


                            @*<hr />*@

                            <div class="table-responsive" style="display:none;visibility:collapse;">
                                <table id="tblFormasPago" class="table table-condensed table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th style="width:50px;"></th>
                                            <th>Formas de Pago</th>
                                            <th>Comentarios</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @if (Model.ProcedimientoDatoAdicional.Count(x => x.Tipo == 2) > 0)
                                        {
                                            for (; i < Model.ProcedimientoDatoAdicional.Count(); i++)
                                            {
                                                if (Model.ProcedimientoDatoAdicional[i].MetaDato.Entero01 != Model.ProcedimientoDatoAdicional[i - 1].MetaDato.Entero01)
                                                {
                                                    <tr>
                                                        <td></td>
                                                        <td><strong>@Model.ProcedimientoDatoAdicional[i].MetaDato.Padre.Nombre</strong></td>
                                                        <td></td>
                                                    </tr>
                                                }
                                                <tr>
                                                    <td>
                                                        @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].ProcedimientoId)
                                                        @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].MetaDatoId)
                                                        @Html.CheckBoxFor(model => model.ProcedimientoDatoAdicional[i].Checked)
                                                    </td>
                                                    <td>@Model.ProcedimientoDatoAdicional[i].MetaDato.Nombre</td>
                                                    <td>@Html.TextBoxFor(model => model.ProcedimientoDatoAdicional[i].Comentario, new { @class = "form-control input-sm" })</td>
                                                </tr>
                                            }
                                        }
                                        else
                                        {
                                            <tr><td colspan="3">NO SE TIENEN FORMAS DE PAGO DISPONIBLES</td></tr>
                                        }
                                    </tbody>
                                </table>
                            </div>

                            @*<hr />*@

                            <div class="form-horizontal" style="display:none;visibility:collapse;">
                                @*<div class="form-group">
                    <label class="col-sm-4 col-xs-12 control-label">Unidad Orgánica donde se presenta la documentación :</label>
                    <div class="col-sm-8 col-xs-12">
                        @Html.HiddenFor(model => model.UndOrgPresentDocumentacionId)
                        <div class="input-group">
                            @Html.TextBoxFor(model => model.UndOrgPresentDocumentacion.Nombre, new { @class = "form-control", @readonly = "readonly" })
                            <div class="input-group-btn">
                                <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgPres')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                            </div>
                        </div>
                    </div>
                </div>*@
                                <hr />
                                <h3>Atención de Consultas sobre el Procedimiento:</h3>
                                <div class="form-group">
                                    <label class="col-sm-4 col-xs-12 control-label">Teléfono :</label>
                                    <div class="col-sm-8 col-xs-12">
                                        @Html.TextBoxFor(model => model.Telefono, new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 col-xs-12 control-label">Anexo :</label>
                                    <div class="col-sm-8 col-xs-12">
                                        @Html.TextBoxFor(model => model.Anexo, new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 col-xs-12 control-label">Correo Electrónico :</label>
                                    <div class="col-sm-8 col-xs-12">
                                        @Html.TextBoxFor(model => model.Correo, new { @class = "form-control" })
                                    </div>
                                </div>
                            </div>

                        }
                    </div>

                    @*/*Modalidad validar*/*@
                    <div id="edit-modalidades" class="tab-pane">
                        <div class="callout callout-warning" style="height: inherit;padding: inherit;display: block;">
                            Solo en el caso que se requiera diferentes tasas de derecho de tramitacion para el procedimiento administrativo o servicio prestado en exclusividad.
                        </div>
                        <div class="table-responsive">
                            <table id="tblModalidad" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                        </th>
                                        @*<th style="width:120px;">Código</th>*@
                                        <th>Nombre de la Modalidad</th>
                                        <th style="width:120px">Gratuito</th>
                                        @if (ViewBag.EsCargaInicial)
                                        {
                                            <th style="width:100px;">Derecho de Tramitación (S/)</th>
                                        }
                                        else
                                        {
                                            @*<th style="width:100px;">Prestaciones Anuales</th>*@
                                        }
                                        @if (Model.Calificaciones == 1)
                                        {
                                            <th style="width: 253px;text-align: center;">Calificaciones</th>
                                        }
                                        <th style="width:50px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    @*/*Modalidad Modificar*/*@
                    <div id="edit-requisitos" class="tab-pane">
                        <h4>Requisitos Generales</h4>
                        <div class="table-responsive">
                            <table id="tblRequisitoGeneral" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                            @if (!ViewBag.EsTupaEstandar && Model.TipoProcedimiento != TipoProcedimiento.Estandar)
                                            {
                                                @*<a href="javascript:sut.editProcedimiento.Requisito.add(1)" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>*@
                                            }
                                            else if (ViewBag.EsTupaEstandar && Model.TipoProcedimiento == TipoProcedimiento.Estandar)
                                            {
                                                @*<a href="javascript:sut.editProcedimiento.Requisito.add(1)" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>*@
                                            }
                                        </th>
                                        <th>Nombre</th>
                                        @*<th>Justificación</th>
                                            <th style="width:120px;">Proc. Administrativo</th>*@
                                        <th style="width:30px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="table-responsive">
                            @*<h4>Requisitos Específicos</h4>*@
                            @if (Model.sinnotas == 0)
                            {
                                <h4>Notas</h4>
                            }
                            <table id="tblRequisitoEspecifico" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                            @if (!ViewBag.EsTupaEstandar && Model.TipoProcedimiento != TipoProcedimiento.Estandar)
                                            {
                                                @*<a href="javascript:sut.editProcedimiento.Requisito.add(2)" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>*@
                                            }
                                            else if (ViewBag.EsTupaEstandar && Model.TipoProcedimiento == TipoProcedimiento.Estandar)
                                            {
                                                @*<a href="javascript:sut.editProcedimiento.Requisito.add(2)" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>*@
                                            }
                                        </th>
                                        <th>Nombre</th>
                                        @*<th>Justificación</th>
                                            <th style="width:120px;">Proc. Administrativo</th>*@
                                        <th style="width:30px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    <div id="edit-base-legal" class="tab-pane">
                        @Html.HiddenFor(model => model.BaseLegalId)
                        @Html.HiddenFor(model => model.BaseLegal.BaseLegalId)

                        <div class="callout callout-warning" style="height: inherit;padding: inherit;display: block;">
                            Agregar la base legal del procedimiento administrativo o servicio prestado en exclusividad
                        </div>
                        <div class="table-responsive">
                            <table id="tblBaseLegal" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                        </th>
                                        <th style="width: 8%; text-align: center;">Artículo</th>
                                        <th style="width: 34.5%; text-align: center;">Denominación </th>
                                        <th style="width: 17%; text-align: center;">Tipo de Norma</th>
                                        <th style="width: 13%; text-align: center;">Número	</th>
                                        <th style="width: 19%; text-align: center;">Fecha de Publicación <p>del Diario El Peruano</th>
                                        @*<th style="width:100px;">Documento</th>*@
                                        <th style="width:60px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}


<div style="position: fixed;right: 15px;top: 60px; margin-bottom: 0; z-index: 5;">

    <a href="javascript:sut.editProcedimiento.AtrasPA(@Model.ExpedienteId,@Model.ExplorarNum)" class="btn btn-danger"><i class="fa fa-id-card-o"></i> ATRAS </a>
    <a href="javascript:sut.editProcedimiento.SiguientePA(@Model.ExpedienteId,@Model.ExplorarNum)" class="btn btn-danger"><i class="fa fa-id-card-o"></i> SIGUIENTE </a>
    @if (user.Rol != 8 && user.Rol != 6 && user.Rol != 7 && user.Rol != 1)
    {



        @*<a href="/Simplificacion/Expediente/Editar/@Model.ExpedienteId" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>*@
        <a href="@Url.Content("~/Simplificacion/Procedimiento/InformacionCiudadano/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-id-card-o"></i> Inf. Ciudadano </a>
        <a href="#" class="btn btn-success"><i class="fa fa-id-card-o"></i> Datos Generales </a>
        if (Model.Expediente.TipoExpediente == TipoExpediente.ExpedienteRegular)
        {
            <a href="@Url.Content("~/Simplificacion/Procedimiento/SustentoTecnico/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-file-pdf-o"></i> Ir Sus. Tec. Legal</a>
            <a href="@Url.Content("~/Simplificacion/Procedimiento/TablaAsme/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-table"></i> Ir Tabla Asme</a>

        }
        <a href="@Url.Content("~/Simplificacion/Expediente/Editar/")@Model.ExpedienteId" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>


        if (Model.Expediente.ActivarResolver == 0 && Model.Operacion == OperacionExpediente.Ninguna && (Model.Expediente.EstadoExpediente == EstadoExpediente.EnProceso || Model.Expediente.EstadoExpediente == EstadoExpediente.Observado))
        {
            <a href="javascript:sut.editProcedimiento.camposNoRequerido2()" class="btn btn-primary pulsesut-button"><i class="fa fa-save"></i> Guardar</a>
        }


        if (exp.EstadoExpediente != EstadoExpediente.Presentado && exp.EstadoExpediente != EstadoExpediente.Publicado && exp.EstadoExpediente != EstadoExpediente.Subsanado && @Model.Operacion != OperacionExpediente.Ninguna && @Model.Operacion != OperacionExpediente.Eliminacion && exp.EstadoExpediente != EstadoExpediente.Aprobado)
        {
            @*<a href="javascript:sut.editProcedimiento.guardar()" class="btn btn-primary"><i class="fa fa-save"></i> Guardar</a>*@
            if (ViewBag.User.Rol == (short)Rol.Coordinador || exp.EstadoExpediente == EstadoExpediente.Observado)
            {
                if (Model.Estadodatos != 6)
                {
                    <a href="javascript:sut.editProcedimiento.activar()" class="btn btn-warning"><i class="fa fa-thumbs-o-up"></i> Activar</a>
                }
            }

        }
    }
    else
    {
        if (user.Rol == 8 || user.Rol == 6 || user.Rol == 7)
        {
            @*if (@Model.EstadodatosEva == 0)
                {
                    <a class="btn btn-warning btn-xs" data-toggle="tooltip" data-placement="left" title="Tipo de Calificación" href="javascript:sut.editProcedimiento.editarCondicion(@Model.ProcedimientoId,2)">Sin Acción </a>
                }
                else if (@Model.EstadodatosEva == 1)
                {
                    <a class="btn btn-dropbox btn-xs" data-toggle="tooltip" data-placement="left" title="Tipo de Calificación" href="javascript:sut.editProcedimiento.editarCondicion(@Model.ProcedimientoId,2)">En Revisión</a>
                }
                else if (@Model.EstadodatosEva == 4)
                {
                    <a class="btn btn-danger  btn-xs" data-toggle="tooltip" data-placement="left" title="Tipo de Calificación" href="javascript:sut.editProcedimiento.editarCondicion(@Model.ProcedimientoId,2)">Observado</a>
                }
                else if (@Model.EstadodatosEva == 5)
                {
                    <a class="btn btn-warning  btn-xs" data-toggle="tooltip" data-placement="left" title="Tipo de Calificación" href="javascript:sut.editProcedimiento.editarCondicion(@Model.ProcedimientoId,2)">Subsanado</a>
                }
                else if (@Model.EstadodatosEva == 6)
                {
                    <a class="btn btn-success  btn-xs" data-toggle="tooltip" data-placement="left" title="Tipo de Calificación" href="javascript:sut.editProcedimiento.editarCondicion(@Model.ProcedimientoId,2)">Validado</a>
                }*@
            @*<a href="/Simplificacion/Expediente/EditarObservacion/@Model.ExpedienteId" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>*@
            <a href="@Url.Content("~/Simplificacion/Procedimiento/InformacionCiudadano/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-id-card-o"></i> Inf. Ciudadano </a>
            <a href="#" class="btn btn-success"><i class="fa fa-id-card-o"></i> Datos Generales </a>
            if (Model.Expediente.TipoExpediente == TipoExpediente.ExpedienteRegular)
            {
                <a href="@Url.Content("~/Simplificacion/Procedimiento/SustentoTecnico/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-file-pdf-o"></i> Ir Sus. Tec. Legal</a>
                <a href="@Url.Content("~/Simplificacion/Procedimiento/TablaAsme/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-table"></i> Ir Tabla Asme</a>
            }
            @*<a href="@Url.Content("~/Simplificacion/Expediente/EditarObservacion/")@Model.ExpedienteId" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>*@
            <a href="javascript:sut.editProcedimiento.CondicionVolver(@Model.ProcedimientoId,2)" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>

        }
        else
        {
            <a href="@Url.Content("~/Simplificacion/Procedimiento/InformacionCiudadano/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-id-card-o"></i> Inf. Ciudadano </a>
            <a href="#" class="btn btn-success"><i class="fa fa-id-card-o"></i> Datos Generales </a>
            if (Model.Expediente.TipoExpediente == TipoExpediente.ExpedienteRegular)
            {
                <a href="@Url.Content("~/Simplificacion/Procedimiento/SustentoTecnico/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-file-pdf-o"></i> Ir Sus. Tec. Legal</a>
                <a href="@Url.Content("~/Simplificacion/Procedimiento/TablaAsme/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-table"></i> Ir Tabla Asme</a>
            }
            @*<a href="/Simplificacion/Expediente/Editar/@Model.ExpedienteId" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>*@

            if (user.Rol == (short)Rol.Administrador)
            {
                <a href="@Url.Content("~/Simplificacion/Expediente/EditarObservacion/")@Model.ExpedienteId" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>
            }
            else
            {
                <a href="@Url.Content("~/Simplificacion/Expediente/Editar/")@Model.ExpedienteId" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>
            }

        }

    }
</div>

<div class="modal fade" id="modal-ventana">
    <div id="ventana-container">
    </div>
</div>
@section Style{
    <style>
        #tblCanales thead tr th, #tblFormasPago thead tr th {
            text-align: center;
        }

        #divBotones {
            /*position: relative;
                    width: 100%;
                    display: block;*/
        }
            /*.menu-compensador {
                    position: relative;
                    width: 100%;
                    display: none;
                }*/
            #divBotones.fixed {
                /*z-index: 1000;
                    position: fixed;*/
                /*top: 0;
                    left: 0;
                    right: 0;*/
            }
        /*.menu-compensador.fixed {
                    display: block;
                }*/

        fieldset.scheduler-border {
            border: 1px groove #ddd !important;
            padding: 0 1.4em 0 1.4em !important;
            margin: 0 0 1.5em 0 !important;
            -webkit-box-shadow: 0px 0px 0px 0px #000;
            box-shadow: 0px 0px 0px 0px #000;
        }

        .scheduler-border legend {
            font-size: 1.2em !important;
            font-weight: bold !important;
            text-align: left !important;
            width: auto !important;
            margin-bottom: 0px !important;
            padding: 0px !important;
            border-bottom: none;
        }
    </style>
}
@section Script {
    <script>

                sut.editProcedimiento = {
                    @*tab: '@Request.QueryString["tab"]',*@
                    tab: '@ViewBag.Tabvalue',
                    esProcEstadar: @Html.Raw(Model.TipoProcedimiento == TipoProcedimiento.Estandar ? "true" : "false") ,
                    esCargaInicial: @MvcHtmlString.Create(ViewBag.EsCargaInicial ? "true" : "false") ,
                    esTupaEstandar: @MvcHtmlString.Create(ViewBag.EsTupaEstandar ? "true" : "false") ,
                    tipoplazo: @Html.Raw(ViewBag.listatipoplazo != null ? ViewBag.listatipoplazo : "[]"),

                        Calificaciones: @Html.Raw(ViewBag.calificaciones != null ? ViewBag.calificaciones : "[]"),

                    comboUndOrgCargos: function (index, id) {

                        var cb = sut.string.format('<select class="form-control" name="ProcedimientoCargos[{0}].TipoReconPresent" disabled >', index);
                        $.each(sut.editProcedimiento.tipoplazo, function (i, r) {
                            cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                        });
                        cb += '</select>';
                        return cb;
                    },
                    comboUndOrgCargosresol: function (index, id) {
                        var cb = sut.string.format('<select class="form-control" name="ProcedimientoCargos[{0}].TipoReconResol" disabled >', index);
                        $.each(sut.editProcedimiento.tipoplazo, function (i, r) {
                            cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                        });
                        cb += '</select>';
                        return cb;
                    },
                    comboUndOrgCargosApe: function (index, id) {

                        var cb = sut.string.format('<select class="form-control" name="ProcedimientoCargosApe[{0}].TipoApelPresent" disabled >', index);
                        $.each(sut.editProcedimiento.tipoplazo, function (i, r) {
                            cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                        });
                        cb += '</select>';
                        return cb;
                    },


                    camposNoRequerido2: function () {
                        debugger
                        var lista = $("input[norequired=True]");
                        var countCamposVacias = 0;

                        $.each(lista, function () {
                            if ($(this).val() === "") {
                                $(this).css({ "border-color": "#e4e423", "border-width": "3px" });
                                countCamposVacias += 1;
                            }
                        });

                        if (countCamposVacias > 0) {
                            //sut.msg.CamposVacios("Hay campos en blanco, desea continuar con el registro", function () {
                            sut.msg.CamposVacios("Desea guardar el registro", function () {

                                sut.editProcedimiento.guardar2(false)
                            });
                        }
                        else {
                            sut.editProcedimiento.guardar2(false)
                        }
                    },


            guardar2: function (is_salir) {


                var valid = true;

                var deferred = $.Deferred();




                if ($('#form-editar').valid() && valid) {
                    var model = $('#form-editar').serialize();
                    model = model.replace(new RegExp('=on','gi'),'=true');
                    $.ajax({
                        type: 'POST',
                        //url: '/Simplificacion/Procedimiento/DatosGenerales',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/DatosGeneralesResolver")',
                        data: model,
                        dataType: 'json',
                        beforeSend: function () {
                            $("#mensajes").hide();
                        },
                        complete: function () {

                        },
                        success: function (result) {

                            sut.msg.success(result.mensaje, function () {

                                debugger
                                deferred.resolve('Ok');
                                if (!is_salir)
                                    window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;

                            });
                        },
                        error: function (result) {
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                }

                return deferred.promise();
            },


            SiguientePA: (Expediente, ExplorarNum) => {

                $.ajax({
                    type: "GET",
                    url: '@Url.Content("~/Simplificacion/Procedimiento/SiguientePA")',
                    data: { pExpediente: Expediente, pExplorarNum: ExplorarNum  },
                    cache: false,
                    beforeSend: () => {
                        sut.wait.modal('ventana-container');
                        $('#modal-ventana').modal('show');
                    },
                    success: (data) => {

                        $('#modal-ventana').modal('hide');

                            if (data.estado == 0) {

                                sut.msg.msgUsuario('No existe PA para Avanzar', 'Alerta');
                            } else
                            {
                                //~/Simplificacion/Procedimiento / InformacionCiudadano /
                                window.location = '/Simplificacion/Procedimiento/InformacionCiudadano/' + data.estado;
                            }



                    },
                    error: (result) => {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    },
                    statusCode: {
                        203: () => { window.location.reload(); }
                    }
                });
            },

            AtrasPA: (Expediente, ExplorarNum) => {

                $.ajax({
                    type: "GET",
                    url: '@Url.Content("~/Simplificacion/Procedimiento/AtrasPA")',
                    data: { pExpediente: Expediente, pExplorarNum: ExplorarNum  },
                    cache: false,
                    beforeSend: () => {
                        sut.wait.modal('ventana-container');
                        $('#modal-ventana').modal('show');
                    },
                    success: (data) => {

                        $('#modal-ventana').modal('hide');
                            if (data.estado == 0) {

                                sut.msg.msgUsuario('No existe PA para retroceder', 'Alerta');
                            } else
                            {
                                //~/Simplificacion/Procedimiento / InformacionCiudadano /
                                window.location = '/Simplificacion/Procedimiento/InformacionCiudadano/' + data.estado;
                            }
                    },
                    error: (result) => {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    },
                    statusCode: {
                        203: () => { window.location.reload(); }
                    }
                });
            },
                    comboUndOrgCargosOtros: function (index, id) {

                        var cb = sut.string.format('<select class="form-control" name="ProcedimientoCargosOtros[{0}].TipoOtrosPresent" disabled >', index);
                        $.each(sut.editProcedimiento.tipoplazo, function (i, r) {
                            cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                        });
                        cb += '</select>';
                        return cb;
                    },
                    comboUndOrgCargosresolOtros: function (index, id) {
                        var cb = sut.string.format('<select class="form-control" name="ProcedimientoCargosOtros[{0}].TipoOtrosResol" disabled >', index);
                        $.each(sut.editProcedimiento.tipoplazo, function (i, r) {
                            cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                        });
                        cb += '</select>';
                        return cb;
                    },
                    comboUndOrgCargosresolApe: function (index, id) {
                        var cb = sut.string.format('<select class="form-control" name="ProcedimientoCargosApe[{0}].TipoApelResol" disabled >', index);
                        $.each(sut.editProcedimiento.tipoplazo, function (i, r) {
                            cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                        });
                        cb += '</select>';
                        return cb;
                    },
                    comboCalificaciones: function (index, id) {
                        var cb = sut.string.format('<select   class="form-control" name="TablaAsme[{0}].Calificacion" disabled >', index);
                        $.each(sut.editProcedimiento.Calificaciones, function (i, r) {
                            cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                        });
                        cb += '</select>';
                        return cb;
                    },
                    visualizarSustento: function (evt, input) {

                        var key = window.Event ? evt.which : evt.keyCode;
                        var chark = String.fromCharCode(key);
                        var tempValue = input.value + chark;
                        var id = input.id;
                        var txt = $(evt.target);
                        var valor = id.replace(/\d/g, "");


                        //if (tempValue>30){
                        //    $("#idplazoantencion").css("display", "block");
                        //    $("#idplazoantencionObservar").css("display", "block");

                        //}else{
                        //    $("#idplazoantencion").css("display", "none");
                        //    $("#idplazoantencionObservar").css("display", "none");
                        //}
                        $('#mensaje' + valor).hide();
                        document.querySelector('#mensaje' + valor).innerText = '';

                    },
                    visualizarSustentomodalidad: function (evt, input) {

                        var key = window.Event ? evt.which : evt.keyCode;
                        var chark = String.fromCharCode(key);
                        var tempValue = input.value + chark;
                        var id = input.id;
                        var txt = $(evt.target);
                        var valor = id.substring(10);
                        $('#mensajeModalidad' + valor).hide();
                        document.querySelector('#mensajeModalidad' + valor).innerText = '';
                    },
                       CondicionVolver: (id, Tipoficha) => {

                            $.ajax({
                                type: "GET",
                                url: '@Url.Content("~/Simplificacion/Procedimiento/condicionvolver")',
                                data: { id: id, Tipoficha: Tipoficha  },
                                cache: false,
                                beforeSend: () => {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: (data) => {

                                    $('#modal-ventana').modal('hide');
                                    if (data.estado == 0) {
                                        //showNotification('top', 'right', 'La Ficha se encuentra en estado "SIN ACCIÓN" ', 2);
                                          sut.msg.confirm('La ficha se encuentra en estado "SIN ACCIÓN". Desea Salir', () => {
                                             window.location = '/Simplificacion/Expediente/EditarObservacion/@Model.ExpedienteId';
                                          });
                                    } else
                                    {
                                        window.location = '/Simplificacion/Expediente/EditarObservacion/@Model.ExpedienteId';
                                    }
                                },
                                error: (result) => {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                },
                                statusCode: {
                                    203: () => { window.location.reload(); }
                                }
                            });
                        },
                    editarCondicion: (id, Tipoficha) => {

                        $.ajax({
                            type: "GET",
                            url: '@Url.Content("~/Simplificacion/Procedimiento/EditarCondicion")',
                            data: { id: id, Tipoficha: Tipoficha  },
                            cache: false,
                            beforeSend: () => {
                                sut.wait.modal('ventana-container');
                                $('#modal-ventana').modal('show');
                            },
                            success: (data) => {
                                $('#ventana-container').html(data);
                            },
                            error: (result) => {
                                $('#modal-ventana').modal('hide');
                                sut.error.show('mensajes', result.responseText);
                            },
                            statusCode: {
                                203: () => { window.location.reload(); }
                            }
                        });
                    },

                    visualizarSustentorequisitos: function (evt, input) {

                        var key = window.Event ? evt.which : evt.keyCode;
                        var chark = String.fromCharCode(key);
                        var tempValue = input.value + chark;
                        var id = input.id;
                        var txt = $(evt.target);
                        var valor = id.substring(11);
                        $('#mensajeRequisitos' + valor).hide();
                        document.querySelector('#mensajeRequisitos' + valor).innerText = '';
                    },

                    visualizarSustentobaselegal: function (evt, input) {

                        var key = window.Event ? evt.which : evt.keyCode;
                        var chark = String.fromCharCode(key);
                        var tempValue = input.value + chark;
                        var id = input.id;
                        var txt = $(evt.target);
                        var valor = id.substring(10);
                        $('#mensajeBaseLegal' + valor).hide();
                        document.querySelector('#mensajeBaseLegal' + valor).innerText = '';
                    },
                    openSelectUndOrg: function (fnAdd) {
                        $.ajax({
                            type: "GET",
                            //url: '/Simplificacion/UnidadOrganica/Select',
                            url: '@Url.Content("~/Simplificacion/UnidadOrganica/Select")',
                            data: { multi: false, fnAdd: fnAdd },
                            cache: false,
                            beforeSend: function () {
                                sut.wait.modal('ventana-container');
                                $('#modal-ventana').modal('show');
                            },
                            success: function (data) {
                                $('#ventana-container').html(data);
                            },
                            error: function (result) {
                                $('#modal-ventana').modal('hide');
                                sut.error.show('mensajes', result.responseText);
                            }
                        });
                    },
                    setUndOrgResp: function (data) {
                        $('#modal-ventana').modal('hide');
                        $('input[name="UndOrgResponsableId"]').val(data.id);
                        $('input[name="UndOrgResponsable.Nombre"]').val(data.nombre);
                    },
                    setUndOrgRecon: function (data) {
                        $('#modal-ventana').modal('hide');
                        $('input[name="UndOrgReconsideracionId"]').val(data.id);
                        $('input[name="UndOrgReconsideracion.Nombre"]').val(data.nombre);
                    },
                    setUndOrgApel: function (data) {
                        $('#modal-ventana').modal('hide');
                        $('input[name="UndOrgApelacionId"]').val(data.id);
                        $('input[name="UndOrgApelacion.Nombre"]').val(data.nombre);
                    },
                    setUndOrgPres: function (data) {
                        $('#modal-ventana').modal('hide');
                        $('input[name="UndOrgPresentDocumentacionId"]').val(data.id);
                        $('input[name="UndOrgPresentDocumentacion.Nombre"]').val(data.nombre);
                    },
                    Observarexp: {
                        comentario: "",
                        editarObservarExp: function () {
                            $("#aEditarObservarExp").css({ "display": "none" });
                            $("#aGuardarObservarExp").css({ "display": "" });
                            $("#aCancelarObservarExp").css({ "display": "" });
                            $("#txtaObservarExp").prop("disabled", false);
                            document.querySelector('#mensajedatos').innerText = '';
                            comentario = $("#txtaObservarExp").val();
                        },
                        guardarObservarExp: function (idExpediente, procedimientoId) {


                            if ($('#txtaObservarExp').val().trim() == ""){
                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#txtaObservarExp').val().trim(),
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': 'Nota de Ayuda Datos Generales',
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');
                                    $("#aCancelarObservarExp").css({ "display": "none" });
                                    $("#aGuardarObservarExp").css({ "display": "none" });
                                    $("#aEditarObservarExp").css({ "display": "" });
                                    $("#txtaObservarExp").prop("disabled", true);
                                    document.querySelector('#mensajedatos').innerText = 'Se valido con éxito';
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarObservarExp: function () {
                            $("#aCancelarObservarExp").css({ "display": "none" });
                            $("#aGuardarObservarExp").css({ "display": "none" });
                            $("#aEditarObservarExp").css({ "display": "" });
                            $("#txtaObservarExp").prop("disabled", true);
                            $("#txtaObservarExp").val(comentario);


                            if ($('#txtaObservarExp').val().trim() == "") {
                                document.querySelector('#mensajedatos').innerText = '';
                            } else {
                                document.querySelector('#mensajedatos').innerText = 'Se valido con éxito';
                            }
                        }
                    },
                    Sede: {
                        openSelect: function () {
                            $.ajax({
                                type: "GET",
                                //url: '/Simplificacion/Sede/Select',
                                url: '@Url.Content("~/Simplificacion/Sede/Select")',
                                data: { multi: true, fnAdd: 'sut.editProcedimiento.Sede.add' },
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            //$.ajax({
                            //    type: "GET",
                            //    url: '/Simplificacion/UnidadOrganica/Select',
                            //    data: { multi: true, fnAdd: 'sut.editProcedimiento.Sede.add' },
                            //    cache: false,
                            //    beforeSend: function () {
                            //        sut.wait.modal('ventana-container-editar');
                            //        $('#modal-ventana-editar').modal('show');
                            //    },
                            //    success: function (data) {
                            //        $('#ventana-container-editar').html(data);
                            //    },
                            //    error: function (result) {
                            //        $('#modal-ventana-editar').modal('hide');
                            //        sut.error.show('mensajes', result.responseText);
                            //    }
                            //});
                        },
                        init: function () {
                            var lista = @Html.Raw(ViewBag.ListaSede != null ? ViewBag.ListaSede : "[]");
                            var tblSede = $('#tblSede tbody');

                            if (lista.length > 0) {
                                var rows = ""
                                $.each(lista, function (i, r) {

                                    rows += sut.string.format('<tr data-rowPadre="{0}">',i);

                                    rows += '<td>';
                                    rows += sut.string.format('<span>{0}</span><input type="hidden" name="ProcedimientoSede[{1}].SedeId" value="{2}" />', i + 1,i, r.SedeId);
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoId" value="{1}" />',i,r.ProcedimientoId);
                                    rows += '</td>';

                                    rows += sut.string.format('<td>{0}<br />{1}<br />{2}<br /></td>', r.Nombre || '', r.Direccion || '', r.Horario || '');
                                    rows += '<td><div class="btn-group">';
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Sede.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                    rows += '</div></td>';
                                    rows += '</tr>';

                                    rows += sut.string.format('<tr><td colspan="5"><table class="table table-condensed table-bordered"  style="margin-bottom: 0px;" data-indexParent="{0}">',i);
                                    rows += '<thead><tr><th style="width:100px;"></th><th style="width:100px;">';
                                    rows += sut.string.format('<a href="javascript:sut.editProcedimiento.UndOrgRecepcion.openSelectUndOrg({0},{1},{2})" data-UndOrg="1" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>',r.ProcedimientoId,r.SedeId,i);
                                    rows += '</th><th>Unidades donde se presenta la documentación:</th><th style="width:100px;"></th></tr></thead><tbody>';
                                    rows += sut.editProcedimiento.UndOrgRecepcion.newFila(i,JSON.parse(r.UndOrgRecepcionDocumentos),r.ProcedimientoId,r.SedeId);
                                    rows += '</tbody></table></td></tr>';
                                    rows += "</tr>";


                                    tblSede.append(rows);

                                });
                            }
                        },
                        add: function (data) {


                            $('#modal-ventana').modal('hide');
                            $.ajax({
                                type: "GET",
                                //url: '/Simplificacion/MaestroFijo/GetOneByEntidad',
                                url: '@Url.Content("~/Simplificacion/MaestroFijo/GetOneByEntidad")',
                                data: { EntidadId: @Model.Expediente.EntidadId },
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container-editar');
                                    //$('#modal-ventana-editar').modal('show');
                                },
                                success: function (LstUndOrg) {
                                    //$('#ventana-container-editar').html(data);
                                    var d = data;
                                    var x = JSON.parse(LstUndOrg);

                                    $.each(d,function(i,r){
                                        d[i].ListaUndOrganica = [];

                                        $.each(x,function(index,result){
                                            if(r.SedeId === result.SedeId){
                                                d[i].ListaUndOrganica.push(result);
                                            }
                                        });
                                    });


                                    sut.editProcedimiento.Sede.generar(d);
                                },
                                error: function (result) {
                                    $('#modal-ventana-editar').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        delete: function (id) {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var num = 1;
                                $.each($('#tblSede tbody tr[data-rowPadre]'), function (index, tr) {
                                    if (index == id){
                                        $(tr).remove();
                                        $('table[data-indexparent='+ id +']').remove();
                                    }
                                });

                                sut.editProcedimiento.Sede.update();
                            });
                        },
                        update: function () {

                            var concatLstOrganica = "";
                            var count = 0;
                            $.each($('#tblSede tbody tr[data-rowPadre]'), function (i, tr) {

                                oldParentId = $(this).attr("data-rowPadre");
                                ProcedimientoId = $(tr).find('td input[name="ProcedimientoId"]').val();


                                $(tr).attr("data-rowPadre",count);
                                $(tr).find('td span').html(count + 1);
                                $(tr).find('td input[name$="SedeId"]').attr('name', sut.string.format('ProcedimientoSede[{0}].SedeId', count));
                                $(tr).find('td a').attr("href",sut.string.format('javascript:sut.editProcedimiento.Sede.delete({0})', count));

                                $.each($('#tblSede tbody tr table'), function (idx, trc) {
                                    if($(trc).attr("data-indexParent") === oldParentId){


                                        var rowsUndOrg = $(trc).find("tbody tr");

                                        $.each(rowsUndOrg,function(x,y){
                                            $(y).attr('data-indexParent',count);
                                            $(y).find('td input[name$="UnidadOrganicaId"]').attr("name", sut.string.format('ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].UnidadOrganicaId', count, x));
                                            $(y).find('td input[name$="ProcedimientoId"]').attr("name", sut.string.format('ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].ProcedimientoId', count, x));
                                            $(y).find('td input[name$="SedeId"]').attr("name", sut.string.format('ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].SedeId', count, x));
                                            $(y).find('td a').attr("href",sut.string.format('javascript:sut.editProcedimiento.UndOrgRecepcion.borrar({0},{1})', count ,x));
                                        })

                                        $(trc).attr("data-indexParent",count);
                                    }
                                });

                                count++;
                            });


                            $.each($("#tblCanales tbody tr"), function (i, v) {

                                var c = $(this).find("input:checkbox");
                                var t = $(this).find("input:text");


                                if (concatLstOrganica === "") {

                                    if ($(c).attr("original") !== "1") {
                                        if ($(c).attr("oficinaAutocompletar") === "1") {

                                            $(t).val(concatLstOrganica);
                                            $(c).prop("checked", false);

                                        }
                                    }
                                } else {
                                    if ($(c).attr("original") !== "1") {
                                        if ($(c).attr("oficinaAutocompletar") === "1") {

                                            $(t).val(concatLstOrganica);
                                            $(c).prop("checked", true);
                                        }
                                    }
                                }
                            });
                        },
                        generar : function(data){

                            var tblSede = $('#tblSede tbody[data-principal]');
                            var s = tblSede.find('tr[data-rowPadre]').size();


                            var trSedes = $("#tblSede tbody tr[data-rowPadre]");
                            $.each(trSedes,function(i,r){
                                var v = parseInt($(r).find('td input[name$="SedeId"]').val());
                                var find = false;
                                $.each(data,function(idx,re){
                                    if(re.SedeId === v){
                                        data.splice(idx,1);
                                        find = true;
                                    }

                                    if(find)
                                        return false;
                                })

                            });

                            $.each(data,function(i,r){
                                var rows = "";
                                rows += sut.string.format('<tr data-rowPadre="{0}">',s);

                                rows += '<td>';
                                rows += sut.string.format('<span>{0}</span><input type="hidden" name="ProcedimientoSede[{1}].SedeId" value="{2}" />', s + 1,s, r.SedeId);
                                rows += sut.string.format('<input type="hidden" name="ProcedimientoId" value="{0}" />',null);
                                rows += '</td>';

                                rows += sut.string.format('<td>{0}<br />{1}<br />{2}<br /></td>', r.Nombre || '', r.Direccion || '', r.Horario || '');
                                rows += '<td><div class="btn-group">';
                                rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Sede.delete({0})" ><i class="fa fa-close" ></i></a>', s);
                                rows += '</div></td>';
                                rows += '</tr>';

                                rows += sut.string.format('<tr><td colspan="5"><table class="table table-condensed table-bordered"  style="margin-bottom: 0px;"data-indexParent="{0}">',s);
                                rows += '<thead><tr><th style="width:100px;"></th><th style="width:100px;">';
                                rows += sut.string.format('<a href="javascript:sut.editProcedimiento.UndOrgRecepcion.openSelectUndOrg({0},{1},{2})" data-UndOrg="1" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>',null,r.SedeId,s);
                                rows += '</th><th>Unidades donde se presenta la documentación:</th><th style="width:100px;"></th></tr></thead><tbody>';
                                rows += '</tbody></table></td></tr>';
                                rows += "</tr>";


                                tblSede.append(rows);
                                s++;
                                sut.editProcedimiento.Sede.update();
                            });


                        }
                    },
                    UndOrgRecepcion : {
                        UndOrgProcediemientoId:0,
                        UndOrgSedeIdProcedimiento:0,
                        IndexParent : 0,
                        newFila : function(pIndexParent,UndOrgSede,pProcedimientoId,pSedeId){

                            var rows = "";
                            $.each(UndOrgSede,function(i,r){

                                if(pSedeId == r.SedeId){
                                    rows += sut.string.format('<tr data-index="{0}" data-indexParent="{1}" class="UndOrg" >', i,pIndexParent);
                                    rows += "<td></td>";
                                    rows += '<td>';
                                    //rows += sut.string.format('<span>{0}</span>', i + 1);
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].UnidadOrganicaId" value="{2}" />', pIndexParent,i, r.UnidadOrganicaId);
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].ProcedimientoId" value="{2}" />', pIndexParent, i , pProcedimientoId);
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].SedeId" value="{2}" />', pIndexParent,i, r.SedeId);
                                    rows += '</td>';
                                    rows += sut.string.format("<td>{0}</td>",r.nombre);
                                    rows += sut.string.format('<td><a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.UndOrgRecepcion.borrar({0},{1})" ><i class="fa fa-close" ></i></a></td>', pIndexParent,i);
                                    rows += '</tr>'
                                }
                            });

                            return rows;
                        },
                        openSelectUndOrg: function (pProcedimientoId,pSedeId,pIndexParent) {

                            UndOrgProcediemientoId = pProcedimientoId;
                            UndOrgSedeIdProcedimiento = pSedeId;
                            IndexParent = pIndexParent;


                            $.ajax({
                                type: "GET",
                                //url: '/Simplificacion/UnidadOrganica/Select',
                                url: '@Url.Content("~/Simplificacion/UnidadOrganica/Select")',
                                data: { multi: true, fnAdd: 'sut.editProcedimiento.UndOrgRecepcion.setUndOrg' },
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container-editar');
                                    $('#modal-ventana-editar').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container-editar').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana-editar').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        setUndOrg: function (data) {

                            $('#modal-ventana-editar').modal('hide');

                            if (!$.isArray(data)) data = [data];


                            var tabla = $('table[data-indexParent=' + IndexParent +'] tbody').eq(0);
                            var s = tabla.children('tr').size();

                            var trUndOrg =  $('table[data-indexParent=' + IndexParent +'] tbody tr');

                            $.each(trUndOrg,function(i,v){

                                var idUndOrg = parseInt($(v).find("td input[name$=UnidadOrganicaId]").val());
                                var find = false;
                                $.each(data,function(ix,vx){
                                    if(vx.id === idUndOrg){
                                        data.splice(ix,1);
                                        find = true;
                                    }

                                    if(find)
                                        return false;
                                })
                            });

                            var rows = '';

                            $.each(data, (i, r) => {
                                rows += sut.string.format('<tr data-index="{0}" class="UndOrg" >', i);
                                rows += "<td></td>";
                                rows += '<td>';
                                //rows += sut.string.format('<span>{0}</span>', i + 1);
                                rows += sut.string.format('<input type="hidden" name="ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].ProcedimientoId" value="{2}" />', IndexParent,s, UndOrgProcediemientoId);
                                rows += sut.string.format('<input type="hidden" name="ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].SedeId" value="{2}" />', IndexParent,s, UndOrgSedeIdProcedimiento);
                                rows += sut.string.format('<input type="hidden" name="ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].UnidadOrganicaId" value="{2}" />', IndexParent,s, r.id);

                                rows += '</td>';
                                rows += sut.string.format("<td>{0}</td>",r.nombre);
                                rows += sut.string.format('<td><a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.UndOrgRecepcion.borrar({0},{1})" ><i class="fa fa-close" ></i></a></td>', IndexParent,s);
                                rows += '</tr>'
                            });

                            tabla.append(rows);

                            sut.editProcedimiento.UndOrgRecepcion.actualizar(IndexParent);


                        },
                        borrar : function(pIndexParent, index){
                            var tr = $('table[data-indexParent=' + pIndexParent +'] tbody tr');

                            $(tr).eq(index).remove();;


                            sut.editProcedimiento.UndOrgRecepcion.actualizar(pIndexParent);
                        },
                        actualizar : function(pIndexParent){

                            var rows = $('table[data-indexParent=' + pIndexParent +'] tbody').eq(0).find("tr");

                            $.each(rows,function(i,tr){
                                $(tr).data("index",i);
                                //$(tr).find('td span').html(i+1);
                                $(tr).find('td input[name$="ProcedimientoId"]').attr("name", sut.string.format('ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].ProcedimientoId', pIndexParent, i));
                                $(tr).find('td input[name$="SedeId"]').attr("name", sut.string.format('ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].SedeId', pIndexParent, i));
                                $(tr).find('td input[name$="UnidadOrganicaId"]').attr("name", sut.string.format('ProcedimientoSede[{0}].UndOrgRecepcionDocumentos[{1}].UnidadOrganicaId', pIndexParent, i));
                                $(tr).find('td a').attr('href',sut.string.format('javascript:sut.editProcedimiento.UndOrgRecepcion.borrar({0},{1})', pIndexParent ,i));
                            });
                        }
                    },
                    Nota: {
                        tipos: @Html.Raw(ViewBag.TipoNota != null ? ViewBag.TipoNota : "[]"),
                        comboTipo: function (index, id) {
                            var cb = sut.string.format('<select class="form-control" name="NotaCiudadano[{0}].TipoNotaId" >', index);
                            $.each(sut.editProcedimiento.Nota.tipos, function (i, r) {
                                cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.MetaDatoId, r.Nombre, r.MetaDatoId == id ? 'selected' : '');
                            });
                            cb += '</select>';
                            return cb;
                        },
                        init: function () {
                            var lista = @Html.Raw(ViewBag.ListaNota != null ? ViewBag.ListaNota : "[]");
                            var tabla = $('#tblNota tbody');

                            if (lista.length > 0) {
                                var data = [];
                                $.each(lista, function (i, r) {
                                    var rows = '';
                                    rows += '<tr>';
                                    rows += '<td>';
                                    rows += sut.string.format('<span>{0}</span>', i + 1);
                                    rows += sut.string.format('<input type="hidden" name="NotaCiudadano[{0}].NotaCiudadanoId" value="{1}" />', i, r.NotaCiudadanoId);
                                    rows += sut.string.format('<input type="hidden" name="NotaCiudadano[{0}].Orden" value="{1}" />', i, i + 1);
                                    rows += '</td>';
                                    rows += sut.string.format('<td>{0}</td>', sut.editProcedimiento.Nota.comboTipo(i, r.TipoNotaId));
                                    rows += sut.string.format('<td><textarea name="NotaCiudadano[{0}].Nota" class="form-control" required >{1}</textarea></td>', i, r.Nota || '');
                                    rows += '<td><div class="btn-group">';
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Nota.delete({0})" ><i class="fa fa-close" ></i></a>', r.NotaCiudadanoId);
                                    rows += '</div></td>';
                                    rows += '</tr>';

                                    tabla.append(rows);
                                });
                            }
                        },
                        add: function () {
                            var tabla = $('#tblNota tbody');
                            var rows = '';
                            rows += '<tr>';
                            rows += '<td>';
                            rows += '<span>0</span>';
                            rows += '<input type="hidden" name="NotaCiudadano[0].NotaCiudadanoId" value="0" />';
                            rows += '<input type="hidden" name="NotaCiudadano[0].Orden" value="0" />';
                            rows += '</td>';
                            rows += sut.string.format('<td>{0}</td>', sut.editProcedimiento.Nota.comboTipo(0, 0));
                            rows += sut.string.format('<td><textarea name="NotaCiudadano[0].Nota" class="form-control" required></textarea></td>', '');
                            rows += '<td><div class="btn-group">';
                            rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Nota.delete({0})" ><i class="fa fa-close" ></i></a>', 0);
                            rows += '</div></td>';
                            rows += '</tr>';

                            tabla.append(rows);
                            sut.editProcedimiento.Nota.update();
                        },
                        delete: function (id) {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var num = 1;
                                $.each($('#tblNota tbody tr'), function (index, tr) {
                                    var NotaCiudadanoId = Number($(tr).find('td input[name$="NotaCiudadanoId"]').val());
                                    if (NotaCiudadanoId == id) $(tr).remove();
                                });
                                sut.editProcedimiento.Nota.update();
                            });
                        },
                        update: function () {
                            $.each($('#tblNota tbody tr'), function (i, tr) {
                                $(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="NotaCiudadanoId"]').attr('name', sut.string.format('NotaCiudadano[{0}].NotaCiudadanoId', i)).val(i + 1)
                                $(tr).find('td input[name$="Orden"]').attr('name', sut.string.format('NotaCiudadano[{0}].Orden', i)).val(i + 1)
                                $(tr).find('td textarea[name$="Nota"]').attr('name', sut.string.format('NotaCiudadano[{0}].Nota', i))
                                $(tr).find('td select[name$="TipoNotaId"]').attr('name', sut.string.format('NotaCiudadano[{0}].TipoNotaId', i))
                                $(tr).find('td div a').attr('href', sut.string.format('javascript:sut.editProcedimiento.Nota.delete({0})', i + 1));
                            });
                        }
                    },
                    PasoSeguir: {
                        init: function () {
                            var lista = @Html.Raw(ViewBag.ListaPasoSeguir != null ? ViewBag.ListaPasoSeguir : "[]");
                            var tabla = $('#tblPasoSeguir tbody');

                            if (lista.length > 0) {
                                var data = [];
                                $.each(lista, function (i, r) {
                                    var rows = '';
                                    rows += '<tr>';
                                    rows += '<td>';
                                    rows += sut.string.format('<span>{0}</span>', i + 1);
                                    rows += sut.string.format('<input type="hidden" name="PasoSeguir[{0}].PasoSeguirId" value="{1}" />', i, r.PasoSeguirId);
                                    rows += '</td>';
                                    rows += sut.string.format('<td><textarea name="PasoSeguir[{0}].Descripcion" class="form-control" readonly >{1}</textarea></td>', i, r.Descripcion || '');
                                    rows += '<td><div class="btn-group">';
                                    //rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.PasoSeguir.delete({0})" ><i class="fa fa-close" ></i></a>', r.PasoSeguirId);
                                    rows += '</div></td>';
                                    rows += '</tr>';

                                    tabla.append(rows);
                                });
                            }
                        },
                        add: function () {
                            var tabla = $('#tblPasoSeguir tbody');
                            var rows = '';
                            rows += '<tr>';
                            rows += '<td>';
                            rows += '<span>0</span>';
                            rows += '<input type="hidden" name="PasoSeguir[0].PasoSeguirId" value="0" />';
                            rows += '</td>';
                            rows += sut.string.format('<td><textarea name="PasoSeguir[0].Descripcion" class="form-control" required ></textarea></td>', '');
                            rows += '<td><div class="btn-group">';
                            rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.PasoSeguir.delete({0})" ><i class="fa fa-close" ></i></a>', 0);
                            rows += '</div></td>';
                            rows += '</tr>';

                            tabla.append(rows);
                            sut.editProcedimiento.PasoSeguir.update();
                        },
                        delete: function (id) {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var num = 1;
                                $.each($('#tblPasoSeguir tbody tr'), function (index, tr) {
                                    var PasoSeguirId = Number($(tr).find('td input[name$="PasoSeguirId"]').val());
                                    if (PasoSeguirId == id) $(tr).remove();
                                });
                                sut.editProcedimiento.PasoSeguir.update();
                            });
                        },
                        update: function () {
                            $.each($('#tblPasoSeguir tbody tr'), function (i, tr) {
                                $(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="PasoSeguirId"]').attr('name', sut.string.format('PasoSeguir[{0}].PasoSeguirId', i)).val(i + 1);
                                $(tr).find('td textarea[name$="Descripcion"]').attr('name', sut.string.format('PasoSeguir[{0}].Descripcion', i));
                                $(tr).find('td div a').attr('href', sut.string.format('javascript:sut.editProcedimiento.PasoSeguir.delete({0})', i + 1));
                            });
                        }
                    },
                    Cargos : {
                        init: function () {
                            var lista = @Html.Raw(ViewBag.ListaProcedimientoCargos != null ? ViewBag.ListaProcedimientoCargos : "[]");
                            var listaobservaciones = @Html.Raw(ViewBag.ListaObservacionCargos != null ? ViewBag.ListaObservacionCargos : "[]");
                            var tabla = $('#tablaReconsideracion1 tbody');
                            var num = 1;
                            if (lista.length > 0) {
                                var data = [];
                                $.each(lista, function (i, r) {

                                    num = i ;
                                    var rows = '';

                                    if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {

                                        rows += sut.string.format('<tr data-index="{0}" >', num);
                                        rows += '<td colspan="5">';
                                        rows += '<div class="form-group">';
                                        rows += '<div class="col-sm-10 col-xs-12">';

                                        if (@obs.Count != 0) {
                                            for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {
                                                if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {
                                                    if (listaobservaciones[Mi].CodValidacion == "2") {
                                                        rows += sut.string.format('<a class="btn btn-warning btn-xs"  id="aSustentarObservarExpModalidad' + num + '"   data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExpModalidad({0});"><i class="fa fa-pencil-square-o"></i></a>',num);
                                                        rows += sut.string.format('<a class="btn btn-primary btn-xs" style="display:none"  id="aGuardarSustentarExpModalidad' + num + '" data-placement="right" title="Guardar Sustento"   href="javascript:sut.editProcedimiento.guardarSustentarExpModalidad({0},{1},{2},{3});"><i class="fa fa-floppy-o"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                                        rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none"  id="aCancelarSustentarExpModalidad' + num + '" data-placement="right" title="Quitar Sustento"    href="javascript:sut.editProcedimiento.CancelarSustentarExpModalidad({0},{1},{2},{3});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                                    }
                                                }
                                            }
                                        }


                                        rows += '<label id="mensajeModalidad' + num + '" class="label-primary label" style="font-size: 100%;font-weight: normal;"></label>';
                                        rows += '</div>';
                                        rows += '</div>';
                                        rows += '<table id="divModalidad0' + num + '" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">';
                                        rows += '<tbody></tbody>';
                                        rows += '</table>';
                                        rows += '</td>';
                                        rows += '</tr>';
                                    }



                                    var rows = '';
                                    rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                                    rows += '<td>';
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].ProcedimientoCargosID" value="{1}" />', i, r.ProcedimientoCargosID);
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].ProcedimientoId" value="{1}" />', i, r.ProcedimientoId);
                                    rows += '</td>';

                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].Cargo" value="{1}" class="form-control" readonly/>', i, r.Cargo);
                                    rows += sut.string.format('</td>');

                                    rows += sut.string.format('<td style="text-align: center;">');
                                    rows += sut.string.format('<div>');
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].UndOrgId" value="{1}" />', i, r.UndOrgId);
                                    rows += sut.string.format('<input type="text" name="UndOrgReconsideracion[{0}].Nombre" value="{1}" class="form-control" readonly />', i, r.NombreUndOrg);

                                    rows += sut.string.format('</div>');
                                    rows += sut.string.format('</td>');


                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].PzoPresent" value="{1}" class="form-control" type = "number" readonly />', i, r.PzoPresent);
                                    rows += sut.string.format('</td>');


                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargos(i, r.TipoReconPresent));
                                    rows += sut.string.format('</td>');

                                    rows += sut.string.format('<td>');


                                     if (@exp.ActivarResolver == 0 && '@Model.Operacion'== '@OperacionExpediente.Ninguna' && ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado' || '@exp.EstadoExpediente' == '@EstadoExpediente.EnProceso'))
                                     {

                                         rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].PzoResol" value="{1}" class="form-control" type = "number" />', i, r.PzoResol);

                                     }
                                     else
                                     {
                                         rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].PzoResol" value="{1}" class="form-control" type = "number" readonly/>', i, r.PzoResol);
                                     }




                                     rows += sut.string.format('</td>');

                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosresol(i, r.TipoReconResol));
                                    rows += sut.string.format('</td>');

                                    @*rows += '<td><div class="btn-group">';
                                    if (i > 0) {
                                        if ("@user.rolmenu[0].Eliminar" == "True"){
                                            rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                        }
                                    }
                                    rows += '</div></td>';*@
                                    rows += '</tr>';


                                    tabla.append(rows);



                                    if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {
                                        if (@obs.Count != 0) {
                                            var cont1 = 0;
                                            var texto1 = "";


                                            for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {


                                                if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {

                                                    if (listaobservaciones[Mi].CodValidacion == "1") {
                                                        texto1 = listaobservaciones[Mi].Descripcion;
                                                        cont1 = 1;
                                                    }
                                                    else if (listaobservaciones[Mi].CodValidacion == "4") {


                                                        valiarbotonesModalidad('Modalidad', i);
                                                        $("#mensajeModalidad" + i).show();
                                                        document.querySelector("#mensajeModalidad" + i).innerText = 'Se valido con éxito';

                                                    }
                                                    else if (listaobservaciones[Mi].CodValidacion == "2") {
                                                        sut.editProcedimiento.textoobservacionModalidad("" + texto1 + "", "" + listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i,lista.length);
                                                    }

                                                    else if (listaobservaciones[Mi].CodValidacion == "5") {

                                                        canceladobotonesModalidad('Modalidad', i);

                                                    }
                                                    else if (listaobservaciones[Mi].CodValidacion == "3") {

                                                        sustentobotonesModalidad('Modalidad', i);
                                                        $("#mensajeModalidad" + i).show();
                                                        document.querySelector("#mensajeModalidad" + i).innerText = 'Se refuto con éxito';
                                                        sut.editProcedimiento.textosustentoModalidad(listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i);

                                                    }
                                                }
                                                else
                                                {
                                                    canceladobotonesModalidadsustento('Modalidad', i);
                                                }
                                            }

                                        }

                                    }


                                });
                                sut.editProcedimiento.Cargos.updateReconsideracion();

                            }
                        },
                        addReconsideracion: (indexReq, indexForm,TablaAsmeId,ProcedimientoId) => {


                            var tabla = $('#tablaReconsideracion1 tbody').eq(0);


                            //var i = tabla.children('tr').size();
                            var i = $('#tablaReconsideracion1 tbody').eq(0).children('tr.requisito').size();

                            var rows = '';
                            rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                            rows += '<td>';
                            //rows += sut.string.format('<span>{0}</span>', i + 1);

                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].ProcedimientoCargosID" value="{1}" />', i, 0);
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].ProcedimientoId" value="{1}" />', i, @Model.ProcedimientoId);
                            rows += '</td>';
                            rows += '<td>';
                            rows += sut.string.format('<span>Reconsideración{0}</span>', i + 1);
                            rows += '</td>';

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].Cargo" value="{1}" class="form-control" />', i, '');
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td style="text-align: center;">');
                            rows += sut.string.format('<div class="input-group">');
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].UndOrgId" value="{1}" />', i, 0);
                            rows += sut.string.format('<input type="text" name="UndOrgReconsideracion[{0}].Nombre" value="{1}" class="form-control" readonly />', i, '');
                            rows += sut.string.format('<div class="input-group-btn">');
                            rows += sut.string.format('<a href="javascript:sut.editProcedimiento.openSelectUndOrgDinamico'+"('"+'sut.editProcedimiento.setUndOrgReconDinamico'+"',1,{0})"+'" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>', i, 0);
                            rows += sut.string.format('</div>');
                            rows += sut.string.format('</div>');
                            rows += sut.string.format('</td>');


                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].PzoPresent" value="{1}" class="form-control" type = "number" />', i, '');
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].PzoResol" value="{1}" class="form-control" type = "number" />', i, '');
                            rows += sut.string.format('</td>');


                            @*rows += '<td><div class="btn-group">';
                            if (i > 0) {
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                }
                            }
                            rows += '</div></td>';*@
                            rows += '</tr>';


                            tabla.append(rows);
                            sut.editProcedimiento.Cargos.updateReconsideracion();
                            //sut.editProcedimiento.guardarReconsideracion(true);
                        },
                        deleteReconsideracion: function (id) {

                            var model = {
                                ProcedimientoCargosID: id
                            }

                            $.ajax({
                                //url: "/Simplificacion/UnidadOrganica/Eliminar",
                                url: '@Url.Content("~/Simplificacion/Procedimiento/EliminarReconsideracion")',
                                type: "POST",
                                data: model,
                                dataType: "json",
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    sut.wait.removeOverlay('#boxLista');
                                    showNotification('top', 'right', 'Elimino con Éxito ', 1);
                                    window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = @Model.ProcedimientoId })' + '?tab=edit-info-basica';
                                },
                                error: function (data) {

                                    $('#modal-ventana').modal('hide');
                                    //sut.wait.removeOverlay('#boxLista');
                                    ////sut.error.show('mensajes', data.responseText);
                                    //sut.error.show('mensajes',"Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ");
                                    showNotification('top', 'right', 'Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ', 2);
                                }
                            });

                        },
                        updateReconsideracion: function () {

                            var cont = 0;
                            $.each($('#tablaReconsideracion1 tbody tr.requisito'), function (i, tr) {
                                $(tr).data('index', i);
                                $(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="ProcedimientoCargosID"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].ProcedimientoCargosID', i));
                                $(tr).find('td input[name$="Cargo"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].Cargo', i));
                                $(tr).find('td input[name$="UndOrgId"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].UndOrgId', i));
                                $(tr).find('td input[name$="PzoPresent"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].PzoPresent', i));
                                $(tr).find('td input[name$="PzoResol"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].PzoResol', i));
                                $(tr).find('td input[name$="Tipo"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].Tipo', i));
                            });
                        },
                        initApelacion: function () {


                            var lista = @Html.Raw(ViewBag.ListaProcedimientoCargosApe != null ? ViewBag.ListaProcedimientoCargosApe : "[]");
                            var listaobservaciones = @Html.Raw(ViewBag.ListaObservacionCargosApe != null ? ViewBag.ListaObservacionCargosApe : "[]");
                            var tabla = $('#tablaApelacion1 tbody');
                            var num = 1;
                            if (lista.length > 0) {
                                var data = [];
                                $.each(lista, function (i, r) {

                                    num = i ;
                                    var rows = '';

                                    if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {

                                        rows += sut.string.format('<tr data-index="{0}" >', num);
                                        rows += '<td colspan="5">';
                                        rows += '<div class="form-group">';
                                        rows += '<div class="col-sm-10 col-xs-12">';

                                        if (@obs.Count != 0) {
                                            for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {
                                                if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {
                                                    if (listaobservaciones[Mi].CodValidacion == "2") {
                                                        rows += sut.string.format('<a class="btn btn-warning btn-xs"  id="aSustentarObservarExpModalidad' + num + '"   data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExpModalidad({0});"><i class="fa fa-pencil-square-o"></i></a>',num);
                                                        rows += sut.string.format('<a class="btn btn-primary btn-xs" style="display:none"  id="aGuardarSustentarExpModalidad' + num + '" data-placement="right" title="Guardar Sustento"   href="javascript:sut.editProcedimiento.guardarSustentarExpModalidad({0},{1},{2},{3});"><i class="fa fa-floppy-o"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                                        rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none"  id="aCancelarSustentarExpModalidad' + num + '" data-placement="right" title="Quitar Sustento"    href="javascript:sut.editProcedimiento.CancelarSustentarExpModalidad({0},{1},{2},{3});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                                    }
                                                }
                                            }
                                        }


                                        rows += '<label id="mensajeModalidad' + num + '" class="label-primary label" style="font-size: 100%;font-weight: normal;"></label>';
                                        rows += '</div>';
                                        rows += '</div>';
                                        rows += '<table id="divModalidad0' + num + '" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">';
                                        rows += '<tbody></tbody>';
                                        rows += '</table>';
                                        rows += '</td>';
                                        rows += '</tr>';
                                    }



                                    var rows = '';
                                    rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                                    rows += '<td>';

                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].ProcedimientoCargosApeID" value="{1}" />', i, r.ProcedimientoCargosApeID);
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].ProcedimientoId" value="{1}" />', i, r.ProcedimientoId);
                                    rows += '</td>';

                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('<input type="text" name="ProcedimientoCargosApe[{0}].CargoApe" value="{1}" class="form-control" readonly/>', i, r.CargoApe);
                                    rows += sut.string.format('</td>');

                                    rows += sut.string.format('<td style="text-align: center;">');
                                    rows += sut.string.format('<div >');
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].UndOrgIdApe" value="{1}" />', i, r.UndOrgIdApe);
                                    rows += sut.string.format('<input type="text" name="UndOrgReconsideracionApelacion[{0}].Nombre" value="{1}" class="form-control" readonly />', i, r.NombreUndOrgApe);

                                    rows += sut.string.format('</div>');
                                    rows += sut.string.format('</td>');


                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('<input type="text" name="ProcedimientoCargosApe[{0}].PzoPresentApe" value="{1}" class="form-control" type = "number" readonly/>', i, r.PzoPresentApe);
                                    rows += sut.string.format('</td>');

                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosApe(i,  r.TipoApelPresent));
                                    rows += sut.string.format('</td>');

                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('<input type="text" name="ProcedimientoCargosApe[{0}].PzoResolApe" value="{1}" class="form-control" type = "number" readonly/>', i, r.PzoResolApe);
                                    rows += sut.string.format('</td>');

                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosresolApe(i,  r.TipoApelResol));
                                    rows += sut.string.format('</td>');

                                    @*rows += '<td><div class="btn-group">';
                                    if (i > 0) {
                                        if ("@user.rolmenu[0].Eliminar" == "True"){
                                            rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                        }
                                    }
                                    rows += '</div></td>';*@
                                    rows += '</tr>';


                                    tabla.append(rows);



                                    if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {
                                        if (@obs.Count != 0) {
                                            var cont1 = 0;
                                            var texto1 = "";


                                            for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {


                                                if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {

                                                    if (listaobservaciones[Mi].CodValidacion == "1") {
                                                        texto1 = listaobservaciones[Mi].Descripcion;
                                                        cont1 = 1;
                                                    }
                                                    else if (listaobservaciones[Mi].CodValidacion == "4") {


                                                        valiarbotonesModalidad('Modalidad', i);
                                                        $("#mensajeModalidad" + i).show();
                                                        document.querySelector("#mensajeModalidad" + i).innerText = 'Se valido con éxito';

                                                    }
                                                    else if (listaobservaciones[Mi].CodValidacion == "2") {
                                                        sut.editProcedimiento.textoobservacionModalidad("" + texto1 + "", "" + listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i,lista.length);
                                                    }

                                                    else if (listaobservaciones[Mi].CodValidacion == "5") {

                                                        canceladobotonesModalidad('Modalidad', i);

                                                    }
                                                    else if (listaobservaciones[Mi].CodValidacion == "3") {

                                                        sustentobotonesModalidad('Modalidad', i);
                                                        $("#mensajeModalidad" + i).show();
                                                        document.querySelector("#mensajeModalidad" + i).innerText = 'Se refuto con éxito';
                                                        sut.editProcedimiento.textosustentoModalidad(listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i);

                                                    }
                                                }
                                                else
                                                {
                                                    canceladobotonesModalidadsustento('Modalidad', i);
                                                }
                                            }

                                        }

                                    }


                                });
                                sut.editProcedimiento.Cargos.updateApelacion();

                            }
                        },
                        addApelacion: (indexReq, indexForm,TablaAsmeId,ProcedimientoId) => {
                            var tabla = $('#tablaApelacion1 tbody').eq(0);



                            //var i = tabla.children('tr').size();
                            var i = $('#tablaApelacion1 tbody').eq(0).children('tr.requisito').size();

                            var rows = '';
                            rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                            rows += '<td>';
                            //rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].ProcedimientoCargosApeID" value="{1}" />', i, 0);
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].ProcedimientoId" value="{1}" />', i, @Model.ProcedimientoId);
                            rows += '</td>';
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += '</td>';

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargosApe[{0}].CargoApe" value="{1}" class="form-control" />', i, '');
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td style="text-align: center;">');
                            rows += sut.string.format('<div class="input-group">');
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].UndOrgIdApe" value="{1}" />', i, 0);
                            rows += sut.string.format('<input type="text" name="UndOrgReconsideracionApelacion[{0}].Nombre" value="{1}" class="form-control" readonly />', i, '');
                            rows += sut.string.format('<div class="input-group-btn">');
                            rows += sut.string.format('<a href="javascript:sut.editProcedimiento.openSelectUndOrgDinamicoApelacion'+"('"+'sut.editProcedimiento.setUndOrgReconDinamicoApelacion'+"',2,{0})"+'" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>', i, 0);
                            rows += sut.string.format('</div>');
                            rows += sut.string.format('</div>');
                            rows += sut.string.format('</td>');


                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargosApe[{0}].PzoPresentApe" value="{1}" class="form-control" type="number" />', i, '');
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargosApe[{0}].PzoResolApe" value="{1}" class="form-control"  type="number"/>', i, '');
                            rows += sut.string.format('</td>');


                            @*rows += '<td><div class="btn-group">';
                            if (i > 0) {
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                }
                            }
                            rows += '</div></td>';*@
                            rows += '</tr>';





                            tabla.append(rows);
                            sut.editProcedimiento.Cargos.updateApelacion();
                            //sut.editProcedimiento.guardarApelacion(true);
                        },
                        deleteApelacion: function (id) {

                            var model = {
                                ProcedimientoCargosApeID: id
                            }

                            $.ajax({
                                //url: "/Simplificacion/UnidadOrganica/Eliminar",
                                url: '@Url.Content("~/Simplificacion/Procedimiento/EliminarApelacion")',
                                type: "POST",
                                data: model,
                                dataType: "json",
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    sut.wait.removeOverlay('#boxLista');
                                    showNotification('top', 'right', 'Elimino con Éxito ', 1);
                                    window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = @Model.ProcedimientoId })' + '?tab=edit-info-basica';
                                },
                                error: function (data) {

                                    $('#modal-ventana').modal('hide');
                                    //sut.wait.removeOverlay('#boxLista');
                                    ////sut.error.show('mensajes', data.responseText);
                                    //sut.error.show('mensajes',"Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ");
                                    showNotification('top', 'right', 'Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ', 2);
                                }
                            });

                        },
                        updateApelacion: function () {

                            var cont = 0;
                            $.each($('#tablaApelacion tbody tr.requisito'), function (i, tr) {
                                $(tr).data('index', i);
                                $(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="ProcedimientoCargosApeID"]').attr('name', sut.string.format('ProcedimientoCargosApe[{0}].ProcedimientoCargosApeID', i));
                                $(tr).find('td input[name$="CargoApe"]').attr('name', sut.string.format('ProcedimientoCargosApe[{0}].CargoApe', i));
                                $(tr).find('td input[name$="UndOrgIdApe"]').attr('name', sut.string.format('ProcedimientoCargosApe[{0}].UndOrgIdApe', i));
                                $(tr).find('td input[name$="PzoPresentApe"]').attr('name', sut.string.format('ProcedimientoCargosApe[{0}].PzoPresentApe', i));
                                $(tr).find('td input[name$="PzoResolApe"]').attr('name', sut.string.format('ProcedimientoCargosApe[{0}].PzoResolApe', i));
                            });
                        },

                        /***************Revision*********************/
                        initOtros: function () {


                            var lista = @Html.Raw(ViewBag.ListaProcedimientoCargosOtros != null ? ViewBag.ListaProcedimientoCargosOtros : "[]");
                            @*var listaobservaciones = @Html.Raw(ViewBag.ListaObservacionCargosApe != null ? ViewBag.ListaObservacionCargosApe : "[]");*@
                            var tabla = $('#tablaOtros1 tbody');
                            var num = 1;
                            if (lista.length > 0) {
                                var data = [];
                                $.each(lista, function (i, r) {

                                    num = i ;
                                    var rows = '';

                                    var rows = '';
                                    rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                                    rows += '<td>';
                                    //rows += sut.string.format('<span>{0}</span>', i + 1);


                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].ProcedimientoCargosOtrosID" value="{1}" />', i, r.ProcedimientoCargosOtrosID);
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].ProcedimientoId" value="{1}" />', i, r.ProcedimientoId);
                                    rows += '</td>';
                                    //rows += '<td>';
                                    //rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].ordenotros" value="{1}" />',i, i + 1);
                                    //rows += sut.string.format('<span>{0}</span>', i + 1);
                                    //rows += '</td>';

                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('<input type="text" name="ProcedimientoCargosOtros[{0}].CargoOtros" value="{1}" class="form-control" readonly />', i, r.CargoOtros);
                                    rows += sut.string.format('</td>');





                                    rows += sut.string.format('<td style="text-align: center;">');
                                    rows += sut.string.format('<div >');
                                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].UndOrgIdOtros" value="{1}" />', i, r.UndOrgIdOtros);
                                    rows += sut.string.format('<input type="text" name="UndOrgOtros[{0}].Nombre" value="{1}" class="form-control" readonly />', i, r.NombreUndOrgOtros);
                                    rows += sut.string.format('</div>');
                                    rows += sut.string.format('</td>');


                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('<input type="text" name="ProcedimientoCargosOtros[{0}].PzoPresentOtros" value="{1}" class="form-control" type = "number"  readonly/>', i, r.PzoPresentOtros);
                                    rows += sut.string.format('</td>');
                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosOtros(i,  r.TipoOtrosPresent));
                                    rows += sut.string.format('</td>');

                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('<input type="text" name="ProcedimientoCargosOtros[{0}].PzoResolOtros" value="{1}" class="form-control" type = "number" readonly/>', i, r.PzoResolOtros);
                                    rows += sut.string.format('</td>');

                                    rows += sut.string.format('<td>');
                                    rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosresolOtros(i,  r.TipoOtrosResol));
                                    rows += sut.string.format('</td>');


                                    rows += '</tr>';




                                    tabla.append(rows);



                                    });
                                sut.editProcedimiento.Cargos.updateOtros();

                            }
                        },
                        addOtros: (indexReq, indexForm,TablaAsmeId,ProcedimientoId) => {
                            var tabla = $('#tablaOtros1 tbody').eq(0);



                            //var i = tabla.children('tr').size();
                            var i = $('#tablaOtros1 tbody').eq(0).children('tr.requisito').size();

                            var rows = '';
                            rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                            rows += '<td>';
                            //rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].ProcedimientoCargosOtrosID" value="{1}" />', i, 0);
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].ProcedimientoId" value="{1}" />', i, @Model.ProcedimientoId);
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].ordenotros" value="{1}" />', i,i+1);
                            rows += '</td>';
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += '</td>';

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargosOtros[{0}].CargoOtros" value="{1}" class="form-control" />', i, '');
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td style="text-align: center;">');
                            rows += sut.string.format('<div class="input-group">');
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].UndOrgIdOtros" value="{1}" />', i, 0);
                            rows += sut.string.format('<input type="text" name="UndOrgOtros[{0}].Nombre" value="{1}" class="form-control" readonly />', i, '');
                            rows += sut.string.format('<div class="input-group-btn">');
                            rows += sut.string.format('<a href="javascript:sut.editProcedimiento.openSelectUndOrgDinamicoOtros'+"('"+'sut.editProcedimiento.setUndOrgReconDinamicoOtros'+"',2,{0})"+'" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>', i, 0);
                            rows += sut.string.format('</div>');
                            rows += sut.string.format('</div>');
                            rows += sut.string.format('</td>');


                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargosOtros[{0}].PzoPresentOtros" value="{1}" class="form-control" type="number" />', i, '');
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosOtros(i,  0));
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargosOtros[{0}].PzoResolOtros" value="{1}" class="form-control"  type="number"/>', i, '');
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosresolOtros(i,  0));
                            rows += sut.string.format('</td>');


                            @*rows += '<td><div class="btn-group">';
                            if (i > 0) {
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                }
                            }
                            rows += '</div></td>';*@
                            rows += '</tr>';





                            tabla.append(rows);
                            sut.editProcedimiento.Cargos.updateOtros();
                            //sut.editProcedimiento.guardarOtros(true);
                        },
                        deleteOtros: function (id) {

                            var model = {
                                ProcedimientoCargosOtrosID: id
                            }

                            $.ajax({
                                //url: "/Simplificacion/UnidadOrganica/Eliminar",
                                url: '@Url.Content("~/Simplificacion/Procedimiento/EliminarOtros")',
                                type: "POST",
                                data: model,
                                dataType: "json",
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    sut.wait.removeOverlay('#boxLista');
                                    showNotification('top', 'right', 'Elimino con Éxito ', 1);
                                    window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = @Model.ProcedimientoId })' + '?tab=edit-info-basica';
                                },
                                error: function (data) {

                                    $('#modal-ventana').modal('hide');
                                    //sut.wait.removeOverlay('#boxLista');
                                    ////sut.error.show('mensajes', data.responseText);
                                    //sut.error.show('mensajes',"Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ");
                                    showNotification('top', 'right', 'Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ', 2);
                                }
                            });

                        },
                        updateOtros: function () {

                            var cont = 0;
                            $.each($('#tablaOtros tbody tr.requisito'), function (i, tr) {
                                $(tr).data('index', i);
                                $(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="ProcedimientoCargosOtrosID"]').attr('name', sut.string.format('ProcedimientoCargosOtros[{0}].ProcedimientoCargosOtrosID', i));
                                $(tr).find('td input[name$="CargoOtros"]').attr('name', sut.string.format('ProcedimientoCargosOtros[{0}].CargoOtros', i));
                                $(tr).find('td input[name$="UndOrgIdOtros"]').attr('name', sut.string.format('ProcedimientoCargosOtros[{0}].UndOrgIdOtros', i));
                                $(tr).find('td input[name$="PzoPresentOtros"]').attr('name', sut.string.format('ProcedimientoCargosOtros[{0}].PzoPresentOtros', i));
                                $(tr).find('td input[name$="PzoResolOtros"]').attr('name', sut.string.format('ProcedimientoCargosOtros[{0}].PzoResolOtros', i));
                                $(tr).find('td input[name$="ordenotros"]').attr('name', sut.string.format('ProcedimientoCargosOtros[{0}].ordenotros', i));
                            });
                        },

                        /********************************************/
                    },
                    Modalidad : {
                        init: function () {


                            var lista = @Html.Raw(ViewBag.ListaModalidad != null ? ViewBag.ListaModalidad : "[]");
                            var listaobservaciones = @Html.Raw(ViewBag.ListaObservacion != null ? ViewBag.ListaObservacion : "[]");
                            var tabla = $('#tblModalidad tbody');
                            var num = 1;
                            if (lista.length > 0) {
                                var data = [];
                                $.each(lista, function (i, r) {

                                    num = i ;
                                    var rows = '';

                                    if ((@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7 ) && '@Model.Expediente.EstadoExpediente' != '@EstadoExpediente.EnProceso') {
                                        rows += sut.string.format('<tr data-index="{0}" >', num);
                                        rows += '<td colspan="5">';
                                        rows += '<div class="form-group">';
                                        rows += '<div class="col-sm-10 col-xs-12">';
                                    @*/*botones unicos*/*@
                                        rows += sut.string.format('<a class="btn btn-success btn-xs" style="display:none" id="aValidarObservarExpModalidad' + num + '"  data-placement="right" title="Validar" href="javascript:sut.editProcedimiento.ValObservarexp.validarObservarExpModalidad({0},{1},{2},{3});"><i class="fa fa-thumbs-o-up"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);

                                        rows += sut.string.format('<a class="btn btn-info btn-xs" id="aObservarEditarExpModalidad' + num + '"  data-placement="right" title="Observar" href="javascript:sut.editProcedimiento.ValObservarexp.observareditarExpModalidad({0},{1});"><i class="fa fa-eye"></i></a>',num,lista.length);

                                        rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none" id="aCancelarGeneralExpModalidad' + num + '" data-placement="right"  title="Quitar Validación" href="javascript:sut.editProcedimiento.ValObservarexp.CancelarGeneralExpModalidad({0},{1},{2},{3});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);

                                        rows += sut.string.format('<a class="btn btn-primary btn-xs" style="display:none" data-placement="right" title="Guardar" id="aAsignarGuardarObservarExpModalidad' + num + '" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarguardarObservarExpModalidad({0},{1},{2},{3});"><i class="fa fa-floppy-o"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                        rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none"data-placement="right" title="Cancelar"  id="aAsignarCancelarObservarExpModalidad' + num + '" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarCancelarObservarExpModalidad({0},{1},{2},{3});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                        @*/*botones Generados*/*@

                                        rows += '<label id="mensajeModalidad' + num + '" style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>';




                                        rows += '</div>';
                                        rows += '</div>';
                                        rows += '<table id="divModalidad0' + num + '" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">';
                                        rows += '<tbody></tbody>';
                                        rows += '</table>';
                                        rows += '</td>';
                                        rows += '</tr>';
                                    }
                                    else
                                    {
                                        rows += sut.string.format('<tr data-index="{0}" >', num);
                                        rows += '<td colspan="5">';
                                        rows += '<label id="mensajeModalidad' + num + '" style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>';
                                        rows += '<table id="divModalidad0' + num + '" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">';
                                        rows += '<tbody></tbody>';
                                        rows += '</table>';
                                        rows += '</td>';
                                        rows += '</tr>';
                                    }



                                    rows += sut.string.format('<tr data-index="{0}"  id="trModalidad' + num + '" >', i);
                                    rows += '<td>';
                                    rows += sut.string.format('<span>{0}</span>', i + 1);
                                    rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].TablaAsmeId" value="{1}" />', i, r.TablaAsmeId);
                                    rows += '</td>';
                                    //rows += sut.string.format('<td><input type="text" name="TablaAsme[{0}].Codigo" value="{1}" class="form-control" readonly /></td>', i, r.Codigo);


                                    rows += sut.string.format('<td>');
                                    if(lista.length > 1){
                                        var descr='';
                                        if(r.Descripcion!=null && r.Descripcion!='null' ){
                                            descr=r.Descripcion;
                                        }
                                        rows += sut.string.format('<input type="text" id="DesModalidad'+i+'" name="TablaAsme[{0}].Descripcion" value="{1}" class="form-control" {2} />', i, r.Descripcion, 'readonly');
                                    }


                                    rows += sut.string.format('</td>');


                                    rows += sut.string.format('<td><input type="checkbox" id="chekModalidad' + i +'" name="TablaAsme[{0}].EsGratuito"  {1} {2} /></td>', i, r.EsGratuito ? 'checked' : '', 'disabled');

                                    if(sut.editProcedimiento.esTupaEstandar) {
                                        //rows += sut.string.format('<td><input id="PreModalidad' + i +'" name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" readonly /></td>', i, r.Prestaciones);
                                    } else if (sut.editProcedimiento.esCargaInicial) {
                                        if (!sut.editProcedimiento.esProcEstadar) {
                                            rows += sut.string.format('<td><input id="CostoModalidad' + i + '" name="TablaAsme[{0}].CostoUnitario" value="{1}" class="form-control" type="number" min="1" readonly /></td>', i, r.CostoUnitario);
                                        } else {
                                            //rows += sut.string.format('<td><input id="PreModalidad' + i + '" name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" readonly /></td>', i, r.Prestaciones);

                                        }
                                    } else {
                                        //if (!sut.editProcedimiento.esProcEstadar) {
                                        //rows += sut.string.format('<td><input id="PreModalidad' + i +'" name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" readonly /></td>', i, r.Prestaciones);
                                        //}
                                    }


                                       if (@Model.Calificaciones==1)
                                         {
                                            rows += '<td><div class="btn-group">';
                                                if (i > 0) {
                                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                                    rows += sut.string.format('{0}', sut.editProcedimiento.comboCalificaciones(i, r.Calificacion));
                                                }
                                            }
                                            rows += '</div></td>';

                                         }

                                    rows += '<td><div class="btn-group">';
                                    if (i > 0) {
                                        //rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                    }
                                    rows += '</div></td>';
                                    rows += '</tr>';
                                    //trabajarlo urgente
                                    if (r.EsGratuito === true) {
                                        rows += sut.string.format('<tr><td colspan="4"><table data-formtable={0} class="table table-condensed table-bordered">',i);
                                        rows += '<thead><tr><th style="width:50px;"></th><th style="width:40px;">';
                                        rows += '</th><th style="width:400px;">Descripcion</th><th style="width:60px;">Costo</th><th style="width:450px;">Sustento</th><th style="width:50px;"></th></tr></thead><tbody>';


                                        $.each(r.TablaAsmeReproduccion, (k, f) => {
                                            f.indexForm = k;
                                            f.ReproduccionId = f.ReproduccionId;
                                            f.TablaAsmeId = f.TablaAsmeId;
                                            f.Descripcion = f.Descripcion;
                                            f.Costo = f.Costo;
                                            f.Sustento = f.Sustento;
                                            rows += sut.editProcedimiento.Modalidad.newFilaRecursos(f);
                                        });
                                        rows += '</tbody></table></tr>';
                                    }

                                    tabla.append(rows);
                                    @*if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7) {*@
                                        if (@obs.Count != 0) {
                                            var cont1 = 0;
                                            var texto1 = "";
                                            for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {


                                                if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {

                                                    if (listaobservaciones[Mi].CodValidacion == "1") {
                                                        texto1 = listaobservaciones[Mi].Descripcion;
                                                    }
                                                    else if (listaobservaciones[Mi].CodValidacion == "4") {


                                                        valiarbotonesModalidad('Modalidad', i);
                                                        $("#mensajeModalidad" + i).show();
                                                        $('#aValidarObservarExpModalidad'+ num + '').css("display", "none");
                                                        if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                        {
                                                            document.querySelector("#mensajeModalidad" + i).innerText = 'Se valido con éxito';
                                                        }
                                                        else
                                                        {
                                                            $("#mensajeModalidad" + i).hide();
                                                        }


                                                    }
                                                    else if (listaobservaciones[Mi].CodValidacion == "2") {
                                                        //window.addEventListener("load", function() {
                                                        observarbotonesModalidad('Modalidad', i);
                                                        $("#mensajeModalidad" + i).show();
                                                        if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                        {
                                                            document.querySelector("#mensajeModalidad" + i).innerText = 'Se observo con éxito';
                                                        }
                                                        else
                                                        {
                                                            $("#mensajeModalidad" + i).hide();
                                                        }


                                                        sut.editProcedimiento.textoobservacionModalidad("" + texto1 + "", "" + listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i,lista.length);
                                                        //});
                                                    }

                                                    else if (listaobservaciones[Mi].CodValidacion == "5") {

                                                        canceladobotonesModalidad('Modalidad', i);

                                                    }
                                                    else if (listaobservaciones[Mi].CodValidacion == "3") {
                                                        if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                        { }
                                                        else{    $("#mensajeModalidad" + i).hide(); }
                                                        //sustentobotonesModalidad('Modalidad',i);
                                                        //$("#mensajeModalidad" + i).show();
                                                        //document.querySelector("#mensajeModalidad" + i).innerText = 'Sustento';
                                                        sut.editProcedimiento.textosustentoModalidad( listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i);

                                                    }
                                                }
                                            }

                                        }

                                });
                            }
                        },
                        newFilaRecursos: (r) => {

                            var rows = sut.string.format('<tr id="formulario" data-index="{0}" class="formulario" >', r.indexForm);
                            rows += '<td></td>';
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', r.indexForm + 1);
                            rows += '</td>';
                            rows += sut.string.format('<td>{0}</td>', r.Descripcion);
                            rows += sut.string.format('<td>{0}</td>', r.Costo);
                            rows += sut.string.format('<td>{0}</td>', r.Sustento);

                            @*rows += '<td class="text-center" ><div class="btn-group">';
                            if ("@user.rolmenu[0].Editar" == "True"){
                                rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.Modalidad.edit({0}, {1}, {2}, {3})" ><i class="fa fa-pencil" ></i></a>', r.indexReq, r.ReproduccionId, r.TablaAsmeId, @Model.ProcedimientoId);
                            }
                            if ("@user.rolmenu[0].Eliminar" == "True"){
                                rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.eliminar({0})" ><i class="fa fa-close" ></i></a>', r.ReproduccionId);
                            }
                            rows += '</div></td>';*@
                            rows += '</tr>';
                            return rows;
                        },
                        add: function () {
                            var tabla = $('#tblModalidad tbody');

                            var i = tabla.children('tr').size();

                            var rows = '';
                            rows += sut.string.format('<tr data-index="{0}" >', i);
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].TablaAsmeId" value="{1}" />', i, 0);
                            rows += '</td>';
                            //rows += sut.string.format('<td><input type="text" name="TablaAsme[{0}].Codigo" value="{1}" class="form-control" readonly /></td>', i, '-');
                            rows += sut.string.format('<td><input type="text" name="TablaAsme[{0}].Descripcion" value="{1}" class="form-control" /></td>', i, '');
                            rows += sut.string.format('<td><input type="checkbox" name="TablaAsme[{0}].EsGratuito" /></td>', i);

                            if (sut.editProcedimiento.esTupaEstandar) {
                                //rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" /></td>', i, 0);
                            } else if (sut.editProcedimiento.esCargaInicial) {
                                if (!sut.editProcedimiento.esProcEstadar) {
                                    rows += sut.string.format('<td><input name="TablaAsme[{0}].CostoUnitario" value="{1}" class="form-control" type="number" min="1" /></td>', i, 0);
                                }
                            } else {
                                if (!sut.editProcedimiento.esProcEstadar) {
                                    //rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" /></td>', i, 0);
                                }
                            }





                            rows += '<td><div class="btn-group">';
                            if (i > 0) {
                                rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                            }
                            rows += '</div></td>';
                            rows += '</tr>';

                            tabla.append(rows);
                            sut.editProcedimiento.Modalidad.update();
                        },
                        delete: function (id) {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                $.each($('#tblModalidad tbody tr'), function (index, tr) {
                                    var i = Number($(tr).data('index'));
                                    if (i == id) $(tr).remove();
                                });
                                sut.editProcedimiento.Modalidad.update();
                            });
                        },
                        update: function () {
                            $.each($('#tblModalidad tbody tr'), function (i, tr) {
                                $(tr).data('index', i);
                                $(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="TablaAsmeId"]').attr('name', sut.string.format('TablaAsme[{0}].TablaAsmeId', i));
                                //$(tr).find('td input[name$="Codigo"]').attr('name', sut.string.format('TablaAsme[{0}].Codigo', i));
                                $(tr).find('td input[name$="Descripcion"]').attr('name', sut.string.format('TablaAsme[{0}].Descripcion', i));
                                $(tr).find('td input[name$="EsGratuito"]').attr('name', sut.string.format('TablaAsme[{0}].EsGratuito', i));
                                //$(tr).find('td input[name$="Prestaciones"]').attr('name', sut.string.format('TablaAsme[{0}].Prestaciones', i));

                                $(tr).find('td div a').attr('href', sut.string.format('javascript:sut.editProcedimiento.Modalidad.delete({0})', i));
                            });
                        }
                    },
                    Requisito: {
                        indexReq: 0,
                        textCadenaTramite: (val, index) => {
                            rows = '';
                            rows += '<div class="input-group">';
                            rows += sut.string.format('<input type="text" name="Requisito[{0}].CadenaTramite" value="{1}" class="form-control input-sm" />', index, val || '');
                            rows += '<div class="input-group-btn">';
                            rows += sut.string.format('<a href="javascript:sut.editProcedimiento.Requisito.openCadenaTramite({0})" class="cadenaTramite btn btn-danger btn-sm"><i class="fa fa-ellipsis-h"></i></a>', index);
                            rows += '</div>';
                            rows += '</div>';
                            return rows;
                        },
                        setCadenaTramite: (data) => {
                            $('#modal-ventana').modal('hide');

                            var index = sut.editProcedimiento.Requisito.indexReq;
                            var req = $('#tblRequisito tbody tr.requisito').eq(index);
                            req.find('input[name$="CadenaTramite"]').val(data.Codigo);
                        },
                        openCadenaTramite: (index) => {
                            sut.editProcedimiento.Requisito.indexReq = index;
                            $.ajax({
                                type: "GET",
                                //url: '/Simplificacion/Procedimiento/Select',
                                url: '@Url.Content("~/Simplificacion/Procedimiento/Select")',
                                data: { tipo: 1, multi: false, fnAdd: 'sut.editProcedimiento.Requisito.setCadenaTramite' },
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        init: function () {

                            var lista = @Html.Raw(ViewBag.ListaRequisito != null ? ViewBag.ListaRequisito : "[]");
                            var tabla = $('#tblRequisito tbody');

                            if (lista.length > 0) {
                                var lista = @Html.Raw(ViewBag.ListaRequisito != null ? ViewBag.ListaRequisito : "[]");
                                var listaObservacionRequisitos = @Html.Raw(ViewBag.ListaObservacionRequisitos != null ? ViewBag.ListaObservacionRequisitos : "[]");
                                var tablaRGeneral = $('#tblRequisitoGeneral tbody');
                                var tablaREspecifico = $('#tblRequisitoEspecifico tbody');
                                var counttablaRGeneral = 0;
                                var counttablaREspecifico = 0;


                                if (lista.length > 0) {
                                    var data = [];
                                    $.each(lista, function (i, r) {
                                        var num = i;

                                        var rows = '';
                                        //if (r.TipoRequisito === 1) {
                                        //    i = counttablaRGeneral;
                                        //} else {
                                        //    i = counttablaREspecifico;
                                        //}

                                        i = counttablaRGeneral + counttablaREspecifico;


                                        if ((@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7  ) && '@Model.Expediente.EstadoExpediente' != '@EstadoExpediente.EnProceso')  {
                                            rows += sut.string.format('<tr data-index="{0}" >', num);
                                            rows += '<td colspan="5">';
                                            rows += '<div class="form-group">';
                                            rows += '<div class="col-sm-10 col-xs-12">';
                                            @*/*botones unicos*/*@
                                            rows += sut.string.format('<a class="btn btn-success btn-xs" style="display:none" id="aValidarObservarExpRequisitos' + num + '"  data-placement="right"  title="Validar" href="javascript:sut.editProcedimiento.ValObservarexp.validarObservarExpRequisitos({0},{1},{2},{3});"><i class="fa fa-thumbs-o-up"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.RequisitoId);

                                            rows += sut.string.format('<a class="btn btn-info btn-xs" id="aObservarEditarExpRequisitos' + num + '"  data-placement="right" title="Observar" href="javascript:sut.editProcedimiento.ValObservarexp.observareditarExpRequisitos({0});"><i class="fa fa-eye"></i></a>',num);

                                            rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none" id="aCancelarGeneralExpRequisitos' + num + '" data-placement="right"  title="Quitar Validación" href="javascript:sut.editProcedimiento.ValObservarexp.CancelarGeneralExpRequisitos({0},{1},{2},{3});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.RequisitoId);

                                            rows += sut.string.format('<a class="btn btn-primary btn-xs" style="display:none" data-placement="right" title="Guardar" id="aAsignarGuardarObservarExpRequisitos' + num + '" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarguardarObservarExpRequisitos({0},{1},{2},{3});"><i class="fa fa-floppy-o"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.RequisitoId);
                                            rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none" data-placement="right" title="Cancelar" id="aAsignarCancelarObservarExpRequisitos' + num + '" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarCancelarObservarExpRequisitos({0},{1},{2},{3});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.RequisitoId);
                                            @*/*botones Generados*/*@

                                            rows += '<label id="mensajeRequisitos' + num + '"style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>';


                                            rows += '</div>';
                                            rows += '</div>';
                                            rows += '<table id="divRequisitos0' + num + '" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">';
                                            rows += '<tbody></tbody>';
                                            rows += '</table>';
                                            rows += '</td>';
                                            rows += '</tr>';
                                        }else
                                        {
                                            rows += sut.string.format('<tr data-index="{0}" >', num);
                                            rows += '<td colspan="5">';
                                            rows += '<label id="mensajeRequisitos' + num + '"style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>';
                                            rows += '<table id="divRequisitos0' + num + '" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">';
                                            rows += '<tbody></tbody>';
                                            rows += '</table>';
                                            rows += '</td>';
                                            rows += '</tr>';
                                        }



                                        if(r.Titulo!="" &&  r.Titulo!=undefined || r.EditableTitulo== 1  ){
                                            rows += sut.string.format('<tr data-index="{0}">', i);
                                            rows += '<td colspan="3">';
                                            //rows += '</td>';
                                            //rows += '<td>';

                                            rows += sut.string.format('<textarea style="scroll-behavior: smooth;resize:vertical;" class="form-control" data-val="true"  readonly style="border-color: transparent ;  font-weight: bold;background: transparent;"  name="Requisito[{0}].Titulo"    norequired="True"  type="text"  aria-required="true">{1}</textarea>', i, r.Titulo || '');


                                            rows += '</td>';
                                            rows += '</tr>';
                                        }




                                        rows += sut.string.format('<tr data-index="{0}" class="requisito" id="trRequisitos' + num + '" >', i);
                                        rows += '<td>';
                                        //rows += sut.string.format('<span>{0}</span>', i + 1);
                                        rows += sut.string.format('<span>{0}</span>', r.RecNum);


                                        rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoId" value="{1}" />', i, r.RequisitoId);
                                        rows += sut.string.format('<input type="hidden" name="Requisito[{0}].BaseLegalId" value="{1}" />', i, r.BaseLegalId);
                                        rows += sut.string.format('<input type="hidden" name="Requisito[{0}].SustentoTecnico" value="{1}" />', i, r.SustentoTecnico || '');
                                        rows += sut.string.format('<input type="hidden" name="Requisito[{0}].TipoRequisito" value="{1}" />', i, r.TipoRequisito);
                                        rows += '</td>';
                                        //if (!sut.editProcedimiento.esTupaEstandar && !sut.editProcedimiento.esProcEstadar) {
                                        //    rows += sut.string.format('<td><textarea id="Nombre' + num + '" style="scroll-behavior: smooth;resize:vertical;" name="Requisito[{0}].Nombre" value="{1}" class="form-control" readOnly >{1}</textarea></td>', i, r.Nombre || '');
                                        //    //rows += sut.string.format('<td><textarea name="Requisito[{0}].Descripcion" class="form-control" >{1}</textarea></td>', i, r.Descripcion || '');
                                        //} else if (sut.editProcedimiento.esTupaEstandar && sut.editProcedimiento.esProcEstadar) {
                                        //    rows += sut.string.format('<td><input type="text" id="Nombre' + num + '" name="Requisito[{0}].Nombre" value="{1}" class="form-control" readOnly /></td>', i, r.Nombre || '');
                                        //    //rows += sut.string.format('<td><textarea name="Requisito[{0}].Descripcion" class="form-control" >{1}</textarea></td>', i, r.Descripcion || '');
                                        //} else {
                                        //    rows += sut.string.format('<td><input type="text" id="Nombre' + num + '" name="Requisito[{0}].Nombre" value="{1}" class="form-control" readOnly /></td>', i, r.Nombre || '');
                                        //    //rows += sut.string.format('<td><textarea name="Requisito[{0}].Descripcion" class="form-control" readonly >{1}</textarea></td>', i, r.Descripcion || '');
                                        //}

                                        rows += sut.string.format('<td colspan="2"><label  class="form-control" id="Nombre' + num + '" style="border-color:#ddd;background: #eeeeee;font-weight: 600;height: 100%;" name="Requisito[{0}].Nombre">{1}</label></td>', i, r.Nombre || '');

                                        //rows += sut.string.format('<td>{0}</td>', sut.editProcedimiento.Requisito.textCadenaTramite(r.CadenaTramite, i));
                                        //rows += '<td class="text-center" ><div class="btn-group">';

                                        //if (!sut.editProcedimiento.esTupaEstandar && !sut.editProcedimiento.esProcEstadar) {
                                        //    //rows += sut.string.format('<a class="delRequisito btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Requisito.delete({0},{1})" ><i class="fa fa-close" ></i></a>', i, r.TipoRequisito);
                                        //} else if (sut.editProcedimiento.esTupaEstandar && sut.editProcedimiento.esProcEstadar) {
                                        //    //rows += sut.string.format('<a class="delRequisito btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Requisito.delete({0},{1})" ><i class="fa fa-close" ></i></a>', i, r.TipoRequisito);
                                        //} else {

                                        //}
                                        //rows += '</div></td>';
                                        rows += '</tr>';
                                        if (r.TipoRequisito === 1) {
                                            rows += '<tr><td colspan="4"><table class="table table-condensed table-bordered" style="margin-bottom: 0px;">';
                                            rows += '<thead><tr><th style="width:100px;"></th><th style="width:100px;">';
                                            //rows += sut.string.format('<a href="javascript:sut.editProcedimiento.Formulario.edit({0},null,{1})" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>', i, r.TipoRequisito);

                                            rows += '</th><th>Formulario</th><th style="width:60px;">Archivo</th><th style="width:100px;"></th></tr></thead><tbody>';
                                        }
                                        $.each(r.RequisitoFormulario, (k, f) => {
                                            f.indexReq = r.TipoRequisito === 1 ? counttablaRGeneral : counttablaREspecifico;
                                            f.indexForm = k;
                                            f.TipoRequisito = r.TipoRequisito;
                                            rows += sut.editProcedimiento.Formulario.newFila(f);
                                        });

                                        rows += '</tbody></table></td></tr>';

                                        if (r.TipoRequisito === 1) {
                                            tablaRGeneral.append(rows);
                                            counttablaRGeneral++;
                                        } else {
                                            tablaREspecifico.append(rows);
                                            counttablaREspecifico++;
                                        }

                                        @*if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7) {*@
                                            if (@obs.Count != 0) {
                                                var cont1 = 0;
                                                var texto1 = "";
                                                for (var Mi = 0; Mi < listaObservacionRequisitos.length; Mi += 1) {


                                                    if (listaObservacionRequisitos[Mi].Pantalla == "Datos Generales" && listaObservacionRequisitos[Mi].NombreCampo == "NombredelosRequisitos" + i) {

                                                        if (listaObservacionRequisitos[Mi].CodValidacion == "1") {
                                                            texto1 = listaObservacionRequisitos[Mi].Descripcion;
                                                        }
                                                        else if (listaObservacionRequisitos[Mi].CodValidacion == "4") {


                                                            valiarbotonesModalidad('Requisitos', i);
                                                            $("#mensajeRequisitos" + i).show();

                                                            $('#aValidarObservarExpRequisitos' + num + '').css("display", "none");
                                                            if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                            {
                                                                document.querySelector("#mensajeRequisitos" + i).innerText = 'Se valido con éxito';
                                                            }
                                                            else
                                                            {
                                                                $("#mensajeRequisitos" + i).hide();
                                                            }


                                                        }
                                                        else if (listaObservacionRequisitos[Mi].CodValidacion == "2") {
                                                            //window.addEventListener("load", function() {
                                                            observarbotonesModalidad('Requisitos', i);
                                                            $("#mensajeRequisitos" + i).show();
                                                            if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                            {
                                                                document.querySelector("#mensajeRequisitos" + i).innerText = 'Se observo con éxito';
                                                            }
                                                            else
                                                            {
                                                                $("#mensajeRequisitos" + i).hide();
                                                            }


                                                            sut.editProcedimiento.textoobservacionRequisitos("" + texto1 + "", "" + listaObservacionRequisitos[Mi].Descripcion + "", 4, "" + listaObservacionRequisitos[Mi].EstadoExpediente + "", i);
                                                            //});
                                                        }

                                                        else if (listaObservacionRequisitos[Mi].CodValidacion == "5") {

                                                            canceladobotonesModalidad('Requisitos', i);

                                                        }
                                                        else if (listaObservacionRequisitos[Mi].CodValidacion == "3") {
                                                            if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                            { }
                                                            else{  $("#mensajeRequisitos" + i).hide(); }
                                                            //sustentobotonesModalidad('Requisitos',i);
                                                            //$("#mensajeRequisitos" + i).show();
                                                            //document.querySelector("#mensajeRequisitos" + i).innerText = 'Sustento';
                                                            sut.editProcedimiento.textosustentoRequisitos( listaObservacionRequisitos[Mi].Descripcion + "", 4, "" + listaObservacionRequisitos[Mi].EstadoExpediente + "", i);

                                                        }
                                                    }
                                                }

                                            }



                                    });

                                    sut.editProcedimiento.Requisito.update();

                                }
                            }
                        },
                        add: function () {
                            var tabla = $('#tblRequisito tbody').eq(0);

                            var i = tabla.children('tr.requisito').size();

                            var rows = '';
                            rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoId" value="{1}" />', i, 0);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].BaseLegalId" value="{1}" />', i, 0);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].SustentoTecnico" value="{1}" />', i, '');
                            rows += '</td>';
                            //rows += sut.string.format('<td><input type="text" name="Requisito[{0}].Codigo" value="{1}" class="form-control" readonly /></td>', i, '-');
                            rows += sut.string.format('<td><input type="text" name="Requisito[{0}].Nombre" value="{1}" class="form-control" required /></td>', i, '');
                            //rows += sut.string.format('<td><textarea name="Requisito[{0}].Descripcion" class="form-control" >{1}</textarea></td>', i, '');
                            //rows += sut.string.format('<td>{0}</td>', sut.editProcedimiento.Requisito.textCadenaTramite('', i));
                            rows += '<td class="text-center" ><div class="btn-group">';
                            rows += sut.string.format('<a class="delRequisito btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Requisito.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                            rows += '</div></td>';
                            rows += '</tr>';

                            tabla.append(rows);
                            sut.editProcedimiento.Requisito.update();
                        },
                        delete: function (index) {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var req = $('#tblRequisito tbody tr.requisito').eq(index);
                                if (Number(req.find('td input[name$="RequisitoId"]').val()) > 0) req.next().remove();
                                req.remove();

                                //$.each($('#tblRequisito tbody tr.requisito'), function (index, tr) {
                                //    var i = Number($(tr).data('index'));
                                //    if (i == id) $(tr).remove();
                                //});
                                sut.editProcedimiento.Requisito.update();
                            });
                        },
                        update: function () {
                            var cont = 0;

                            $.each($('#tblRequisitoGeneral tbody tr.requisito'), function (i, tr) {
                                $(tr).data('index', i);
                                //$(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="RequisitoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoId', cont));
                                $(tr).find('td input[name$="TipoRequisito"]').attr('name', sut.string.format('Requisito[{0}].TipoRequisito', cont));
                                $(tr).find('td input[name$="BaseLegalId"]').attr('name', sut.string.format('Requisito[{0}].BaseLegalId', cont));
                                $(tr).find('td input[name$="SustentoTecnico"]').attr('name', sut.string.format('Requisito[{0}].SustentoTecnico', cont));
                                $(tr).find('td textarea[name$="Nombre"]').attr('name', sut.string.format('Requisito[{0}].Nombre', cont));
                                $(tr).find('td input[name$="CadenaTramite"]').attr('name', sut.string.format('Requisito[{0}].CadenaTramite', cont));
                                $(tr).find('td input[name$="Descripcion"]').attr('name', sut.string.format('Requisito[{0}].Descripcion', cont));
                                $(tr).find('td div div a.cadenaTramite').attr('href', sut.string.format('javascript:sut.editProcedimiento.Requisito.openCadenaTramite({0},1)', cont));
                                //$(tr).find('td div a.delRequisito').attr('href', sut.string.format('javascript:sut.editProcedimiento.Requisito.delete({0})', cont));

                                if($(tr).find('td input[name$="RequisitoId"]').val() != '0') {
                                    $.each($(tr).next().find('td table tbody tr.formulario'), (k, f) => {
                                        $(f).data('index', k);
                                        $(f).find('td span').html(k + 1);
                                        $(f).find('td input[name$="RequisitoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].RequisitoId', cont, k));
                                        $(f).find('td input[name$="FormularioId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].FormularioId', cont, k));
                                        $(f).find('td input[name$="Nombre"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].Nombre', cont, k));
                                        $(f).find('td input[name$="Url"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].Url', cont, k));
                                        $(f).find('td input[name$="ArchivoAdjuntoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].ArchivoAdjuntoId', cont, k));
                                    });
                                }

                                cont++;
                            });


                            $.each($('#tblRequisitoEspecifico tbody tr.requisito'), function (i, tr) {
                                $(tr).data('index', i);
                                //$(tr).find('td span').html(i + 1);
                                $(tr).find('td input[name$="RequisitoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoId', cont));
                                $(tr).find('td input[name$="TipoRequisito"]').attr('name', sut.string.format('Requisito[{0}].TipoRequisito', cont));
                                $(tr).find('td input[name$="BaseLegalId"]').attr('name', sut.string.format('Requisito[{0}].BaseLegalId', cont));
                                $(tr).find('td input[name$="SustentoTecnico"]').attr('name', sut.string.format('Requisito[{0}].SustentoTecnico', cont));
                                $(tr).find('td input[name$="Nombre"]').attr('name', sut.string.format('Requisito[{0}].Nombre', cont));
                                $(tr).find('td input[name$="CadenaTramite"]').attr('name', sut.string.format('Requisito[{0}].CadenaTramite', cont));
                                $(tr).find('td input[name$="Descripcion"]').attr('name', sut.string.format('Requisito[{0}].Descripcion', cont));
                                $(tr).find('td div div a.cadenaTramite').attr('href', sut.string.format('javascript:sut.editProcedimiento.Requisito.openCadenaTramite({0},2)', cont));
                                //$(tr).find('td div a.delRequisito').attr('href', sut.string.format('javascript:sut.editProcedimiento.Requisito.delete({0})', cont));

                                //if ($(tr).find('td input[name$="RequisitoId"]').val() != '0') {
                                //    $.each($(tr).next().find('td table tbody tr.formulario'), (k, f) => {
                                //        $(f).data('index', k);
                                //        $(f).find('td span').html(k + 1);
                                //        $(f).find('td input[name$="RequisitoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].RequisitoId', cont, k));
                                //        $(f).find('td input[name$="FormularioId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].FormularioId', cont, k));
                                //        $(f).find('td input[name$="Nombre"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].Nombre', cont, k));
                                //        $(f).find('td input[name$="Url"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].Url', cont, k));
                                //        $(f).find('td input[name$="ArchivoAdjuntoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].ArchivoAdjuntoId', cont, k));
                                //    });
                                //}

                                cont++;
                            });
                        }
                    },
                    Formulario: {
                        newFila: (r) => {
                            var rows = sut.string.format('<tr data-index="{0}" class="formulario" >', r.indexForm);
                            rows += '<td></td>';
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', r.indexForm + 1);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].RequisitoId" value="{2}" />', r.indexReq, r.indexForm, r.RequisitoId);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].FormularioId" value="{2}" />', r.indexReq, r.indexForm, r.FormularioId);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].Nombre" value="{2}" />', r.indexReq, r.indexForm, r.Nombre);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].Url" value="{2}" />', r.indexReq, r.indexForm, r.Url || '');
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].ArchivoAdjuntoId" value="{2}" />', r.indexReq, r.indexForm, r.ArchivoAdjuntoId);
                            rows += '</td>';
                            rows += sut.string.format('<td>{0}</td>', r.Nombre);
                            rows += '<td class="text-center" ><div class="btn-group">';
                            if (r.Url || '' != '') {
                                rows += sut.string.format('<a class="btn btn-default btn-xs" href="{0}" ><i class="fa fa-link" ></i></a>', r.Url);
                            } else {
                                rows += sut.string.format('<a class="btn btn-primary btn-xs" href="@Url.Content("~/General/Adjunto/Descargar/"){0}" ><i class="fa fa-download" ></i></a>', r.ArchivoAdjuntoId);
                            }
                            rows += '</div></td>';
                            rows += '<td class="text-center" ><div class="btn-group">';
                            //rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.Formulario.edit({0}, {1})" ><i class="fa fa-pencil" ></i></a>', r.indexReq, r.indexForm);
                            //rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Formulario.delete({0}, {1})" ><i class="fa fa-close" ></i></a>', r.indexReq, r.indexForm);
                            rows += '</div></td>';
                            rows += '</tr>';
                            return rows;
                        },
                        add: (r) => {
                            $('#modal-ventana').modal('hide');
                            var tabla = $('table#tblRequisito tbody tr.requisito').eq(r.indexReq).next().find('td[colspan="4"] table tbody');
                            if (r.Nuevo == 1) {
                                r.indexForm = tabla.find('tr.formulario').size();
                                tabla.append(sut.editProcedimiento.Formulario.newFila(r));
                            } else {
                                var tr = tabla.find('tr.formulario').eq(r.indexForm);
                                tr.find('td input[name$="RequisitoId"]').val(r.RequisitoId);
                                tr.find('td input[name$="FormularioId"]').val(r.FormularioId);
                                tr.find('td input[name$="Nombre"]').val(r.Nombre);
                                tr.find('td input[name$="Url"]').val(r.Url);
                                tr.find('td input[name$="ArchivoAdjuntoId"]').val(r.ArchivoAdjuntoId);
                                tr.find('td').eq(2).html(r.Nombre);
                            }
                        },
                        edit: (indexReq, indexForm) => {
                            var model = {};

                            if (indexForm != null) {
                                var r = $('table#tblRequisito tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr.formulario').eq(indexForm);
                                model['model.RequisitoId'] = r.find('td input[name$="RequisitoId"]').val();
                                model['model.FormularioId'] = r.find('td input[name$="FormularioId"]').val();
                                model['model.Nombre'] = r.find('td input[name$="Nombre"]').val();
                                model['model.Url'] = r.find('td input[name$="Url"]').val();
                                model['model.ArchivoAdjuntoId'] = r.find('td input[name$="ArchivoAdjuntoId"]').val();
                            } else {
                                model['model.RequisitoId'] = $('table#tblRequisito tbody tr.requisito').eq(indexReq).find('td input[name$=RequisitoId]').val();
                                model['model.FormularioId'] = $('table#tblRequisito tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr.formulario').size() + 1;
                            }

                            model['nuevo'] = indexForm == null ? 1 : 0;
                            model['indexForm'] = indexForm == null ? 0 : indexForm;
                            model['indexReq'] = indexReq;
                            model['fnAdd'] = 'sut.editProcedimiento.Formulario.add';

                            $.ajax({
                                type: "GET",
                                //url: '/Simplificacion/Procedimiento/EditarFormulario',
                                url: '@Url.Content("~/Simplificacion/Procedimiento/EditarFormulario")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        delete: (indexReq, indexForm) => {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var tr = $('table#tblRequisito tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr').eq(indexForm);
                                tr.remove();
                                sut.editProcedimiento.Requisito.update();
                            });
                        }
                    },
                    Formulario: {
                        newFila: (r) => {
                            var rows = sut.string.format('<tr data-index="{0}" class="formulario" >', r.indexForm);
                            rows += '<td></td>';
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', r.indexForm + 1);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].RequisitoId" value="{2}" />', r.indexReq, r.indexForm, r.RequisitoId);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].FormularioId" value="{2}" />', r.indexReq, r.indexForm, r.FormularioId);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].Nombre" value="{2}" />', r.indexReq, r.indexForm, r.Nombre);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].Url" value="{2}" />', r.indexReq, r.indexForm, r.Url || '');
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].ArchivoAdjuntoId" value="{2}" />', r.indexReq, r.indexForm, r.ArchivoAdjuntoId);
                            rows += '</td>';
                            rows += sut.string.format('<td>{0}</td>', r.Nombre);
                            rows += '<td class="text-center" ><div class="btn-group">';
                            if (r.Url || '' != '') {
                                rows += sut.string.format('<a class="btn btn-default btn-xs" href="{0}" ><i class="fa fa-link" ></i></a>', r.Url);
                            } else {
                                //rows += sut.string.format('<a class="btn btn-primary btn-xs" href="/General/Adjunto/Descargar/{0}" ><i class="fa fa-download" ></i></a>', r.ArchivoAdjuntoId);
                                rows += sut.string.format('<a class="btn btn-primary btn-xs" href="@Url.Content("~/General/Adjunto/Descargar/"){0}" ><i class="fa fa-download" ></i></a>', r.ArchivoAdjuntoId);
                            }
                            rows += '</div></td>';
                            rows += '<td class="text-center" ><div class="btn-group">';
                            //rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.Formulario.edit({0}, {1})" ><i class="fa fa-pencil" ></i></a>', r.indexReq, r.indexForm);
                            //rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Formulario.delete({0}, {1})" ><i class="fa fa-close" ></i></a>', r.indexReq, r.indexForm);
                            rows += '</div></td>';
                            rows += '</tr>';
                            return rows;
                        },
                        add: (r) => {
                            $('#modal-ventana').modal('hide');
                            var tabla = $('table#tblRequisito tbody tr.requisito').eq(r.indexReq).next().find('td[colspan="4"] table tbody');
                            if (r.Nuevo == 1) {
                                r.indexForm = tabla.find('tr.formulario').size();
                                tabla.append(sut.editProcedimiento.Formulario.newFila(r));
                            } else {
                                var tr = tabla.find('tr.formulario').eq(r.indexForm);
                                tr.find('td input[name$="RequisitoId"]').val(r.RequisitoId);
                                tr.find('td input[name$="FormularioId"]').val(r.FormularioId);
                                tr.find('td input[name$="Nombre"]').val(r.Nombre);
                                tr.find('td input[name$="Url"]').val(r.Url);
                                tr.find('td input[name$="ArchivoAdjuntoId"]').val(r.ArchivoAdjuntoId);
                                tr.find('td').eq(2).html(r.Nombre);
                            }
                        },
                        edit: (indexReq, indexForm) => {
                            var model = {};

                            if (indexForm != null) {
                                var r = $('table#tblRequisito tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr.formulario').eq(indexForm);
                                model['model.RequisitoId'] = r.find('td input[name$="RequisitoId"]').val();
                                model['model.FormularioId'] = r.find('td input[name$="FormularioId"]').val();
                                model['model.Nombre'] = r.find('td input[name$="Nombre"]').val();
                                model['model.Url'] = r.find('td input[name$="Url"]').val();
                                model['model.ArchivoAdjuntoId'] = r.find('td input[name$="ArchivoAdjuntoId"]').val();
                            } else {
                                model['model.RequisitoId'] = $('table#tblRequisito tbody tr.requisito').eq(indexReq).find('td input[name$=RequisitoId]').val();
                                model['model.FormularioId'] = $('table#tblRequisito tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr.formulario').size() + 1;
                            }

                            model['nuevo'] = indexForm == null ? 1 : 0;
                            model['indexForm'] = indexForm == null ? 0 : indexForm;
                            model['indexReq'] = indexReq;
                            model['fnAdd'] = 'sut.editProcedimiento.Formulario.add';

                            $.ajax({
                                type: "GET",
                                //url: '/Simplificacion/Procedimiento/EditarFormulario',
                                url: '@Url.Content("~/Simplificacion/Procedimiento/EditarFormulario")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        delete: (indexReq, indexForm) => {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var tr = $('table#tblRequisito tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr').eq(indexForm);
                                tr.remove();
                                sut.editProcedimiento.Requisito.update();
                            });
                        }
                    },
                    BaseLegal: {
                        data: @Html.Raw(ViewBag.ListaBaseLegal != null ? ViewBag.ListaBaseLegal : "[]") ,
                        init: () => {
                            sut.editProcedimiento.BaseLegal.generar();
                        },
                        edit: (index) => {
                            var model = {};
                            if (index != null) {
                                var r = sut.editProcedimiento.BaseLegal.data[index];
                                model['model.BaseLegalNormaId'] = r.BaseLegalNormaId;
                                model['model.TipoBaseLegal'] = r.TipoBaseLegal;
                                model['model.NormaId'] = r.NormaId;
                                model['model.Descripcion'] = r.Descripcion == 'null' ? '' : r.Descripcion;
                                model['model.TipoNormaId'] = r.TipoNormaId;
                                model['model.Numero'] = r.Numero;
                                model['model.FechaPublicacion'] = r.FechaPublicacion;
                                model['model.Articulo'] = r.Articulo;
                                model['model.Url'] = r.Url == 'null' ? '' : r.Url;
                                model['model.ArchivoAdjuntoId'] = r.ArchivoAdjuntoId;
                            }

                            model['nuevo'] = index == null ? 1 : 0;
                            model['index'] = index == null ? 0 : index;
                            model['fnAdd'] = 'sut.editProcedimiento.BaseLegal.add';

                            $.ajax({
                                type: "GET",
                                //url: '/General/BaseLegal/EditarDetalle',
                                url: '@Url.Content("~/General/BaseLegal/EditarDetalle")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        },
                        generar: () => {

                            var tabla = $('#tblBaseLegal tbody');
                            $('#tblBaseLegal tbody tr').remove();
                            if (sut.editProcedimiento.BaseLegal.data.length > 0) {
                                var rows = '';
                                var listaObservacionBaseLegal = @Html.Raw(ViewBag.ListaObservacionBaseLegal != null ? ViewBag.ListaObservacionBaseLegal : "[]");

                                $.each(sut.editProcedimiento.BaseLegal.data, function (i, r) {
                                    var num = i;


                                    if ((@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)&& '@Model.Expediente.EstadoExpediente' != '@EstadoExpediente.EnProceso') {
                                        rows += sut.string.format('<tr data-index="{0}" >', num);
                                        rows += '<td colspan="7">';
                                        rows += '<div class="form-group">';
                                        rows += '<div class="col-sm-10 col-xs-12">';
                                    /*botones unicos*/
                                        rows += sut.string.format('<a class="btn btn-success btn-xs" style="display:none" id="aValidarObservarExpBaseLegal' + num + '"  data-placement="right" title="Validar" href="javascript:sut.editProcedimiento.ValObservarexp.validarObservarExpBaseLegal({0},{1},{2},{3},{4});"><i class="fa fa-thumbs-o-up"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.BaseLegalId,r.BaseLegalNormaId);

                                        rows += sut.string.format('<a class="btn btn-info btn-xs" id="aObservarEditarExpBaseLegal' + num + '"  data-placement="right" title="Observar" href="javascript:sut.editProcedimiento.ValObservarexp.observareditarExpBaseLegal({0});"><i class="fa fa-eye"></i></a>',num);

                                        rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none" id="aCancelarGeneralExpBaseLegal' + num + '" data-placement="right"  title="Quitar Validación" href="javascript:sut.editProcedimiento.ValObservarexp.CancelarGeneralExpBaseLegal({0},{1},{2},{3},{4});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.BaseLegalId,r.BaseLegalNormaId);

                                        rows += sut.string.format('<a class="btn btn-primary btn-xs" style="display:none" data-placement="right" title="Guardar" id="aAsignarGuardarObservarExpBaseLegal' + num + '" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarguardarObservarExpBaseLegal({0},{1},{2},{3},{4});"><i class="fa fa-floppy-o"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.BaseLegalId,r.BaseLegalNormaId);
                                        rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none" data-placement="right" title="Cancelar" id="aAsignarCancelarObservarExpBaseLegal' + num + '" href="javascript:sut.editProcedimiento.AsignarObservarexp.asignarCancelarObservarExpBaseLegal({0},{1},{2},{3},{4});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.BaseLegalId,r.BaseLegalNormaId);
                                        /*botones Generados*/

                                        rows += '<label id="mensajeBaseLegal' + num + '"style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>';


                                        rows += '</div>';
                                        rows += '</div>';
                                        rows += '<table id="divBaseLegal0' + num + '" class="table table-condensed table-bordered table-striped" style=" margin-bottom: 0px;visibility: collapse;">';
                                        rows += '<thead>';
                                        rows += '    <tr>';
                                        rows += '        <th style="width:100px;background: #f9f9f9;">';
                                        rows += '        </th>';
                                        rows += '        <th  style="color: white;width: 8%;background: #f9f9f9;"></th>';
                                        rows += '        <th  style="color: white;width: 34.5%;background: #f9f9f9;"></th>';
                                        rows += '        <th  style="color: white;width: 17%;background: #f9f9f9;"></th>';
                                        rows += '        <th  style="color: white;width: 13%;background: #f9f9f9;"></th>';
                                        rows += '        <th  style="color: white;width: 19%;background: #f9f9f9;"></th>';
                                        rows += '        <th style="width:60px;background: #f9f9f9;"></th>';
                                        rows += '    </tr>';
                                        rows += '</thead>';
                                        rows += '<tbody></tbody>';
                                        rows += '</table>';
                                        rows += '</td>';
                                        rows += '</tr>';
                                    }else
                                    {
                                        rows += sut.string.format('<tr data-index="{0}" >', num);
                                        rows += '<td colspan="7">';
                                        rows += '<label id="mensajeBaseLegal' + num + '"style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>';

                                        rows += '<table id="divBaseLegal0' + num + '" class="table table-condensed table-bordered table-striped" style=" margin-bottom: 0px;visibility: collapse;">';
                                        rows += '<thead>';
                                        rows += '    <tr>';
                                        rows += '        <th style="width:100px;background: #f9f9f9;">';
                                        rows += '        </th>';
                                        rows += '        <th  style="color: white;width: 8%;background: #f9f9f9;"></th>';
                                        rows += '        <th  style="color: white;width: 34.5%;background: #f9f9f9;"></th>';
                                        rows += '        <th  style="color: white;width: 17%;background: #f9f9f9;"></th>';
                                        rows += '        <th  style="color: white;width: 13%;background: #f9f9f9;"></th>';
                                        rows += '        <th  style="color: white;width: 19%;background: #f9f9f9;"></th>';
                                        rows += '        <th style="width:60px;background: #f9f9f9;"></th>';
                                        rows += '    </tr>';
                                        rows += '</thead>';
                                        rows += '<tbody></tbody>';
                                        rows += '</table>';
                                        rows += '</td>';
                                        rows += '</tr>';
                                    }







                                    rows += sut.string.format('<tr data-index="{0}" id="trBaseLegal' + num + '">', i);
                                    rows += '<td>';
                                    rows += sut.string.format('<span>{0}</span>', i + 1);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].BaseLegalId" value="{1}" />', i, r.BaseLegalId);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].BaseLegalNormaId" value="{1}" />', i, r.BaseLegalNormaId);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].TipoBaseLegal" value="{1}" />', i, r.TipoBaseLegal);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].NormaId" value="{1}" />', i, r.NormaId);
                                    rows += sut.string.format('<input type="hidden" id="BDescripcion' + i + '" name="BaseLegal.BaseLegalNorma[{0}].Descripcion" value="{1}" />', i, r.Descripcion);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].TipoNormaId" value="{1}" />', i, r.TipoNormaId);
                                    rows += sut.string.format('<input type="hidden" id="BNumero' + i + '" name="BaseLegal.BaseLegalNorma[{0}].Numero" value="{1}" />', i, r.Numero);
                                    rows += sut.string.format('<input type="hidden" id="BFechaPublicacion' + i + '" name="BaseLegal.BaseLegalNorma[{0}].FechaPublicacion" value="{1}" />', i, r.FechaPublicacion);
                                    rows += sut.string.format('<input type="hidden" id="BArticulo' + i + '" name="BaseLegal.BaseLegalNorma[{0}].Articulo" value="{1}" />', i, r.Articulo);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].ArchivoAdjuntoId" value="{1}" />', i, r.ArchivoAdjuntoId);
                                    rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].Url" value="{1}" />', i, r.Url);
                                    rows += sut.string.format('<input type="hidden" id="BNormaTipo' + i + '"  name="BaseLegal.BaseLegalNorma[{0}].BaseLegalId" value="{1}" />', i, r.NormaTipo);
                                    rows += sut.string.format('<input type="hidden" id="BEstadoACR' + i + '"  name="BaseLegal.BaseLegalNorma[{0}].EstadoACR" value="{1}" />', i, r.EstadoACR);
                                    rows += sut.string.format('<input type="hidden" id="BDescripcionACR' + i + '"  name="BaseLegal.BaseLegalNorma[{0}].DescripcionACR" value="{1}" />', i, r.DescripcionACR);
                                    rows += '</td>';


                                    if (r.EstadoACR==2){
                                        rows += sut.string.format('<td colspan="6">{0}</td>', r.DescripcionACR);
                                        //$('#idagregarbaselegal').hide();
                                    }else{
                                        rows += sut.string.format('<td>{0}</td>', r.Articulo);
                                        rows += sut.string.format('<td>{0}</td>', r.Descripcion);
                                        rows += sut.string.format('<td>{0}</td>', r.NormaTipo);
                                        rows += sut.string.format('<td>{0}</td>', r.Numero);
                                        rows += sut.string.format('<td>{0}</td>', r.FechaPublicacion);
                                        //$('#idagregarbaselegal').show();
                                    }


                                    //rows += sut.string.format('<td>{0}</td>', r.NormaTipo);
                                    //rows += sut.string.format('<td>{0}</td>', r.Numero);
                                    //rows += sut.string.format('<td>{0}</td>', r.Descripcion);
                                    //rows += sut.string.format('<td>{0}</td>', r.FechaPublicacion);
                                    //rows += sut.string.format('<td>{0}</td>', r.Articulo);
                                    //rows += '<td class="text-center">';
                                    //if (r.TipoBaseLegal == 3) {
                                    //    rows += sut.string.format('<a href="{0}" class="btn btn-primary btn-xs" target="_blank" ><i class="fa fa-link"></i></a>', r.Url);
                                    //} else {
                                    //    rows += sut.string.format('<a href="{0}" class="btn btn-primary btn-xs" target="_blank" ><i class="fa fa-file"></i></a>', '');
                                    //}
                                    //rows += '</td>';
                                    rows += '<td><div class="btn-group">';
                                    if (!sut.editProcedimiento.esTupaEstandar && !sut.editProcedimiento.esProcEstadar) {
                                        //rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.BaseLegal.edit({0})" ><i class="fa fa-pencil" ></i></a>', i);
                                        //rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.BaseLegal.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                    } else if (!sut.editProcedimiento.esTupaEstandar && !sut.editProcedimiento.esProcEstadar) {
                                        //rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.BaseLegal.edit({0})" ><i class="fa fa-pencil" ></i></a>', i);
                                        //rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.BaseLegal.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                    }
                                    rows += '</div></td>';
                                    rows += '</tr>';
                                });
                                tabla.append(rows);
                                $.each(sut.editProcedimiento.BaseLegal.data, function (i, r) {
                                    @*if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7) {*@
                                        if (@obs.Count != 0) {
                                            var cont1 = 0;
                                            var texto1 = "";
                                            for (var Mi = 0; Mi < listaObservacionBaseLegal.length; Mi += 1) {


                                                if (listaObservacionBaseLegal[Mi].Pantalla == "Datos Generales" && listaObservacionBaseLegal[Mi].NombreCampo == "NombredelosBaseLegal" + i) {

                                                    if (listaObservacionBaseLegal[Mi].CodValidacion == "1") {
                                                        texto1 = listaObservacionBaseLegal[Mi].Descripcion;
                                                    }
                                                    else if (listaObservacionBaseLegal[Mi].CodValidacion == "4") {


                                                        valiarbotonesModalidad('BaseLegal', i);
                                                        $("#mensajeBaseLegal" + i).show();
                                                        $('#aValidarObservarExpBaseLegal' + i + '').css("display", "none");
                                                        if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                        {
                                                            document.querySelector("#mensajeBaseLegal" + i).innerText = 'Se valido con éxito';
                                                        }
                                                        else
                                                        {
                                                            $("#mensajeBaseLegal" + i).hide();
                                                        }


                                                    }
                                                    else if (listaObservacionBaseLegal[Mi].CodValidacion == "2") {
                                                        //window.addEventListener("load", function() {
                                                        observarbotonesModalidad('BaseLegal', i);
                                                        $("#mensajeBaseLegal" + i).show();
                                                        if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                        {
                                                            document.querySelector("#mensajeBaseLegal" + i).innerText = 'Se observo con éxito';
                                                        }
                                                        else
                                                        {
                                                            $("#mensajeBaseLegal" + i).hide();
                                                        }


                                                        sut.editProcedimiento.textoobservacionBaseLegal("" + texto1 + "", "" + listaObservacionBaseLegal[Mi].Descripcion + "", 4, "" + listaObservacionBaseLegal[Mi].EstadoExpediente + "", i);
                                                        //});
                                                    }

                                                    else if (listaObservacionBaseLegal[Mi].CodValidacion == "5") {

                                                        canceladobotonesModalidad('BaseLegal', i);

                                                    }
                                                    else if (listaObservacionBaseLegal[Mi].CodValidacion == "3") {

                                                        if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                                                        { }
                                                        else{ $("#mensajeBaseLegal" + i).hide(); }
                                                        //sustentobotones('BaseLegal');
                                                        //$("#mensajeBaseLegal" + i).show();
                                                        //document.querySelector("#mensajeBaseLegal" + i).innerText = 'Sustento';
                                                        sut.editProcedimiento.textosustentoBaseLegal( listaObservacionBaseLegal[Mi].Descripcion + "", 4, "" + listaObservacionBaseLegal[Mi].EstadoExpediente + "", i);

                                                    }
                                                }
                                            }

                                        }

                                });

                            }
                        },
                        add: (r) => {
                            $('#modal-ventana').modal('hide');
                            if (r.Nuevo == 1) {
                                sut.editProcedimiento.BaseLegal.data.push(r);
                            } else {
                                var arr = [];
                                $.each(sut.editProcedimiento.BaseLegal.data, function (i, d) {
                                    if (i != r.Index) arr.push(d);
                                    else arr.push(r);
                                });
                                sut.editProcedimiento.BaseLegal.data = arr;
                            }
                            sut.editProcedimiento.BaseLegal.generar();
                        },
                        delete: (index) => {
                            sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                                var arr = [];
                                $.each(sut.editProcedimiento.BaseLegal.data, function (i, d) {
                                    if (i != index) arr.push(d);
                                });
                                sut.editProcedimiento.BaseLegal.data = arr;
                                sut.editProcedimiento.BaseLegal.generar();
                            });
                        }
                    },

                    guardar: function () {
                        var valid = true;

                        //if(valid) {
                        //    valid = Number($('select[name="TipoAtencionId"]').find('option:selected').val()) > 0;
                        //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe seleccionar el Tipo de Atención.');
                        //}

                        //if (valid) {
                        //    valid = $('#tblRequisito tbody tr').size() > 0;
                        //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un Requisito.');
                        //}

                        //if (valid) {
                        //    valid = $('#tblBaseLegal tbody tr').size() > 0;
                        //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un registro de Base Legal.');
                        //}

                        //if (valid) {
                        //    var tablas = $('#tblModalidad tbody tr td input[name$="Prestaciones"]');
                        //    $.each(tablas, (i, p) => {
                        //        if (Number($(p).val()) == 0) valid = false;
                        //    });
                        //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe indicar la cantidad de prestaciones.');
                        //}

                        if ($('#form-editar').valid() && valid) {
                            var model = $('#form-editar').serialize();
                            $.ajax({
                                type: 'POST',
                                //url: '/Simplificacion/Procedimiento/DatosGenerales',
                                url: '@Url.Content("~/Simplificacion/Procedimiento/DatosGenerales")',
                                data: model,
                                dataType: 'json',
                                beforeSend: function () {
                                    $("#mensajes").hide();
                                },
                                complete: function () {

                                },
                                success: function (result) {
                                    sut.msg.success(result.mensaje, function () {
                                        //window.location = '/Simplificacion/Procedimiento/DatosGenerales/@Model.ProcedimientoId';
                                        window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;
                                    });
                                },
                                error: function (result) {
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        }
                    },
                    terminar: function () {
                        var valid = true;

                        if (valid) {
                            valid = $('#tblRequisito tbody tr').size() > 0;
                            if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un Requisito.');
                        }

                        if (valid) {
                            valid = $('#tblBaseLegal tbody tr').size() > 0;
                            if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un registro de Base Legal.');
                        }

                        if (valid) {
                            //var tablas = $('#tblModalidad tbody tr td input[name$="Prestaciones"]');
                            //$.each(tablas, (i, p) => {
                            //    if (Number($(p).val()) == 0) valid = false;
                            //});
                            //if (!valid) sut.error.clientErrorShow('mensajes', 'Debe indicar la cantidad de prestaciones.');
                        }

                        if (valid && !sut.editProcedimiento.esTupaEstandar) {
                            valid = $('#tblSede tbody tr').size() > 0;
                            if(!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos una Sede donde se atiende el trámite.');
                        }

                        if (valid) {
                            valid = $('#tblPasoSeguir tbody tr').size() > 0;
                            if (!valid) sut.error.clientErrorShow('mensajes', 'Debe indicar los pasos a seguir para la realización del trámite.');
                        }

                        if (valid) {
                            sut.msg.confirm('Si finaliza el registro no podrá modificarlo nuevamente.', () => {
                                if ($('#form-editar').valid()) {
                                    var model = $('#form-editar').serialize();
                                    $.ajax({
                                        type: 'POST',
                                        //url: '/Simplificacion/Procedimiento/DatosGenerales',
                                        url: '@Url.Content("~/Simplificacion/Procedimiento/DatosGenerales")',
                                        data: model,
                                        dataType: 'json',
                                        beforeSend: function () {
                                            $("#mensajes").hide();
                                        },
                                        complete: function () {

                                        },
                                        success: function (result) {

                                            $.ajax({
                                                type: 'POST',
                                                //url: '/Simplificacion/Procedimiento/TerminarSustento',
                                                url: '@Url.Content("~/Simplificacion/Procedimiento/TerminarSustento")',
                                                data: {tipo: 1, ProcedimientoId: @Model.ProcedimientoId},
                                                dataType: 'json',
                                                beforeSend: function () {
                                                    $("#mensajes").hide();
                                                },
                                                complete: function () {

                                                },
                                                success: function (result) {
                                                    sut.msg.success(result.mensaje, function () {
                                                        //window.location = '/Simplificacion/Procedimiento/DatosGenerales/@Model.ProcedimientoId';
                                                        window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;
                                                    });
                                                },
                                                error: function (result) {
                                                    sut.error.show('mensajes', result.responseText);
                                                }
                                            });

                                        },
                                        error: function (result) {
                                            sut.error.show('mensajes', result.responseText);
                                        }
                                    });
                                }
                            });
                        }

                    },
                    activar : function(){
                        sut.msg.confirm('Si activa el registro podrá modificarlo nuevamente.', () => {
                            $.ajax({
                                type: 'POST',
                                //url: '/Simplificacion/Procedimiento/ActivarSustento',
                                url: '@Url.Content("~/Simplificacion/Procedimiento/ActivarSustento")',
                                data: {tipo: 1, ProcedimientoId: @Model.ProcedimientoId, estadoExpediente: '@exp.EstadoExpediente', ExpedienteId: @exp.ExpedienteId},
                                dataType: 'json',
                                beforeSend: function () {
                                    $("#mensajes").hide();
                                },
                                complete: function () {

                                },
                                success: function (result) {
                                    sut.msg.success(result.mensaje, function () {
                                        //window.location = '/Simplificacion/Procedimiento/DatosGenerales/@Model.ProcedimientoId';
                                        window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;
                                    });
                                    //showNotification('top', 'right', 'El Registro se Activo Satisfactoriamente', 1);
                                    //setTimeout("reFresh()", 800);
                                },
                                error: function (result) {
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        });

                    },
                    /*Validacion*/
                    ValObservarexp: {
                        validarObservarExp: function (idExpediente,procedimientoId,Descripcion,NombreCampo,Pantalla) {
                            //if ($('#'+Descripcion+'').val().trim()== ""){
                            //    showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                            //    return;
                            //}


                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': document.getElementById(''+Descripcion+'').innerHTML,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');

                                    $('#aValidarObservarExp'+NombreCampo+'').css("display","none");
                                    $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "");

                                    $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "none" });
                                    $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "none" });
                                    $('#mensaje'+NombreCampo+'').show();
                                    document.querySelector('#mensaje'+NombreCampo+'').innerText = 'Se valido con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        validarObservarExpModalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {



                            var DesModalidad=$('#DesModalidad' + numero).val();

                            if(DesModalidad == undefined){
                                DesModalidad='';
                            }

                            var PreModalidad=$('#PreModalidad' + numero).val();

                            if(PreModalidad == undefined){
                                PreModalidad='';
                            }


                            var CostoModalidad=$('#CostoModalidad' + numero).val();

                            if(CostoModalidad == undefined){
                                CostoModalidad='';
                            }


                            var Descripcion = DesModalidad + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + PreModalidad + ";:;" + CostoModalidad;
                            //var Descripcion = $('#DesModalidad' + numero).val() + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + $('#PreModalidad' + numero ).val() + ";:;" + $('#CostoModalidad' + numero ).val();
                            var NombreCampo = 'Modalidad';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.TablaAsmeId': TablaAsmeId,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');

                                    $('#aValidarObservarExp' + NombreCampo + numero +'').css("display", "none");
                                    $('#aCancelarGeneralExp' + NombreCampo + numero + '').css("display", "");

                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aMasivoObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#mensajeModalidad' + numero).show();
                                    document.querySelector('#mensajeModalidad' + numero).innerText = 'Se valido con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        validarObservarExpRequisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {



                            //var Descripcion = $('#Nombre' + numero).val();
                            var Descripcion = document.getElementById('Nombre'+numero+'').innerHTML
                            var NombreCampo = 'Requisitos';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.RequisitoId': RequisitoId,

                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');

                                    $('#aValidarObservarExp' + NombreCampo + numero + '').css("display", "none");
                                    $('#aCancelarGeneralExp' + NombreCampo + numero + '').css("display", "");

                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aMasivoObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#mensajeRequisitos' + numero).show();
                                    document.querySelector('#mensajeRequisitos' + numero).innerText = 'Se valido con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        validarObservarExpBaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {


                            var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();
                            var NombreCampo = 'BaseLegal';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');

                                    $('#aValidarObservarExp' + NombreCampo + numero + '').css("display", "none");
                                    $('#aCancelarGeneralExp' + NombreCampo + numero + '').css("display", "");

                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aMasivoObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#mensajeBaseLegal' + numero).show();
                                    document.querySelector('#mensajeBaseLegal' + numero).innerText = 'Se valido con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        validarObservarExpReconsideracion: function (idExpediente, procedimientoId, Descripcion, NombreCampo, Pantalla) {

                            //var Descripcion = $('#CargoReconsideracion').val() + ";:;" + $('#UndOrgReconsideracion_Nombre').val() + ";:;" + $('#PzoReconPresent').val() + ";:;" + $('#PzoReconResol').val();
                            var Descripcion = document.getElementById('CargoReconsideracion').innerHTML  + ";:;" + document.getElementById('UndOrgReconsideracion_Nombre').innerHTML + ";:;" + document.getElementById('PzoReconPresent').innerHTML + ";:;" + document.getElementById('PzoReconResol').innerHTML;
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');

                                    $('#aValidarObservarExp' + NombreCampo + '').css("display", "none");
                                    $('#aCancelarGeneralExp' + NombreCampo + '').css("display", "");

                                    $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "none" });
                                    $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                    $('#mensaje' + NombreCampo + '').show();
                                    document.querySelector('#mensaje' + NombreCampo + '').innerText = 'Se valido con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        validarObservarExpApelacion: function (idExpediente, procedimientoId, Descripcion, NombreCampo, Pantalla) {

                            //var Descripcion = $('#CargoApelacion').val() + ";:;" + $('#UndOrgApelacion_Nombre').val() + ";:;" + $('#PzoApelPresent').val() + ";:;" + $('#PzoApelResol').val();
                            var Descripcion = document.getElementById('CargoApelacion').innerHTML  + ";:;" + document.getElementById('UndOrgApelacion_Nombre').innerHTML + ";:;" + document.getElementById('PzoApelPresent').innerHTML + ";:;" + document.getElementById('PzoApelResol').innerHTML;
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');

                                    $('#aValidarObservarExp' + NombreCampo + '').css("display", "none");
                                    $('#aCancelarGeneralExp' + NombreCampo + '').css("display", "");

                                    $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "none" });
                                    $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                    $('#mensaje' + NombreCampo + '').show();
                                    document.querySelector('#mensaje' + NombreCampo + '').innerText = 'Se valido con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        comentario: "",
                        observareditarExp: function (Descripcion1,Descripcion2,nombdiv,nombdivdetalle,NombreCampo,dato, titulo,numcol) {

                            debugger;

                            var nombre = document.getElementById('' + dato + '').innerHTML;

                            if (nombre == "") {

                                 nombre = document.getElementById('' + dato + '').value;

                            }

                            var rows = '';
                            rows += '<div id="'+nombdivdetalle+'" class="form-group">';
                            rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">'+titulo+'</label>';
                            rows += '<div class="col-sm-'+numcol+' col-xs-12">';

                            //rows += sut.string.format('<td><label class="form-control" name="' + Descripcion1 + '"  id="' + Descripcion1 +'" style="border-color:green;background:#00a65a36;font-weight: 600;height: 100%;">{0}</label></td>', document.getElementById(''+dato+'').innerHTML );

                            rows += sut.string.format('<td><label class="form-control" name="' + Descripcion1 + '"  id="' + Descripcion1 + '" style="border-color:green;background:#00a65a36;font-weight: 600;height: 100%;">{0}</label></td>', nombre);
                            rows += '</div>';
                            rows += '<br>';
                            rows += '<br>';
                            rows += '<br>';
                            rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">Observar:</label>';
                            rows += '<div class="col-sm-' + numcol + ' col-xs-12">';
                            rows += sut.string.format('<td><textarea name="' + Descripcion2 + '" id="' + Descripcion2 + '" class="form-control"  onkeypress="javascript:sut.editProcedimiento.visualizarSustento(event,this);" style="border-color:red;background:#ff00002e;"></textarea></td>', '');
                            rows += '</div>';
                            rows += '</div>';

                            $('#'+nombdiv+'').append(rows);

                            $('#aAsignarGuardarObservarExp'+NombreCampo+'').css({ "display": "" });
                            $('#aAsignarCancelarObservarExp'+NombreCampo+'').css({ "display": "" });

                            $('#aValidarObservarExp'+NombreCampo+'').css("display","none");
                            $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "none");
                            $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "none" });
                            $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "" });

                            $('#'+dato+'').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#'+dato+'label').hide();


                            comentario = $("#txtaObservarExp").val();
                        },

                        comentario: "",
                        observareditarExpModalidad: function (num, numeromod) {
                            var tabla = $('#divModalidad0' + num + ' tbody');

                            //var Descripcion = $('#DesModalidad' + num).val() + ";" + $('#chekModalidad' + num).val() + ";" + $('#PreModalidad' + num).val() + ";" + $('#CostoModalidad' + num).val();
                            var NombreCampo = 'Modalidad';
                            var rows = '';
                            //alert($('input:checkbox[id=chekModalidad' + num+']:checked').val());
                            //if ($('#chekModalidad' + num).prop('checked')) {
                            //    alert('Seleccionado');
                            //}
                            //if ($('#chekModalidad' + num).attr('checked')) {
                            //    alert('Seleccionado');
                            //}
                            //if ($('#chekModalidad' + num).attr('checked')) {
                            //    alert('Seleccionado');
                            //}
                            rows += sut.string.format('<tr data-index="{0}" id="trdivModalidad0' + num + '"  >', num);
                            rows += sut.string.format('<td style="width:100px;"> Modalidad :</td>');



                            var desmodalidad=$('#DesModalidad' + num).val();
                            //var descr='';
                            //if(desmodalidad!=null && desmodalidad!='null' ){
                            //    descr=desmodalidad;
                            //}
                            //rows += sut.string.format('<td style="width: 80%;"><input  style="border-color:green;background:#00a65a36;" type="text" id="DesModalidadD' + num + '"  value="{0}" class="form-control" readonly /></td>',descr , 'readonly');





                            rows += sut.string.format('<td style="width: 80%;">');
                            if(numeromod > 1){
                                var descr='';
                                if(desmodalidad!=null && desmodalidad!='null' ){
                                    descr=desmodalidad;
                                }
                                rows += sut.string.format('<input type="text" name="TablaAsme[{0}].Descripcion" value="{1}" class="form-control" {2} />', num, descr, sut.editProcedimiento.esProcEstadar ? '' : '');
                            }


                            rows += sut.string.format('</td>');





                            rows += sut.string.format('<td style="width:120px"><input type="checkbox" id="chekModalidadD' + num + '"  {0} disabled /></td>', $('#chekModalidad' + num).prop('checked') ? 'checked' : '', 'disabled');

                            if (sut.editProcedimiento.esTupaEstandar) {
                                rows += sut.string.format('<td style="width:100px;"><input  style="border-color:green;background:#00a65a36;"  id="PreModalidadD' + num + '" value="{0}" class="form-control" type="number" min="1" readonly /></td>', $('#PreModalidad' + num).val());
                            } else if (sut.editProcedimiento.esCargaInicial) {
                                if (!sut.editProcedimiento.esProcEstadar) {
                                    rows += sut.string.format('<td style="width:100px;"><input  style="border-color:green;background:#00a65a36;" id="CostoModalidadD' + num + '" value="{0}" class="form-control" type="number" min="1" readonly /></td>', $('#CostoModalidad' + num).val());
                                }
                            } else {
                                if (!sut.editProcedimiento.esProcEstadar) {
                                    rows += sut.string.format('<td style="width:100px;"><input  style="border-color:green;background:#00a65a36;" id="PreModalidadD' + num + '"  value="{0}" class="form-control" type="number" min="1" readonly /></td>', $('#PreModalidad' + num).val());
                                }
                            }
                            rows += '<td><div class="btn-group">';

                            rows += '</div></td>';
                            rows += '</tr>'
                            rows += '<tr id="trdivModalidad0_' + num +'">'
                            rows += sut.string.format('<td style="width:100px;">Observar : </td>');
                            rows += sut.string.format('<td colspan="3" ><textarea name="Modalidad2' + num + '" id="Modalidad2' + num +'" onkeypress="javascript:sut.editProcedimiento.visualizarSustentomodalidad(event,this);" class="form-control" style="border-color:red;background:#ff00002e;"></textarea></td>', '');
                            rows += '</tr>';;

                            tabla.append(rows);

                            $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                            $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                            $('#aValidarObservarExp' + NombreCampo + num +  '').css("display", "none");
                            $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                            $('#aObservarEditarExp' + NombreCampo + num +'').css({ "display": "none" });
                            $('#aMasivoObservarExp' + NombreCampo + num +'').css({ "display": "" });

                            $('#trModalidad' + num +'').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            //$('#' + dato + 'label').hide();

                        },

                        comentario: "",
                        observareditarExpRequisitos: function (num) {

                            var tabla = $('#divRequisitos0' + num + ' tbody');

                            var NombreCampo = 'Requisitos';
                            var rows = '';

                            rows += sut.string.format('<tr data-index="{0}" id="trdivRequisitos0' + num + '">', num);
                            rows += sut.string.format('<td style="width:100px;">Descripción: </td>');
                            rows += sut.string.format('<td><label class="form-control" style="border-color:green;background:#00a65a36;font-weight: 600;height: 100%;"  name="NombreD' + num + '"  id="NombreD' + num + '">{0}</label> </td>', document.getElementById('Nombre' + num).innerHTML);
                            rows += '</tr>'

                            rows += '<tr id="trdivRequisitos0_' + num + '">'
                            rows += sut.string.format('<td style="width:100px;">Observar : </td>');
                            rows += sut.string.format('<td colspan="3" ><textarea name="Requisitos2' + num + '" id="Requisitos2' + num + '" onkeypress="javascript:sut.editProcedimiento.visualizarSustentorequisitos(event,this);" class="form-control" style="border-color:red;background:#ff00002e;"></textarea></td>', '');
                            rows += '</tr>';;

                            tabla.append(rows);

                            $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                            $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                            $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                            $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                            $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                            $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });

                            $('#trRequisitos' + num + '').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            //$('#' + dato + 'label').hide();

                        },

                        comentario: "",
                        observareditarExpBaseLegal: function (num) {




                            document.getElementById('divBaseLegal0'+num+'').style.visibility = "initial";
                            var tabla = $('#divBaseLegal0' + num + ' tbody');

                            var NombreCampo = 'BaseLegal';
                            var rows = '';


                            rows += sut.string.format('<tr data-index="{0}" id="trdivBaseLegal0' + num + '">', num);
                            var asd=$('#BDescripcionACR' + num).val();
                            if($('#BEstadoACR' + num).val()=="2")
                            {
                                rows += sut.string.format('<td style="width:4.4%;">Descripción: </td>');
                                rows += sut.string.format('<td colspan="6" style="border-color:#00a65a00;background:#00a65a36;width:10%">{0}</td>', $('#BDescripcionACR' + num).val());
                            }
                            else
                            {
                                rows += sut.string.format('<td>Descripción: </td>');
                                rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', $('#BArticulo' + num).val());
                                rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', $('#BDescripcion' + num).val());
                                rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', $('#BNormaTipo' + num).val());
                                rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', $('#BNumero' + num).val());
                                rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', $('#BFechaPublicacion' + num).val());
                                rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;"> </td>');

                            }




                            rows += '</tr>'

                            rows += '<tr id="trdivBaseLegal0_' + num + '">'
                            rows += sut.string.format('<td style="width:100px;"> Observar: </td>');
                            rows += sut.string.format('<td colspan="6" ><textarea name="BaseLegal2' + num + '"  onkeypress="javascript:sut.editProcedimiento.visualizarSustentobaselegal(event,this);" id="BaseLegal2' + num + '" class="form-control" style="border-color:red;background:#ff00002e;"></textarea></td>', '');
                            rows += '</tr>';;

                            tabla.append(rows);

                            $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                            $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                            $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                            $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                            $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                            $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });

                            $('#trBaseLegal' + num + '').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            //$('#' + dato + 'label').hide();

                        },
                        comentario: "",
                        observareditarExpReconsideracion: function (Descripcion1, Descripcion2, nombdiv, nombdivdetalle, NombreCampo, dato, titulo, numcol) {

                            var rows = '';
                            rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                            rows += '<tbody>';
                            rows += '<tr>';
                            rows += '<td style="width: 120px;">'+titulo+'</td>';
                            rows += sut.string.format('<td style="text-align: center;"><textarea name="CargoReconsideracion"  id="CargoReconsideracion" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>',  document.getElementById('CargoReconsideracion').innerHTML);
                            rows += sut.string.format('<td style="text-align: center;"><textarea name="UndOrgReconsideracion_Nombre"  id="UndOrgReconsideracion_Nombre" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>',document.getElementById('UndOrgReconsideracion_Nombre').innerHTML);
                            rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoReconPresent"  id="PzoReconPresent" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', document.getElementById('PzoReconPresent').innerHTML);
                            rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoReconResol"  id="PzoReconResol" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>',document.getElementById('PzoReconResol').innerHTML);
                            rows += '</tr>';
                            rows += '<tr>';
                            rows += '<td style="width: 120px;">Observar</td>';
                            rows += sut.string.format('<td colspan="4" ><textarea name="Reconsideracion2" id="Reconsideracion2" onkeypress="javascript:sut.editProcedimiento.visualizarSustento(event,this);"  class="form-control" style="border-color:red;background:#ff00002e;"></textarea></td>', '');
                            rows += '</tr>';

                            rows += '</tbody>';
                            rows += '</table>';
                            $('#' + nombdiv + '').append(rows);

                            $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "" });
                            $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "" });

                            $('#aValidarObservarExp' + NombreCampo + '').css("display", "none");
                            $('#aCancelarGeneralExp' + NombreCampo + '').css("display", "none");
                            $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "none" });
                            $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "" });

                            $('#tablaReconsideracion1').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#' + dato + 'label').hide();


                            comentario = $("#txtaObservarExp").val();
                        },
                        observareditarExpApelacion: function (Descripcion1, Descripcion2, nombdiv, nombdivdetalle, NombreCampo, dato, titulo, numcol) {

                            var rows = '';
                            rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                            rows += '<tbody>';
                            rows += '<tr>';
                            rows += '<td style="width: 120px;">'+titulo+'</td>';
                            rows += sut.string.format('<td style="text-align: center;"><textarea name="CargoApelacion"  id="CargoApelacion" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', document.getElementById('CargoApelacion').innerHTML);
                            rows += sut.string.format('<td style="text-align: center;"><textarea name="UndOrgApelacion_Nombre"  id="UndOrgApelacion_Nombre" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>',document.getElementById('UndOrgApelacion_Nombre').innerHTML);
                            rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoApelPresent"  id="PzoApelPresent" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>',document.getElementById('PzoApelPresent').innerHTML);
                            rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoApelResol"  id="PzoApelResol" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', document.getElementById('PzoApelResol').innerHTML);
                            rows += '</tr>';
                            rows += '<tr>';
                            rows += '<td style="width: 120px;">Observar</td>';
                            rows += sut.string.format('<td colspan="4" ><textarea name="Apelacion2" id="Apelacion2" class="form-control" onkeypress="javascript:sut.editProcedimiento.visualizarSustento(event,this);"  style="border-color:red;background:#ff00002e;"></textarea></td>', '');
                            rows += '</tr>';

                            rows += '</tbody>';
                            rows += '</table>';
                            $('#' + nombdiv + '').append(rows);

                            $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "" });
                            $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "" });

                            $('#aValidarObservarExp' + NombreCampo + '').css("display", "none");
                            $('#aCancelarGeneralExp' + NombreCampo + '').css("display", "none");
                            $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "none" });
                            $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "" });

                            $('#tablaApelacion1').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#' + dato + 'label').hide();


                            comentario = $("#txtaObservarExp").val();
                        },

                        sustentarObservarExp: function (Descripcion1,nombdiv,nombdivdetalle,NombreCampo,titulo,numcol) {


                            var rows = '';
                            rows += '<div id="'+nombdivdetalle+'">';
                            rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">'+titulo+'</label>';
                            rows += '<div class=col-sm-'+numcol+' col-xs-12">';
                            rows += sut.string.format('<td><textarea name="' + Descripcion1 + '"  id="' + Descripcion1 +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;" readonly></textarea></td>');
                            rows += '</div>';
                            rows += '</div>';
                            $('#'+nombdiv+'').append(rows);

                            $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "none" });
                            $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "" });
                            $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "" });

                        },
                        masivoObservarExp: function (expedienteId, datocampo,nombre1,nombre2) {



                            if ($('#' + nombre2 + '').val().trim() == "") {

                                showNotification('top', 'right', 'No puedes Guardar Masiva mente una obseración en blanco', 2);
                                return;
                            }


                            $.ajax({
                                type: "GET",
                                //url: "/Simplificacion/Procedimiento/SelectMasivo",
                                url: '@Url.Content("~/Simplificacion/Procedimiento/SelectMasivo")',
                                data: { multi: true, expedienteId: expedienteId, datocampo: datocampo, fnAdd: 'sut.editProcedimiento.ValObservarexp.GuardarObservarMasiva', texto1 :  $('#' + nombre1).val(),texto2 :  $('#' + nombre2).val() },
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#ventana-container').html(data);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });



                        },


                        GuardarObservarMasiva: function (data) {


                            var d = data;
                            for (i = 0; i < data.length; i++){
                                var ProcedimientoId=data[i].ProcedimientoId;
                                var condicion=data[i].datocampo;
                                var texto1=data[i].Texto1;
                                var texto2=data[i].Texto2;


                                sut.editProcedimiento.ValObservarexp.GuardarObservarMasiva2( ProcedimientoId,condicion,''+texto1+'',''+texto2+'');

                            }
                            location.reload();
                            comentario = "";
                        },

                        GuardarObservarMasiva2: function (ProcedimientoId,condicion,texto1,texto2) {




                            var model = {
                                'filtro.ExpedienteId': @Model.ExpedienteId,
                                'filtro.ProcedimientoId': ProcedimientoId,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.Estado': '1',
                                'codval':condicion,
                                'texto1':texto1,
                                'texto2':texto2,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacionMasivo")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    sut.editProcedimiento.ValObservarexp.GuardarObservarMasiva3( ProcedimientoId,condicion,''+texto1+'',''+texto2+'');
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        GuardarObservarMasiva3: function ( ProcedimientoId,condicion,texto1,texto2) {

                            var model = {
                                'filtro.ExpedienteId': @Model.ExpedienteId,
                                'filtro.ProcedimientoId': ProcedimientoId,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.Estado': '1',
                                'codval':condicion,
                                'texto1':texto1,
                                'texto2':texto2,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacionMasivo")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');
                                    location.reload();
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });


                            comentario = "";
                        },
                        CancelarGeneralExp: function (idExpediente,procedimientoId,idOpcion,Descripcion,NombreCampo,Pantalla) {

                            if(idOpcion==1){
                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': document.getElementById(''+Descripcion+'').innerHTML,
                                    'filtro.CodValidacion': '4',
                                    'filtro.TipoEstado': '4',
                                    'filtro.NombreCampo': NombreCampo,
                                    'filtro.Pantalla': Pantalla,
                                    'filtro.Estado': '1',
                                };
                            }

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');


                                    //$('#aValidarObservarExp'+NombreCampo+'').css("display","");
                                    $('#aObservarEditarExp'+NombreCampo+'').css("display", "");
                                    //$("#aSustentarObservarExpObjetivo").css("display","");
                                    //$("#aMasivoObservarExpObjetivo").css("display","");

                                    $('#aCancelarGeneralExp'+NombreCampo+'').css({ "display": "none" });

                                    $('#mensaje'+NombreCampo+'').hide();
                                    document.querySelector('#mensaje'+NombreCampo+'').innerText = '';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarGeneralExpReconsideracion: function (idExpediente, procedimientoId, idOpcion, Descripcion, NombreCampo, Pantalla) {
                            //var Descripcion = $('#CargoReconsideracion').val() + ";:;" + $('#UndOrgReconsideracion_Nombre').val() + ";:;" + $('#PzoReconPresent').val() + ";:;" + $('#PzoReconResol').val();
                            var Descripcion = document.getElementById('CargoReconsideracion').innerHTML  + ";:;" + document.getElementById('UndOrgReconsideracion_Nombre').innerHTML + ";:;" + document.getElementById('PzoReconPresent').innerHTML + ";:;" + document.getElementById('PzoReconResol').innerHTML;
                            if (idOpcion == 1) {
                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '4',
                                    'filtro.TipoEstado': '4',
                                    'filtro.NombreCampo': NombreCampo,
                                    'filtro.Pantalla': Pantalla,
                                    'filtro.Estado': '1',
                                };
                            }

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');


                                    //$('#aValidarObservarExp' + NombreCampo + '').css("display", "");
                                    $('#aObservarEditarExp' + NombreCampo + '').css("display", "");
                                    //$("#aSustentarObservarExpObjetivo").css("display","");
                                    //$("#aMasivoObservarExpObjetivo").css("display","");

                                    $('#aCancelarGeneralExp' + NombreCampo + '').css({ "display": "none" });

                                    $('#mensaje' + NombreCampo + '').hide();
                                    document.querySelector('#mensaje' + NombreCampo + '').innerText = '';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarGeneralExpApelacion: function (idExpediente, procedimientoId, idOpcion, Descripcion, NombreCampo, Pantalla) {
                            //var Descripcion = $('#CargoApelacion').val() + ";:;" + $('#UndOrgApelacion_Nombre').val() + ";:;" + $('#PzoApelPresent').val() + ";:;" + $('#PzoApelResol').val();
                            var Descripcion = document.getElementById('CargoApelacion').innerHTML  + ";:;" + document.getElementById('UndOrgApelacion_Nombre').innerHTML + ";:;" + document.getElementById('PzoApelPresent').innerHTML + ";:;" + document.getElementById('PzoApelResol').innerHTML;
                            if (idOpcion == 1) {
                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '4',
                                    'filtro.TipoEstado': '4',
                                    'filtro.NombreCampo': NombreCampo,
                                    'filtro.Pantalla': Pantalla,
                                    'filtro.Estado': '1',
                                };
                            }

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');


                                    //$('#aValidarObservarExp' + NombreCampo + '').css("display", "");
                                    $('#aObservarEditarExp' + NombreCampo + '').css("display", "");
                                    //$("#aSustentarObservarExpObjetivo").css("display","");
                                    //$("#aMasivoObservarExpObjetivo").css("display","");

                                    $('#aCancelarGeneralExp' + NombreCampo + '').css({ "display": "none" });

                                    $('#mensaje' + NombreCampo + '').hide();
                                    document.querySelector('#mensaje' + NombreCampo + '').innerText = '';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarGeneralExpModalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {




                            var DesModalidad=$('#DesModalidad' + numero).val();

                            if(DesModalidad == undefined){
                                DesModalidad='';
                            }

                            var PreModalidad=$('#PreModalidad' + numero).val();

                            if(PreModalidad == undefined){
                                PreModalidad='';
                            }


                            var CostoModalidad=$('#CostoModalidad' + numero).val();

                            if(CostoModalidad == undefined){
                                CostoModalidad='';
                            }


                            var Descripcion = DesModalidad + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + PreModalidad + ";:;" + CostoModalidad;



                            //var Descripcion = $('#DesModalidad' + numero).val() + ";:;" + $('#chekModalidad' + numero).prop('checked') + ";:;" + $('#PreModalidad' + numero).val() + ";:;" + $('#CostoModalidad' + numero).val();
                            var NombreCampo = 'Modalidad';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.TablaAsmeId': TablaAsmeId,
                            };


                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');


                                    //$('#aValidarObservarExp' + NombreCampo + numero + '').css("display", "");
                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css("display", "");
                                    //$("#aSustentarObservarExpObjetivo").css("display","");
                                    //$("#aMasivoObservarExpObjetivo").css("display","");

                                    $('#aCancelarGeneralExp' + NombreCampo + numero + '').css({ "display": "none" });

                                    $('#mensajeModalidad' + numero + '').hide();
                                    document.querySelector('#mensajeModalidad' + numero + '').innerText = '';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarGeneralExpRequisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {


                            //var Descripcion = $('#Nombre' + numero).val().trim();
                            var Descripcion =  document.getElementById('Nombre'+numero+'').innerHTML
                            var NombreCampo = 'Requisitos';



                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.RequisitoId': RequisitoId,

                            };


                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');


                                    //$('#aValidarObservarExp' + NombreCampo + numero + '').css("display", "");
                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css("display", "");
                                    //$("#aSustentarObservarExpObjetivo").css("display","");
                                    //$("#aMasivoObservarExpObjetivo").css("display","");

                                    $('#aCancelarGeneralExp' + NombreCampo + numero + '').css({ "display": "none" });

                                    $('#mensajeRequisitos' + numero + '').hide();
                                    document.querySelector('#mensajeRequisitos' + numero + '').innerText = '';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarGeneralExpBaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {
                            var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();
                            var NombreCampo = 'BaseLegal';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '4',
                                'filtro.TipoEstado': '4',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };


                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');


                                    //$('#aValidarObservarExp' + NombreCampo + numero + '').css("display", "");
                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css("display", "");
                                    //$("#aSustentarObservarExpObjetivo").css("display","");
                                    //$("#aMasivoObservarExpObjetivo").css("display","");

                                    $('#aCancelarGeneralExp' + NombreCampo + numero + '').css({ "display": "none" });

                                    $('#mensajeBaseLegal' + numero + '').hide();
                                    document.querySelector('#mensajeBaseLegal' + numero + '').innerText = '';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        }
                    },

                    AsignarObservarexp: {
                        asignarguardarObservarExp: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {

                            debugger;

                            if ($('#' + Descripcion2 + '').val().trim() == "") {

                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }

                            sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp1(idExpediente,procedimientoId,Descripcion1,Descripcion2,NombreCampo,Pantalla);
                        },

                        GuardarObservarExp1: function (idExpediente,procedimientoId,Descripcion1,Descripcion2,NombreCampo,Pantalla) {
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': document.getElementById(''+Descripcion1+'').innerHTML,
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                success: function (data) {
                                    sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp2(idExpediente,procedimientoId,Descripcion1,Descripcion2,NombreCampo,Pantalla);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        GuardarObservarExp2: function (idExpediente,procedimientoId,Descripcion1,Descripcion2,NombreCampo,Pantalla) {
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#'+Descripcion2+'').val().trim(),
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');
                                    $("#aCancelarObservarExp").css({ "display": "none" });
                                    $("#aGuardarObservarExp").css({ "display": "none" });
                                    $("#aEditarObservarExp").css({ "display": "" });

                                    $('#mensaje'+NombreCampo+'').show();
                                    document.querySelector('#mensaje'+NombreCampo+'').innerText = 'Se observo con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        comentario: "",
                        asignarCancelarObservarExp: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {



                            sut.editProcedimiento.AsignarObservarexp.CancelarObservacion1(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                        },
                        CancelarObservacion1: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            //var descripcion = $('#' + Descripcion1 + '').val().trim();
                            var descripcion = document.getElementById(Descripcion1).innerHTML;


                            if(descripcion!='')
                            {

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#' + Descripcion1 + '').val().trim(),
                                        'filtro.CodValidacion': '1',
                                        'filtro.TipoEstado': '1',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                    comentario = "";

                            }else {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                            }
                        },
                        CancelarObservacion2: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            var descripcion=$('#' + Descripcion2 + '').val().trim();

                            if(descripcion!='')
                            {

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#' + Descripcion2 + '').val().trim(),
                                        'filtro.CodValidacion': '2',
                                        'filtro.TipoEstado': '2',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                            }
                        },
                        CancelarObservacion3: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            var descripcion=$('#' + nomsustento + '').val();

                            if(descripcion == undefined){
                                descripcion='';
                            }


                            if(descripcion!='')
                            {

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#' + nomsustento + '').val().trim(),
                                        'filtro.CodValidacion': '3',
                                        'filtro.TipoEstado': '3',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        $('#modal-ventana').modal('hide');

                                        $('#' + nomcampo + '').show();
                                        //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                        //visible
                                        $('#' + nomcampo + 'label').show();

                                        //$('#aValidarObservarExp' + NombreCampo + '').css({ "display": "" });
                                        $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "" });

                                        $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                        $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "none" });
                                        $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "none" });

                                        $('#' + divsustento + '').remove();
                                        $('#' + nombdivdetalle + '').remove();
                                        $('#mensaje' + NombreCampo + '').hide();
                                        document.querySelector('#mensaje' + NombreCampo + '').innerText = '';




                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });


                                comentario = "";

                            }
                            else
                            {

                                $('#modal-ventana').modal('hide');

                                $('#' + nomcampo + '').show();
                                //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                //visible
                                $('#' + nomcampo + 'label').show();

                                //$('#aValidarObservarExp' + NombreCampo + '').css({ "display": "" });
                                $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "" });

                                $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "none" });
                                $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "none" });

                                $('#' + divsustento + '').remove();
                                $('#' + nombdivdetalle + '').remove();
                                $('#mensaje' + NombreCampo + '').hide();
                                document.querySelector('#mensaje' + NombreCampo + '').innerText = '';
                            }
                        },
                        asignarguardarObservarExpReconsideracion: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {

                            if ($('#' + Descripcion2 + '').val().trim() == "") {

                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }

                            sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp1Reconsideracion(idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla);
                        },

                        GuardarObservarExp1Reconsideracion: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {
                            var Descripcion = $('#CargoReconsideracion').val().trim() + ";:;" + $('#UndOrgReconsideracion_Nombre').val().trim() + ";:;" + $('#PzoReconPresent').val().trim() + ";:;" + $('#PzoReconResol').val().trim();

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion.trim(),
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                success: function (data) {
                                    sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp2Reconsideracion(idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        GuardarObservarExp2Reconsideracion: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {


                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#Reconsideracion2').val().trim(),
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');
                                    $("#aCancelarObservarExp").css({ "display": "none" });
                                    $("#aGuardarObservarExp").css({ "display": "none" });
                                    $("#aEditarObservarExp").css({ "display": "" });

                                    $('#mensaje' + NombreCampo + '').show();
                                    document.querySelector('#mensaje' + NombreCampo + '').innerText = 'Se observo con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        asignarguardarObservarExpApelacion: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {

                            if ($('#' + Descripcion2 + '').val() == "") {

                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }

                            sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp1Apelacion(idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla);
                        },

                        GuardarObservarExp1Apelacion: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {
                            var Descripcion = $('#CargoApelacion').val() + ";:;" + $('#UndOrgApelacion_Nombre').val() + ";:;" + $('#PzoApelPresent').val() + ";:;" + $('#PzoApelResol').val();


                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                success: function (data) {
                                    sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp2Apelacion(idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        GuardarObservarExp2Apelacion: function (idExpediente, procedimientoId, Descripcion1, Descripcion2, NombreCampo, Pantalla) {
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#Apelacion2').val().trim(),
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');
                                    $("#aCancelarObservarExp").css({ "display": "none" });
                                    $("#aGuardarObservarExp").css({ "display": "none" });
                                    $("#aEditarObservarExp").css({ "display": "" });

                                    $('#mensaje' + NombreCampo + '').show();
                                    document.querySelector('#mensaje' + NombreCampo + '').innerText = 'Se observo con éxito';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        comentario: "",
                        asignarCancelarObservarExpReconsideracion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            sut.editProcedimiento.AsignarObservarexp.CancelarObservacion1Reconsideracion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                        },
                        CancelarObservacion1Reconsideracion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {
                            var Descripcion = $('#CargoReconsideracion').val() + ";:;" + $('#UndOrgReconsideracion_Nombre').val() + ";:;" + $('#PzoReconPresent').val() + ";:;" + $('#PzoReconResol').val();


                            if(Descripcion!=''){


                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': Descripcion,
                                        'filtro.CodValidacion': '1',
                                        'filtro.TipoEstado': '1',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Reconsideracion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";

                            }else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Reconsideracion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                            }
                        },
                        CancelarObservacion2Reconsideracion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {


                            var descripcion=$('#Reconsideracion2').val();

                            if(descripcion.trim()!=''){

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#Reconsideracion2').val(),
                                        'filtro.CodValidacion': '2',
                                        'filtro.TipoEstado': '2',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Reconsideracion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Reconsideracion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                            }
                        },
                        CancelarObservacion3Reconsideracion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {


                            var descripcion=$('#' + nomsustento + '').val();

                            if(descripcion == undefined){
                                descripcion='';
                            }


                            if(descripcion!='')
                            {

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#' + nomsustento + '').val(),
                                        'filtro.CodValidacion': '3',
                                        'filtro.TipoEstado': '3',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        $('#modal-ventana').modal('hide');

                                        $('#tablaReconsideracion1').show();
                                        //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                        //visible
                                        $('#' + nomcampo + 'label').show();

                                        //$('#aValidarObservarExp' + NombreCampo + '').css({ "display": "" });
                                        $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "" });

                                        $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                        $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "none" });
                                        $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "none" });

                                        $('#' + divsustento + '').remove();
                                        $('#' + nombdivdetalle + '').remove();
                                        $('#mensaje' + NombreCampo + '').hide();
                                        document.querySelector('#mensaje' + NombreCampo + '').innerText = '';




                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });


                                comentario = "";
                            }else
                            {

                                $('#modal-ventana').modal('hide');

                                $('#tablaReconsideracion1').show();
                                //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                //visible
                                $('#' + nomcampo + 'label').show();

                                //$('#aValidarObservarExp' + NombreCampo + '').css({ "display": "" });
                                $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "" });

                                $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "none" });
                                $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "none" });

                                $('#' + divsustento + '').remove();
                                $('#' + nombdivdetalle + '').remove();
                                $('#mensaje' + NombreCampo + '').hide();
                                document.querySelector('#mensaje' + NombreCampo + '').innerText = '';

                            }
                        } ,
                        comentario: "",
                        asignarCancelarObservarExpApelacion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            sut.editProcedimiento.AsignarObservarexp.CancelarObservacion1Apelacion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                        },
                        CancelarObservacion1Apelacion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {
                            var Descripcion = $('#CargoApelacion').val() + ";:;" + $('#UndOrgApelacion_Nombre').val() + ";:;" + $('#PzoApelPresent').val() + ";:;" + $('#PzoApelResol').val();


                            if(Descripcion!='')
                            {

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': Descripcion,
                                        'filtro.CodValidacion': '1',
                                        'filtro.TipoEstado': '1',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Apelacion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }
                            else{
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Apelacion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                            }
                        },
                        CancelarObservacion2Apelacion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {

                            var descripcion= $('#Apelacion2').val().trim();



                            if(descripcion.trim()!=''){

                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#Apelacion2').val().trim(),
                                        'filtro.CodValidacion': '2',
                                        'filtro.TipoEstado': '2',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Apelacion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);

                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Apelacion(idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo);
                            }
                        },
                        CancelarObservacion3Apelacion: function (idExpediente, procedimientoId, idOpcion, Descripcion1, Descripcion2, NombreCampo, Pantalla, nombdivdetalle, nomsustento, divsustento, nomcampo) {


                            var descripcion=$('#' + nomsustento + '').val();

                            if(descripcion == undefined){
                                descripcion='';
                            }


                            if(descripcion!='')
                            {


                                if (idOpcion == 1) {
                                    var model = {
                                        'filtro.ExpedienteId': idExpediente,
                                        'filtro.ProcedimientoId': procedimientoId,
                                        'filtro.Descripcion': $('#' + nomsustento + '').val(),
                                        'filtro.CodValidacion': '3',
                                        'filtro.TipoEstado': '3',
                                        'filtro.NombreCampo': NombreCampo,
                                        'filtro.Pantalla': Pantalla,
                                        'filtro.Estado': '1',
                                    };
                                }

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        $('#modal-ventana').modal('hide');

                                        $('#tablaApelacion1').show();
                                        //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                        //visible
                                        $('#' + nomcampo + 'label').show();

                                        //$('#aValidarObservarExp' + NombreCampo + '').css({ "display": "" });
                                        $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "" });

                                        $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                        $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "none" });
                                        $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "none" });

                                        $('#' + divsustento + '').remove();
                                        $('#' + nombdivdetalle + '').remove();
                                        $('#mensaje' + NombreCampo + '').hide();
                                        document.querySelector('#mensaje' + NombreCampo + '').innerText = '';




                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });


                                comentario = "";
                            }else
                            {

                                $('#modal-ventana').modal('hide');

                                $('#tablaApelacion1').show();
                                //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                //visible
                                $('#' + nomcampo + 'label').show();

                                //$('#aValidarObservarExp' + NombreCampo + '').css({ "display": "" });
                                $('#aObservarEditarExp' + NombreCampo + '').css({ "display": "" });

                                $('#aMasivoObservarExp' + NombreCampo + '').css({ "display": "none" });
                                $('#aAsignarGuardarObservarExp' + NombreCampo + '').css({ "display": "none" });
                                $('#aAsignarCancelarObservarExp' + NombreCampo + '').css({ "display": "none" });

                                $('#' + divsustento + '').remove();
                                $('#' + nombdivdetalle + '').remove();
                                $('#mensaje' + NombreCampo + '').hide();
                                document.querySelector('#mensaje' + NombreCampo + '').innerText = '';
                            }
                        },
                        ///*trabajar*/
                        asignarguardarObservarExpModalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {

                            if ($('#Modalidad2' + numero).val() == "") {

                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }

                            sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp1Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);
                        },

                        GuardarObservarExp1Modalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {


                            var DesModalidad=$('#DesModalidad' + numero).val();

                            if(DesModalidad == undefined){
                                DesModalidad='';
                            }

                            var PreModalidad=$('#PreModalidad' + numero).val();

                            if(PreModalidad == undefined){
                                PreModalidad='';
                            }


                            var CostoModalidad=$('#CostoModalidad' + numero).val();

                            if(CostoModalidad == undefined){
                                CostoModalidad='';
                            }


                            var Descripcion = DesModalidad + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + PreModalidad + ";:;" + CostoModalidad;



                            //var Descripcion = $('#DesModalidad' + numero).val() + ";" + $('#chekModalidad' + numero).prop('checked')+ ";" + $('#PreModalidad' + numero).val() + ";" + $('#CostoModalidad' + numero).val();

                            var NombreCampo = 'Modalidad';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.TablaAsmeId': TablaAsmeId,
                            };

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                success: function (data) {
                                    sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp2Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        GuardarObservarExp2Modalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {
                            var NombreCampo = 'Modalidad';
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#Modalidad2' + numero).val(),
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.TablaAsmeId': TablaAsmeId,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');


                                    $('#aCancelarObservarExp' + NombreCampo + numero + '').css("display", "none");
                                    $('#aGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aEditarObservarExp' + NombreCampo + numero + '').css({ "display": "" });

                                    $('#mensajeModalidad' + numero).show();
                                    document.querySelector('#mensajeModalidad' + numero).innerText = 'Se observo con éxito';


                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        ///*trabajar*/
                        asignarguardarObservarExpRequisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {

                            if ($('#Requisitos2' + numero).val().trim() == "") {

                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }

                            sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp1Requisitos(idExpediente, procedimientoId, numero,RequisitoId);
                        },

                        GuardarObservarExp1Requisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {

                            //$('#Nombre' + numero).val().trim();
                            var Descripcion =  document.getElementById('Nombre' + numero).innerHTML;
                            var NombreCampo = 'Requisitos';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion.trim(),
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.RequisitoId': RequisitoId,

                            };

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                success: function (data) {
                                    sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp2Requisitos(idExpediente, procedimientoId, numero,RequisitoId);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        GuardarObservarExp2Requisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {
                            var NombreCampo = 'Requisitos';
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#Requisitos2' + numero).val(),
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.RequisitoId': RequisitoId,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');


                                    $('#aCancelarObservarExp' + NombreCampo + numero + '').css("display", "none");
                                    $('#aGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aEditarObservarExp' + NombreCampo + numero + '').css({ "display": "" });

                                    $('#mensajeRequisitos' + numero).show();
                                    document.querySelector('#mensajeRequisitos' + numero).innerText = 'Se observo con éxito';


                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        ///*trabajar*/
                        asignarguardarObservarExpBaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {
                            if ($('#BaseLegal2' + numero).val().trim() == "") {

                                showNotification('top', 'right', 'No puedes Guardar una obseración en blanco', 2);
                                return;
                            }

                            sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp1BaseLegal(idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId);
                        },

                        GuardarObservarExp1BaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {

                            var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();

                            //var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();


                            var NombreCampo = 'BaseLegal';

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                success: function (data) {
                                    sut.editProcedimiento.AsignarObservarexp.GuardarObservarExp2BaseLegal(idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        GuardarObservarExp2BaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {
                            var NombreCampo = 'BaseLegal';
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#BaseLegal2' + numero).val(),
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {
                                    $('#modal-ventana').modal('hide');


                                    $('#aCancelarObservarExp' + NombreCampo + numero + '').css("display", "none");
                                    $('#aGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aEditarObservarExp' + NombreCampo + numero + '').css({ "display": "" });

                                    $('#mensajeBaseLegal' + numero).show();
                                    document.querySelector('#mensajeBaseLegal' + numero).innerText = 'Se observo con éxito';


                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },

                        comentario: "",
                        asignarCancelarObservarExpModalidad: function (idExpediente, procedimientoId,numero,TablaAsmeId) {

                            sut.editProcedimiento.AsignarObservarexp.CancelarObservacion1Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);

                        },
                        CancelarObservacion1Modalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {


                            var DesModalidad=$('#DesModalidad' + numero).val();

                            if(DesModalidad == undefined){
                                DesModalidad='';
                            }

                            var PreModalidad=$('#PreModalidad' + numero).val();

                            if(PreModalidad == undefined){
                                PreModalidad='';
                            }


                            var CostoModalidad=$('#CostoModalidad' + numero).val();

                            if(CostoModalidad == undefined){
                                CostoModalidad='';
                            }


                            var Descripcion = DesModalidad + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + PreModalidad + ";:;" + CostoModalidad;


                            if(Descripcion!='')
                            {


                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '1',
                                    'filtro.TipoEstado': '1',
                                    'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                    'filtro.Pantalla': 'Datos Generales',
                                    'filtro.Estado': '1',
                                    'filtro.TablaAsmeId': TablaAsmeId,
                                };

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);
                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }
                            else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);
                            }
                        },
                        CancelarObservacion2Modalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {




                            var DesModalidad=$('#DesModalidad' + numero).val();

                            if(DesModalidad == undefined){
                                DesModalidad='';
                            }

                            var PreModalidad=$('#PreModalidad' + numero).val();

                            if(PreModalidad == undefined){
                                PreModalidad='';
                            }


                            var CostoModalidad=$('#CostoModalidad' + numero).val();

                            if(CostoModalidad == undefined){
                                CostoModalidad='';
                            }


                            var Descripcion = DesModalidad + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + PreModalidad + ";:;" + CostoModalidad;

                            //var Descripcion = $('#DesModalidad' + numero).val() + ";" + $('#chekModalidad' + numero).prop('checked')+ ";" + $('#PreModalidad' + numero).val() + ";" + $('#CostoModalidad' + numero).val();



                            if(Descripcion!='')
                            {

                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '2',
                                    'filtro.TipoEstado': '2',
                                    'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                    'filtro.Pantalla': 'Datos Generales',
                                    'filtro.Estado': '1',
                                    'filtro.TablaAsmeId': TablaAsmeId,
                                };


                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);

                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }else{
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Modalidad(idExpediente, procedimientoId, numero,TablaAsmeId);
                            }
                        },
                        CancelarObservacion3Modalidad: function (idExpediente, procedimientoId, numero,TablaAsmeId) {


                            var DesModalidad=$('#DesModalidad' + numero).val();

                            if(DesModalidad == undefined){
                                DesModalidad='';
                            }

                            var PreModalidad=$('#PreModalidad' + numero).val();

                            if(PreModalidad == undefined){
                                PreModalidad='';
                            }


                            var CostoModalidad=$('#CostoModalidad' + numero).val();

                            if(CostoModalidad == undefined){
                                CostoModalidad='';
                            }


                            var Descripcion = DesModalidad + ";:;" + $('#chekModalidad' + numero).prop('checked')+ ";:;" + PreModalidad + ";:;" + CostoModalidad;

                            //var Descripcion = $('#DesModalidad' + numero).val() + ";" + $('#chekModalidad' + numero).prop('checked')+ ";" + $('#PreModalidad' + numero).val() + ";" + $('#CostoModalidad' + numero).val();
                            var NombreCampo = 'Modalidad';



                            if(Descripcion!='')
                            {


                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '3',
                                    'filtro.TipoEstado': '3',
                                    'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                                    'filtro.Pantalla': 'Datos Generales',
                                    'filtro.Estado': '1',
                                    'filtro.TablaAsmeId': TablaAsmeId,
                                };

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        $('#modal-ventana').modal('hide');

                                        //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                        //visible
                                        $('#trModalidad' + numero + '').show();

                                        //$('#aValidarObservarExp' + NombreCampo + numero + '').css({ "display": "" });
                                        $('#aObservarEditarExp' + NombreCampo + numero +  '').css({ "display": "" });

                                        $('#aMasivoObservarExp' + NombreCampo + numero +  '').css({ "display": "none" });
                                        $('#aAsignarGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                        $('#aAsignarCancelarObservarExp' + NombreCampo + numero +  '').css({ "display": "none" });


                                        $('#trdivModalidad0' + numero + '').remove();
                                        $('#trdivModalidad0_' + numero + '').remove();
                                        $('#mensajeModalidad' + numero).hide();
                                        document.querySelector('#mensajeModalidad' + numero).innerText = '';



                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });


                                comentario = "";

                            }else
                            {

                                $('#modal-ventana').modal('hide');

                                //visible
                                $('#trModalidad' + numero + '').show();

                                //$('#aValidarObservarExp' + NombreCampo + numero + '').css({ "display": "" });
                                $('#aObservarEditarExp' + NombreCampo + numero +  '').css({ "display": "" });

                                $('#aMasivoObservarExp' + NombreCampo + numero +  '').css({ "display": "none" });
                                $('#aAsignarGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                $('#aAsignarCancelarObservarExp' + NombreCampo + numero +  '').css({ "display": "none" });


                                $('#trdivModalidad0' + numero + '').remove();
                                $('#trdivModalidad0_' + numero + '').remove();
                                $('#mensajeModalidad' + numero).hide();
                                document.querySelector('#mensajeModalidad' + numero).innerText = '';

                            }
                        },
                        asignarCancelarObservarExpRequisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {

                            sut.editProcedimiento.AsignarObservarexp.CancelarObservacion1Requisitos(idExpediente, procedimientoId, numero,RequisitoId);

                        },
                        CancelarObservacion1Requisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {



                            //var Descripcion = $('#Nombre' + numero).val().trim();
                            var Descripcion =  document.getElementById('Nombre' + numero).innerHTML;
                            if(Descripcion.trim() != ''){

                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '1',
                                    'filtro.TipoEstado': '1',
                                    'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                    'filtro.Pantalla': 'Datos Generales',
                                    'filtro.Estado': '1',
                                    'filtro.RequisitoId': RequisitoId,


                                };

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Requisitos(idExpediente, procedimientoId, numero,RequisitoId);
                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2Requisitos(idExpediente, procedimientoId, numero,RequisitoId);
                            }
                        },
                        CancelarObservacion2Requisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {
                            //var Descripcion = $('#Nombre' + numero).val().trim();
                            var Descripcion =  document.getElementById('Nombre' + numero).innerHTML;

                            if(Descripcion.trim() != ''){
                                var model = {
                                    'filtro.ExpedienteId': idExpediente,
                                    'filtro.ProcedimientoId': procedimientoId,
                                    'filtro.Descripcion': Descripcion,
                                    'filtro.CodValidacion': '2',
                                    'filtro.TipoEstado': '2',
                                    'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                    'filtro.Pantalla': 'Datos Generales',
                                    'filtro.Estado': '1',
                                    'filtro.RequisitoId': RequisitoId,
                                };


                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Requisitos(idExpediente, procedimientoId, numero,RequisitoId);

                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });

                                comentario = "";
                            }else
                            {
                                sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3Requisitos(idExpediente, procedimientoId, numero,RequisitoId);
                            }
                        },
                        CancelarObservacion3Requisitos: function (idExpediente, procedimientoId, numero,RequisitoId) {


                            var Descripcion =  document.getElementById('Nombre' + numero).innerHTML;
                            //var Descripcion = $('#Nombre' + numero).val();
                            var NombreCampo = 'Requisitos';
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '3',
                                'filtro.TipoEstado': '3',
                                'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.RequisitoId': RequisitoId,
                            };


                            if(Descripcion != ''){

                                $.ajax({
                                    type: "POST",
                                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                    data: model,
                                    cache: false,
                                    beforeSend: function () {
                                        //sut.wait.modal('ventana-container');
                                        //$('#modal-ventana').modal('show');
                                    },
                                    success: function (data) {

                                        $('#modal-ventana').modal('hide');

                                        //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                        //visible
                                        $('#trRequisitos' + numero + '').show();

                                        //$('#aValidarObservarExp' + NombreCampo + numero + '').css({ "display": "" });
                                        $('#aObservarEditarExp' + NombreCampo + numero + '').css({ "display": "" });

                                        $('#aMasivoObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                        $('#aAsignarGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                        $('#aAsignarCancelarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });


                                        $('#trdivRequisitos0' + numero + '').remove();
                                        $('#trdivRequisitos0_' + numero + '').remove();
                                        $('#mensajeRequisitos' + numero).hide();
                                        document.querySelector('#mensajeRequisitos' + numero).innerText = '';



                                    },
                                    error: function (result) {
                                        $('#modal-ventana').modal('hide');
                                        sut.error.show('mensajes', result.responseText);
                                    }
                                });


                                comentario = "";

                            }else
                            {


                                $('#modal-ventana').modal('hide');

                                //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                //visible
                                $('#trRequisitos' + numero + '').show();

                                //$('#aValidarObservarExp' + NombreCampo + numero + '').css({ "display": "" });
                                $('#aObservarEditarExp' + NombreCampo + numero + '').css({ "display": "" });

                                $('#aMasivoObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                $('#aAsignarGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                $('#aAsignarCancelarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });


                                $('#trdivRequisitos0' + numero + '').remove();
                                $('#trdivRequisitos0_' + numero + '').remove();
                                $('#mensajeRequisitos' + numero).hide();
                                document.querySelector('#mensajeRequisitos' + numero).innerText = '';
                            }
                        },
                        asignarCancelarObservarExpBaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {

                            sut.editProcedimiento.AsignarObservarexp.CancelarObservacion1BaseLegal(idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId);

                        },
                        CancelarObservacion1BaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {

                            var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();


                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '1',
                                'filtro.TipoEstado': '1',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    sut.editProcedimiento.AsignarObservarexp.CancelarObservacion2BaseLegal(idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId);
                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarObservacion2BaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {

                            var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();


                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '2',
                                'filtro.TipoEstado': '2',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };


                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    sut.editProcedimiento.AsignarObservarexp.CancelarObservacion3BaseLegal(idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId);

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        CancelarObservacion3BaseLegal: function (idExpediente, procedimientoId, numero,BaseLegalId,BaseLegalNormaId) {
                            var Descripcion = $('#BNormaTipo' + numero).val() + ';:;' + $('#BNumero' + numero).val() + ';:;' + $('#BDescripcion' + numero).val() + ';:;' + $('#BFechaPublicacion' + numero).val() + ';:;' + $('#BArticulo' + numero).val();
                            var NombreCampo = 'BaseLegal';
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': Descripcion,
                                'filtro.CodValidacion': '3',
                                'filtro.TipoEstado': '3',
                                'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                                'filtro.Pantalla': 'Datos Generales',
                                'filtro.Estado': '1',
                                'filtro.BaseLegalId': BaseLegalId,
                                'filtro.BaseLegalNormaId': BaseLegalNormaId,
                            };

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    //sut.wait.modal('ventana-container');
                                    //$('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');

                                    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                                    //visible
                                    $('#trBaseLegal' + numero + '').show();

                                    //$('#aValidarObservarExp' + NombreCampo + numero + '').css({ "display": "" });
                                    $('#aObservarEditarExp' + NombreCampo + numero + '').css({ "display": "" });

                                    $('#aMasivoObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aAsignarGuardarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });
                                    $('#aAsignarCancelarObservarExp' + NombreCampo + numero + '').css({ "display": "none" });


                                    $('#trdivBaseLegal0' + numero + '').remove();
                                    $('#trdivBaseLegal0_' + numero + '').remove();
                                    $('#mensajeBaseLegal' + numero).hide();
                                    document.querySelector('#mensajeBaseLegal' + numero).innerText = '';
                                    document.getElementById('divBaseLegal0'+numero+'').style.visibility = "collapse";


                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });


                            comentario = "";
                        }

                    },
                    AsignarSustentarexp: {
                        guardarSustentarExp: function (idExpediente,procedimientoId,Descripcion,NombreCampo,Pantalla) {
                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#'+Descripcion+'').val(),
                                'filtro.CodValidacion': '3',
                                'filtro.TipoEstado': '3',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };
                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/AgregarObservacion',
                                url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');

                                    $('#mensaje'+NombreCampo+'').show();
                                    document.querySelector('#mensaje'+NombreCampo+'').innerText = 'Sustento';

                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";
                        },
                        comentario: "",
                        CancelarSustentarExp: function (idExpediente,procedimientoId,Descripcion,NombreCampo,Pantalla,nombdivdetalle) {

                            var model = {
                                'filtro.ExpedienteId': idExpediente,
                                'filtro.ProcedimientoId': procedimientoId,
                                'filtro.Descripcion': $('#'+Descripcion+'').val(),
                                'filtro.CodValidacion': '3',
                                'filtro.TipoEstado': '3',
                                'filtro.NombreCampo': NombreCampo,
                                'filtro.Pantalla': Pantalla,
                                'filtro.Estado': '1',
                            };

                            $.ajax({
                                type: "POST",
                                //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                                url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                                data: model,
                                cache: false,
                                beforeSend: function () {
                                    sut.wait.modal('ventana-container');
                                    $('#modal-ventana').modal('show');
                                },
                                success: function (data) {

                                    $('#modal-ventana').modal('hide');

                                    $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "" });
                                    $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "none" });
                                    $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "none" });

                                    $('#'+nombdivdetalle+'').remove();
                                    $('#mensaje'+NombreCampo+'').show();
                                    document.querySelector('#mensaje'+NombreCampo+'').innerText = 'Se observo con éxito';


                                },
                                error: function (result) {
                                    $('#modal-ventana').modal('hide');
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });

                            comentario = "";



                        }
                    },

                    textoobservacion: function (Descripcion1,Descripcion2,nombdiv,nombdivdetalle,titulo,campo1,campo2,numcol,estado,nomcampo) {
                        debugger;
                        var rows = '';
                        rows += '<div id="'+nombdivdetalle+'" class="form-group">';
                        rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">'+titulo+' </label>';
                        rows += '<div class="col-sm-'+numcol+' col-xs-12">';
                        rows += sut.string.format('<td><label class="form-control" name="'+campo1+'"  id="'+campo1+'"  style="border-color:green;background:#00a65a36;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion1 );
                        rows += '</div>';
                        rows += '<br>';
                        rows += '<br>';
                        rows += '<br>';
                        rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">Observar: </label>';
                        rows += '<div class="col-sm-'+numcol+' col-xs-12">';
                        if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                        {
                        rows += sut.string.format('<td><textarea name="' + campo2 + '" id="' + campo2 +'" class="form-control"  onkeypress="javascript:sut.editProcedimiento.visualizarSustento(event,this);" style="border-color:red;background:#ff00002e;">{0}</textarea></td>', Descripcion2);
                        }
                        else
                        {
                            rows += sut.string.format('<td><label class="form-control" name="' + campo2 + '" id="' + campo2 +'"  style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2 );
                        }
                        rows += '</div>';
                        rows += '</div>';
                        $('#'+nombdiv+'').append(rows);

                        if(estado== 'Presentado'){
                            $('#'+nomcampo+'').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#'+nomcampo+'label').hide();

                        }else{
                            $('#'+nomcampo+'').show();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#'+nomcampo+'label').show();
                        }


                    },


                    textoobservacionReconsideracion: function (Descripcion1, Descripcion2, nombdiv, nombdivdetalle, titulo, campo1, campo2, numcol, estado, nomcampo) {




                        var Des = Descripcion1.split(";:;");


                        var rows = '';
                        rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                        rows += '<tbody>';
                        rows += '<tr>';
                        rows += '<td style="width: 120px;">Reconsideración</td>';
                        rows += sut.string.format('<td style="text-align: center;"><textarea name="CargoReconsideracion"  id="CargoReconsideracion" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[0]);
                        rows += sut.string.format('<td style="text-align: center;"><textarea name="UndOrgReconsideracion_Nombre"  id="UndOrgReconsideracion_Nombre" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[1]);
                        rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoReconPresent"  id="PzoReconPresent" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[2]);
                        rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoReconResol"  id="PzoReconResol" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[3]);
                        rows += '</tr>';
                        rows += '<tr>';
                        rows += '<td style="width: 120px;">Observar</td>';
                        if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                        {
                            rows += sut.string.format('<td colspan="4" ><textarea name="Reconsideracion2"   onkeypress="javascript:sut.editProcedimiento.visualizarSustento(event,this);" id="Reconsideracion2" class="form-control" style="border-color:red;background:#ff00002e;">{0}</textarea></td>', Descripcion2);
                        }
                        else
                        {
                            rows += sut.string.format('<td colspan="4"><label class="form-control" name="Reconsideracion2" id="Reconsideracion2"   style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2 );
                        }
                        rows += '</tr>';

                        rows += '</tbody>';
                        rows += '</table>';
                        $('#' + nombdiv + '').append(rows);


                        if (estado == 'Presentado') {
                            $('#' + nomcampo + '').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#' + nomcampo + 'label').hide();

                        } else {
                            $('#' + nomcampo + '').show();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#' + nomcampo + 'label').show();
                        }


                    },
                    textoobservacionApelacion: function (Descripcion1, Descripcion2, nombdiv, nombdivdetalle, titulo, campo1, campo2, numcol, estado, nomcampo) {




                        var Des = Descripcion1.split(";:;");
                        var asdasd = Des[0];

                        var rows = '';
                        rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                        rows += '<tbody>';
                        rows += '<tr>';
                        rows += '<td style="width: 120px;">Apelacion</td>';
                        rows += sut.string.format('<td style="text-align: center;"><textarea name="CargoReconsideracion"  id="CargoReconsideracion" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[0]);
                        rows += sut.string.format('<td style="text-align: center;"><textarea name="UndOrgReconsideracion_Nombre"  id="UndOrgReconsideracion_Nombre" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[1]);
                        rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoReconPresent"  id="PzoReconPresent" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[2]);
                        rows += sut.string.format('<td style="text-align: center; width: 100px;"><textarea name="PzoReconResol"  id="PzoReconResol" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Des[3]);
                        rows += '</tr>';
                        rows += '<tr>';
                        rows += '<td style="width: 120px;">Observar:</td>';
                        if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                        {
                            rows += sut.string.format('<td colspan="4" ><textarea name="Reconsideracion2" id="Apelacion2"  onkeypress="javascript:sut.editProcedimiento.visualizarSustento(event,this);" class="form-control" style="border-color:red;background:#ff00002e;">{0}</textarea></td>', Descripcion2);
                        }
                        else
                        {
                            rows += sut.string.format('<td colspan="4"><label class="form-control" name="Reconsideracion2" id="Apelacion2"  style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2 );
                        }

                        rows += '</tr>';

                        rows += '</tbody>';
                        rows += '</table>';
                        $('#' + nombdiv + '').append(rows);


                        if (estado == 'Presentado') {
                            $('#' + nomcampo + '').hide();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#' + nomcampo + 'label').hide();

                        } else {
                            $('#' + nomcampo + '').show();
                            //document.getElementById('#'+dato+'').style.visibility = "hidden";
                            //visible
                            $('#' + nomcampo + 'label').show();
                        }


                    },
                    textoobservacionModalidad: function (Descripcion, Descripcion2, estado, nomcampo, num,numeromod) {


                        var Des = Descripcion.split(";:;");
                        var tabla = $('#divModalidad0' + num + ' tbody');

                        //var Descripcion = $('#DesModalidad' + num).val() + ";" + $('#chekModalidad' + num).val() + ";" + $('#PreModalidad' + num).val() + ";" + $('#CostoModalidad' + num).val();
                        var NombreCampo = 'Modalidad';
                        var rows = '';



                        rows += sut.string.format('<tr data-index="{0}" id="trdivModalidad0' + num + '"  >', num);
                        rows += sut.string.format('<td style="width:100px;"> Modalidad :</td>');


                        var desmodalidad=Des[0];

                        rows += sut.string.format('<td style="width: 80%;">');
                        if(numeromod > 1){
                            var descr='';
                            if(desmodalidad!=null && desmodalidad!='null' ){
                                descr=desmodalidad;
                            }
                            rows += sut.string.format('<input type="text"  style="border-color:green;background:#00a65a36;" id="DesModalidadD' + num + '"  value="{0}" class="form-control" readonly />', descr, 'readonly');
                        }


                        rows += sut.string.format('</td>');





                        if (Des[1]=='false')
                        {
                            Des[1]=0;
                        }
                        else
                        {
                            Des[1]=1
                        }

                        rows += sut.string.format('<td style="width:120px"><input   type="checkbox" id="chekModalidadD' + num + '"  {0} disabled /></td>', Des[1] ? 'checked' : '', 'disabled');

                        if (sut.editProcedimiento.esTupaEstandar) {
                            rows += sut.string.format('<td style="width:100px;"><input  id="PreModalidadD' + num + '" value="{0}" class="form-control" type="number" min="1" readonly /></td>', Des[2]);
                        } else if (sut.editProcedimiento.esCargaInicial) {
                            if (!sut.editProcedimiento.esProcEstadar) {
                                rows += sut.string.format('<td style="width:100px;"><input  style="border-color:green;background:#00a65a36;" id="CostoModalidadD' + num + '" value="{0}" class="form-control" type="number" min="1" readonly /></td>', Des[3]);
                            }
                        } else {
                            if (!sut.editProcedimiento.esProcEstadar) {
                                rows += sut.string.format('<td style="width:100px;"><input   style="border-color:green;background:#00a65a36;" id="PreModalidadD' + num + '"  value="{0}" class="form-control" type="number" min="1" readonly /></td>', Des[2]);
                            }
                        }
                        rows += '<td><div class="btn-group">';

                        rows += '</div></td>';
                        rows += '</tr>'
                        rows += '<tr id="trdivModalidad0_' + num + '">'
                        rows += sut.string.format('<td style="width:100px;">Observar :  </td>');
                        if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                        {
                            rows += sut.string.format('<td colspan="3" ><textarea name="Modalidad2' + num + '" id="Modalidad2' + num + '" class="form-control"   onkeypress="javascript:sut.editProcedimiento.visualizarSustentomodalidad(event,this);" style="border-color:red;background:#ff00002e;">{0}</textarea></td>', Descripcion2);
                        }
                        else
                        {
                            rows += sut.string.format('<td colspan="3"><label class="form-control" name="Modalidad2' + num + '" id="Modalidad2' + num + '" style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2 );
                        }
                        rows += '</tr>';;

                        tabla.append(rows);

                        $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                        $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                        $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                        $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                        $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                        $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });








                        //if (estado == 'Presentado') {
                        //    $('#' + nomcampo + '').hide();
                        //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                        //    //visible
                        //    $('#' + nomcampo + 'label').hide();

                        //} else {
                        //    $('#' + nomcampo + '').show();
                        //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                        //    //visible
                        //    $('#' + nomcampo + 'label').show();
                        //}


                    },

                    textoobservacionRequisitos: function (Descripcion, Descripcion2, estado, nomcampo, num) {



                        var tabla = $('#divRequisitos0' + num + ' tbody');

                        //var Descripcion = $('#DesRequisitos' + num).val() + ";" + $('#chekRequisitos' + num).val() + ";" + $('#PreRequisitos' + num).val() + ";" + $('#CostoRequisitos' + num).val();
                        var NombreCampo = 'Requisitos';
                        var rows = '';

                        rows += sut.string.format('<tr data-index="{0}" id="trdivRequisitos0' + num + '"  >', num);
                        rows += sut.string.format('<td style="width:100px;"> Descripción: </td>');
                        rows += sut.string.format('<td><label class="form-control"  style="border-color:green;background:#00a65a36;font-weight: 600;height: 100%;"  name="NombreD' + num + '" id="NombreD' + num + '" >{0}</label></td>', Descripcion);
                        rows += '</tr>'

                        rows += '<tr id="trdivRequisitos0_' + num + '">'
                        rows += sut.string.format('<td style="width:100px;">Observar : </td>');
                        if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                        {
                            rows += sut.string.format('<td colspan="3" ><textarea name="Requisitos2' + num + '" id="Requisitos2' + num + '"  onkeypress="javascript:sut.editProcedimiento.visualizarSustentorequisitos(event,this);" class="form-control" style="border-color:red;background:#ff00002e;">{0}</textarea></td>', Descripcion2);
                        }
                        else
                        {
                            rows += sut.string.format('<td colspan="3"><label class="form-control" name="Requisitos2' + num + '" id="Requisitos2' + num + '"  style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2 );
                        }
                         rows += '</tr>';;

                        tabla.append(rows);


                        $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                        $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                        $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                        $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                        $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                        $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });




                        //if (estado == 'Presentado') {
                        //    $('#' + nomcampo + '').hide();
                        //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                        //    //visible
                        //    $('#' + nomcampo + 'label').hide();

                        //} else {
                        //    $('#' + nomcampo + '').show();
                        //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                        //    //visible
                        //    $('#' + nomcampo + 'label').show();
                        //}


                    },
                    textoobservacionBaseLegal: function (Descripcion, Descripcion2, estado, nomcampo, num) {


                        var Des = Descripcion.split(";:;");
                        document.getElementById('divBaseLegal0'+num+'').style.visibility = "initial";
                        var tabla = $('#divBaseLegal0' + num + ' tbody');

                        var NombreCampo = 'BaseLegal';
                        var rows = '';



                        rows += sut.string.format('<tr data-index="{0}" id="trdivBaseLegal0' + num + '">', num);
                        rows += sut.string.format('<td>Descripción: </td>');
                        rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', Des[4]);
                        rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', Des[2]);
                        rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', Des[0]);
                        rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', Des[1]);
                        rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;">{0}</td>', Des[3]);
                        rows += sut.string.format('<td style="border-color:#00a65a00;background:#00a65a36;border: 1px solid #f4f4f4;"> </td>');
                        rows += '</tr>'
                        rows += '<tr id="trdivBaseLegal0_' + num + '">'
                        rows += sut.string.format('<td style="width:100px;">Observar : </td>');
                        if (@user.Rol == 8 || @user.Rol == 6 || @user.Rol == 7)
                        {
                            rows += sut.string.format('<td colspan="6" ><textarea name="BaseLegal2' + num + '" id="BaseLegal2' + num + '" onkeypress="javascript:sut.editProcedimiento.visualizarSustentobaselegal(event,this);" class="form-control"  onkeypress="javascript:sut.editProcedimiento.visualizarSustento(event,this);" style="border-color:red;background:#ff00002e;">{0}</textarea></td>', Descripcion2);
                        }
                        else
                        {
                            rows += sut.string.format('<td colspan="6"><label class="form-control" name="BaseLegal2' + num + '" id="BaseLegal2' + num + '"  style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2 );
                        }
                       rows += '</tr>';;

                        tabla.append(rows);

                        $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                        $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                        $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                        $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                        $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                        $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });



                        //if (estado == 'Presentado') {
                        //    $('#' + nomcampo + '').hide();
                        //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                        //    //visible
                        //    $('#' + nomcampo + 'label').hide();

                        //} else {
                        //    $('#' + nomcampo + '').show();
                        //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                        //    //visible
                        //    $('#' + nomcampo + 'label').show();
                        //}


                    },
                    textosustento: function (Descripcion1,nombdiv,nombdivdetalle,titulo,campo,numcol) {


                        var rows = '';
                        rows += '<div id="'+nombdivdetalle+'" class="form-group">';
                        rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo"> Sustento Observación</label>';
                        rows += '<div class="col-sm-'+numcol+' col-xs-12">';
                        //rows += sut.string.format('<td><textarea name="' + campo + '"  id="' + campo +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;" readonly >{0}</textarea></td>', Descripcion1 );
                        rows += sut.string.format('<td><label class="form-control"  name="' + campo + '"  id="' + campo +'"  style="border-color:#f39c12;background:#f39c1259;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion1 );
                        rows += '</div>';
                        rows += '</div>';
                        $('#'+nombdiv+'').append(rows);
                    },
                    textosustentoReconsideracion: function (Descripcion1,nombdiv,nombdivdetalle,titulo,campo,numcol) {


                        var rows = '';


                        var rows = '';
                        rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                        rows += '<tbody>';
                        rows += '<tr>';
                        rows += '<div id="'+nombdivdetalle+'">';
                        rows += '<td style="width: 120px;">Sustento Observación</td>';
                        //rows += sut.string.format('<td colspan="4"><textarea name="' + campo + '"  id="' + campo +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;" readonly>{0}</textarea></td>', Descripcion1 );
                        rows += sut.string.format('<td><label class="form-control"  name="' + campo + '"  id="' + campo +'"  style="border-color:#f39c12;background:#f39c1259;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion1 );
                        rows += '</div>';
                        rows += '</div>';
                        rows += '</tr>';
                        rows += '</tbody>';
                        rows += '</table>';
                        $('#' + nombdiv + '').append(rows);

                    },
                    sustentarObservarExpApelacion: function (Descripcion1,nombdiv,nombdivdetalle,titulo,campo,numcol) {


                        var NombreCampo='Apelacion';
                        var rows = '';
                        rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                        rows += '<tbody>';
                        rows += '<tr>';
                        rows += '<div id="'+nombdivdetalle+'">';
                        rows += '<td style="width: 120px;">Sustento Observación</td>';
                        //rows += sut.string.format('<td colspan="4"><textarea name="' + campo + '"  id="' + campo +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"readonly >{0}</textarea></td>', '' );
                        rows += sut.string.format('<td><label class="form-control"  name="' + campo + '"  id="' + campo +'"  style="border-color:#f39c12;background:#f39c1259;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion1 );
                        rows += '</div>';
                        rows += '</div>';
                        rows += '</tr>';
                        rows += '</tbody>';
                        rows += '</table>';
                        $('#' + nombdiv + '').append(rows);
                        $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "none" });
                        $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "" });
                        $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "" });

                    },
                    textosustentoModalidad: function (Descripcion2, estado, nomcampo, num) {


                        var tabla = $('#divModalidad0' + num + ' tbody');

                        //var Descripcion = $('#DesModalidad' + num).val() + ";" + $('#chekModalidad' + num).val() + ";" + $('#PreModalidad' + num).val() + ";" + $('#CostoModalidad' + num).val();
                        var NombreCampo = 'Modalidad';
                        var rows = '';


                        rows += '<tr id="trdivModalidad0_' + num + '">'
                        rows += sut.string.format('<td style="width:100px;"> Sustento Observación</td>');
                        //rows += sut.string.format('<td colspan="3" ><textarea name="Modalidad2' + num + '" id="Modalidad2' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;" readonly>{0}</textarea></td>', Descripcion2);
                        rows += sut.string.format('<td colspan="3" ><label class="form-control"  name="Modalidad2' + num + '" id="Modalidad2' + num + '"  style="border-color:#f39c12;background:#f39c1259;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2 );
                        //rows += sut.string.format('<td><textarea   id="Sustento' + num +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                        rows += '</tr>';;

                        tabla.append(rows);


                        $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                        $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                        $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                    },
                    textosustentoRequisitos: function (Descripcion2, estado, nomcampo, num) {


                        var tabla = $('#divRequisitos0' + num + ' tbody');

                        //var Descripcion = $('#DesModalidad' + num).val() + ";" + $('#chekModalidad' + num).val() + ";" + $('#PreModalidad' + num).val() + ";" + $('#CostoModalidad' + num).val();
                        var NombreCampo = 'Requisitos';
                        var rows = '';


                        rows += '<tr id="trdivRequisitos0_' + num + '">'
                        rows += sut.string.format('<td style="width:100px;">Sustento Observación </td>');
                        //rows += sut.string.format('<td colspan="3" ><textarea name="Requisitos2' + num + '" id="Requisitos2' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;" readonly>{0}</textarea></td>', Descripcion2);
                        rows += sut.string.format('<td colspan="3"><label class="form-control" name="Requisitos2' + num + '" id="Requisitos2' + num + '"  style="border-color:#f39c12;background:#f39c1259;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2 );
                        //rows += sut.string.format('<td><textarea   id="Sustento' + num +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                        rows += '</tr>';;

                        tabla.append(rows);


                        $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                        $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                        $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                    },

                    textosustentoBaseLegal: function (Descripcion2, estado, nomcampo, num) {


                        var tabla = $('#divBaseLegal0' + num + ' tbody');

                        //var Descripcion = $('#DesModalidad' + num).val() + ";" + $('#chekModalidad' + num).val() + ";" + $('#PreModalidad' + num).val() + ";" + $('#CostoModalidad' + num).val();
                        var NombreCampo = 'BaseLegal';
                        var rows = '';


                        rows += '<tr id="trdivBaseLegal0_' + num + '">'
                        rows += sut.string.format('<td style="width:100px;"> Sustento Observación</td>');
                        //rows += sut.string.format('<td colspan="12" ><textarea name="BaseLegal2' + num + '" id="BaseLegal2' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;" readonly>{0}</textarea></td>', Descripcion2);
                        rows += sut.string.format('<td colspan="12"><label class="form-control" name="BaseLegal2' + num + '" id="BaseLegal2' + num + '"  style="border-color:#f39c12;background:#f39c1259;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2 );
                        //rows += sut.string.format('<td><textarea   id="Sustento' + num +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                        rows += '</tr>';;

                        tabla.append(rows);


                        $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                        $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                        $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                    },
                    /*fin de la validacion*/
                    Scroll: {
                        pos : 0,
                        init: () => {

                            //$('.menu-compensador').css('height', $('#divBotones').height());
                            //sut.editProcedimiento.Scroll.pos = $('#divBotones').offset().top;
                            //window.onscroll = sut.editProcedimiento.Scroll.ejecutar;
                            //sut.editProcedimiento.Scroll.ejecutar();
                        },
                        ejecutar: () => {
                            var sc = window.pageYOffset;
                            var menu = $('#divBotones');
                            //var mot = menu.offset().top;
                            if (sc > sut.editProcedimiento.Scroll.pos) {
                                if (!menu.hasClass('fixed')) {
                                    menu.addClass('fixed');
                                    menu.appendTo($('.menu-fijo'));
                                    $('.menu-compensador').show();
                                }
                            } else if (menu.hasClass('fixed')) {
                                menu.removeClass('fixed');
                                menu.appendTo($('.menu-movil'));
                                $('.menu-compensador').hide();
                            }
                        },
                        getScrollOffsets: () => {
                            /* Esto funciona para todos los navegadores excepto para IE8 y anteriores */
                            if (window.pageXOffset != null) {
                                return {
                                    x: window.pageXOffset,
                                    y: window.pageYOffset
                                };
                            }

                            /* Funciona para navegadores standards */
                            var doc = window.document;
                            if (document.compatMode === "CSS1Compat") {
                                return {
                                    x: doc.documentElement.scrollLeft,
                                    y: doc.documentElement.scrollTop
                                };
                            }

                            /* Funciona para navegadores con compatibilidad con navegadores antiguos */
                            return {
                                x: doc.body.scrollLeft,
                                y: doc.body.scrollTop
                            };
                        }
                    }
                };

                $(function () {
                    sut.editProcedimiento.Scroll.init();

                    /*habilitar observación*/
                    $("#aCancelarObservarExp").css({ "display": "none" });
                    $("#aGuardarObservarExp").css({ "display": "none" });
                    $("#aEditarObservarExp").css({ "display": "" });
                    $("#txtaObservarExp").prop("disabled", true)

                    /*fin observación*/


                    /*Ocultar iconos generales*/

                    //$("#aCancelarGeneralExpObjetivo").css({ "display": "none" });
                    //$("#aAsignarGuardarObservarExpObjetivo").css({ "display": "none" });
                    //$("#aAsignarCancelarObservarExpObjetivo").css({ "display": "none" });
                    //$("#aGuardarSustentarExpObjetivo").css({ "display": "none" });
                    //$("#aCancelarSustentarExpObjetivo").css({ "display": "none" });
                    /*fin*/

                    $('a[href|="#edit"]').on('click', (e) => {
                        var href = $(e.target).attr('href');
                        sut.editProcedimiento.tab = href.substr(1, href.length - 1);
                    });

                  @{
                        var t = (int)Model.Calificacion;
                        var j = (int)Model.TipoPlazo;
                    }

                    $("#Calificacion").val(@t.ToString());
                    $("#TipoPlazo").val(@j.ToString());

                    if (sut.editProcedimiento.tab == '') {
                        $('#edit-info-basica').addClass('active');
                        $('a[href="#edit-info-basica"]').parent().addClass('active');
                    } else {
                        $('#' + sut.editProcedimiento.tab).addClass('active');
                        $('a[href="#' + sut.editProcedimiento.tab + '"]').parent().addClass('active');
                    }


                    sut.editProcedimiento.Sede.init();
                    sut.editProcedimiento.Nota.init();
                    sut.editProcedimiento.PasoSeguir.init();
                    sut.editProcedimiento.Modalidad.init();
                    sut.editProcedimiento.Requisito.init();
                    sut.editProcedimiento.BaseLegal.init();
                    sut.editProcedimiento.Cargos.init();
                    sut.editProcedimiento.Cargos.initApelacion();


                    if('@Model.revision' == 1)
                    {
                        sut.editProcedimiento.Cargos.initOtros();
                    }


                    $.each($('#tblCanales input[type="checkbox"], #tblFormasPago input[type="checkbox"]'), (i, r) => {
                        var chk = $(r);
                        if(!chk.is(':checked')) {
                            chk.parent().next().next().find('input[type="text"]').attr('disabled', 'disabled').val('');
                        }
                    });

                    $('#tblCanales input[type="checkbox"], #tblFormasPago input[type="checkbox"]').on('change', (e) => {
                        var chk = $(e.target);
                        if(!chk.is(':checked')) {
                            chk.parent().next().next().find('input[type="text"]').attr('disabled', 'disabled').val('');
                        } else {
                            chk.parent().next().next().find('input[type="text"]').removeAttr('disabled');
                        }
                    });

                    $('#tblModalidad').on('change', 'tbody tr td input[name$="EsGratuito"]', null, (e) => {
                        var chk = $(e.target);
                        //var txtPrestaciones = chk.parent().parent().find('input[name$="Prestaciones"]');
                        var txtCostoUnitario = chk.parent().parent().find('input[name$="CostoUnitario"]');
                        if (sut.editProcedimiento.esCargaInicial) {
                            if (chk.is(':checked')) {
                                txtCostoUnitario.val(0).attr('min', 0).attr('disabled', 'disabled');
                            } else {
                                txtCostoUnitario.val(0).attr('min', 1).removeAttr('disabled');
                            }
                        }
                    });

                    $('#form-editar').validate({
                        errorPlacement: function (error, element) {
                            if (element.parent('div.input-group').length > 0) {
                                error.insertAfter(element.parent('div.input-group'));
                            } else {
                                error.insertAfter(element);
                            }
                        },
                        //rules: {
                        //    PlazoAtencion : 'integer',
                        //    PzoReconPresent: 'integer',
                        //    PzoReconResol: 'integer',
                        //    PzoApelPresent: 'integer',
                        //    PzoApelResol: 'integer',
                        //    Correo: 'email',
                        //    Telefono: 'digits',
                        //    Anexo: 'digits'
                        //},
                        messages: {

                        }
                    });
                    var tempValue = $("#PlazoAtencion").val();
                    if (tempValue>30){
                        $("#idplazoantencion").css("display", "block");
                        $("#idplazoantencionObservar").css("display", "block");
                    }else{
                        $("#idplazoantencion").css("display", "none");
                        $("#idplazoantencionObservar").css("display", "none");
                    }



                });

                function reFresh() {

                    window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;
                }


                function observarbotones(NombreCampo) {
                    $('#aAsignarGuardarObservarExp'+NombreCampo+'').css({ "display": "" });
                    $('#aAsignarCancelarObservarExp'+NombreCampo+'').css({ "display": "" });

                    $('#aValidarObservarExp'+NombreCampo+'').css("display","none");
                    $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "none");
                    $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "none" });
                    $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "" });
                }
                function valiarbotones(NombreCampo) {
                    //$('#aValidarObservarExp'+NombreCampo+'').css("display","");
                    $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "");
                    $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "none" });
                    $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "none" });
                }
                function sustentobotones(NombreCampo) {


                    $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "none" });
                    $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "" });
                    $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "" });

                }
                function canceladobotones(NombreCampo) {
                    $('#aAsignarGuardarObservarExp'+NombreCampo+'').css({ "display": "none" });
                    $('#aAsignarCancelarObservarExp'+NombreCampo+'').css({ "display": "none" });
                    //$('#aValidarObservarExp'+NombreCampo+'').css("display","");
                    $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "none");
                    $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "" });
                    $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "none" });
                }


                function observarbotonesModalidad(NombreCampo,num) {
                    $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                    $('#aAsignarCancelarObservarExp' + NombreCampo + num +  '').css({ "display": "" });

                    $('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                    $('#aCancelarGeneralExp' + NombreCampo +  num +'').css("display", "none");
                    $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                    $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });
                }
                function valiarbotonesModalidad(NombreCampo, num) {
                    //$('#aValidarObservarExp' + NombreCampo + num +  '').css("display", "");
                    $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "");
                    $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                    $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "none" });
                }
                function canceladobotonesModalidad(NombreCampo, num) {
                    $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "none" });
                    $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "none" });
                    //$('#aValidarObservarExp' + NombreCampo + num + '').css("display", "");
                    $('#aCancelarGeneralExp' + NombreCampo + num +  '').css("display", "none");
                    $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "" });
                    $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "none" });
                }


                function sustentobotonesModalidad(NombreCampo,num) {


                    $('#aSustentarObservarExp'+NombreCampo+ num +'').css({ "display": "none" });
                    $('#aGuardarSustentarExp'+NombreCampo+ num +'').css({ "display": "" });
                    $('#aCancelarSustentarExp'+NombreCampo+ num +'').css({ "display": "" });

                }


                function canceladobotonessustento(NombreCampo) {
                    $('#aSustentarObservarExp' + NombreCampo + '').css({ "display": "none" });
                }
    </script>
}
