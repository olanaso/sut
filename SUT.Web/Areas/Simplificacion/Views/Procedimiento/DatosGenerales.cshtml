@using Sut.Entities;
@model Sut.Entities.Procedimiento

@{
    Sut.Security.UsuarioInfo user = ViewBag.Usuario as Sut.Security.UsuarioInfo;
    List<Sut.Entities.Observacion> obs = ViewBag.Observacion as List<Sut.Entities.Observacion>;

    Sut.Entities.Expediente exp = ViewBag.Expediente as Sut.Entities.Expediente;
    ViewBag.Icon = "fa fa-file-text-o";
    ViewBag.Title = "Datos Generales - " + Model.CodigoCorto;
    ViewBag.Descripcion = "";
} 

<div id="mensajes">
    @{Html.RenderPartial("_Error");}
</div>


@if (exp.EstadoExpediente == EstadoExpediente.Observado)
{
    <div class="box box-danger">
        <div class="box-body">
            <div class="col-sm-12 col-xs-12" style="border-color:red">
                <div class="pull-left col-sm-12 col-xs-12">
                    <fieldset class="scheduler-border">
                        <legend>
                            Información Complementaria a la Observación
                        </legend>
                        <div class="form-group">
                            @if (obs.Count != 0)
                            {
                                var count = 0;
                                foreach (var item in obs)
                                {
                                    if (@item.NombreCampo == "Nota de Ayuda Datos Generales")
                                    {
                                        <textarea rows="5" disabled class="form-control" id="txtaObservarExp" style="border-color:red;background:#ff00002e;"> @item.Descripcion</textarea>
                                        count = 1;
                                    }
                                }
                                if (count == 0)
                                {
                                    <textarea rows="5" disabled class="form-control" id="txtaObservarExp" style="border-color:red;background:#ff00002e;"></textarea>
                                }
                            }
                            else
                            {<textarea rows="5" disabled class="form-control" id="txtaObservarExp" style="border-color:red;background:#ff00002e;"> </textarea>}
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </div>
}
@using (Html.BeginForm("DatosGenerales", "Procedimiento", new { @area = "Simplificacion" }, FormMethod.Post, new { @id = "form-editar" }))
{
    @Html.HiddenFor(model => model.ProcedimientoId)
    @Html.HiddenFor(model => model.ExpedienteId)
    @Html.HiddenFor(model => model.Codigo)
    @Html.HiddenFor(model => model.Operacion)
    @Html.HiddenFor(model => model.TipoProcedimiento)
    @Html.HiddenFor(model => model.CategoriaProcedimientoId)
    @Html.HiddenFor(model => model.TipoProcedimientoId)
    @Html.HiddenFor(model => model.CodigoCorto)
    @Html.HiddenFor(model => model.FlagCopiarProcedimiento)
    @Html.HiddenFor(model => model.CodigoACR)
    @Html.HiddenFor(model => model.BaseLegalTexto)

    @Html.HiddenFor(model => model.PlazoAtencionEstandar)
    @Html.HiddenFor(model => model.SustentoEliminacion)
    @Html.HiddenFor(model => model.SustTecCalificacion)
    @Html.HiddenFor(model => model.Numero)
    @Html.HiddenFor(model => model.EditableG)
    @Html.HiddenFor(model => model.EditableN)
    @Html.HiddenFor(model => model.SustentoPlazo)
    @Html.HiddenFor(model => model.Activar)
    @Html.HiddenFor(model => model.InfCdnoTerminado)
    @*@Html.HiddenFor(model => model.Calificacion)*@
    @Html.HiddenFor(model => model.sinnotas)
    @Html.HiddenFor(model => model.reclamacion)
    @Html.HiddenFor(model => model.revision)
    @Html.HiddenFor(model => model.Calificaciones)

    @Html.HiddenFor(model => model.DatosGeneralesTerminado)

    @Html.HiddenFor(model => model.SustTecnicoTerminado)
    @Html.HiddenFor(model => model.TablaAsmeTerminado)

    @Html.HiddenFor(model => model.ObsDG)
    @Html.HiddenFor(model => model.ObsDGH)
    @Html.HiddenFor(model => model.ObsSTL)
    @Html.HiddenFor(model => model.ObsSTLH)
    @Html.HiddenFor(model => model.ObsASME)
    @Html.HiddenFor(model => model.ObsASMEH)
    @Html.HiddenFor(model => model.Estadodatos)
    @Html.HiddenFor(model => model.EstadoInfo)
    @Html.HiddenFor(model => model.Estadostl)
    @Html.HiddenFor(model => model.Estadotablaasme)

    @Html.HiddenFor(model => model.EstadodatosEva)
    @Html.HiddenFor(model => model.EstadoInfoEva)
    @Html.HiddenFor(model => model.EstadostlEva)
    @Html.HiddenFor(model => model.EstadotablaasmeEva)

    <div class="box box-danger">
        <div class="box-body form-horizontal">

            @if (exp.EstadoExpediente == EstadoExpediente.Observado)
            {

                if (obs.Count != 0)
                {
                    var cont = 0;
                    var texto1 = "";
                    /*Inicio*/
                    <div class="form-group">
                        <label class="col-sm-2 col-xs-12 control-label"></label>
                        <div class="col-sm-10 col-xs-12">

                            <a class="btn btn-warning btn-xs" id="aSustentarObservarExpDenominacion" data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExp('DenominacionSustento','divDenominacion','divDenominacionsustento','Denominacion','Descripción :',10);"><i class="fa fa-pencil-square-o"></i></a>
                            @*/*botones unicos sustentar*/*@
                            <a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpDenominacion" data-placement="right" title="Guardar Sustento" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'DenominacionSustento','Denominacion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                            <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpDenominacion" data-placement="right" title="Quitar Sustento" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'DenominacionSustento','Denominacion','Datos Generales','divDenominacionsustento');"><i class="fa fa-power-off"></i></a>
                            @*/*botones Generados*/*@

                            <label id="mensajeDenominacion" class="label-primary label" style="font-size: 100%; font-weight: normal;"></label>

                            @foreach (var item in obs)
                            {
                                if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Denominacion")
                                {
                                    cont = 1;

                                    if (@item.CodValidacion == "1")
                                    {
                                        texto1 = @item.Descripcion.ToString().Trim();
                                    }
                                    else if (@item.CodValidacion == "4")
                                    {
                                        <script>
                                            window.addEventListener("load", function () {

                                                valiarbotones('Denominacion');
                                                document.querySelector('#mensajeDenominacion').innerText = 'Se valido con éxito';
                                            });
                                        </script>
                                    }
                                    else if (@item.CodValidacion == "2")
                                    {
                                        <script>

                                                            window.addEventListener("load", function() {
                                                                //observarbotones('Denominacion');
                                                                //document.querySelector('#mensajeDenominacion').innerText = 'Observado';
                                                                sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divDenominacion','divDenominaciondetalle','Descripción :','Denominacion1','Denominacion2',10,"@exp.EstadoExpediente",'Denominacion');

                                                            });
                                        </script>
                                    }
                                    else if (@item.CodValidacion == "5")
                                    {
                                        <script>
                                            window.addEventListener("load", function () {
                                                canceladobotones('Denominacion');
                                            });
                                        </script>
                                    }
                                    else if (@item.CodValidacion == "3")
                                    {
                                        <script>

                                                            window.addEventListener("load", function() {

                                                                document.querySelector('#mensajeDenominacion').innerText = 'Se refuto con éxito';
                                                                sustentobotones('Denominacion');
                                                                sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divDenominacion','divDenominacionsustento','Descripción :','DenominacionSustento',10);
                                                            });
                                        </script>
                                    }

                                }
                            }
                            @if (cont == 0)
                            {
                                <script>
                                    window.addEventListener("load", function () {
                                        canceladobotonessustento('Denominacion');
                                    });
                                </script>
                            }


                        </div>
                    </div>
                    <div id="divDenominacion" class="form-group">
                    </div>
                }
                /*Fin*/
            }
             

            <div class="form-group">
                <label class="col-sm-2 col-xs-12 control-label" for="Denominacion">Denominación :</label>
                <div class="col-sm-10 col-xs-12">
                    @if (!ViewBag.EsTupaEstandar && (Model.TipoProcedimiento != TipoProcedimiento.Estandar && Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio))
                    {
                        if (Model.CodigoACR == "0")
                        {
                            @Html.TextBoxFor(model => model.Denominacion, new { @class = "form-control" })
                            @Html.TextBoxFor(model => model.DenominacionAnterior, new { @class = "form-control", @readonly = true })
                        }
                        else
                        {

                            @Html.TextBoxFor(model => model.Denominacion, new { @class = "form-control", @readonly = true })
                            @Html.TextBoxFor(model => model.DenominacionAnterior, new { @class = "form-control", @readonly = true })
                        }

                    }
                    else if (ViewBag.EsTupaEstandar && (Model.TipoProcedimiento == TipoProcedimiento.Estandar || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio))
                    {
                        @Html.TextBoxFor(model => model.Denominacion, new { @class = "form-control" })
                        @Html.TextBoxFor(model => model.DenominacionAnterior, new { @class = "form-control", @readonly = true })
                    }
                    else
                    {
                        @Html.TextBoxFor(model => model.Denominacion, new { @class = "form-control", @readonly = true })
                        @Html.TextBoxFor(model => model.DenominacionAnterior, new { @class = "form-control", @readonly = true })
                    }
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 col-xs-12 control-label">Tipo :</label>
                <div class="col-sm-10 col-xs-12">
                    @Html.TipoProcedimiento(Model.TipoProcedimiento)
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 col-xs-12 control-label">Dependencia a Cargo :</label>
                @if (Model.CodigoACR != "0")
                {
                    <div class="col-sm-9 col-xs-12">
                        @Html.HiddenFor(model => model.UndOrgResponsableId)
                        <div>
                            @if (ViewBag.EsTupaEstandar && Model.TipoProcedimiento == TipoProcedimiento.Estandar)
                            {
                                @Html.TextBoxFor(model => model.UndOrgResponsable.Nombre, new { @class = "form-control", @readonly = "readonly" })

                            }
                            else
                            { @Html.TextBoxFor(model => model.UndOrgResponsable.Nombre, new { @class = "form-control", @readonly = "readonly", Required = true })}

                            @*<div class="input-group-btn">
                            <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgResp')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                        </div>*@
                        </div>
                    </div>
                    <a class="btn btn-facebook btn-xs" data-toggle="tooltip" data-placement="right" title="Más Información" href="javascript:sut.editProcedimiento.detalleDes(@Model.ProcedimientoId,2)"><i class="fa fa-bars"></i></a>

                }
                else
                {
                    <div class="col-sm-10 col-xs-12">
                        @Html.HiddenFor(model => model.UndOrgResponsableId)
                        <div>
                            @if (ViewBag.EsTupaEstandar && (Model.TipoProcedimiento == TipoProcedimiento.Estandar || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio))
                            {
                                @Html.TextBoxFor(model => model.UndOrgResponsable.Nombre, new { @class = "form-control", @readonly = "readonly" })

                            }
                            else
                            { @Html.TextBoxFor(model => model.UndOrgResponsable.Nombre, new { @class = "form-control", @readonly = "readonly", Required = true })}

                            @*<div class="input-group-btn">
                            <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgResp')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                        </div>*@
                        </div>
                    </div>
                }

            </div>
            @if (@Model.CargoPordependencia != "")
            {
                <div class="form-group">
                    <label class="col-sm-2 col-xs-12 control-label">Otras Dependecias a Cargo :</label>
                    <div class="col-sm-10 col-xs-12">
                        <div>


                            @Html.TextAreaFor(model => model.CargoPordependencia, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @readonly = "readonly", Required = true })

                        </div>
                    </div>
                </div>
            }
        </div>
    </div>

    @*<div class="menu-compensador" style="display:none"></div>
        <div class="menu-movil">
            <div id="divBotones" class="box box-solid fijo">
                <div class="box-body">
                    <div class="btn-group pull-right">
                        <a href="javascript:sut.editProcedimiento.salir('/Simplificacion/Expediente/Editar/@Model.ExpedienteId')" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>
                        <a href="javascript:sut.editProcedimiento.camposNoRequerido()" class="btn btn-primary"><i class="fa fa-save"></i> Guardar</a>
                        @if (ViewBag.User.Rol == (short)Rol.Coordinador || ViewBag.User.Rol == (short)Rol.Administrador)
                        {
                            <a href="javascript:sut.editProcedimiento.terminar()" class="btn btn-success"><i class="fa fa-check"></i> Terminar</a>
                        }
                    </div>
                </div>
            </div>
        </div>*@





    <div class="box box-default">
        <div class="box-body">
            <div class="nav-tabs-custom">
                <ul class="nav nav-tabs">
                    <li>
                        <a class="tabdata" id="tab1" href="#edit-info-basica" data-toggle="tab" aria-expanded="false" style="border-radius: 10px;"><i class="fa fa-file"></i> Información Básica</a>
                    </li>
                    <li>
                        <a class="tabdata" id="tab2" href="#edit-modalidades" data-toggle="tab" aria-expanded="false" style="border-radius: 10px;"><i class="fa fa-table"></i> Modalidad de Atención</a>
                    </li>
                    <li>
                        <a class="tabdata" id="tab3" href="#edit-requisitos" data-toggle="tab" aria-expanded="false" style="border-radius: 10px;"><i class="fa fa-copy"></i> Requisitos</a>
                    </li>
                    <li>
                        <a  class="tabdata" id="tab4" href="#edit-base-legal" data-toggle="tab" aria-expanded="false" style="border-radius: 10px;"><i class="fa fa-legal"></i> Base Legal del PA/SE</a>
                    </li>
                </ul>
                <div class="tab-content ">
                    <div id="edit-info-basica" class="tab-pane">
                        <div class="form-horizontal">
                            @if (exp.EstadoExpediente == EstadoExpediente.Observado)
                            {

                                if (obs.Count != 0)
                                {
                                    var cont = 0;
                                    var texto1 = "";
                                    /*Inicio*/
                                    <div class="form-group">
                                        <label class="col-sm-2 col-xs-12 control-label"></label>
                                        <div class="col-sm-10 col-xs-12">

                                            <a class="btn btn-warning btn-xs" id="aSustentarObservarExpObjetivo" data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExp('ObjetivoSustento','divobjeto','divobjetosustento','Objetivo','Descripción :',10);"><i class="fa fa-pencil-square-o"></i></a>
                                            @*/*botones unicos sustentar*/*@
                                            <a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpObjetivo" data-placement="right" title="Guardar Sustento" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'ObjetivoSustento','Objetivo','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                            <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpObjetivo" data-placement="right" title="Quitar Sustento" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'ObjetivoSustento','Objetivo','Datos Generales','divobjetosustento');"><i class="fa fa-power-off"></i></a>
                                            @*/*botones Generados*/*@

                                            <label id="mensajeObjetivo" class="label-primary label" style="font-size: 100%; font-weight: normal;"></label>

                                            @foreach (var item in obs)
                                            {
                                                if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Objetivo")
                                                {
                                                    cont = 1;

                                                    if (@item.CodValidacion == "1")
                                                    {
                                                        texto1 = @item.Descripcion.ToString().Trim();
                                                    }
                                                    else if (@item.CodValidacion == "4")
                                                    {
                                                        <script>
                                                            window.addEventListener("load", function () {

                                                                valiarbotones('Objetivo');
                                                                document.querySelector('#mensajeObjetivo').innerText = 'Se valido con éxito';
                                                            });
                                                        </script>
                                                    }
                                                    else if (@item.CodValidacion == "2")
                                                    {
                                                        <script>

                                                            window.addEventListener("load", function() {
                                                                //observarbotones('Objetivo');
                                                                //document.querySelector('#mensajeObjetivo').innerText = 'Observado';
                                                                sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divobjeto','divobjetodetalle','Descripción :','Objetivo1','Objetivo2',10,"@exp.EstadoExpediente",'Objetivo');

                                                            });
                                                        </script>
                                                    }
                                                    else if (@item.CodValidacion == "5")
                                                    {
                                                        <script>
                                                            window.addEventListener("load", function () {
                                                                canceladobotones('Objetivo');
                                                            });
                                                        </script>
                                                    }
                                                    else if (@item.CodValidacion == "3")
                                                    {
                                                        <script>

                                                            window.addEventListener("load", function() {

                                                                document.querySelector('#mensajeObjetivo').innerText = 'Se refuto con éxito';
                                                                sustentobotones('Objetivo');
                                                                sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divobjeto','divobjetosustento','Descripción :','ObjetivoSustento',10);
                                                            });
                                                        </script>
                                                    }

                                                }
                                            }
                                            @if (cont == 0)
                                            {
                                                <script>
                                                    window.addEventListener("load", function () {
                                                        canceladobotonessustento('Objetivo');
                                                    });
                                                </script>
                                            }


                                        </div>
                                    </div>
                                    <div id="divobjeto" class="form-group">
                                    </div>
                                }
                                /*Fin*/
                            }
                            <div class="form-group">
                                <label class="col-sm-2 col-xs-12 control-label" for="Objetivo">Descripción :</label>
                                @if (Model.CodigoACR != "0")
                                {
                                    <div class="col-sm-9 col-xs-12">

                                        @if (!ViewBag.EsTupaEstandar && Model.TipoProcedimiento != TipoProcedimiento.Estandar)
                                        {
                                            @Html.TextAreaFor(model => model.Objetivo, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @placeholder = "Hacer una breve descripción del procedimiento, objetivo, especificar quienes pueden solicitarlo, por qué deben obtenerlo, cual es el entregable y si se encuentra sujeto a renovación" })
                                        }
                                        else if (ViewBag.EsTupaEstandar && Model.TipoProcedimiento == TipoProcedimiento.Estandar)
                                        {
                                            @Html.TextAreaFor(model => model.Objetivo, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @placeholder = "Hacer una breve descripción del procedimiento, objetivo, especificar quienes pueden solicitarlo, por qué deben obtenerlo, cual es el entregable y si se encuentra sujeto a renovación" })
                                        }
                                        else
                                        {
                                            @Html.TextAreaFor(model => model.Objetivo, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @readonly = true })
                                        }
                                    </div>
                                    <a class="btn btn-facebook btn-xs" data-toggle="tooltip" data-placement="right" title="Más Información" href="javascript:sut.editProcedimiento.detalleDes(@Model.ProcedimientoId,1)"><i class="fa fa-bars"></i></a>
                                }
                                else
                                {

	                            <div class="col-sm-10 col-xs-12">
	
	                                @if (ViewBag.EsTupaEstandar== true )
	                                {
	                                    @Html.TextAreaFor(model => model.Objetivo, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @placeholder = "Hacer una breve descripción del procedimiento, objetivo, especificar quienes pueden solicitarlo, por qué deben obtenerlo, cual es el entregable y si se encuentra sujeto a renovación" })
	                                }
	                                else if (Model.TipoProcedimiento == TipoProcedimiento.Estandar || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio)
	                                {
	                                    @Html.TextAreaFor(model => model.Objetivo, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @placeholder = "Hacer una breve descripción del procedimiento, objetivo, especificar quienes pueden solicitarlo, por qué deben obtenerlo, cual es el entregable y si se encuentra sujeto a renovación", @readonly = true })
	                                }
	                                else if (!ViewBag.EsTupaEstandar && (Model.TipoProcedimiento != TipoProcedimiento.Estandar || Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio))
	                                {
	                                    @Html.TextAreaFor(model => model.Objetivo, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @placeholder = "Hacer una breve descripción del procedimiento, objetivo, especificar quienes pueden solicitarlo, por qué deben obtenerlo, cual es el entregable y si se encuentra sujeto a renovación", Required = true })
	                                }
	                                else
	                                {
	                                    @Html.TextAreaFor(model => model.Objetivo, new { @style = "scroll-behavior: smooth;resize:vertical;", @class = "form-control", @readonly = true })
	                                }
	                            </div>
                                }

                            </div>
                            @if (Model.TipoProcedimiento != TipoProcedimiento.Servicio || Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)
                            {

                                if (exp.EstadoExpediente == EstadoExpediente.Observado)
                                {
                                    @*/*Inicio Calificacion*/*@
                                    <div class="form-group">
                                        <label class="col-sm-2 col-xs-12 control-label"></label>
                                        <div class="col-sm-10 col-xs-12">


                                            <a class="btn btn-warning btn-xs" id="aSustentarObservarExpCalificacion" data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExp('CalificacionSustento','divCalificacion','divCalificacionSustento','Calificacion','Calificación :',4);"><i class="fa fa-pencil-square-o"></i></a>

                                            @*/*botones unicos sustentar*/*@
                                            <a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpCalificacion" data-placement="right" title="Guardar Sustento" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'CalificacionSustento','Calificacion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                            <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpCalificacion" data-placement="right" title="Quitar Sustento" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'CalificacionSustento','Calificacion','Datos Generales','divCalificacionSustento');"><i class="fa fa-power-off"></i></a>
                                            @*/*botones Generados*/*@

                                            <label id="mensajeCalificacion" class="label-primary label" style="font-size: 100%;font-weight: normal;"></label>

                                            @if (obs.Count != 0)
                                            {


                                                var cont = 0;
                                                var texto1 = "";
                                                foreach (var item in obs)
                                                {
                                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Calificacion")
                                                    {
                                                        cont = 1;

                                                        if (@item.CodValidacion == "1")
                                                        {

                                                            texto1 = @item.Descripcion;
                                                        }
                                                        else

                                                        if (@item.CodValidacion == "4")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    valiarbotones('Calificacion');
                                                                    document.querySelector('#mensajeCalificacion').innerText = 'Se valido con éxito';
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "2")
                                                        {
                                                            <script>

                                                            window.addEventListener("load", function() {
                                                                //observarbotones('Calificacion');

                                                                //document.querySelector('#mensajeCalificacion').innerText = 'Observado';
                                                                sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divCalificacion','divCalificaciondetalle','Calificación :','Calificacion1','Calificacion2',4, "@exp.EstadoExpediente",'NombreCalificacion');
                                                            });
                                                            </script>
                                                        }

                                                        else if (@item.CodValidacion == "5")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    canceladobotones('Calificacion');
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "3")
                                                        {
                                                            <script>

                                                            window.addEventListener("load", function() {
                                                                sustentobotones('Calificacion');
                                                                document.querySelector('#mensajeCalificacion').innerText = 'Se refuto con éxito';
                                                                sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divCalificacion','divCalificacionSustento','Calificación :','CalificacionSustento',4);
                                                            });
                                                            </script>
                                                        }
                                                    }
                                                }
                                                if (cont == 0)
                                                {
                                                    <script>
                                                        window.addEventListener("load", function () {
                                                            canceladobotonessustento('Calificacion');
                                                        });
                                                    </script>
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div id="divCalificacion" class="form-group">
                                    </div>
                                    @*/*Fin*/*@
                                }
                                <div class="form-group">
                                    @if (Model.TipoProcedimiento == TipoProcedimiento.Servicio || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio)
                                    {
                                        <div class="col-sm-6">@Html.HiddenFor(model => model.Calificacion) </div>

                                    }
                                    else
                                    {
                                        <label class="col-sm-2 col-xs-12 control-label">Calificación :</label>
                                        <div class="col-sm-4 col-xs-12">
                                            @if (!ViewBag.EsTupaEstandar && Model.TipoProcedimiento != TipoProcedimiento.Estandar)
                                            {
                                                if (Model.CodigoACR != "0")
                                                {
                                                    @*@Html.DropDownListFor(model => model.Calificacion, ViewBag.Calificacion as List<SelectListItem>, new { @class = "form-control ", @readonly = true })*@

                                                    <div>
                                                        @Html.HiddenFor(model => model.Calificacion)
                                                        @{
                                                            string calificacion = string.Empty;
                                                            List<SelectListItem> lstCalificacion = ViewBag.Calificacion as List<SelectListItem>;
                                                            calificacion = lstCalificacion.First(x => x.Value == ((short)Model.Calificacion).ToString()).Text;
                                                        }
                                                        @Html.TextBox("NombreCalificacion", calificacion, new { @class = "form-control", @readonly = true })
                                                    </div>
                                                }
                                                else
                                                {
                                                    @Html.DropDownListFor(model => model.Calificacion, ViewBag.Calificacion as List<SelectListItem>, new { @class = "form-control " })
                                                }


                                            }
                                            else if (ViewBag.EsTupaEstandar && Model.TipoProcedimiento == TipoProcedimiento.Estandar)
                                            {
                                                @Html.DropDownListFor(model => model.Calificacion, ViewBag.Calificacion as List<SelectListItem>, new { @class = "form-control " })
                                            }

                                            else if (Model.TipoProcedimiento == TipoProcedimiento.Estandar || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio)
                                            {
                                                <div>
                                                    @Html.HiddenFor(model => model.Calificacion)
                                                    @{
                                                        string calificacion = string.Empty;
                                                        List<SelectListItem> lstCalificacion = ViewBag.Calificacion as List<SelectListItem>;
                                                        calificacion = lstCalificacion.First(x => x.Value == ((short)Model.Calificacion).ToString()).Text;
                                                    }
                                                    @Html.TextBox("NombreCalificacion", calificacion, new { @class = "form-control", @readonly = true })
                                                </div>
                                            }
                                            else
                                            {




                                                @Html.DropDownListFor(model => model.Calificacion, ViewBag.Calificacion as List<SelectListItem>, new { @class = "form-control ", @readonly = true })
                                            }
                                        </div>
                                    }

                                </div>

                            }
                            <div class="form-group">

                                @*/*Inicio PlazoAtencion*/*@
                                @if (exp.EstadoExpediente == EstadoExpediente.Observado)
                                {
                                    <div class="form-group">
                                        <label class="col-sm-2 col-xs-12 control-label"></label>
                                        <div class="col-sm-10 col-xs-12">

                                            <a class="btn btn-warning btn-xs" id="aSustentarObservarExpPlazoAtencion" data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExp('PlazoAtencionSustento','divPlazoAtencion','divPlazoAtencionSustento','PlazoAtencion','Plazo de Atención :',4);"><i class="fa fa-pencil-square-o"></i></a>

                                            @*/*botones unicos sustentar*/*@
                                            <a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpPlazoAtencion" data-placement="right" title="Guardar Sustento" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'PlazoAtencionSustento','PlazoAtencion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                            <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpPlazoAtencion" data-placement="right" title="Quitar Sustento" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'PlazoAtencionSustento','PlazoAtencion','Datos Generales','divPlazoAtencionSustento');"><i class="fa fa-power-off"></i></a>
                                            @*/*botones Generados*/*@

                                            <label id="mensajePlazoAtencion" class="label-primary label" style="font-size: 100%;font-weight: normal;"></label>

                                            @if (obs.Count != 0)
                                            {
                                                var cont = 0;
                                                var texto1 = "";
                                                foreach (var item in obs)
                                                {
                                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "PlazoAtencion")
                                                    {
                                                        cont = 1;

                                                        if (@item.CodValidacion == "1")
                                                        {

                                                            texto1 = @item.Descripcion;
                                                        }
                                                        else

                                                        if (@item.CodValidacion == "4")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    valiarbotones('PlazoAtencion');
                                                                    document.querySelector('#mensajePlazoAtencion').innerText = 'Se valido con éxito';
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "2")
                                                        {

                                                            <script>
                                                                window.addEventListener("load", function() {
                                                                    //observarbotones('PlazoAtencion');
                                                                    //document.querySelector('#mensajePlazoAtencion').innerText = 'Observado';
                                                                    sut.editProcedimiento.textoobservacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divPlazoAtencion','divPlazoAtenciondetalle','Plazo de Atención :','PlazoAtencion1','PlazoAtencion2',4, "@exp.EstadoExpediente",'PlazoAtencion');
                                                                });
                                                            </script>
                                                        }

                                                        else if (@item.CodValidacion == "5")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    canceladobotones('PlazoAtencion');
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "3")
                                                        {
                                                            <script>

                                                                window.addEventListener("load", function() {
                                                                    sustentobotones('PlazoAtencion');
                                                                    document.querySelector('#mensajePlazoAtencion').innerText = 'Se refuto con éxito';
                                                                    sut.editProcedimiento.textosustento("@item.Descripcion.Replace("\n", " ")",'divPlazoAtencion','divPlazoAtencionSustento','Plazo de Atención :','PlazoAtencionSustento',4);
                                                                });
                                                            </script>
                                                        }
                                                    }
                                                }
                                                if (cont == 0)
                                                {
                                                    <script>
                                                        window.addEventListener("load", function () {
                                                            canceladobotonessustento('PlazoAtencion');
                                                        });
                                                    </script>
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div id="divPlazoAtencion" class="form-group">
                                    </div>
                                    @*/*Fin*/*@
                                }


                                <label class="col-sm-2 col-xs-12 control-label" for="PlazoAtencion">Plazo de Atención :</label>

                                <div>
                                    @if (Model.Activar == 1 || Model.listplazoatencion.Count() > 0)
                                    {
                                        <div class="col-sm-2 col-xs-1">
                                            @Html.TextBoxFor(model => model.PlazoAtencionDes, new { @class = "form-control", @norequired = true, Required = true, @placeholder = "Colocar descripción" })
                                        </div>
                                        <div class="col-sm-1 col-xs-1">
                                            @if (!ViewBag.EsTupaEstandar && Model.TipoProcedimiento != TipoProcedimiento.Estandar)
                                            {
                                                if (exp.TipoExpediente == TipoExpediente.CargaInicial)
                                                {
                                                    @Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control",   min = 0, @norequired = true, Required = true })
                                                }
                                                else
                                                {
                                                    @Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control",   min = 0, @norequired = true, @onkeypress = "javascript:sut.editProcedimiento.visualizarSustento(event,this);", Required = true })
                                                }

                                            }
                                            else if (ViewBag.EsTupaEstandar && Model.TipoProcedimiento == TipoProcedimiento.Estandar)
                                            {


                                                if (user.Rol == (short)Rol.Administrador)
                                                { @Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control",   min = 0, @norequired = true })
                                            }
                                            else
                                            {
                                                @Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control",  min = 0, @norequired = true, @onkeypress = "javascript:sut.editProcedimiento.visualizarSustentovisualiar(event,this);", Required = true })
                                            }

                                        }
                                        else
                                        {
                                            @*@Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control", @type = "number", min = 0, @readonly = true, @onkeypress = " javascript:sut.editProcedimiento.visualizarSustento(event,this);" })*@
                                            @Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control",   min = 0, @onkeypress = " javascript:sut.editProcedimiento.visualizarSustento(event,this);", Required = true })

                                        }
                                        </div>
                                    }
                                    else
                                    {
                                <div class="col-sm-3 col-xs-1" style="width: 24.4%;">
                                    @if (!ViewBag.EsTupaEstandar && (Model.TipoProcedimiento != TipoProcedimiento.Estandar || Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio))
                                    {
                                        if (exp.TipoExpediente == TipoExpediente.CargaInicial)
                                        {
                                            @Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control", min = 0, @norequired = true, Required = true })
                                        }
                                        else
                                        {
                                            @Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control", min = 0, @norequired = true, @onkeypress = "javascript:sut.editProcedimiento.visualizarSustento(event,this);", Required = true })
                                        }

                                    }
                                    else if (ViewBag.EsTupaEstandar && (Model.TipoProcedimiento == TipoProcedimiento.Estandar || Model.TipoProcedimiento == TipoProcedimiento.Estandar))
                                    {


                                        if (user.Rol == (short)Rol.Administrador)
                                        { @Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control", min = 0, @norequired = true })
                                    }
                                    else
                                    {
                                        @Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control", min = 0, @norequired = true, @onkeypress = "javascript:sut.editProcedimiento.visualizarSustentovisualiar(event,this);", Required = true })
                                    }

                                }
                                else if (ViewBag.EsTupaEstandar==true)
                                {

                                              @Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control", min = 0, Required = true })

                                }

                                else
                                {
                                    @*@Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control", @type = "number", min = 0, @readonly = true, @onkeypress = " javascript:sut.editProcedimiento.visualizarSustento(event,this);" })*@
                                    @Html.TextBoxFor(model => model.PlazoAtencion, new { @class = "form-control", min = 0, @onkeypress = " javascript:sut.editProcedimiento.visualizarSustento(event,this);", Required = true })

                                }
                                </div>
                                    }
                                <div class="col-sm-1 col-xs-1" style="width: 24.7%;">




                                    @if (ViewBag.EsTupaEstandar == true)
                                    {
                                         @Html.DropDownListFor(model => model.TipoPlazo, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control", style = "width: 32%" })
                                        }

                                        else if (Model.TipoProcedimiento == TipoProcedimiento.Estandar || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio)
                                        {
                                        <div>
                                            @Html.HiddenFor(model => model.TipoPlazo)
                                            @{
                                                string tipoplazo = string.Empty;
                                                List<SelectListItem> lsttipoplazo = ViewBag.tipoplazo as List<SelectListItem>;
                                                tipoplazo = lsttipoplazo.First(x => x.Value == ((short)Model.TipoPlazo).ToString()).Text;
                                            }
                                            @Html.TextBox("NombreCTipoPlazo", tipoplazo, new { @class = "form-control", @readonly = true, style = "width: 32%" })
                                        </div>
                                    }
                                    else
                                    {


                                        @Html.DropDownListFor(model => model.TipoPlazo, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control", style = "width: 32%" })
                                    }

                                </div>
                                </div>
                                @*<div id="idplazoantencion">
                                        @if (exp.EstadoExpediente == EstadoExpediente.Observado)
                                        {

                                            <div class="form-group">
                                                <label class="col-sm-2 col-xs-12 control-label"></label>
                                                <div class="col-sm-10 col-xs-12">
                                                    <label class="col-sm-2 col-xs-12 control-label"></label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <a class="btn btn-warning btn-xs" id="aSustentarObservarExpBaselegal" data-toggle="tooltip" data-placement="right" title="Sustentar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExp('BaselegalSustento','divBaselegal','divBaselegalSustento','Baselegal','Base legal del Plazo de Atención:',4);"><i class="fa fa-pencil-square-o"></i></a>


                                                    <a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpBaselegal" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'BaselegalSustento','Baselegal','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                                    <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpBaselegal" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'BaselegalSustento','Baselegal','Datos Generales','divBaselegalSustento');"><i class="fa fa-power-off"></i></a>


                                                    <label id="mensajeBaselegal" class="label-primary label"></label>

                                                    @if (obs.Count != 0)
                                                    {
                                                        var cont = 0;
                                                        var texto1 = "";
                                                        foreach (var item in obs)
                                                        {
                                                            if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Baselegal")
                                                            {
                                                                cont = 1;

                                                                if (@item.CodValidacion == "1")
                                                                {

                                                                    texto1 = @item.Descripcion;
                                                                }
                                                                else

                                                                if (@item.CodValidacion == "4")
                                                                {
                                                                    <script>
                                                                        window.addEventListener("load", function () {
                                                                            valiarbotones('Baselegal');
                                                                            document.querySelector('#mensajeBaselegal').innerText = 'Se valido con éxito';
                                                                        });
                                                                    </script>
                                                                }
                                                                else if (@item.CodValidacion == "2")
                                                                {

                                                                    <script>


                                                                        window.addEventListener("load", function() {
                                                                            observarbotones('Baselegal');

                                                                            document.querySelector('#mensajeBaselegal').innerText = 'Observado';
                                                                            sut.editProcedimiento.textoobservacion("@texto1","@item.Descripcion",'divBaselegal','divBaselegaldetalle','Base legal del Plazo de Atención:','Baselegal1','Baselegal2',4, "@exp.EstadoExpediente",'SustentoPlazo');
                                                                        });
                                                                    </script>
                                                                }

                                                                else if (@item.CodValidacion == "5")
                                                                {
                                                                    <script>
                                                                        window.addEventListener("load", function () {
                                                                            canceladobotones('Baselegal');
                                                                        });
                                                                    </script>
                                                                }
                                                                else if (@item.CodValidacion == "3")
                                                                {
                                                                    <script>

                                                                        window.addEventListener("load", function() {
                                                                            sustentobotones('Baselegal');
                                                                            document.querySelector('#mensajeBaselegal').innerText = 'Se refuto con éxito';
                                                                            sut.editProcedimiento.textosustento("@item.Descripcion",'divBaselegal','divBaselegalSustento','Base legal del Plazo de Atención:','BaselegalSustento',4);
                                                                        });
                                                                    </script>
                                                                }
                                                            }

                                                        }
                                                        if (cont == 0)
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    canceladobotonessustento('Baselegal');
                                                                });
                                                            </script>
                                                        }
                                                    }

                                                </div>
                                            </div>
                                            <div id="divBaselegal" class="form-group">
                                            </div>

                                        }

                                        <label class="col-sm-2 col-xs-12 control-label" for="PlazoAtencion">Base legal del Plazo de Atención:</label>
                                        <div class="col-sm-4 col-xs-12">
                                            <div class="input-group">
                                                @Html.TextAreaFor(model => model.SustentoPlazo, new { @class = "form-control" })
                                                <div class="input-group-addon">

                                                </div>
                                            </div>

                                        </div>
                                    </div>*@

                                @*@if (exp.EstadoExpediente == EstadoExpediente.Observado)
                                    {*@
                                @*/*Inicio Renovacion*/*@
                                @*<div class="form-group">
                                    <label class="col-sm-2 col-xs-12 control-label"></label>
                                    <div class="col-sm-10 col-xs-12">
                                        <label class="col-sm-2 col-xs-12 control-label"></label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        <a class="btn btn-warning btn-xs" id="aSustentarObservarExpRenovacion" data-toggle="tooltip" data-placement="right" title="Sustentar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExp('RenovacionSustento','divRenovacion','divRenovacionSustento','Renovacion','Renovacion :',4);"><i class="fa fa-pencil-square-o"></i></a>*@

                                @*/*botones unicos sustentar*/*@
                                @*<a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpRenovacion" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'RenovacionSustento','Renovacion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                    <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpRenovacion" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'RenovacionSustento','Renovacion','Datos Generales','divRenovacionSustento');"><i class="fa fa-power-off"></i></a>*@
                                @*/*botones Generados*/*@

                                @*<label id="mensajeRenovacion" class="label-primary label"></label>

                                            @if (obs.Count != 0)
                                            {
                                                var cont = 0;
                                                var texto1 = "";
                                                foreach (var item in obs)
                                                {
                                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Renovacion")
                                                    {
                                                        cont = 1;

                                                        if (@item.CodValidacion == "1")
                                                        {

                                                            texto1 = @item.Descripcion;
                                                        }
                                                        else

                                                        if (@item.CodValidacion == "4")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    valiarbotones('Renovacion');
                                                                    document.querySelector('#mensajeRenovacion').innerText = 'Se valido con éxito';
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "2")
                                                        {

                                                            <script>


                                                        window.addEventListener("load", function() {
                                                            observarbotones('Renovacion');

                                                            document.querySelector('#mensajeRenovacion').innerText = 'Observado';
                                                            sut.editProcedimiento.textoobservacion("@texto1","@item.Descripcion",'divRenovacion','divRenovaciondetalle','Renovacion :','Renovacion1','Renovacion2',4, "@exp.EstadoExpediente",'Renovacion');
                                                        });
                                                            </script>
                                                        }

                                                        else if (@item.CodValidacion == "5")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    canceladobotones('Renovacion');
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "3")
                                                        {
                                                            <script>

                                                        window.addEventListener("load", function() {
                                                            sustentobotones('Renovacion');
                                                            document.querySelector('#mensajeRenovacion').innerText = 'Se refuto con éxito';
                                                            sut.editProcedimiento.textosustento("@item.Descripcion",'divRenovacion','divRenovacionSustento','Renovacion :','RenovacionSustento',4);
                                                        });
                                                            </script>
                                                        }
                                                    }
                                                }
                                                if (cont == 0)
                                                {
                                                    <script>
                                                        window.addEventListener("load", function () {
                                                            canceladobotonessustento('Renovacion');
                                                        });
                                                    </script>
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div id="divRenovacion" class="form-group">
                                    </div>*@
                                @*/*Fin*/*@
                                @*}*@

                                @*<label class="col-sm-2 col-xs-12 control-label">Renovacion :</label>
                                    <div class="col-sm-4 col-xs-12">
                                        @if (!ViewBag.EsTupaEstandar && Model.TipoProcedimiento != TipoProcedimiento.Estandar)
                                        {
                                            if (Model.CodigoACR != "0")
                                            {
                                                @Html.DropDownListFor(Model => Model.Renovacio, ViewBag.renovacion as List<SelectListItem>, new { @class = "form-control ", @onchange = "javascript:sut.editProcedimiento.visualizarFecharenovacion(event,this);", @readonly = true })
                                            }
                                            else
                                            {
                                                @Html.DropDownListFor(Model => Model.Renovacio, ViewBag.renovacion as List<SelectListItem>, new { @class = "form-control ", @onchange = "javascript:sut.editProcedimiento.visualizarFecharenovacion(event,this);" })
                                            }

                                        }
                                        else if (ViewBag.EsTupaEstandar && Model.TipoProcedimiento == TipoProcedimiento.Estandar)
                                        {
                                            @Html.DropDownListFor(Model => Model.Renovacio, ViewBag.renovacion as List<SelectListItem>, new { @class = "form-control ", @onchange = "javascript:sut.editProcedimiento.visualizarFecharenovacion(event,this);" })
                                        }
                                        else
                                        {
                                            @Html.DropDownListFor(Model => Model.Renovacio, ViewBag.renovacion as List<SelectListItem>, new { @class = "form-control ", @readonly = true })
                                        }
                                    </div>*@
                                @*<div id="idfecharenova">
                                    @if (exp.EstadoExpediente == EstadoExpediente.Observado)
                                    {*@
                                @*/*Inicio Plazorenovacion*/*@
                                @*<div class="form-group">
                                    <label class="col-sm-2 col-xs-12 control-label"></label>
                                    <div class="col-sm-10 col-xs-12">
                                        <label class="col-sm-2 col-xs-12 control-label"></label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        <a class="btn btn-warning btn-xs" id="aSustentarObservarExpPlazorenovacion" data-toggle="tooltip" data-placement="right" title="Sustentar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExp('PlazorenovacionSustento','divPlazorenovacion','divPlazorenovacionSustento','Plazorenovacion','Frecuencia de Renovación :',4);"><i class="fa fa-pencil-square-o"></i></a>*@

                                @*/*botones unicos sustentar*/*@
                                @*<a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpPlazorenovacion" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'PlazorenovacionSustento','Plazorenovacion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                    <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpPlazorenovacion" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'PlazorenovacionSustento','Plazorenovacion','Datos Generales','divPlazorenovacionSustento');"><i class="fa fa-power-off"></i></a>*@
                                @*/*botones Generados*/*@

                                @*<label id="mensajePlazorenovacion" class="label-primary label"></label>

                                            @if (obs.Count != 0)
                                            {
                                                var cont = 0;
                                                var texto1 = "";
                                                foreach (var item in obs)
                                                {
                                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Plazorenovacion")
                                                    {
                                                        cont = 1;

                                                        if (@item.CodValidacion == "1")
                                                        {

                                                            texto1 = @item.Descripcion;
                                                        }
                                                        else

                                                        if (@item.CodValidacion == "4")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    valiarbotones('Plazorenovacion');
                                                                    document.querySelector('#mensajePlazorenovacion').innerText = 'Se valido con éxito';
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "2")
                                                        {

                                                            <script>


                                                    window.addEventListener("load", function() {
                                                        observarbotones('Plazorenovacion');

                                                        document.querySelector('#mensajePlazorenovacion').innerText = 'Observado';
                                                        sut.editProcedimiento.textoobservacion("@texto1","@item.Descripcion",'divPlazorenovacion','divPlazorenovaciondetalle','Frecuencia de Renovación :','Plazorenovacion1','Plazorenovacion2',4, "@exp.EstadoExpediente",'Plazorenovacio');
                                                    });
                                                            </script>
                                                        }

                                                        else if (@item.CodValidacion == "5")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    canceladobotones('Plazorenovacion');
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "3")
                                                        {
                                                            <script>

                                                    window.addEventListener("load", function() {
                                                        sustentobotones('Plazorenovacion');
                                                        document.querySelector('#mensajePlazorenovacion').innerText = 'Se refuto con éxito';
                                                        sut.editProcedimiento.textosustento("@item.Descripcion",'divPlazorenovacion','divPlazorenovacionSustento','Frecuencia de Renovación :','PlazorenovacionSustento',4);
                                                    });
                                                            </script>
                                                        }
                                                    }

                                                }
                                                if (cont == 0)
                                                {
                                                    <script>
                                                        window.addEventListener("load", function () {
                                                            canceladobotonessustento('Plazorenovacion');
                                                        });
                                                    </script>
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div id="divPlazorenovacion" class="form-group">
                                    </div>*@
                                @*/*Fin*/*@
                                @*}
                                    <label class="col-sm-2 col-xs-12 control-label" for="PlazoAtencion">Frecuencia de Renovación :</label>
                                    <div class="col-sm-4 col-xs-12">*@
                                @*<div class="input-group">*@
                                @*@Html.TextBoxFor(model => model.FrecuenciaRenovacion, new { @class = "form-control"})*@


                                @*@if (!ViewBag.EsTupaEstandar && Model.TipoProcedimiento != TipoProcedimiento.Estandar)
                                    {
                                        if (Model.CodigoACR != "0")
                                        {
                                            @Html.DropDownListFor(Model => Model.Plazorenovacion, ViewBag.plazorenovacion1 as List<SelectListItem>, new { @class = "form-control input-sm", @readonly = true })

                                        }
                                        else
                                        {
                                            @Html.DropDownListFor(Model => Model.Plazorenovacion, ViewBag.plazorenovacion1 as List<SelectListItem>, new { @class = "form-control input-sm" })

                                        }

                                    }
                                    else if (ViewBag.EsTupaEstandar && Model.TipoProcedimiento == TipoProcedimiento.Estandar)
                                    {

                                        @Html.DropDownListFor(Model => Model.Plazorenovacion, ViewBag.Plazorenovacion1 as List<SelectListItem>, new { @class = "form-control input-sm" })
                                    }
                                    else
                                    {

                                        @Html.DropDownListFor(Model => Model.Plazorenovacion, ViewBag.Plazorenovacion1


                                       as List<SelectListItem>, new {  @class = "form-control input-sm" })
                                    }*@



                                @*<div class="input-group-addon">
                                        <span>Periodo</span>
                                    </div>*@
                                @*</div>*@

                                @*</div>
                                    </div>*@


                            </div>
                            @if (Model.Activar == 1 || Model.listplazoatencion.Count() > 0)
                            {
                                <div class="form-group">
                                    <br><br><br>
                                    <label class="col-sm-2 col-xs-12 control-label" for="PlazoAtencion"></label>
                                    <div class="col-sm-4 col-xs-12">
                                        <table id="tblPlazoAtencion" data-formtable="0" class="table table-condensed table-bordered">
                                            <thead>
                                                <tr>
                                                    @if (Model.Activar == 1)
                                                    {
                                                        if (@user.rolmenu[0].Agregar == true)
                                                        {
                                                            <th style="width:40px;"><a href="javascript:sut.editProcedimiento.Modalidad.editPlazoAtencion(0,0,@Model.ProcedimientoId)" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a></th>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <th style="width:40px;"></th>
                                                    }

                                                    <th style="width:400px;">Descripción</th>
                                                    <th style="width:60px;">Plazo</th>
                                                    <th style="width:90px;">Tipo Plazo</th>
                                                    <th style="width:10px;"></th>
                                                    <th style="width:10px;"></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.listplazoatencion.Count() > 0)
                                                {
                                                    int i = 0;
                                                    foreach (PlazoAtencion p in Model.listplazoatencion)
                                                    {
                                                        <tr>
                                                            <td style="width:40px;">@MvcHtmlString.Create((++i).ToString())</td>
                                                            <td style="width:400px;">@p.Descripcion</td>
                                                            <td style="width:60px;">@p.Plazo</td>
                                                            <td style="width:90px;">@p.TipoPlazo </td>
                                                            <td style="width:10px;">
                                                                @if (@user.rolmenu[0].Editar == true)
                                                                {
                                                                    <a href="javascript:sut.editProcedimiento.Modalidad.editPlazoAtencion(0,@p.PlazoAtencionId,@Model.ProcedimientoId)" class="btn btn-xs btn-success"><i class="fa fa-pencil"></i> </a>
                                                                }
                                                            </td>
                                                            <td style="width:10px;">
                                                                @if (@user.rolmenu[0].Eliminar == true)
                                                                {
                                                                    <a href="javascript:sut.editProcedimiento.Modalidad.EliminarPlazoAtencion(@p.PlazoAtencionId)" class="btn btn-xs btn-danger"><i class="fa fa-minus-circle"></i> </a>
                                                                }
                                                            </td>
                                                        </tr>
                                                    }
                                                }
                                            </tbody>

                                        </table>
                                    </div>
                                </div>
                            }


                            @if (Model.TipoProcedimiento == TipoProcedimiento.Servicio || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio)
                            {
                                <br><br><br>
                            }
                        </div>

                        @if (Model.TipoProcedimiento != TipoProcedimiento.Servicio && Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)
                        {
                            @*<hr />
                                <div class="table-responsive">

                                    <table class="table table-condensed table-bordered table-striped">
                                        <thead>
                                            <tr>
                                                <th style="width: 120px;"></th>
                                                <th style="text-align: center;">Cargo</th>
                                                <th style="text-align: center;">Unidad Orgánica</th>
                                                <th style="text-align: center; width: 100px;">Días a Presentar</th>
                                                <th style="text-align: center; width: 100px;">Días a Resolver</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Reconsideración</td>
                                                <td>
                                                    @Html.TextBoxFor(model => model.CargoReconsideracion, new { @class = "form-control" })
                                                </td>
                                                <td>
                                                    <div class="input-group">
                                                        @Html.HiddenFor(model => model.UndOrgReconsideracionId)
                                                        @Html.TextBoxFor(model => model.UndOrgReconsideracion.Nombre, new { @class = "form-control", @readonly = "readonly" })
                                                        <div class="input-group-btn">
                                                            <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgRecon')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    @Html.TextBoxFor(model => model.PzoReconPresent, new { @class = "form-control", @type = "number", min = 0 })
                                                </td>
                                                <td>
                                                    @Html.TextBoxFor(model => model.PzoReconResol, new { @class = "form-control", @type = "number", min = 0 })
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Apelación</td>
                                                <td>
                                                    @Html.TextBoxFor(model => model.CargoApelacion, new { @class = "form-control" })
                                                </td>
                                                <td>
                                                    <div class="input-group">
                                                        @Html.HiddenFor(model => model.UndOrgApelacionId)
                                                        @Html.TextBoxFor(model => model.UndOrgApelacion.Nombre, new { @class = "form-control", @readonly = "readonly" })
                                                        <div class="input-group-btn">
                                                            <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgApel')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    @Html.TextBoxFor(model => model.PzoApelPresent, new { @class = "form-control", @type = "number", min = 0 })
                                                </td>Tipo Plazo
                                                <td>
                                                    @Html.TextBoxFor(model => model.PzoApelResol, new { @class = "form-control", @type = "number", min = 0 })
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>*@
                            <br />
                            <hr />
                            <div class="table-responsive">
                                <table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">
                                    <thead>
                                        <tr>
                                            <th style="width: 140px;"></th>
                                            <th style="width: 140px;"></th>
                                            <th style="text-align: center; width: 395px;">Cargo</th>
                                            <th style="text-align: center;">Unidad de Organización</th>
                                            <th style="text-align: center; width: 100px;">Presentar</th>
                                            <th style="text-align: center; width: 150px;"></th>
                                            <th style="text-align: center; width: 100px;">Resolver</th>
                                            <th style="text-align: center; width: 150px;"></th>
                                        </tr>
                                    </thead>
                                </table>
                                @if (exp.EstadoExpediente == EstadoExpediente.Observado)
                                {
                                    @*/*Inicio Reconsideracion*/*@
                                    <div class="form-group">

                                        <div class="col-sm-10 col-xs-12">
                                            <a class="btn btn-warning btn-xs" id="aSustentarObservarExpReconsideracion" data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExpReconsideracion('ReconsideracionSustento','divReconsideracion','divReconsideracionSustento','Reconsideracion','Reconsideración',4);"><i class="fa fa-pencil-square-o"></i></a>

                                            @*/*botones unicos sustentar*/*@
                                            <a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpReconsideracion" data-placement="right" title="Guardar Sustento" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'Reconsideracion','Reconsideracion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                            <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpReconsideracion" data-placement="right" title="Quitar Sustento" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'Reconsideracion','Reconsideracion','Datos Generales','divReconsideracionSustento');"><i class="fa fa-power-off"></i></a>
                                            @*/*botones Generados*/*@

                                            <label id="mensajeReconsideracion" class="label-primary label" style="font-size: 100%;font-weight: normal;"></label>

                                            @if (obs.Count != 0)
                                            {
                                                var cont = 0;
                                                var texto1 = "";
                                                foreach (var item in obs)
                                                {
                                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Reconsideracion")
                                                    {
                                                        cont = 1;

                                                        if (@item.CodValidacion == "1")
                                                        {



                                                            texto1 = @item.Descripcion;
                                                        }
                                                        else

                                                        if (@item.CodValidacion == "4")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    valiarbotones('Reconsideracion');
                                                                    document.querySelector('#mensajeReconsideracion').innerText = 'Se valido con éxito';
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "2")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function() {

                                                                    sut.editProcedimiento.textoobservacionReconsideracion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divReconsideracion','divReconsideraciondetalle','Reconsideración','Reconsideracion1','Reconsideracion2',4, "@exp.EstadoExpediente",'NombreReconsideracion');
                                                                });
                                                            </script>
                                                        }

                                                        else if (@item.CodValidacion == "5")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    canceladobotones('Reconsideracion');
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "3")
                                                        {
                                                            <script>

                                                                window.addEventListener("load", function() {
                                                                    sustentobotones('Reconsideracion');
                                                                    document.querySelector('#mensajeReconsideracion').innerText = 'Se refuto con éxito';

                                                                    sut.editProcedimiento.textosustentoReconsideracion("@item.Descripcion.Replace("\n", " ")",'divReconsideracion','divReconsideracionSustento','Reconsideración','Reconsideracion',8);
                                                                });
                                                            </script>
                                                        }
                                                    }
                                                }
                                                if (cont == 0)
                                                {
                                                    <script>
                                                        window.addEventListener("load", function () {
                                                            canceladobotonessustento('Reconsideracion');
                                                        });
                                                    </script>
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div id="divReconsideracion" class="form-group">
                                    </div>
                                    @*/*Fin*/*@
                                }

                                @if ( @Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)
                                //if (@Model.TipoProcedimiento != TipoProcedimiento.Estandar && @Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)
                                {

                                        <table class="table table-condensed table-bordered table-striped" id="tablaReconsideracion1" style="margin-bottom: 0px;">
                                            <tbody>
                                                <tr>

                                                    @if (@user.rolmenu[0].Agregar == true)
                                                    {
                                                        <td style="width: 140px;">
                                                            <a href="javascript:sut.editProcedimiento.Cargos.addReconsideracion()" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                                        </td>
                                                    }

                                                    @if (Model.reclamacion == 1)
                                                    {
                                                        <td style="width: 140px;"><label class="control-label" for="Reconsideración">Reclamación</label></td>
                                                    }
                                                    else
                                                    {
                                                        <td style="width: 140px;"><label class="control-label" for="Reconsideración">Reconsideración</label></td>
                                                    }


                                                    <td style="text-align: center;">
                                                        @Html.TextBoxFor(model => model.CargoReconsideracion, new { @class = "form-control" })
                                                    </td>
                                                    <td style="text-align: center;">
                                                        <div class="input-group">
                                                            @Html.HiddenFor(model => model.UndOrgReconsideracionId)
                                                            @Html.TextBoxFor(model => model.UndOrgReconsideracion.Nombre, new { @class = "form-control", @readonly = "readonly" })
                                                            @if (Model.UndOrgReconsideracionId == null)
                                                            {
                                                                <div class="input-group-btn">
                                                                    <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgRecon')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                                                                </div>
                                                            }
                                                            else
                                                            {
                                                                <div class="input-group-btn">
                                                                    <a href="javascript:sut.editProcedimiento.deleteunidadorg(1)" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
                                                                </div>
                                                            }
                                                        </div>
                                                    </td>
                                                    <td style="text-align: center; width: 100px;">
                                                        @Html.TextBoxFor(model => model.PzoReconPresent, new { @class = "form-control", @type = "number" })
                                                    </td>
                                                    <td style="text-align: center; width: 150px;">
                                                        @Html.DropDownListFor(model => model.TipoReconPresent, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                    </td>
                                                    <td style="text-align: center; width: 100px;">
                                                        @Html.TextBoxFor(model => model.PzoReconResol, new { @class = "form-control", @type = "number" })
                                                    </td>
                                                    <td style="text-align: center; width: 150px;">
                                                        @Html.DropDownListFor(model => model.TipoReconResol, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                    </td>


                                                </tr>
                                            </tbody>
                                        </table>

                                    }
                                    else
                                    {
                                        if (user.Rol == (short)Rol.Administrador && @Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)
                                        {
                                            <table class="table table-condensed table-bordered table-striped" id="tablaReconsideracion1" style="margin-bottom: 0px;">
                                                <tbody>
                                                    <tr>


                                                        @if (Model.reclamacion == 1)
                                                        {
                                                            <td style="width: 140px;"><label class="control-label" for="Reconsideración">Reclamación</label></td>
                                                        }
                                                        else
                                                        {
                                                            <td style="width: 140px;"><label class="control-label" for="Reconsideración">Reconsideración</label></td>
                                                        }
                                                        <td style="text-align: center;">
                                                            @Html.TextBoxFor(model => model.CargoReconsideracion, new { @class = "form-control" })
                                                        </td>
                                                        <td style="text-align: center;">
                                                            <div class="input-group">
                                                                @Html.HiddenFor(model => model.UndOrgReconsideracionId)
                                                                @Html.TextBoxFor(model => model.UndOrgReconsideracion.Nombre, new { @class = "form-control", @readonly = "readonly" })
                                                                @if (Model.UndOrgReconsideracionId == null)
                                                                {
                                                                    <div class="input-group-btn">
                                                                        <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgRecon')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                                                                    </div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="input-group-btn">
                                                                        <a href="javascript:sut.editProcedimiento.deleteunidadorg(1)" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
                                                                    </div>
                                                                }
                                                            </div>
                                                        </td>
                                                        <td style="text-align: center; width: 100px;">
                                                            @Html.TextBoxFor(model => model.PzoReconPresent, new { @class = "form-control", @type = "number", min = 0 })
                                                        </td>
                                                        <td style="text-align: center; width: 150px;">
                                                            @Html.DropDownListFor(model => model.TipoReconPresent, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                        </td>
                                                        <td style="text-align: center; width: 100px;">
                                                            @Html.TextBoxFor(model => model.PzoReconResol, new { @class = "form-control", @type = "number", min = 0 })
                                                        </td>
                                                        <td style="text-align: center; width: 150px;">
                                                            @Html.DropDownListFor(model => model.TipoReconResol, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                        </td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                        }
                                        else
                                        {
                                            if (@Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)
                                            {

                                                <table class="table table-condensed table-bordered table-striped" id="tablaReconsideracion1" style="margin-bottom: 0px;">
                                                    <tbody>
                                                        <tr>
                                                            @if (Model.reclamacion == 1)
                                                            {
                                                                <td style="width: 140px;"><label class="control-label" for="Reconsideración">Reclamación</label></td>
                                                            }
                                                            else
                                                            {
                                                                <td style="width: 140px;"><label class="control-label" for="Reconsideración">Reconsideración</label></td>
                                                            }



                                                            <td style="text-align: center;">
                                                                @Html.TextBoxFor(model => model.CargoReconsideracion, new { @class = "form-control", Required = true })
                                                            </td>
                                                            <td style="text-align: center;">
                                                                <div class="input-group">
                                                                    @Html.HiddenFor(model => model.UndOrgReconsideracionId)
                                                                    @Html.TextBoxFor(model => model.UndOrgReconsideracion.Nombre, new { @class = "form-control", @readonly = "readonly", Required = true })
                                                                    @if (Model.UndOrgReconsideracionId == null)
                                                                    {
                                                                        <div class="input-group-btn">
                                                                            <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgRecon')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="input-group-btn">
                                                                            <a href="javascript:sut.editProcedimiento.deleteunidadorg(1)" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
                                                                        </div>
                                                                    }
                                                                </div>
                                                            </td>
                                                            <td style="text-align: center; width: 100px;">
                                                                @Html.TextBoxFor(model => model.PzoReconPresent, new { @class = "form-control", @type = "number", min = 0, Required = true })
                                                            </td>
                                                            <td style="text-align: center; width: 150px;">
                                                                @Html.DropDownListFor(model => model.TipoReconPresent, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                            </td>
                                                            <td style="text-align: center; width: 100px;">
                                                                @Html.TextBoxFor(model => model.PzoReconResol, new { @class = "form-control", @type = "number", min = 0, Required = true })
                                                            </td>
                                                            <td style="text-align: center; width: 150px;">
                                                                @Html.DropDownListFor(model => model.TipoReconResol, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            }
                                        }


                                    }


                                @if (exp.EstadoExpediente == EstadoExpediente.Observado)
                                {
                                    @*/*Inicio Apelacion*/*@
                                    <div class="form-group">
                                        <div class="col-sm-10 col-xs-12">
                                            <a class="btn btn-warning btn-xs" id="aSustentarObservarExpApelacion" data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExpApelacion('ApelacionSustento','divApelacion','divApelacionSustento','Apelacion','ApelacionSustento',4);"><i class="fa fa-pencil-square-o"></i></a>

                                            @*/*botones unicos sustentar*/*@
                                            <a class="btn btn-primary btn-xs" style="display:none" id="aGuardarSustentarExpApelacion" data-placement="right" title="Guardar Sustento" href="javascript:sut.editProcedimiento.AsignarSustentarexp.guardarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'ApelacionSustento','Apelacion','Datos Generales');"><i class="fa fa-floppy-o"></i></a>
                                            <a class="btn btn-danger btn-xs" style="display:none" id="aCancelarSustentarExpApelacion" data-placement="right" title="Quitar Sustento" href="javascript:sut.editProcedimiento.AsignarSustentarexp.CancelarSustentarExp(@Model.ExpedienteId,@Model.ProcedimientoId,'ApelacionSustento','Apelacion','Datos Generales','divApelacionSustento');"><i class="fa fa-power-off"></i></a>
                                            @*/*botones Generados*/*@

                                            <label id="mensajeApelacion" class="label-primary label" style="font-size: 100%;font-weight: normal;"></label>

                                            @if (obs.Count != 0)
                                            {
                                                var cont = 0;
                                                var texto1 = "";
                                                foreach (var item in obs)
                                                {
                                                    if (@item.Pantalla == "Datos Generales" && @item.NombreCampo == "Apelacion")
                                                    {
                                                        cont = 1;

                                                        if (@item.CodValidacion == "1")
                                                        {

                                                            texto1 = @item.Descripcion;
                                                        }
                                                        else

                                                        if (@item.CodValidacion == "4")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    valiarbotones('Apelacion');
                                                                    document.querySelector('#mensajeApelacion').innerText = 'Se valido con éxito';
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "2")
                                                        {

                                                            <script>
                                                                window.addEventListener("load", function() {
                                                                    sut.editProcedimiento.textoobservacionApelacion("@texto1.Replace("\n", " ")","@item.Descripcion.Replace("\n", " ")",'divApelacion','divApelaciondetalle','Apelación','Apelacion1','Apelacion2',4, "@exp.EstadoExpediente",'NombreApelacion');
                                                                });
                                                            </script>
                                                        }

                                                        else if (@item.CodValidacion == "5")
                                                        {
                                                            <script>
                                                                window.addEventListener("load", function () {
                                                                    canceladobotones('Apelacion');
                                                                });
                                                            </script>
                                                        }
                                                        else if (@item.CodValidacion == "3")
                                                        {
                                                            <script>

                                                                window.addEventListener("load", function() {

                                                                    sustentobotones('Apelacion');
                                                                    document.querySelector('#mensajeApelacion').innerText = 'Se refuto con éxito';
                                                                    sut.editProcedimiento.textosustentoApelacion("@item.Descripcion.Replace("\n", " ")",'divApelacion','divApelacionSustento','Apelacin','ApelacionSustento',8);

                                                                });
                                                            </script>
                                                        }
                                                    }

                                                }
                                                if (cont == 0)
                                                {
                                                    <script>
                                                        window.addEventListener("load", function () {
                                                            canceladobotonessustento('Apelacion');
                                                        });
                                                    </script>
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div id="divApelacion" class="form-group">
                                    </div>
                                    @*/*Fin*/*@
                                }


                                @* @if (@Model.TipoProcedimiento != TipoProcedimiento.Estandar && @Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)*@
                                @if (@Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)
                                {

                                    <table class="table table-condensed table-bordered table-striped" id="tablaApelacion1" style="margin-bottom: 0px;">
                                        <tbody>

                                            <tr>

                                                @if (@user.rolmenu[0].Agregar == true)
                                                {
                                                    <td style="width: 140px;">
                                                        <a href="javascript:sut.editProcedimiento.Cargos.addApelacion()" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                                    </td>
                                                }
                                                @*<td style="width: 140px;">    </td>*@
                                                <td style="width: 140px;"><label class="control-label" for="Reconsideración">Apelación</label></td>
                                                <td style="text-align: center;">
                                                    @Html.TextBoxFor(model => model.CargoApelacion, new { @class = "form-control" })
                                                </td>
                                                <td style="text-align: center;">
                                                    <div class="input-group">
                                                        @Html.HiddenFor(model => model.UndOrgApelacionId)
                                                        @Html.TextBoxFor(model => model.UndOrgApelacion.Nombre, new { @class = "form-control", @readonly = "readonly" })

                                                        @if (Model.UndOrgApelacionId == null)
                                                        {
                                                            <div class="input-group-btn">
                                                                <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgApel')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            <div class="input-group-btn">
                                                                <a href="javascript:sut.editProcedimiento.deleteunidadorg(2)" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
                                                            </div>
                                                        }

                                                    </div>
                                                </td>
                                                <td style="text-align: center; width: 100px;">
                                                    @Html.TextBoxFor(model => model.PzoApelPresent, new { @class = "form-control", @type = "number", min = 0, Required = true })
                                                </td>
                                                <td style="text-align: center; width: 150px;">
                                                    @Html.DropDownListFor(model => model.TipoApelPresent, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                </td>
                                                <td style="text-align: center; width: 100px;">
                                                    @Html.TextBoxFor(model => model.PzoApelResol, new { @class = "form-control", @type = "number", min = 0, Required = true })
                                                </td>
                                                <td style="text-align: center; width: 150px;">
                                                    @Html.DropDownListFor(model => model.TipoApelResol, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                </td>

                                            </tr>
                                        </tbody>
                                    </table>
                                }
                                else
                                {
                                    if (user.Rol == (short)Rol.Administrador && @Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)
                                    {
                                        <table class="table table-condensed table-bordered table-striped" id="tablaApelacion1" style="margin-bottom: 0px;">
                                            <tbody>

                                                <tr>
                                                    <td style="width: 140px;"><label class="control-label" for="Reconsideración">Apelación</label></td>
                                                    <td style="text-align: center;">
                                                        @Html.TextBoxFor(model => model.CargoApelacion, new { @class = "form-control" })
                                                    </td>
                                                    <td style="text-align: center;">
                                                        <div class="input-group">
                                                            @Html.HiddenFor(model => model.UndOrgApelacionId)
                                                            @Html.TextBoxFor(model => model.UndOrgApelacion.Nombre, new { @class = "form-control", @readonly = "readonly" })

                                                            @if (Model.UndOrgApelacionId == null)
                                                            {
                                                                <div class="input-group-btn">
                                                                    <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgApel')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                                                                </div>
                                                            }
                                                            else
                                                            {
                                                                <div class="input-group-btn">
                                                                    <a href="javascript:sut.editProcedimiento.deleteunidadorg(2)" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
                                                                </div>
                                                            }

                                                        </div>
                                                    </td>
                                                    <td style="text-align: center; width: 100px;">
                                                        @Html.TextBoxFor(model => model.PzoApelPresent, new { @class = "form-control", @type = "number", min = 0 })
                                                    </td>

                                                    <td style="text-align: center; width: 150px;">
                                                        @Html.DropDownListFor(model => model.TipoApelPresent, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                    </td>
                                                    <td style="text-align: center; width: 100px;">
                                                        @Html.TextBoxFor(model => model.PzoApelResol, new { @class = "form-control", @type = "number", min = 0 })
                                                    </td>
                                                    <td style="text-align: center; width: 150px;">
                                                        @Html.DropDownListFor(model => model.TipoApelResol, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    }
                                    else
                                    {
                                        if (@Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)

                                        {
                                            <table class="table table-condensed table-bordered table-striped" id="tablaApelacion1" style="margin-bottom: 0px;">
                                                <tbody>

                                                    <tr>
                                                        <td style="width: 140px;"><label class="control-label" for="Reconsideración">Apelación</label></td>
                                                        <td style="text-align: center;">
                                                            @Html.TextBoxFor(model => model.CargoApelacion, new { @class = "form-control" })
                                                        </td>
                                                        <td style="text-align: center;">
                                                            <div class="input-group">
                                                                @Html.HiddenFor(model => model.UndOrgApelacionId)
                                                                @Html.TextBoxFor(model => model.UndOrgApelacion.Nombre, new { @class = "form-control", @readonly = "readonly" })

                                                                @if (Model.UndOrgApelacionId == null)
                                                                {
                                                                    <div class="input-group-btn">
                                                                        <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgApel')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                                                                    </div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="input-group-btn">
                                                                        <a href="javascript:sut.editProcedimiento.deleteunidadorg(2)" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
                                                                    </div>
                                                                }

                                                            </div>
                                                        </td>
                                                        <td style="text-align: center; width: 100px;">
                                                            @Html.TextBoxFor(model => model.PzoApelPresent, new { @class = "form-control", @type = "number", min = 0, Required = true })
                                                        </td>
                                                        <td style="text-align: center; width: 150px;">
                                                            @Html.DropDownListFor(model => model.TipoApelPresent, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                        </td>
                                                        <td style="text-align: center; width: 100px;">
                                                            @Html.TextBoxFor(model => model.PzoApelResol, new { @class = "form-control", @type = "number", min = 0, Required = true })
                                                        </td>
                                                        <td style="text-align: center; width: 150px;">
                                                            @Html.DropDownListFor(model => model.TipoApelResol, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        }
                                    }
                                }

                                @*/******Revisión****/*@

                                @if (Model.revision == 1)
                                {

                                    //if (@Model.TipoProcedimiento != TipoProcedimiento.Estandar || @Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)

                                    if (@Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio)
                                    {

                                        <table class="table table-condensed table-bordered table-striped" id="tablaOtros1" style="margin-bottom: 0px;">
                                            <tbody>

                                                <tr>

                                                    @if (@user.rolmenu[0].Agregar == true)
                                                    {
                                                        <td style="width: 140px;">
                                                            <a href="javascript:sut.editProcedimiento.Cargos.addOtros()" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                                        </td>
                                                    }
                                                    @*<td style="width: 140px;">    </td>*@
                                                    <td style="width: 140px;"><label class="control-label" for="Reconsideración">Revisión</label></td>
                                                    <td style="text-align: center;">
                                                        @Html.TextBoxFor(model => model.CargoOtros, new { @class = "form-control" })
                                                    </td>
                                                    <td style="text-align: center;">
                                                        <div class="input-group">
                                                            @Html.HiddenFor(model => model.UndOrgIdOtros)
                                                            @Html.TextBoxFor(model => model.UndOrgOtros.Nombre, new { @class = "form-control", @readonly = "readonly" })

                                                            @if (Model.UndOrgIdOtros == null)
                                                            {
                                                                <div class="input-group-btn">
                                                                    <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgOtros')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                                                                </div>
                                                            }
                                                            else
                                                            {
                                                                <div class="input-group-btn">
                                                                    <a href="javascript:sut.editProcedimiento.deleteunidadorg(3)" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
                                                                </div>
                                                            }

                                                        </div>
                                                    </td>
                                                    <td style="text-align: center; width: 100px;">
                                                        @Html.TextBoxFor(model => model.PzoPresentOtros, new { @class = "form-control", @type = "number", min = 0, Required = true })
                                                    </td>
                                                    <td style="text-align: center; width: 150px;">
                                                        @Html.DropDownListFor(model => model.TipoOtrosPresent, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                    </td>
                                                    <td style="text-align: center; width: 100px;">
                                                        @Html.TextBoxFor(model => model.PzoResolOtros, new { @class = "form-control", @type = "number", min = 0, Required = true })
                                                    </td>
                                                    <td style="text-align: center; width: 150px;">
                                                        @Html.DropDownListFor(model => model.TipoOtrosResol, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                    </td>

                                                </tr>
                                            </tbody>
                                        </table>
                                    }
                                    else
                                    {
                                        if (user.Rol == (short)Rol.Administrador)
                                        {
                                            <table class="table table-condensed table-bordered table-striped" id="tablaOtros1" style="margin-bottom: 0px;">
                                                <tbody>

                                                    <tr>
                                                        <td style="width: 140px;"><label class="control-label" for="Reconsideración">Revisión</label></td>
                                                        <td style="text-align: center;">
                                                            @Html.TextBoxFor(model => model.CargoOtros, new { @class = "form-control" })
                                                        </td>
                                                        <td style="text-align: center;">
                                                            <div class="input-group">
                                                                @Html.HiddenFor(model => model.UndOrgIdOtros)
                                                                @Html.TextBoxFor(model => model.UndOrgOtros.Nombre, new { @class = "form-control", @readonly = "readonly" })

                                                                @if (Model.UndOrgIdOtros == null)
                                                                {
                                                                    <div class="input-group-btn">
                                                                        <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgApel')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                                                                    </div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="input-group-btn">
                                                                        <a href="javascript:sut.editProcedimiento.deleteunidadorg(3)" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
                                                                    </div>
                                                                }

                                                            </div>
                                                        </td>
                                                        <td style="text-align: center; width: 100px;">
                                                            @Html.TextBoxFor(model => model.PzoPresentOtros, new { @class = "form-control", @type = "number", min = 0 })
                                                        </td>

                                                        <td style="text-align: center; width: 150px;">
                                                            @Html.DropDownListFor(model => model.TipoOtrosPresent, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                        </td>
                                                        <td style="text-align: center; width: 100px;">
                                                            @Html.TextBoxFor(model => model.PzoResolOtros, new { @class = "form-control", @type = "number", min = 0 })
                                                        </td>
                                                        <td style="text-align: center; width: 150px;">
                                                            @Html.DropDownListFor(model => model.TipoOtrosResol, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        }
                                        else
                                        {
                                            <table class="table table-condensed table-bordered table-striped" id="tablaOtros1" style="margin-bottom: 0px;">
                                                <tbody>

                                                    <tr>
                                                        <td style="width: 140px;"><label class="control-label" for="Reconsideración">Revisión</label></td>
                                                        <td style="text-align: center;">
                                                            @Html.TextBoxFor(model => model.CargoOtros, new { @class = "form-control" })
                                                        </td>
                                                        <td style="text-align: center;">
                                                            <div class="input-group">
                                                                @Html.HiddenFor(model => model.UndOrgIdOtros)
                                                                @Html.TextBoxFor(model => model.UndOrgOtros.Nombre, new { @class = "form-control", @readonly = "readonly" })

                                                                @if (Model.UndOrgIdOtros == null)
                                                                {
                                                                    <div class="input-group-btn">
                                                                        <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgApel')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                                                                    </div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="input-group-btn">
                                                                        <a href="javascript:sut.editProcedimiento.deleteunidadorg(3)" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
                                                                    </div>
                                                                }

                                                            </div>
                                                        </td>
                                                        <td style="text-align: center; width: 100px;">
                                                            @Html.TextBoxFor(model => model.PzoPresentOtros, new { @class = "form-control", @type = "number", min = 0, Required = true })
                                                        </td>
                                                        <td style="text-align: center; width: 150px;">
                                                            @Html.DropDownListFor(model => model.TipoOtrosPresent, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                        </td>
                                                        <td style="text-align: center; width: 100px;">
                                                            @Html.TextBoxFor(model => model.PzoResolOtros, new { @class = "form-control", @type = "number", min = 0, Required = true })
                                                        </td>
                                                        <td style="text-align: center; width: 150px;">
                                                            @Html.DropDownListFor(model => model.TipoOtrosResol, ViewBag.tipoplazo as List<SelectListItem>, new { @class = "form-control" })
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        }
                                    }
                                }
                                @*/************************/*@

                            </div>
                        }

                        @if (!ViewBag.EsTupaEstandar)
                        {
                            @*<hr />*@

                            <div class="table-responsive" style="display:none;visibility:collapse;">
                                <table id="tblSede" class="table table-condensed table-bordered table-striped" data-cant="0">
                                    <thead>
                                        <tr>
                                            <th style="width:100px;">
                                                @if (@user.rolmenu[0].Agregar == true)
                                                {
                                                    <a href="javascript:sut.editProcedimiento.Sede.openSelect()" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                                }
                                            </th>
                                            <th>Sede de atención del trámite</th>
                                            <th style="width:50px;"></th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        }

                        @*<hr />*@

                        <div class="table-responsive" style="display:none;visibility:collapse;">
                            <table id="tblNota" class="table table-condensed table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                            @if (@user.rolmenu[0].Agregar == true)
                                            {
                                                <a href="javascript:sut.editProcedimiento.Nota.add()" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                            }
                                        </th>
                                        <th colspan="2">Notas al Ciudadano</th>
                                        <th style="width:50px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                        @*<hr />*@

                        <div class="table-responsive" style="display:none;visibility:collapse;">
                            <table id="tblPasoSeguir" class="table table-condensed table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                            @if (@user.rolmenu[0].Agregar == true)
                                            {
                                                <a href="javascript:sut.editProcedimiento.PasoSeguir.add()" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                            }
                                        </th>
                                        <th colspan="1">Pasos a Seguir</th>
                                        <th style="width:50px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                        @if (!ViewBag.EsTupaEstandar)
                        {
                            @*<hr />*@

                            <div class="table-responsive" style="display:none;visibility:collapse;">
                                <table id="tblCanales" class="table table-condensed table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th style="width:50px;"></th>
                                            <th>Canales de Atención</th>
                                            <th>Comentarios</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            int i = 0;
                                        }

                                        @if (Model.ProcedimientoDatoAdicional.Count(x => x.Tipo == 1) > 0)
                                        {
                                            for (i = 0; i < Model.ProcedimientoDatoAdicional.Count(x => x.Tipo == 1); i++)
                                            {
                                                <tr>
                                                    <td>
                                                        @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].ProcedimientoId)
                                                        @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].MetaDatoId)
                                                        @*@Html.CheckBoxFor(model => model.ProcedimientoDatoAdicional[i].Checked, new { @oficinaAutocompletar = Model.ProcedimientoDatoAdicional[i].MetaDato.OficinasAutocompletar })*@

                                                        @if (Model.ProcedimientoDatoAdicional[i].MetaDatoId == 3 && Model.ActivarAtencionTlf == 0)
                                                        {
                                                            @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].Checked, new { @disabled = "disabled " })
                                                        }
                                                        else
                                                        {
                                                            @Html.CheckBoxFor(model => model.ProcedimientoDatoAdicional[i].Checked, new { @oficinaAutocompletar = Model.ProcedimientoDatoAdicional[i].MetaDato.OficinasAutocompletar })}
                                                        }
                                                    </td>
                                                    @*<td>@Model.ProcedimientoDatoAdicional[i].MetaDato.Nombre</td>


        <td>@Html.TextBoxFor(model => model.ProcedimientoDatoAdicional[i].Comentario, new { @class = "form-control input-sm", @oficinaAutocompletar = Model.ProcedimientoDatoAdicional[i].MetaDato.OficinasAutocompletar, @norequired = true })</td>*@
                                                    @if (Model.ProcedimientoDatoAdicional[i].MetaDatoId == 3 && Model.ActivarAtencionTlf == 0)
                                                    {
                                                        <td> </td>
                                                        <td>@Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].Comentario, new { @class = "form-control input-sm", @oficinaAutocompletar = Model.ProcedimientoDatoAdicional[i].MetaDato.OficinasAutocompletar, @norequired = true })</td>
                                                    }
                                                    else
                                                    {
                                                        <td>@Model.ProcedimientoDatoAdicional[i].MetaDato.Nombre</td>
                                                        <td>@Html.TextBoxFor(model => model.ProcedimientoDatoAdicional[i].Comentario, new { @class = "form-control input-sm", @oficinaAutocompletar = Model.ProcedimientoDatoAdicional[i].MetaDato.OficinasAutocompletar, @norequired = true })</td>
                                                    }


                                                </tr>
                                            }
                                        }
                                        else
                                        {
                                            <tr><td colspan="3">NO SE TIENEN CANALES DE ATENCIÓN DISPONIBLES</td></tr>
                                        }
                                    </tbody>
                                </table>
                            </div>

                            @*<hr />*@

                            <div class="table-responsive" style="display:none;visibility:collapse;">
                                <table id="tblFormasPago" class="table table-condensed table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th style="width:50px;"></th>
                                            <th>Formas de Pago</th>
                                            <th>Comentarios</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @if (Model.ProcedimientoDatoAdicional.Count(x => x.Tipo == 2) > 0)
                                        {
                                            for (; i < Model.ProcedimientoDatoAdicional.Count(); i++)
                                            {
                                                if (Model.ProcedimientoDatoAdicional[i].MetaDato.Entero01 != Model.ProcedimientoDatoAdicional[i - 1].MetaDato.Entero01)
                                                {
                                                    <tr>
                                                        <td></td>
                                                        <td><strong>@Model.ProcedimientoDatoAdicional[i].MetaDato.Padre.Nombre</strong></td>
                                                        <td></td>
                                                    </tr>
                                                }
                                                <tr>
                                                    <td>
                                                        @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].ProcedimientoId)
                                                        @Html.HiddenFor(model => model.ProcedimientoDatoAdicional[i].MetaDatoId)
                                                        @if (Model.EsGratuito == false)
                                                        {
                                                            @Html.CheckBoxFor(model => model.ProcedimientoDatoAdicional[i].Checked)
                                                        }
                                                        else
                                                        {
                                                            @Html.CheckBoxFor(model => model.ProcedimientoDatoAdicional[i].Checked, new { @disabled = "disabled" })
                                                        }
                                                    </td>
                                                    <td>@Model.ProcedimientoDatoAdicional[i].MetaDato.Nombre</td>
                                                    <td>@Html.TextBoxFor(model => model.ProcedimientoDatoAdicional[i].Comentario, new { @class = "form-control input-sm", @norequired = true })</td>
                                                </tr>
                                            }
                                        }
                                        else
                                        {
                                            <tr><td colspan="3">NO SE TIENEN FORMAS DE PAGO DISPONIBLES</td></tr>
                                        }
                                    </tbody>
                                </table>
                            </div>

                            @*<hr />*@

                            <div class="form-horizontal" style="display:none;visibility:collapse;">
                                <div class="form-group" style="display:none; visibility:collapse">
                                    <label class="col-sm-4 col-xs-12 control-label">Unidad Orgánica donde se presenta la documentación :</label>
                                    <div class="col-sm-8 col-xs-12">
                                        @Html.HiddenFor(model => model.UndOrgPresentDocumentacionId)
                                        <div class="input-group">
                                            @Html.TextBoxFor(model => model.UndOrgPresentDocumentacion.Nombre, new { @class = "form-control", @readonly = "readonly" })
                                            <div class="input-group-btn">
                                                <a href="javascript:sut.editProcedimiento.openSelectUndOrg('sut.editProcedimiento.setUndOrgPres')" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <hr />
                                <h3>Atención de Consultas sobre el Procedimiento:</h3>
                                <div class="form-group">
                                    <label class="col-sm-4 col-xs-12 control-label">Teléfono :</label>
                                    <div class="col-sm-8 col-xs-12">
                                        @Html.TextBoxFor(model => model.Telefono, new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 col-xs-12 control-label">Anexo :</label>
                                    <div class="col-sm-8 col-xs-12">
                                        @Html.TextBoxFor(model => model.Anexo, new { @class = "form-control" })
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 col-xs-12 control-label">Correo Electrónico :</label>
                                    <div class="col-sm-8 col-xs-12">
                                        @Html.TextBoxFor(model => model.Correo, new { @class = "form-control", @norequired = true })
                                    </div>
                                </div>
                            </div>

                        }

                    </div>

                    <div id="edit-modalidades" class="tab-pane">
                        <div class="callout callout-warning" style="height: inherit;padding: inherit;display: block;">
                            Solo en el caso que se requiera diferentes tasas de derecho de tramitacion para el procedimiento administrativo o servicio prestado en exclusividad.
                        </div>
                        <div class="table-responsive">
                            <table id="tblModalidad" class="table table-condensed table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                            @if (@user.rolmenu[0].Agregar == true)
                                            {
                                                <a href="javascript:sut.editProcedimiento.Modalidad.add()" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                            }

                                        </th>
                                        @*<th style="width:120px;">Código</th>*@
                                        <th>Nombre de la Modalidad</th>
                                        <th style="width:120px">Gratuito</th>
                                        @if (ViewBag.EsCargaInicial)
                                        {
                                            <th style="width:100px;">Derecho de Tramitación (S/)</th>
                                        }
                                        else
                                        {
                                            @*<th style="width:100px;">Prestaciones Anuales</th>*@
                                        }
                                        @if (Model.Calificaciones == 1)
                                        {
                                            <th style="width: 253px;text-align: center;">Calificaciones</th>
                                        }

                                        <th style="width:50px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="edit-requisitos" class="tab-pane">
                        <div class="callout callout-warning" style="height: inherit;padding: inherit;display: block;">

                            <div style="display: inline-block; margin-right: 10px;">
                                Colocar los requisitos necesarios para solicitar el procedimiento.
                            </div>
                            <div style="color:#000; display: inline-block; margin-right: 10px; float:right">
                                <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" class="btn btn-dark" title="Importación de Notas al ciudadano y Pasos a seguir">
                                    <i class="fa fa-fw fa-cloud-upload"></i> Importación
                                </a>
                            </div>
                           
                        </div>

                        <style>
                            .input-group {
                                display: inline-block;
                                margin-right: 10px;
                            }

                            .submit-button {
                                display: block;
                                margin-top: 10px;
                            }
                        </style>

                        <div class="card">
                           
                            @*<a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" class="btn btn-default">
                                <i class="fa fa-fw fa-cloud-upload"></i> Importación
                            </a>*@
                            <div id="collapseOne" class="panel-collapse collapse">
                                <div class="card-body">
                                    <fieldset>
                                      
                                        <div class="input-group">
                                            <label for="fname">Plantilla:</label><br>
                                            <a download="DatosGeneralesRequisitos-Notas.xlsx" title="Para poder importar masivamente descarga y llene el formulario" target="_blank" href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,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">
                                                Descargar Plantilla <i class="fa fa-fw fa-file-excel-o"></i>
                                            </a>
                                        </div>
                                        <div class="input-group">
                                            <label for="lname">Archivo:</label><br>
                                            <input type="file" id="inputreqnotas" name="lname">
                                        </div>
                                        <div class="input-group">

                                        </div>
                                        <input id="btnimportarreqnotas" type="button" value="Importar" class="btn btn-info" >
                                    </fieldset>
                                </div>
                            </div>
                        </div>
                       

                      


                        <br />

                        <h4>Requisitos Generales</h4>
                        <div class="table-responsive">
                            <table id="tblRequisitoGeneral" class="table table-condensed table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="width:50px;">
                                            @if (!ViewBag.EsTupaEstandar && (Model.TipoProcedimiento != TipoProcedimiento.Estandar && Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio))
                                            {
                                                if (Model.CodigoACR == "0")
                                                {
                                                    if (@user.rolmenu[0].Agregar == true)
                                                    {
                                                        <a href="javascript:sut.editProcedimiento.Requisito.add(1)" id="AgregarReqG" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                                    }
                                                    <a class="btn btn-primary btn-xs" id="GuardarReqG" href="javascript:sut.editProcedimiento.Requisito.guardaridReqG(@Model.ProcedimientoId,1);"><i class="fa fa-floppy-o"></i></a>
                                                }
                                                else if (Model.Activar3 == 1)
                                                {
                                                    //if (@user.rolmenu[0].Agregar == true)
                                                    //{
                                                    <a href="javascript:sut.editProcedimiento.Requisito.add(1)" id="AgregarReqG" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                                    //}
                                                    <a class="btn btn-primary btn-xs" id="GuardarReqG" href="javascript:sut.editProcedimiento.Requisito.guardaridReqG(@Model.ProcedimientoId,1);"><i class="fa fa-floppy-o"></i></a>

                                                }
                                                else
                                                {
                                                    <a class="btn btn-primary btn-xs" id="GuardarReqG" href="javascript:sut.editProcedimiento.Requisito.guardaridReqG(@Model.ProcedimientoId,1);"><i class="fa fa-floppy-o"></i></a>
                                                }
                                            }
                                            else if (ViewBag.EsTupaEstandar && (Model.TipoProcedimiento == TipoProcedimiento.Estandar || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio))
                                            {
                                                if (@user.rolmenu[0].Agregar == true)
                                                {
                                                    <a href="javascript:sut.editProcedimiento.Requisito.add(1)" id="AgregarReqG" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                                }
                                                <a class="btn btn-primary btn-xs" id="GuardarReqG" href="javascript:sut.editProcedimiento.Requisito.guardaridReqG(@Model.ProcedimientoId,1);"><i class="fa fa-floppy-o"></i></a>
                                            }
                                            else if (Model.Activar3 == 1)
                                            {
                                                //if (@user.rolmenu[0].Agregar == true)
                                                //{
                                                <a href="javascript:sut.editProcedimiento.Requisito.add(1)" id="AgregarReqG" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                                //}
                                                <a class="btn btn-primary btn-xs" id="GuardarReqG" href="javascript:sut.editProcedimiento.Requisito.guardaridReqG(@Model.ProcedimientoId,1);"><i class="fa fa-floppy-o"></i></a>

                                            }
                                        </th>
                                        <th style="width:50px;">
                                            @if (!ViewBag.EsTupaEstandar && (Model.TipoProcedimiento != TipoProcedimiento.Estandar || Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio))
                                            {
                                                //if (Model.CodigoACR == "0")
                                                //{
                                                <a class="btn btn-success btn-xs" id="idReqG" href="javascript:sut.editProcedimiento.Requisito.editaridReqG(@Model.ProcedimientoId,1);" data-toggle="tooltip" data-placement="right" title="Editar el # del los PA"><i class="fa fa-list-ol"></i></a>
                                                <a class="btn btn-danger btn-xs" id="CancelarReqG" href="javascript:sut.editProcedimiento.Requisito.cancelaridReqG(@Model.ProcedimientoId,1);"><i class="fa fa-power-off"></i></a>
                                                @*}
                                else
                                {
                                    <a class="btn btn-success btn-xs" id="idReqG" href="javascript:sut.editProcedimiento.Requisito.editaridReqG(@Model.ProcedimientoId,1);" data-toggle="tooltip" data-placement="right" title="Editar el # del los PA"><i class="fa fa-list-ol"></i></a>
                                    <a class="btn btn-danger btn-xs" id="CancelarReqG" href="javascript:sut.editProcedimiento.Requisito.cancelaridReqG(@Model.ProcedimientoId,1);"><i class="fa fa-power-off"></i></a>
                                }*@
                                            }
                                            else if (ViewBag.EsTupaEstandar && (Model.TipoProcedimiento == TipoProcedimiento.Estandar || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio))
                                            {
                                                <a class="btn btn-success btn-xs" id="idReqG" href="javascript:sut.editProcedimiento.Requisito.editaridReqG(@Model.ProcedimientoId,1);" data-toggle="tooltip" data-placement="right" title="Editar el # del los PA"><i class="fa fa-list-ol"></i></a>
                                                <a class="btn btn-danger btn-xs" id="CancelarReqG" href="javascript:sut.editProcedimiento.Requisito.cancelaridReqG(@Model.ProcedimientoId,1);"><i class="fa fa-power-off"></i></a>

                                            }
                                        </th>
                                        <th>Nombre</th>
                                        <th style="width:30px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="table-responsive">
                            @if (Model.sinnotas == 0)
                            {
                                <h4>Notas</h4>
                            }
                            <table id="tblRequisitoEspecifico" class="table table-condensed table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="width:50px;">
                                            @if (!ViewBag.EsTupaEstandar && (Model.TipoProcedimiento != TipoProcedimiento.Estandar || Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio))
                                            {
                                                if (@user.rolmenu[0].Agregar == true)
                                                {
                                                    <a href="javascript:sut.editProcedimiento.Requisito.add(2)" id="AgregarReqN" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                                }

                                                <a class="btn btn-primary btn-xs" id="GuardarReqN" href="javascript:sut.editProcedimiento.Requisito.guardaridReqG(@Model.ProcedimientoId,2);"><i class="fa fa-floppy-o"></i></a>
                                            }
                                            else if (ViewBag.EsTupaEstandar && (Model.TipoProcedimiento == TipoProcedimiento.Estandar || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio))
                                            {
                                                <a href="javascript:sut.editProcedimiento.Requisito.add(2)" id="AgregarReqN" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>
                                                <a class="btn btn-primary btn-xs" id="GuardarReqN" href="javascript:sut.editProcedimiento.Requisito.guardaridReqG(@Model.ProcedimientoId,2);"><i class="fa fa-floppy-o"></i></a>
                                            }
                                        </th>
                                        <th style="width:50px;">
                                            @if (!ViewBag.EsTupaEstandar && (Model.TipoProcedimiento != TipoProcedimiento.Estandar || Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio))
                                            {
                                                <a class="btn btn-success btn-xs" id="idReqN" href="javascript:sut.editProcedimiento.Requisito.editaridReqG(@Model.ProcedimientoId,2);" data-toggle="tooltip" data-placement="right" title="Editar el # del los PA"><i class="fa fa-list-ol"></i></a>
                                                <a class="btn btn-danger btn-xs" id="CancelarReqN" href="javascript:sut.editProcedimiento.Requisito.cancelaridReqG(@Model.ProcedimientoId,2);"><i class="fa fa-power-off"></i></a>
                                            }
                                            else if (ViewBag.EsTupaEstandar && (Model.TipoProcedimiento == TipoProcedimiento.Estandar || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio))
                                            {
                                                <a class="btn btn-success btn-xs" id="idReqN" href="javascript:sut.editProcedimiento.Requisito.editaridReqG(@Model.ProcedimientoId,2);" data-toggle="tooltip" data-placement="right" title="Editar el # del los PA"><i class="fa fa-list-ol"></i></a>
                                                <a class="btn btn-danger btn-xs" id="CancelarReqN" href="javascript:sut.editProcedimiento.Requisito.cancelaridReqG(@Model.ProcedimientoId,2);"><i class="fa fa-power-off"></i></a>
                                            }
                                        </th>
                                        <th>Nombre</th>
                                        <th style="width:30px;"></th>
                                    </tr>

                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    <div id="edit-base-legal" class="tab-pane">
                        @Html.HiddenFor(model => model.BaseLegalId)
                        @Html.HiddenFor(model => model.BaseLegal.BaseLegalId)

                        <div class="callout callout-warning" style="height: inherit;padding: inherit;display: block;">

                            <div style="display: inline-block; margin-right: 10px;">
                                Agregar la base legal del procedimiento administrativo o servicio prestado en exclusividad.
                            </div>
                            <div style="color:#000; display: inline-block; margin-right: 10px; float:right">
                                <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne2" class="btn  btn-dark" title="Importación de Base Legal PA/SE">
                                    <i class="fa fa-fw fa-cloud-upload"></i> Importación
                                </a>

                              
                            </div>

                           
                        </div>
                        <div class="card">

                            
                            <div id="collapseOne2" class="panel-collapse collapse">
                                <div class="card-body">

                                    <fieldset>
                                   
                                        <div class="input-group">
                                            <label for="fname">Plantilla:</label><br>
                                            <a download="Base Legal.xlsx" title="Para poder importar masivamente descarga y llene el formulario" target="_blank" href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,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">
                                                Descargar Plantilla <i class="fa fa-fw fa-file-excel-o"></i>
                                            </a>
                                        </div>
                                        <div class="input-group">
                                            <label for="lname">Archivo:</label><br>
                                            <input type="file" id="inputbaselegal" name="lname">
                                        </div>
                                        <div class="input-group">

                                        </div>
                                        <input id="btnimportarbaselegal" type="button" value="Importar" class="btn btn-info">
                                    </fieldset>

                                </div>
                            </div>
                        </div>
                        <br />


                        <div class="table-responsive">
                            <table id="tblBaseLegal" class="table table-condensed table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">
                                            @if (!ViewBag.EsTupaEstandar && (Model.TipoProcedimiento != TipoProcedimiento.Estandar || Model.TipoProcedimiento != TipoProcedimiento.EstandarServicio))
                                            {
                                                if (@user.rolmenu[0].Agregar == true)
                                                {
                                                    <a href="javascript:sut.editProcedimiento.BaseLegal.edit()" id="idagregarbaselegal" class="btn btn-success btn-xs"><i class="fa fa-plus"></i> Agregar</a>
                                                }
                                            }
                                            else if (ViewBag.EsTupaEstandar && (Model.TipoProcedimiento == TipoProcedimiento.Estandar || Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio))
                                            {
                                                if (@user.rolmenu[0].Agregar == true)
                                                {
                                                    <a href="javascript:sut.editProcedimiento.BaseLegal.edit()" id="idagregarbaselegal" class="btn btn-success btn-xs"><i class="fa fa-plus"></i> Agregar</a>
                                                }
                                            }
                                        </th>
                                        <th style="width: 8%; text-align: center;">Artículo	</th>
                                        <th style="width: 34.5%; text-align: center;">Denominación </th>
                                        <th style="width: 17%; text-align: center;">Tipo de Norma </th>
                                        <th style="width: 13%; text-align: center;">Número </th>
                                        <th style="width: 19%; text-align: center;">Fecha de Publicación</th>
                                        @*<th style="width:100px;">Documento</th>*@
                                        <th style="width:60px;"></th>
                                        <th style="width:60px;"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                            </div>
                        </div>
                    </div>
    </div>
}

<div style="position: fixed;right: 15px;top: 60px; margin-bottom: 0;z-index: 5;">


    @*<a href="javascript:sut.editProcedimiento.salir('/Simplificacion/Expediente/Editar/@Model.ExpedienteId')" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>*@
    @*<a href="javascript:sut.editProcedimiento.salir('@Url.Content("~/Simplificacion/Expediente/Editar/")@Model.ExpedienteId')" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>*@

    <a href="javascript:sut.editProcedimiento.AtrasPA(@Model.ExpedienteId,@Model.ExplorarNum)" class="btn btn-danger"><i class="fa fa-id-card-o"></i> ATRAS </a>
    <a href="javascript:sut.editProcedimiento.SiguientePA(@Model.ExpedienteId,@Model.ExplorarNum)" class="btn btn-danger"><i class="fa fa-id-card-o"></i> SIGUIENTE </a>
    @if (@user.Ayuda == 1)
    {

        <a href="@Url.Content("~/Simplificacion/Procedimiento/InformacionCiudadano/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-id-card-o"></i> Inf. Ciudadano </a>
        <a href="#" class="btn btn-success"><i class="fa fa-id-card-o"></i> Datos Generales </a>

        if (Model.Expediente.TipoExpediente == TipoExpediente.ExpedienteRegular)
        {

            <a href="@Url.Content("~/Simplificacion/Procedimiento/SustentoTecnico/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-file-pdf-o"></i> Ir Sus. Tec. Legal</a>
            <a href="@Url.Content("~/Simplificacion/Procedimiento/TablaAsme/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-table"></i> Ir Tabla Asme</a>

        }
        <a href="@Url.Content("~/Simplificacion/Expediente/Editar/")@Model.ExpedienteId" class="btn btn-danger pulsesut-button"><i class="fa fa-arrow-left"></i> Volver</a>
        if (Model.Expediente.EstadoExpediente != EstadoExpediente.Aprobado)
        {
            <a href="javascript:sut.editProcedimiento.camposNoRequerido()" class="btn btn-primary pulsesut-button"><i class="fa fa-save"></i> Guardar</a>
        }
        //if (ViewBag.User.Rol == (short)Rol.Coordinador)
        //{
        <a href="javascript:sut.editProcedimiento.terminar()" class="btn btn-success pulsesut-button"><i class="fa fa-check"></i> Terminar</a>
        //}
    }
    else
    {
        
        <a href="@Url.Content("~/Simplificacion/Procedimiento/InformacionCiudadano/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-id-card-o"></i> Inf. Ciudadano </a>
        <a href="#" class="btn btn-success"><i class="fa fa-id-card-o"></i> Datos Generales </a>

        if (Model.Expediente.TipoExpediente == TipoExpediente.ExpedienteRegular)
        {
            <a href="@Url.Content("~/Simplificacion/Procedimiento/SustentoTecnico/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-file-pdf-o"></i> Ir Sus. Tec. Legal</a>
            <a href="@Url.Content("~/Simplificacion/Procedimiento/TablaAsme/")@Model.ProcedimientoId" class="btn btn-facebook"><i class="fa fa-table"></i> Ir Tabla Asme</a>
        }

        <a href="@Url.Content("~/Simplificacion/Expediente/Editar/")@Model.ExpedienteId" class="btn btn-danger"><i class="fa fa-arrow-left"></i> Volver</a>
        if (Model.Expediente.EstadoExpediente != EstadoExpediente.Aprobado)
        {
            if (@user.rolmenu[0].Guardar == true)
            {
                <a href="javascript:sut.editProcedimiento.camposNoRequerido()" class="btn btn-primary"><i class="fa fa-save"></i> Guardar</a>
            }
        }
        if (@user.rolmenu[0].Terminar == true)
        {
            <a href="javascript:sut.editProcedimiento.terminar()" class="btn btn-success"><i class="fa fa-check"></i> Terminar</a>
        }

    }


</div>







<div class="modal fade" id="modal-ventana" data-backdrop="static" data-keyboard="false">
    <div id="ventana-container">

    </div>
</div>


<div class="minmaxConayuda">
    <div class="modal fade mymodal" id="modalAyudaAvatar1">
        <div class="modal-dialog  ">
            <div class="modal-content">
                <div class="modal-body" id="contenido" style="padding:0px">
                    <div class="bar-title" id="tituloocultar">
                        <a class="close modalMinimize" style="padding:110px; right: 20px;  top: -100px; background: transparent"> <i class='fa fa-clone '></i> </a>
                        <span>
                            <h3 id="ihtitulo1" style="font-size: x-large;text-align: center;font-family: initial;"> Hola @user.Nombres </h3>
                        </span>
                    </div>
                    <div>
                        <div id="idtitulo1" style="text-align:left">
                            <div class="col-sm-3 col-xs-2">
                                <a class="modalMinimize" title="Minimizar" style="color:black"> <i class='fa fa-minus fa-2x'></i> </a>
                                <img src="~/dist/img/hola.png" class="img-rounded" alt="Cinque Terre" />
                            </div>
                            <div class="caja col-sm-5" id="mensaje1" style="display: none; width:409px;height:100%;top:137px">
                                <sp style="text-align: left;font-family: initial;"> Complete el registro, haga clic en</sp>
                                <a class="btn btn-success btn-xs" href="#"><i class="fa fa-plus"></i> Guardar</a>
                                <l style="text-align: left;font-family: initial;">y avancemos a la siguiente pestaña ¡Suerte!</l>
                            </div>
                            <div class="caja col-sm-5" id="mensaje2" style="display: none; width:440px;height:100%;top:103px">
                                <j2 style="text-align: left;font-family: initial;">¡Felicidades! ¿Completaste correctamente el registro Datos Generales ? Si es así, clic </j2>
                                <a id="clic" style="display: none;" class="btn btn-success" href="#"><i class="fa fa-check"></i>Terminar</a>
                                <l1 style="text-align: left;font-family: initial;"> para continuar. ¡Tú puedes! </l1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="minmaxCon"></div>



@section Style{
    <style>
        #tblCanales thead tr th, #tblFormasPago thead tr th {
            text-align: center;
        }

        #divBotones {
            /*position: relative;
            width: 100%;
            display: block;*/
        }
            /*.menu-compensador {
            position: relative;
            width: 100%;
            display: none;
        }*/
            #divBotones.fixed {
                /*z-index: 1000;
            position: fixed;*/
                /*top: 0;
            left: 0;
            right: 0;*/
            }
        /*.menu-compensador.fixed {
            display: block;
        }*/
    </style>
}

@section Script {
    <script>

        //var x = 0;
        //var campos_max = 15;
        //function add_field(TablaAsmeId) {

        //
        //    //var campos_max = 15;
        //    //var x = 0;
        //    if (x < campos_max) {
        //        $('#listasUnidad'+TablaAsmeId).append('<div class="remover_campo">\
        //                        <input type="text" class="form-control input-sm" style="width:30%; display:-webkit-inline-box" id="NombreLista" name="listaNombre[]" onkeydown="enterToTab(event);"> - <input type="text" class="form-control input-sm"  type="number" style="width:15%; display:-webkit-inline-box" id="NombreLista" name="listaCantidad[]" onkeydown="enterToTab(event);"> - <input type="text" class="form-control input-sm"  type="number" style="width:50%; display:-webkit-inline-box" id="NombreLista" name="listaSustento[]" onkeydown="enterToTab(event);"> \
        //                        <a href="#" class="remover_campo" onclick = "elimarcampo('+TablaAsmeId+');"><i class="fa fa-minus-circle fa-2x" style="color:#dd4b39" aria-hidden="true"></i></a>\
        //                        </div>'
        //                            );
        //        x++;
        //    }


        //}

        //// Remover o div anterior
        //function elimarcampo(TablaAsmeId) {
        //
        //    $('#listasUnidad'+TablaAsmeId).on("click", ".remover_campo", function (e) {
        //
        //            e.preventDefault();
        //            $(this).parent('div').remove();
        //            x--;
        //        });
        //}

        //var campos_max = 15;   //max de 10 campos

        //var x = 0;
        //$('#add_field').click(function (e) {
        //
        //    e.preventDefault();     //prevenir novos clicks
        //    if (x < campos_max) {
        //        $('#listasUnidad').append('<div>\
        //                        <input type="text" class="form-control input-sm" style="width:80%; display:-webkit-inline-box" id="NombreLista" name="listaNombre[]" onkeydown="enterToTab(event);"> - <input type="text" class="form-control input-sm"  type="number" style="width:15%; display:-webkit-inline-box" id="NombreLista" name="listaCantidad[]" onkeydown="enterToTab(event);"> \
        //                        <a href="#" class="remover_campo"><i class="fa fa-minus-circle fa-2x" style="color:#dd4b39" aria-hidden="true"></i></a>\
        //                        </div>'
        //                            );
        //        x++;
        //    }
        //});

        //// Remover o div anterior
        //$('#listasUnidad').on("click", ".remover_campo", function (e) {
        //    e.preventDefault();
        //    $(this).parent('div').remove();
        //    x--;
        //});


        sut.editProcedimiento = {



            SiguientePA: (Expediente, ExplorarNum) => {
                debugger;
                $.ajax({
                    type: "GET",
                    url: '@Url.Content("~/Simplificacion/Procedimiento/SiguientePA")',
                    data: { pExpediente: Expediente, pExplorarNum: ExplorarNum  },
                    cache: false,
                    beforeSend: () => {
                        sut.wait.modal('ventana-container');
                        $('#modal-ventana').modal('show');
                    },
                    success: (data) => {
                        debugger;
                        $('#modal-ventana').modal('hide');

                            if (data.estado == 0) {

                                sut.msg.msgUsuario('No existe PA para Avanzar', 'Alerta');
                            } else
                            {
                                //~/Simplificacion/Procedimiento / InformacionCiudadano /
                                window.location = '/Simplificacion/Procedimiento/InformacionCiudadano/' + data.estado;
                            }



                    },
                    error: (result) => {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    },
                    statusCode: {
                        203: () => { window.location.reload(); }
                    }
                });
            },

            AtrasPA: (Expediente, ExplorarNum) => {
                debugger;
                $.ajax({
                    type: "GET",
                    url: '@Url.Content("~/Simplificacion/Procedimiento/AtrasPA")',
                    data: { pExpediente: Expediente, pExplorarNum: ExplorarNum  },
                    cache: false,
                    beforeSend: () => {
                        sut.wait.modal('ventana-container');
                        $('#modal-ventana').modal('show');
                    },
                    success: (data) => {
                           debugger;
                        $('#modal-ventana').modal('hide');
                            if (data.estado == 0) {

                                sut.msg.msgUsuario('No existe PA para retroceder', 'Alerta');
                            } else
                            {
                                //~/Simplificacion/Procedimiento / InformacionCiudadano /
                                window.location = '/Simplificacion/Procedimiento/InformacionCiudadano/' + data.estado;
                            }
                    },
                    error: (result) => {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    },
                    statusCode: {
                        203: () => { window.location.reload(); }
                    }
                });
            },
            @*tab: '@Request.QueryString["tab"]',*@
            tab: '@ViewBag.TabValue',
            esProcEstadar: @Html.Raw(Model.TipoProcedimiento == TipoProcedimiento.Estandar ? "true" : "false") ,
            esCargaInicial: @MvcHtmlString.Create(ViewBag.EsCargaInicial ? "true" : "false") ,
            esTupaEstandar: @MvcHtmlString.Create(ViewBag.EsTupaEstandar ? "true" : "false") ,
            tipoplazo: @Html.Raw(ViewBag.listatipoplazo != null ? ViewBag.listatipoplazo : "[]"),
            esProcEstadarServicio: @Html.Raw(Model.TipoProcedimiento == TipoProcedimiento.EstandarServicio ? "true" : "false") ,


            Calificaciones: @Html.Raw(ViewBag.calificaciones != null ? ViewBag.calificaciones : "[]"),
            comboUndOrgCargos: function (index, id) {

                var cb = sut.string.format('<select class="form-control" name="ProcedimientoCargos[{0}].TipoReconPresent"  >', index);
                $.each(sut.editProcedimiento.tipoplazo, function (i, r) {
                    cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                });
                cb += '</select>';
                return cb;
            },
            comboUndOrgCargosresol: function (index, id) {
                var cb = sut.string.format('<select class="form-control" name="ProcedimientoCargos[{0}].TipoReconResol"  >', index);
                $.each(sut.editProcedimiento.tipoplazo, function (i, r) {
                    cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                });
                cb += '</select>';
                return cb;
            },
            comboUndOrgCargosApe: function (index, id) {

                var cb = sut.string.format('<select class="form-control" name="ProcedimientoCargosApe[{0}].TipoApelPresent"  >', index);
                $.each(sut.editProcedimiento.tipoplazo, function (i, r) {
                    cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                });
                cb += '</select>';
                return cb;
            },
            comboUndOrgCargosresolApe: function (index, id) {
                var cb = sut.string.format('<select class="form-control" name="ProcedimientoCargosApe[{0}].TipoApelResol"  >', index);
                $.each(sut.editProcedimiento.tipoplazo, function (i, r) {
                    cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                });
                cb += '</select>';
                return cb;
            },
            comboUndOrgCargosOtros: function (index, id) {

                var cb = sut.string.format('<select class="form-control" name="ProcedimientoCargosOtros[{0}].TipoOtrosPresent"  >', index);
                $.each(sut.editProcedimiento.tipoplazo, function (i, r) {
                    cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                });
                cb += '</select>';
                return cb;
            },
            comboUndOrgCargosresolOtros: function (index, id) {
                var cb = sut.string.format('<select class="form-control" name="ProcedimientoCargosOtros[{0}].TipoOtrosResol"  >', index);
                $.each(sut.editProcedimiento.tipoplazo, function (i, r) {
                    cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                });
                cb += '</select>';
                return cb;
            },


            comboCalificaciones: function (index, id) {
                var cb = sut.string.format('<select class="form-control" name="TablaAsme[{0}].Calificacion"  >', index);
                $.each(sut.editProcedimiento.Calificaciones, function (i, r) {
                    cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.Value, r.Text, r.Value == id ? 'selected' : '');
                });
                cb += '</select>';
                return cb;
            },
            detalleDes: function (id, cod) {
                $.ajax({
                    type: "GET",
                    //url: '/Simplificacion/Procedimiento/InformacionAdicionalACR',
                    url: '@Url.Content("~/Simplificacion/Procedimiento/InformacionAdicionalACR")',
                    data: { id: id,cod:cod },
                    cache: false,
                    beforeSend: function () {
                        sut.wait.modal('ventana-container');
                        $('#modal-ventana').modal('show');
                    },
                    success: function (data) {
                        $('#ventana-container').html(data);
                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });
            },
            visualizarSustento: function (evt, input) {
                debugger;
                var key = window.Event ? evt.which : evt.keyCode;
                var chark = String.fromCharCode(key);
                var tempValue = input.value + chark;
                var tempValue2 = tempValue.replace(input.value, "")
                var txt = $(evt.target);

                if (@ViewBag.PlazoAtenciongrabado != 0) {
                    var tempValue3 = tempValue.replace(@ViewBag.PlazoAtenciongrabado, "")
                } else {

                var tempValue3 = tempValue.replace(@ViewBag.PlazoAtencionEstandar, "")
                }




                var valor = txt.val();
                if ('@Model.TipoProcedimiento' == '@TipoProcedimiento.Estandar' || '@Model.TipoProcedimiento' == '@TipoProcedimiento.EstandarServicio') {


                    if (parseInt(tempValue3) >= parseInt(@ViewBag.PlazoAtencionEstandar) ) {
                        window.setTimeout

                        showNotification('top', 'right', 'El dato Ingresado no puede ser mayor que el dato actual', 2);

                        setTimeout("reFresh()", 100);

                        return;
                    }
                }



                //if (tempValue>30){
                //    $("#idplazoantencion").css("display", "block");
                //}else{
                //    $("#idplazoantencion").css("display", "none");
                //}

            },
            visualizarSustentovisualiar: function (evt,input) {
                var key = window.Event ? evt.which : evt.keyCode;
                var chark = String.fromCharCode(key);
                var tempValue = input.value + chark;

                var txt = $(evt.target);
                var valor = txt.val();

                //if (tempValue>30){
                //    $("#idplazoantencion").css("display", "block");
                //}else{
                //    $("#idplazoantencion").css("display", "none");
                //}

            },
            visualizarFecharenovacion: function (evt,input) {
                var estado=$("#Renovacio").val();
                if (estado==1){
                    $("#idfecharenova").css("display", "block");
                }else{
                    $("#idfecharenova").css("display", "none");
                }
            },


            camposNoRequerido: function () {
                debugger
                var lista = $("input[norequired=True]");
                var countCamposVacias = 0;

                $.each(lista, function () {
                    if ($(this).val() === "") {
                        $(this).css({ "border-color": "#e4e423", "border-width": "3px" });
                        countCamposVacias += 1;
                    }
                });

                if (countCamposVacias > 0) {
                    //sut.msg.CamposVacios("Hay campos en blanco, desea continuar con el registro", function () {
                    sut.msg.CamposVacios("Desea guardar el registro", function () {

                        sut.editProcedimiento.guardar(false)
                    });
                }
                else {
                    sut.editProcedimiento.guardar(false)
                }
            },
            openSelectUndOrg: function (fnAdd) {
                $.ajax({
                    type: "GET",
                    //url: '/Simplificacion/UnidadOrganica/Select',
                    url: '@Url.Content("~/Simplificacion/UnidadOrganica/Select")',
                    data: { multi: false, fnAdd: fnAdd },
                    cache: false,
                    beforeSend: function () {
                        sut.wait.modal('ventana-container');
                        $('#modal-ventana').modal('show');
                    },
                    success: function (data) {
                        $('#ventana-container').html(data);
                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });
            },
            deleteunidadorg : function(Tipo){
                $.ajax({
                    type: "POST",
                    //url: '/Simplificacion/Expediente/EditarExpediente',
                    url: '@Url.Content("~/Simplificacion/procedimiento/deleteunidadorg")',
                    data: { tipo: Tipo, id: @Model.ProcedimientoId},
                    cache: false,
                    beforeSend: function () {
                        sut.wait.modal('ventana-container');
                        $('#modal-ventana').modal('show');
                    },
                    success: function (data) {

                        if(data=="False")
                        {
                            showNotification('top', 'right', 'No Existe Información', 2);
                            return;
                        }
                        window.location.reload();
                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });
            },


            openSelectUndOrgDinamico: function (fnAdd,tipo,num) {

                $.ajax({
                    type: "GET",
                    //url: '/Simplificacion/UnidadOrganica/Select',
                    url: '@Url.Content("~/Simplificacion/UnidadOrganica/Select")',
                    data: { multi: false, fnAdd: fnAdd, tipo: tipo, num: num },
                    cache: false,
                    beforeSend: function () {
                        sut.wait.modal('ventana-container');
                        $('#modal-ventana').modal('show');
                    },
                    success: function (data) {
                        $('#ventana-container').html(data);
                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });
            },
            openSelectUndOrgDinamicoApelacion: function (fnAdd,tipo,num) {
                $.ajax({
                    type: "GET",
                    //url: '/Simplificacion/UnidadOrganica/Select',
                    url: '@Url.Content("~/Simplificacion/UnidadOrganica/Select")',
                    data: { multi: false, fnAdd: fnAdd, tipo: tipo, num: num },
                    cache: false,
                    beforeSend: function () {
                        sut.wait.modal('ventana-container');
                        $('#modal-ventana').modal('show');
                    },
                    success: function (data) {
                        $('#ventana-container').html(data);
                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });
            },
            openSelectUndOrgDinamicoOtros: function (fnAdd,tipo,num) {
                $.ajax({
                    type: "GET",
                    //url: '/Simplificacion/UnidadOrganica/Select',
                    url: '@Url.Content("~/Simplificacion/UnidadOrganica/Select")',
                    data: { multi: false, fnAdd: fnAdd, tipo: tipo, num: num },
                    cache: false,
                    beforeSend: function () {
                        sut.wait.modal('ventana-container');
                        $('#modal-ventana').modal('show');
                    },
                    success: function (data) {
                        $('#ventana-container').html(data);
                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });
            },
            setUndOrgResp: function (data) {
                $('#modal-ventana').modal('hide');
                $('input[name="UndOrgResponsableId"]').val(data.id);
                $('input[name="UndOrgResponsable.Nombre"]').val(data.nombre);
            },
            setUndOrgRecon: function (data) {
                $('#modal-ventana').modal('hide');
                $('input[name="UndOrgReconsideracionId"]').val(data.id);
                $('input[name="UndOrgReconsideracion.Nombre"]').val(data.nombre);
            },
            setUndOrgReconDinamico: function (data) {
                $('#modal-ventana').modal('hide');
                $('input[name="ProcedimientoCargos['+data.num+'].UndOrgId"]').val(data.id);
                $('input[name="UndOrgReconsideracion['+data.num+'].Nombre"]').val(data.nombre);
            },
            setUndOrgReconDinamicoApelacion: function (data) {
                $('#modal-ventana').modal('hide');
                $('input[name="ProcedimientoCargosApe['+data.num+'].UndOrgIdApe"]').val(data.id);
                $('input[name="UndOrgReconsideracionApelacion['+data.num+'].Nombre"]').val(data.nombre);
            },
            setUndOrgReconDinamicoOtros: function (data) {
                $('#modal-ventana').modal('hide');
                $('input[name="ProcedimientoCargosOtros['+data.num+'].UndOrgIdOtros"]').val(data.id);
                $('input[name="UndOrgOtros['+data.num+'].Nombre"]').val(data.nombre);
            },
            setUndOrgApel: function (data) {
                $('#modal-ventana').modal('hide');
                $('input[name="UndOrgApelacionId"]').val(data.id);
                $('input[name="UndOrgApelacion.Nombre"]').val(data.nombre);
            },
            setUndOrgPres: function (data) {
                $('#modal-ventana').modal('hide');
                $('input[name="UndOrgPresentDocumentacionId"]').val(data.id);
                $('input[name="UndOrgPresentDocumentacion.Nombre"]').val(data.nombre);
            },
            setUndOrgOtros: function (data) {
                $('#modal-ventana').modal('hide');
                $('input[name="UndOrgIdOtros"]').val(data.id);
                $('input[name="UndOrgOtros.Nombre"]').val(data.nombre);
            },
            salir: function (expediente) {

                sut.msg.salir('¿Desea guardar los cambios efectuados?'
                    , function (d) {
                        sut.editProcedimiento.guardar(true).then(function () {
                            window.location = expediente;
                        });
                    }, function () {
                        $(location).attr('href', expediente);

                    });
            },

            Sede: {
                openSelect: function () {
                    $.ajax({
                        type: "GET",
                        //url: '/Simplificacion/Sede/Select',
                        url: '@Url.Content("~/Simplificacion/Sede/Select")',
                        data: { multi: true, fnAdd: 'sut.editProcedimiento.Sede.add' },
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {
                            $('#ventana-container').html(data);
                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                },
                init: function () {
                    var lista = @Html.Raw(ViewBag.ListaSede != null ? ViewBag.ListaSede : "[]");
                    if (lista.length > 0) {
                        var data = [];
                        $.each(lista, function (i, r) {
                            data.push({
                                SedeId: r.SedeId,
                                Nombre: r.Nombre,
                                Direccion: r.Direccion,
                                Horario: r.Horario,
                                SedeUnidadOrganica: r.SedeUnidadOrganica
                            });
                        });
                        sut.editProcedimiento.Sede.generar(data);
                    }
                },
                add: function (data) {
                    $('#modal-ventana').modal('hide');
                    $.each(data, function (i, r) {

                    });
                    sut.editProcedimiento.Sede.generar(data);
                },
                generar: function (data) {

                    if (data.length > 0) {
                        var tabla = $('#tblSede tbody');
                        var num = Number(tabla.parent().data('cant'));
                        var rows = '';

                        var concatLstOrganica = "";

                        $.each(data, function (i, d) {
                            var r = null;
                            $.each($('#tblSede tbody tr td input[name$="SedeId"]'), function (index, er) {
                                if (Number($(er).val()) == d.SedeId) r = er;
                            });

                            var UO = ""
                            $.each(d.SedeUnidadOrganica, function (i,v) {
                                UO += v + ";:;";
                            })

                            if (r == null) {
                                rows += '<tr>';
                                rows += sut.string.format('<td><span>{0}</span><input type="hidden" name="ProcedimientoSede[{1}].SedeId" value="{2}" data-unidadorganica="{3}" /></td>', num + 1, num, d.SedeId, d.ListaUndOrganica);
                                rows += sut.string.format('<td>{0}<br />{1}<br />{2}<br />{3}</td>', d.Nombre || '', d.Direccion || '', d.Horario || '', UO ||  '');
                                rows += '<td><div class="btn-group">';
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Sede.delete({0})" ><i class="fa fa-close" ></i></a>', d.SedeId);
                                }
                                rows += '</div></td>';
                                rows += '</tr>';
                                num++;
                            }

                            concatLstOrganica += d.ListaUndOrganica + ";:;";

                        });

                        $.each($("#tblCanales tbody tr"), function (i, v) {

                            var c = $(this).find("input:checkbox");
                            var t = $(this).find("input:text");

                            if ($(c).attr("oficinaAutocompletar") === "1") {
                                if (!$(c).is(":checked")) {
                                    $(t).val(concatLstOrganica);
                                    $(c).prop("checked", true);
                                }
                            }

                        });

                        tabla.append(rows);
                        tabla.parent().data('cant', tabla.find('tr').size());
                    }
                },
                delete: function (id) {
                    //sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                    var num = 1;
                    $.each($('#tblSede tbody tr'), function (index, tr) {
                        var SedeId = Number($(tr).find('td input[name$="SedeId"]').val());
                        if (SedeId == id) $(tr).remove();
                    });
                    $('#tblSede').data('cant', $('#tblSede tbody tr').size());
                    sut.editProcedimiento.Sede.update();
                    //});
                },
                update: function () {

                    var concatLstOrganica = "";

                    $.each($('#tblSede tbody tr'), function (i, tr) {
                        $(tr).find('td span').html(i + 1);
                        $(tr).find('td input[name$="SedeId"]').attr('name', sut.string.format('ProcedimientoSede[{0}].SedeId', i))


                        concatLstOrganica += $(tr).find('td input[name$="SedeId"]').attr('data-unidadorganica');

                    });


                    $.each($("#tblCanales tbody tr"), function (i, v) {

                        var c = $(this).find("input:checkbox");
                        var t = $(this).find("input:text");


                        if (concatLstOrganica === "") {

                            if ($(c).attr("original") !== "1") {
                                if ($(c).attr("oficinaAutocompletar") === "1") {

                                    $(t).val(concatLstOrganica);
                                    $(c).prop("checked", false);

                                }
                            }
                        } else {
                            if ($(c).attr("original") !== "1") {
                                if ($(c).attr("oficinaAutocompletar") === "1") {

                                    $(t).val(concatLstOrganica);
                                    $(c).prop("checked", true);
                                }
                            }
                        }
                    });
                }
            },

            Nota: {
                tipos: @Html.Raw(ViewBag.TipoNota != null ? ViewBag.TipoNota : "[]"),
                comboTipo: function (index, id) {
                    var cb = sut.string.format('<select class="form-control" name="NotaCiudadano[{0}].TipoNotaId" >', index);
                    $.each(sut.editProcedimiento.Nota.tipos, function (i, r) {
                        cb += sut.string.format('<option value="{0}" {2}>{1}</option>', r.MetaDatoId, r.Nombre, r.MetaDatoId == id ? 'selected' : '');
                    });
                    cb += '</select>';
                    return cb;
                },
                init: function () {
                    var lista = @Html.Raw(ViewBag.ListaNota != null ? ViewBag.ListaNota : "[]");
                    var tabla = $('#tblNota tbody');

                    if (lista.length > 0) {
                        var data = [];
                        $.each(lista, function (i, r) {
                            var rows = '';
                            rows += '<tr>';
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += sut.string.format('<input type="hidden" name="NotaCiudadano[{0}].NotaCiudadanoId" value="{1}" />', i, r.NotaCiudadanoId);
                            rows += sut.string.format('<input type="hidden" name="NotaCiudadano[{0}].Orden" value="{1}" />', i, i + 1);
                            rows += '</td>';
                            rows += sut.string.format('<td>{0}</td>', sut.editProcedimiento.Nota.comboTipo(i, r.TipoNotaId));
                            rows += sut.string.format('<td><textarea name="NotaCiudadano[{0}].Nota" class="form-control" required >{1}</textarea></td>', i, r.Nota || '');
                            rows += '<td><div class="btn-group">';
                            if ("@user.rolmenu[0].Eliminar" == "True"){
                                rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Nota.delete({0})" ><i class="fa fa-close" ></i></a>', r.NotaCiudadanoId);
                            }
                            rows += '</div></td>';
                            rows += '</tr>';

                            tabla.append(rows);
                        });
                    }
                },
                add: function () {
                    var tabla = $('#tblNota tbody');
                    var rows = '';
                    rows += '<tr>';
                    rows += '<td>';
                    rows += '<span>0</span>';
                    rows += '<input type="hidden" name="NotaCiudadano[0].NotaCiudadanoId" value="0" />';
                    rows += '<input type="hidden" name="NotaCiudadano[0].Orden" value="0" />';
                    rows += '</td>';
                    rows += sut.string.format('<td>{0}</td>', sut.editProcedimiento.Nota.comboTipo(0, 0));
                    rows += sut.string.format('<td><textarea name="NotaCiudadano[0].Nota" class="form-control" required></textarea></td>', '');
                    rows += '<td><div class="btn-group">';
                    if ("@user.rolmenu[0].Eliminar" == "True"){
                        rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Nota.delete({0})" ><i class="fa fa-close" ></i></a>', 0);
                    }
                    rows += '</div></td>';
                    rows += '</tr>';

                    tabla.append(rows);
                    sut.editProcedimiento.Nota.update();
                },
                delete: function (id) {
                    //sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                    var num = 1;
                    $.each($('#tblNota tbody tr'), function (index, tr) {
                        var NotaCiudadanoId = Number($(tr).find('td input[name$="NotaCiudadanoId"]').val());
                        if (NotaCiudadanoId == id) $(tr).remove();
                    });
                    sut.editProcedimiento.Nota.update();
                    //});
                },
                update: function () {
                    $.each($('#tblNota tbody tr'), function (i, tr) {
                        $(tr).find('td span').html(i + 1);
                        $(tr).find('td input[name$="NotaCiudadanoId"]').attr('name', sut.string.format('NotaCiudadano[{0}].NotaCiudadanoId', i)).val(i + 1)
                        $(tr).find('td input[name$="Orden"]').attr('name', sut.string.format('NotaCiudadano[{0}].Orden', i)).val(i + 1)
                        $(tr).find('td textarea[name$="Nota"]').attr('name', sut.string.format('NotaCiudadano[{0}].Nota', i))
                        $(tr).find('td select[name$="TipoNotaId"]').attr('name', sut.string.format('NotaCiudadano[{0}].TipoNotaId', i))
                        $(tr).find('td div a').attr('href', sut.string.format('javascript:sut.editProcedimiento.Nota.delete({0})', i + 1));
                    });
                }
            },
            PasoSeguir: {
                init: function () {
                    var lista = @Html.Raw(ViewBag.ListaPasoSeguir != null ? ViewBag.ListaPasoSeguir : "[]");
                    var tabla = $('#tblPasoSeguir tbody');

                    if (lista.length > 0) {
                        var data = [];
                        $.each(lista, function (i, r) {
                            var rows = '';
                            rows += '<tr>';
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += sut.string.format('<input type="hidden" name="PasoSeguir[{0}].PasoSeguirId" value="{1}" />', i, r.PasoSeguirId);
                            rows += '</td>';
                            rows += sut.string.format('<td><textarea name="PasoSeguir[{0}].Descripcion" class="form-control" required >{1}</textarea></td>', i, r.Descripcion || '');
                            rows += '<td><div class="btn-group">';
                            if ("@user.rolmenu[0].Eliminar" == "True"){
                                rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.PasoSeguir.delete({0})" ><i class="fa fa-close" ></i></a>', r.PasoSeguirId);
                            }
                            rows += '</div></td>';
                            rows += '</tr>';

                            tabla.append(rows);
                        });
                    }
                },
                add: function () {
                    var tabla = $('#tblPasoSeguir tbody');
                    var rows = '';
                    rows += '<tr>';
                    rows += '<td>';
                    rows += '<span>0</span>';
                    rows += '<input type="hidden" name="PasoSeguir[0].PasoSeguirId" value="0" />';
                    rows += '</td>';
                    rows += sut.string.format('<td><textarea name="PasoSeguir[0].Descripcion" class="form-control" required ></textarea></td>', '');
                    rows += '<td><div class="btn-group">';
                    if ("@user.rolmenu[0].Eliminar" == "True"){
                        rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.PasoSeguir.delete({0})" ><i class="fa fa-close" ></i></a>', 0);
                    }
                    rows += '</div></td>';
                    rows += '</tr>';

                    tabla.append(rows);
                    sut.editProcedimiento.PasoSeguir.update();
                },
                delete: function (id) {
                    //sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                    var num = 1;
                    $.each($('#tblPasoSeguir tbody tr'), function (index, tr) {
                        var PasoSeguirId = Number($(tr).find('td input[name$="PasoSeguirId"]').val());
                        if (PasoSeguirId == id) $(tr).remove();
                    });
                    sut.editProcedimiento.PasoSeguir.update();
                    //});
                },
                update: function () {
                    $.each($('#tblPasoSeguir tbody tr'), function (i, tr) {
                        $(tr).find('td span').html(i + 1);
                        $(tr).find('td input[name$="PasoSeguirId"]').attr('name', sut.string.format('PasoSeguir[{0}].PasoSeguirId', i)).val(i + 1);
                        $(tr).find('td textarea[name$="Descripcion"]').attr('name', sut.string.format('PasoSeguir[{0}].Descripcion', i));
                        $(tr).find('td div a').attr('href', sut.string.format('javascript:sut.editProcedimiento.PasoSeguir.delete({0})', i + 1));
                    });
                }
            },
            Cargos : {
                init: function () {

                    var lista = @Html.Raw(ViewBag.ListaProcedimientoCargos != null ? ViewBag.ListaProcedimientoCargos : "[]");
                    var listaobservaciones = @Html.Raw(ViewBag.ListaObservacionCargos != null ? ViewBag.ListaObservacionCargos : "[]");
                    var tabla = $('#tablaReconsideracion1 tbody');
                    var num = 1;
                    if (lista.length > 0) {
                        var data = [];
                        $.each(lista, function (i, r) {

                            num = i ;
                            var rows = '';

                            if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {

                                rows += sut.string.format('<tr data-index="{0}" >', num);
                                rows += '<td colspan="5">';
                                rows += '<div class="form-group">';
                                rows += '<div class="col-sm-10 col-xs-12">';

                                if (@obs.Count != 0) {
                                    for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {
                                        if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {
                                            if (listaobservaciones[Mi].CodValidacion == "2") {
                                                rows += sut.string.format('<a class="btn btn-warning btn-xs"  id="aSustentarObservarExpModalidad' + num + '"   data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExpModalidad({0});"><i class="fa fa-pencil-square-o"></i></a>',num);
                                                rows += sut.string.format('<a class="btn btn-primary btn-xs" style="display:none"  id="aGuardarSustentarExpModalidad' + num + '" data-placement="right" title="Guardar Sustento"   href="javascript:sut.editProcedimiento.guardarSustentarExpModalidad({0},{1},{2},{3});"><i class="fa fa-floppy-o"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                                rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none"  id="aCancelarSustentarExpModalidad' + num + '" data-placement="right" title="Quitar Sustento"    href="javascript:sut.editProcedimiento.CancelarSustentarExpModalidad({0},{1},{2},{3});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                            }
                                        }
                                    }
                                }


                                rows += '<label id="mensajeModalidad' + num + '" class="label-primary label" style="font-size: 100%;font-weight: normal;"></label>';
                                rows += '</div>';
                                rows += '</div>';
                                rows += '<table id="divModalidad0' + num + '" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">';
                                rows += '<tbody></tbody>';
                                rows += '</table>';
                                rows += '</td>';
                                rows += '</tr>';
                            }



                            var rows = '';
                            rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                            rows += '<td>';
                            rows += '<div class="btn-group">';

                            if ("@user.rolmenu[0].Eliminar" == "True"){
                                rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Cargos.deleteReconsideracion({0},{1},{2})" ><i class="fa fa-close" ></i></a>', r.ProcedimientoCargosID,r.ProcedimientoId,r.orden);
                            }

                            rows += '</div>';
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].ProcedimientoCargosID" value="{1}" />', i, r.ProcedimientoCargosID);
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].ProcedimientoId" value="{1}" />', i, r.ProcedimientoId);
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].orden" value="{0}" />', i+1, r.ProcedimientoId);
                            rows += '</td>';
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += '</td>';

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].Cargo" value="{1}" class="form-control" />', i, r.Cargo);
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td style="text-align: center;">');
                            rows += sut.string.format('<div class="input-group">');
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].UndOrgId" value="{1}" />', i, r.UndOrgId);
                            rows += sut.string.format('<input type="text" name="UndOrgReconsideracion[{0}].Nombre" value="{1}" class="form-control" readonly />', i, r.NombreUndOrg);
                            rows += sut.string.format('<div class="input-group-btn">');
                            rows += sut.string.format('<a href="javascript:sut.editProcedimiento.openSelectUndOrgDinamico'+"('"+'sut.editProcedimiento.setUndOrgReconDinamico'+"',1,{0})"+'" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>', i, 0);
                            rows += sut.string.format('</div>');
                            rows += sut.string.format('</div>');
                            rows += sut.string.format('</td>');


                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].PzoPresent" value="{1}" class="form-control" type = "number" />', i, r.PzoPresent);
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargos(i, r.TipoReconPresent));
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].PzoResol" value="{1}" class="form-control" type = "number" />', i, r.PzoResol);
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosresol(i, r.TipoReconResol));
                            rows += sut.string.format('</td>');


                            @*rows += '<td><div class="btn-group">';
                            if (i > 0) {
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                }
                            }
                            rows += '</div></td>';*@
                            rows += '</tr>';


                            tabla.append(rows);



                            if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {
                                if (@obs.Count != 0) {
                                    var cont1 = 0;
                                    var texto1 = "";


                                    for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {


                                        if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {

                                            if (listaobservaciones[Mi].CodValidacion == "1") {
                                                texto1 = listaobservaciones[Mi].Descripcion;
                                                cont1 = 1;
                                            }
                                            else if (listaobservaciones[Mi].CodValidacion == "4") {


                                                valiarbotonesModalidad('Modalidad', i);
                                                $("#mensajeModalidad" + i).show();
                                                document.querySelector("#mensajeModalidad" + i).innerText = 'Se valido con éxito';

                                            }
                                            else if (listaobservaciones[Mi].CodValidacion == "2") {
                                                sut.editProcedimiento.textoobservacionModalidad("" + texto1 + "", "" + listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i,lista.length);
                                            }

                                            else if (listaobservaciones[Mi].CodValidacion == "5") {

                                                canceladobotonesModalidad('Modalidad', i);

                                            }
                                            else if (listaobservaciones[Mi].CodValidacion == "3") {

                                                sustentobotonesModalidad('Modalidad', i);
                                                $("#mensajeModalidad" + i).show();
                                                document.querySelector("#mensajeModalidad" + i).innerText = 'Se refuto con éxito';
                                                sut.editProcedimiento.textosustentoModalidad(listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i);

                                            }
                                        }
                                        else
                                        {
                                            //canceladobotonesModalidadsustento('Modalidad', i);
                                        }
                                    }

                                }

                            }


                        });
                        sut.editProcedimiento.Cargos.updateReconsideracion();

                    }
                },
                addReconsideracion: (indexReq, indexForm,TablaAsmeId,ProcedimientoId) => {


                    var tabla = $('#tablaReconsideracion1 tbody').eq(0);


                    //var i = tabla.children('tr').size();
                    var i = $('#tablaReconsideracion1 tbody').eq(0).children('tr.requisito').size();

                    var rows = '';
                    rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                    rows += '<td>';
                    //rows += sut.string.format('<span>{0}</span>', i + 1);

                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].ProcedimientoCargosID" value="{1}" />', i, 0);
                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].orden" value="{1}" />', i, i+1);
                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].ProcedimientoId" value="{1}" />', i, @Model.ProcedimientoId);
                    rows += '</td>';
                    rows += '<td>';
                    rows += sut.string.format('<span>Reconsideración{0}</span>', i + 1);
                    rows += '</td>';

                    rows += sut.string.format('<td>');
                    rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].Cargo" value="{1}" class="form-control" />', i, '');
                    rows += sut.string.format('</td>');

                    rows += sut.string.format('<td style="text-align: center;">');
                    rows += sut.string.format('<div class="input-group">');
                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargos[{0}].UndOrgId" value="{1}" />', i, 0);
                    rows += sut.string.format('<input type="text" name="UndOrgReconsideracion[{0}].Nombre" value="{1}" class="form-control" readonly />', i, '');
                    rows += sut.string.format('<div class="input-group-btn">');
                    rows += sut.string.format('<a href="javascript:sut.editProcedimiento.openSelectUndOrgDinamico'+"('"+'sut.editProcedimiento.setUndOrgReconDinamico'+"',1,{0})"+'" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>', i, 0);
                    rows += sut.string.format('</div>');
                    rows += sut.string.format('</div>');
                    rows += sut.string.format('</td>');


                    rows += sut.string.format('<td>');
                    rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].PzoPresent" value="{1}" class="form-control" type = "number" />', i, '');
                    rows += sut.string.format('</td>');

                    rows += sut.string.format('<td>');
                    rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargos(i, 0));
                    rows += sut.string.format('</td>');

                    rows += sut.string.format('<td>');
                    rows += sut.string.format('<input type="text" name="ProcedimientoCargos[{0}].PzoResol" value="{1}" class="form-control" type = "number" />', i, '');
                    rows += sut.string.format('</td>');

                    rows += sut.string.format('<td>');
                    rows += sut.string.format('{0}',  sut.editProcedimiento.comboUndOrgCargosresol(i, 0));
                    rows += sut.string.format('</td>');


                    @*rows += '<td><div class="btn-group">';
                    if (i > 0) {
                        if ("@user.rolmenu[0].Eliminar" == "True"){
                            rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                        }
                    }
                    rows += '</div></td>';*@
                    rows += '</tr>';


                    tabla.append(rows);
                    sut.editProcedimiento.Cargos.updateReconsideracion();
                    //sut.editProcedimiento.Cargos.addApelacion();
                    //sut.editProcedimiento.guardarReconsideracion(true);
                },
                deleteReconsideracion: function (id,procedimiento,num) {

                    var model = {
                        ProcedimientoCargosID: id,
                        ProcedimientoID: procedimiento,
                        orden: num
                    }

                    $.ajax({
                        //url: "/Simplificacion/UnidadOrganica/Eliminar",
                        url: '@Url.Content("~/Simplificacion/Procedimiento/EliminarReconsideracion")',
                        type: "POST",
                        data: model,
                        dataType: "json",
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {
                            sut.wait.removeOverlay('#boxLista');
                            showNotification('top', 'right', 'Elimino con Éxito ', 1);
                            window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = @Model.ProcedimientoId })' + '?tab=edit-info-basica';
                        },
                        error: function (data) {

                            $('#modal-ventana').modal('hide');
                            //sut.wait.removeOverlay('#boxLista');
                            ////sut.error.show('mensajes', data.responseText);
                            //sut.error.show('mensajes',"Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ");
                            showNotification('top', 'right', 'Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ', 2);
                        }
                    });

                },
                updateReconsideracion: function () {

                    var cont = 0;
                    $.each($('#tablaReconsideracion1 tbody tr.requisito'), function (i, tr) {
                        $(tr).data('index', i);
                        $(tr).find('td span').html(i + 1);
                        $(tr).find('td input[name$="ProcedimientoCargosID"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].ProcedimientoCargosID', i));
                        $(tr).find('td input[name$="Cargo"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].Cargo', i));
                        $(tr).find('td input[name$="UndOrgId"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].UndOrgId', i));
                        $(tr).find('td input[name$="PzoPresent"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].PzoPresent', i));
                        $(tr).find('td input[name$="PzoResol"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].PzoResol', i));
                        $(tr).find('td input[name$="Tipo"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].Tipo', i));
                        $(tr).find('td input[name$="orden"]').attr('name', sut.string.format('ProcedimientoCargos[{0}].orden', i));
                    });
                },
                initApelacion: function () {


                    var lista = @Html.Raw(ViewBag.ListaProcedimientoCargosApe != null ? ViewBag.ListaProcedimientoCargosApe : "[]");
                    var listaobservaciones = @Html.Raw(ViewBag.ListaObservacionCargosApe != null ? ViewBag.ListaObservacionCargosApe : "[]");
                    var tabla = $('#tablaApelacion1 tbody');
                    var num = 1;
                    if (lista.length > 0) {
                        var data = [];
                        $.each(lista, function (i, r) {

                            num = i ;
                            var rows = '';

                            if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {

                                rows += sut.string.format('<tr data-index="{0}" >', num);
                                rows += '<td colspan="5">';
                                rows += '<div class="form-group">';
                                rows += '<div class="col-sm-10 col-xs-12">';

                                if (@obs.Count != 0) {
                                    for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {
                                        if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {
                                            if (listaobservaciones[Mi].CodValidacion == "2") {
                                                rows += sut.string.format('<a class="btn btn-warning btn-xs"  id="aSustentarObservarExpModalidad' + num + '"   data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExpModalidad({0});"><i class="fa fa-pencil-square-o"></i></a>',num);
                                                rows += sut.string.format('<a class="btn btn-primary btn-xs" style="display:none"  id="aGuardarSustentarExpModalidad' + num + '" data-placement="right" title="Guardar Sustento"   href="javascript:sut.editProcedimiento.guardarSustentarExpModalidad({0},{1},{2},{3});"><i class="fa fa-floppy-o"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                                rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none"  id="aCancelarSustentarExpModalidad' + num + '" data-placement="right" title="Quitar Sustento"    href="javascript:sut.editProcedimiento.CancelarSustentarExpModalidad({0},{1},{2},{3});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                            }
                                        }
                                    }
                                }


                                rows += '<label id="mensajeModalidad' + num + '" class="label-primary label" style="font-size: 100%;font-weight: normal;"></label>';
                                rows += '</div>';
                                rows += '</div>';
                                rows += '<table id="divModalidad0' + num + '" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">';
                                rows += '<tbody></tbody>';
                                rows += '</table>';
                                rows += '</td>';
                                rows += '</tr>';
                            }



                            var rows = '';
                            rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                            rows += '<td>';
                            //rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += '<div class="btn-group">';

                            if ("@user.rolmenu[0].Eliminar" == "True"){
                                rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Cargos.deleteApelacion({0})" ><i class="fa fa-close" ></i></a>', r.ProcedimientoCargosApeID);
                            }
                            rows += '</div>';
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].ProcedimientoCargosApeID" value="{1}" />', i, r.ProcedimientoCargosApeID);
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].ProcedimientoId" value="{1}" />', i, r.ProcedimientoId);
                            rows += '</td>';
                            rows += '<td>';
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].ordenape" value="{1}" />',i, i + 1);
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += '</td>';

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargosApe[{0}].CargoApe" value="{1}" class="form-control" />', i, r.CargoApe);
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td style="text-align: center;">');
                            rows += sut.string.format('<div class="input-group">');
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].UndOrgIdApe" value="{1}" />', i, r.UndOrgIdApe);
                            rows += sut.string.format('<input type="text" name="UndOrgReconsideracionApelacion[{0}].Nombre" value="{1}" class="form-control" readonly />', i, r.NombreUndOrgApe);
                            rows += sut.string.format('<div class="input-group-btn">');
                            rows += sut.string.format('<a href="javascript:sut.editProcedimiento.openSelectUndOrgDinamicoApelacion'+"('"+'sut.editProcedimiento.setUndOrgReconDinamicoApelacion'+"',1,{0})"+'" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>', i, 0);
                            rows += sut.string.format('</div>');
                            rows += sut.string.format('</div>');
                            rows += sut.string.format('</td>');


                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargosApe[{0}].PzoPresentApe" value="{1}" class="form-control" type = "number" />', i, r.PzoPresentApe);
                            rows += sut.string.format('</td>');
                            rows += sut.string.format('<td>');
                            rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosApe(i,  r.TipoApelPresent));
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargosApe[{0}].PzoResolApe" value="{1}" class="form-control" type = "number" />', i, r.PzoResolApe);
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosresolApe(i,  r.TipoApelResol));
                            rows += sut.string.format('</td>');


                            @*rows += '<td><div class="btn-group">';
                            if (i > 0) {
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                }
                            }
                            rows += '</div></td>';*@
                            rows += '</tr>';


                            tabla.append(rows);



                            if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {
                                if (@obs.Count != 0) {
                                    var cont1 = 0;
                                    var texto1 = "";


                                    for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {


                                        if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {

                                            if (listaobservaciones[Mi].CodValidacion == "1") {
                                                texto1 = listaobservaciones[Mi].Descripcion;
                                                cont1 = 1;
                                            }
                                            else if (listaobservaciones[Mi].CodValidacion == "4") {


                                                valiarbotonesModalidad('Modalidad', i);
                                                $("#mensajeModalidad" + i).show();
                                                document.querySelector("#mensajeModalidad" + i).innerText = 'Se valido con éxito';

                                            }
                                            else if (listaobservaciones[Mi].CodValidacion == "2") {
                                                sut.editProcedimiento.textoobservacionModalidad("" + texto1 + "", "" + listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i,lista.length);
                                            }

                                            else if (listaobservaciones[Mi].CodValidacion == "5") {

                                                canceladobotonesModalidad('Modalidad', i);

                                            }
                                            else if (listaobservaciones[Mi].CodValidacion == "3") {

                                                sustentobotonesModalidad('Modalidad', i);
                                                $("#mensajeModalidad" + i).show();
                                                document.querySelector("#mensajeModalidad" + i).innerText = 'Se refuto con éxito';
                                                sut.editProcedimiento.textosustentoModalidad(listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i);

                                            }
                                        }
                                        else
                                        {
                                            canceladobotonesModalidadsustento('Modalidad', i);
                                        }
                                    }

                                }

                            }


                        });
                        sut.editProcedimiento.Cargos.updateApelacion();

                    }
                },
                addApelacion: (indexReq, indexForm,TablaAsmeId,ProcedimientoId) => {
                    var tabla = $('#tablaApelacion1 tbody').eq(0);



                    //var i = tabla.children('tr').size();
                    var i = $('#tablaApelacion1 tbody').eq(0).children('tr.requisito').size();

                    var rows = '';
                    rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                    rows += '<td>';
                    //rows += sut.string.format('<span>{0}</span>', i + 1);
                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].ProcedimientoCargosApeID" value="{1}" />', i, 0);
                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].ProcedimientoId" value="{1}" />', i, @Model.ProcedimientoId);
                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].ordenape" value="{1}" />', i,i+1);
                    rows += '</td>';
                    rows += '<td>';
                    rows += sut.string.format('<span>{0}</span>', i + 1);
                    rows += '</td>';

                    rows += sut.string.format('<td>');
                    rows += sut.string.format('<input type="text" name="ProcedimientoCargosApe[{0}].CargoApe" value="{1}" class="form-control" />', i, '');
                    rows += sut.string.format('</td>');

                    rows += sut.string.format('<td style="text-align: center;">');
                    rows += sut.string.format('<div class="input-group">');
                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosApe[{0}].UndOrgIdApe" value="{1}" />', i, 0);
                    rows += sut.string.format('<input type="text" name="UndOrgReconsideracionApelacion[{0}].Nombre" value="{1}" class="form-control" readonly />', i, '');
                    rows += sut.string.format('<div class="input-group-btn">');
                    rows += sut.string.format('<a href="javascript:sut.editProcedimiento.openSelectUndOrgDinamicoApelacion'+"('"+'sut.editProcedimiento.setUndOrgReconDinamicoApelacion'+"',2,{0})"+'" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>', i, 0);
                    rows += sut.string.format('</div>');
                    rows += sut.string.format('</div>');
                    rows += sut.string.format('</td>');


                    rows += sut.string.format('<td>');
                    rows += sut.string.format('<input type="text" name="ProcedimientoCargosApe[{0}].PzoPresentApe" value="{1}" class="form-control" type="number" />', i, '');
                    rows += sut.string.format('</td>');

                    rows += sut.string.format('<td>');
                    rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosApe(i,  0));
                    rows += sut.string.format('</td>');

                    rows += sut.string.format('<td>');
                    rows += sut.string.format('<input type="text" name="ProcedimientoCargosApe[{0}].PzoResolApe" value="{1}" class="form-control"  type="number"/>', i, '');
                    rows += sut.string.format('</td>');

                    rows += sut.string.format('<td>');
                    rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosresolApe(i,  0));
                    rows += sut.string.format('</td>');


                    @*rows += '<td><div class="btn-group">';
                    if (i > 0) {
                        if ("@user.rolmenu[0].Eliminar" == "True"){
                            rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                        }
                    }
                    rows += '</div></td>';*@
                    rows += '</tr>';





                    tabla.append(rows);
                    sut.editProcedimiento.Cargos.updateApelacion();
                    //sut.editProcedimiento.guardarApelacion(true);
                },
                deleteApelacion: function (id) {

                    var model = {
                        ProcedimientoCargosApeID: id
                    }

                    $.ajax({
                        //url: "/Simplificacion/UnidadOrganica/Eliminar",
                        url: '@Url.Content("~/Simplificacion/Procedimiento/EliminarApelacion")',
                        type: "POST",
                        data: model,
                        dataType: "json",
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {
                            sut.wait.removeOverlay('#boxLista');
                            showNotification('top', 'right', 'Elimino con Éxito ', 1);
                            window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = @Model.ProcedimientoId })' + '?tab=edit-info-basica';
                        },
                        error: function (data) {

                            $('#modal-ventana').modal('hide');
                            //sut.wait.removeOverlay('#boxLista');
                            ////sut.error.show('mensajes', data.responseText);
                            //sut.error.show('mensajes',"Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ");
                            showNotification('top', 'right', 'Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ', 2);
                        }
                    });

                },
                updateApelacion: function () {

                    var cont = 0;
                    $.each($('#tablaApelacion tbody tr.requisito'), function (i, tr) {
                        $(tr).data('index', i);
                        $(tr).find('td span').html(i + 1);
                        $(tr).find('td input[name$="ProcedimientoCargosApeID"]').attr('name', sut.string.format('ProcedimientoCargosApe[{0}].ProcedimientoCargosApeID', i));
                        $(tr).find('td input[name$="CargoApe"]').attr('name', sut.string.format('ProcedimientoCargosApe[{0}].CargoApe', i));
                        $(tr).find('td input[name$="UndOrgIdApe"]').attr('name', sut.string.format('ProcedimientoCargosApe[{0}].UndOrgIdApe', i));
                        $(tr).find('td input[name$="PzoPresentApe"]').attr('name', sut.string.format('ProcedimientoCargosApe[{0}].PzoPresentApe', i));
                        $(tr).find('td input[name$="PzoResolApe"]').attr('name', sut.string.format('ProcedimientoCargosApe[{0}].PzoResolApe', i));
                        $(tr).find('td input[name$="ordenape"]').attr('name', sut.string.format('ProcedimientoCargosApe[{0}].ordenape', i));
                    });
                },
                /***************Revision*********************/
                initOtros: function () {


                    var lista = @Html.Raw(ViewBag.ListaProcedimientoCargosOtros != null ? ViewBag.ListaProcedimientoCargosOtros : "[]");
                    @*var listaobservaciones = @Html.Raw(ViewBag.ListaObservacionCargosApe != null ? ViewBag.ListaObservacionCargosApe : "[]");*@
                    var tabla = $('#tablaOtros1 tbody');
                    var num = 1;
                    if (lista.length > 0) {
                        var data = [];
                        $.each(lista, function (i, r) {

                            num = i ;
                            var rows = '';

                            @*if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {

                                rows += sut.string.format('<tr data-index="{0}" >', num);
                                rows += '<td colspan="5">';
                                rows += '<div class="form-group">';
                                rows += '<div class="col-sm-10 col-xs-12">';

                                if (@obs.Count != 0) {
                                    for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {
                                        if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {
                                            if (listaobservaciones[Mi].CodValidacion == "2") {
                                                rows += sut.string.format('<a class="btn btn-warning btn-xs"  id="aSustentarObservarExpModalidad' + num + '"   data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExpModalidad({0});"><i class="fa fa-pencil-square-o"></i></a>',num);
                                                rows += sut.string.format('<a class="btn btn-primary btn-xs" style="display:none"  id="aGuardarSustentarExpModalidad' + num + '" data-placement="right" title="Guardar Sustento"   href="javascript:sut.editProcedimiento.guardarSustentarExpModalidad({0},{1},{2},{3});"><i class="fa fa-floppy-o"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                                rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none"  id="aCancelarSustentarExpModalidad' + num + '" data-placement="right" title="Quitar Sustento"    href="javascript:sut.editProcedimiento.CancelarSustentarExpModalidad({0},{1},{2},{3});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                            }
                                        }
                                    }
                                }


                                rows += '<label id="mensajeModalidad' + num + '" class="label-primary label" style="font-size: 100%;font-weight: normal;"></label>';
                                rows += '</div>';
                                rows += '</div>';
                                rows += '<table id="divModalidad0' + num + '" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">';
                                rows += '<tbody></tbody>';
                                rows += '</table>';
                                rows += '</td>';
                                rows += '</tr>';
                            }*@



                            var rows = '';
                            rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                            rows += '<td>';
                            //rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += '<div class="btn-group">';

                            if ("@user.rolmenu[0].Eliminar" == "True"){
                                rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Cargos.deleteOtros({0})" ><i class="fa fa-close" ></i></a>', r.ProcedimientoCargosOtrosID);
                            }
                            rows += '</div>';
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].ProcedimientoCargosOtrosID" value="{1}" />', i, r.ProcedimientoCargosOtrosID);
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].ProcedimientoId" value="{1}" />', i, r.ProcedimientoId);
                            rows += '</td>';
                            rows += '<td>';
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].ordenotros" value="{1}" />',i, i + 1);
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += '</td>';

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargosOtros[{0}].CargoOtros" value="{1}" class="form-control" />', i, r.CargoOtros);
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td style="text-align: center;">');
                            rows += sut.string.format('<div class="input-group">');
                            rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].UndOrgIdOtros" value="{1}" />', i, r.UndOrgIdOtros);
                            rows += sut.string.format('<input type="text" name="UndOrgOtros[{0}].Nombre" value="{1}" class="form-control" readonly />', i, r.NombreUndOrgOtros);
                            rows += sut.string.format('<div class="input-group-btn">');
                            rows += sut.string.format('<a href="javascript:sut.editProcedimiento.openSelectUndOrgDinamicoOtros'+"('"+'sut.editProcedimiento.setUndOrgReconDinamicoOtros'+"',1,{0})"+'" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>', i, 0);
                            rows += sut.string.format('</div>');
                            rows += sut.string.format('</div>');
                            rows += sut.string.format('</td>');


                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargosOtros[{0}].PzoPresentOtros" value="{1}" class="form-control" type = "number" />', i, r.PzoPresentOtros);
                            rows += sut.string.format('</td>');
                            rows += sut.string.format('<td>');
                            rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosOtros(i,  r.TipoOtrosPresent));
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('<input type="text" name="ProcedimientoCargosOtros[{0}].PzoResolOtros" value="{1}" class="form-control" type = "number" />', i, r.PzoResolOtros);
                            rows += sut.string.format('</td>');

                            rows += sut.string.format('<td>');
                            rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosresolOtros(i,  r.TipoOtrosResol));
                            rows += sut.string.format('</td>');


                            @*rows += '<td><div class="btn-group">';
                            if (i > 0) {
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                }
                            }
                            rows += '</div></td>';*@
                            rows += '</tr>';


                            tabla.append(rows);



                            @*if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {
                                if (@obs.Count != 0) {
                                    var cont1 = 0;
                                    var texto1 = "";


                                    for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {


                                        if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {

                                            if (listaobservaciones[Mi].CodValidacion == "1") {
                                                texto1 = listaobservaciones[Mi].Descripcion;
                                                cont1 = 1;
                                            }
                                            else if (listaobservaciones[Mi].CodValidacion == "4") {


                                                valiarbotonesModalidad('Modalidad', i);
                                                $("#mensajeModalidad" + i).show();
                                                document.querySelector("#mensajeModalidad" + i).innerText = 'Se valido con éxito';

                                            }
                                            else if (listaobservaciones[Mi].CodValidacion == "2") {
                                                sut.editProcedimiento.textoobservacionModalidad("" + texto1 + "", "" + listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i,lista.length);
                                            }

                                            else if (listaobservaciones[Mi].CodValidacion == "5") {

                                                canceladobotonesModalidad('Modalidad', i);

                                            }
                                            else if (listaobservaciones[Mi].CodValidacion == "3") {

                                                sustentobotonesModalidad('Modalidad', i);
                                                $("#mensajeModalidad" + i).show();
                                                document.querySelector("#mensajeModalidad" + i).innerText = 'Se refuto con éxito';
                                                sut.editProcedimiento.textosustentoModalidad(listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i);

                                            }
                                        }
                                        else
                                        {
                                            canceladobotonesModalidadsustento('Modalidad', i);
                                        }
                                    }

                                }

                            }*@


                        });
                        sut.editProcedimiento.Cargos.updateOtros();

                    }
                },
                addOtros: (indexReq, indexForm,TablaAsmeId,ProcedimientoId) => {
                    var tabla = $('#tablaOtros1 tbody').eq(0);



                    //var i = tabla.children('tr').size();
                    var i = $('#tablaOtros1 tbody').eq(0).children('tr.requisito').size();

                    var rows = '';
                    rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                    rows += '<td>';
                    //rows += sut.string.format('<span>{0}</span>', i + 1);
                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].ProcedimientoCargosOtrosID" value="{1}" />', i, 0);
                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].ProcedimientoId" value="{1}" />', i, @Model.ProcedimientoId);
                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].ordenotros" value="{1}" />', i,i+1);
                    rows += '</td>';
                    rows += '<td>';
                    rows += sut.string.format('<span>{0}</span>', i + 1);
                    rows += '</td>';

                    rows += sut.string.format('<td>');
                    rows += sut.string.format('<input type="text" name="ProcedimientoCargosOtros[{0}].CargoOtros" value="{1}" class="form-control" />', i, '');
                    rows += sut.string.format('</td>');

                    rows += sut.string.format('<td style="text-align: center;">');
                    rows += sut.string.format('<div class="input-group">');
                    rows += sut.string.format('<input type="hidden" name="ProcedimientoCargosOtros[{0}].UndOrgIdOtros" value="{1}" />', i, 0);
                    rows += sut.string.format('<input type="text" name="UndOrgOtros[{0}].Nombre" value="{1}" class="form-control" readonly />', i, '');
                    rows += sut.string.format('<div class="input-group-btn">');
                    rows += sut.string.format('<a href="javascript:sut.editProcedimiento.openSelectUndOrgDinamicoOtros'+"('"+'sut.editProcedimiento.setUndOrgReconDinamicoOtros'+"',2,{0})"+'" class="btn btn-danger"><i class="fa fa-ellipsis-h"></i></a>', i, 0);
                    rows += sut.string.format('</div>');
                    rows += sut.string.format('</div>');
                    rows += sut.string.format('</td>');


                    rows += sut.string.format('<td>');
                    rows += sut.string.format('<input type="text" name="ProcedimientoCargosOtros[{0}].PzoPresentOtros" value="{1}" class="form-control" type="number" />', i, '');
                    rows += sut.string.format('</td>');

                    rows += sut.string.format('<td>');
                    rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosOtros(i,  0));
                    rows += sut.string.format('</td>');

                    rows += sut.string.format('<td>');
                    rows += sut.string.format('<input type="text" name="ProcedimientoCargosOtros[{0}].PzoResolOtros" value="{1}" class="form-control"  type="number"/>', i, '');
                    rows += sut.string.format('</td>');

                    rows += sut.string.format('<td>');
                    rows += sut.string.format('{0}', sut.editProcedimiento.comboUndOrgCargosresolOtros(i,  0));
                    rows += sut.string.format('</td>');


                    @*rows += '<td><div class="btn-group">';
                    if (i > 0) {
                        if ("@user.rolmenu[0].Eliminar" == "True"){
                            rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                        }
                    }
                    rows += '</div></td>';*@
                    rows += '</tr>';





                    tabla.append(rows);
                    sut.editProcedimiento.Cargos.updateOtros();
                    //sut.editProcedimiento.guardarOtros(true);
                },
                deleteOtros: function (id) {

                    var model = {
                        ProcedimientoCargosOtrosID: id
                    }

                    $.ajax({
                        //url: "/Simplificacion/UnidadOrganica/Eliminar",
                        url: '@Url.Content("~/Simplificacion/Procedimiento/EliminarOtros")',
                        type: "POST",
                        data: model,
                        dataType: "json",
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {
                            sut.wait.removeOverlay('#boxLista');
                            showNotification('top', 'right', 'Elimino con Éxito ', 1);
                            window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = @Model.ProcedimientoId })' + '?tab=edit-info-basica';
                        },
                        error: function (data) {

                            $('#modal-ventana').modal('hide');
                            //sut.wait.removeOverlay('#boxLista');
                            ////sut.error.show('mensajes', data.responseText);
                            //sut.error.show('mensajes',"Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ");
                            showNotification('top', 'right', 'Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ', 2);
                        }
                    });

                },
                updateOtros: function () {

                    var cont = 0;
                    $.each($('#tablaOtros tbody tr.requisito'), function (i, tr) {
                        $(tr).data('index', i);
                        $(tr).find('td span').html(i + 1);
                        $(tr).find('td input[name$="ProcedimientoCargosOtrosID"]').attr('name', sut.string.format('ProcedimientoCargosOtros[{0}].ProcedimientoCargosOtrosID', i));
                        $(tr).find('td input[name$="CargoOtros"]').attr('name', sut.string.format('ProcedimientoCargosOtros[{0}].CargoOtros', i));
                        $(tr).find('td input[name$="UndOrgIdOtros"]').attr('name', sut.string.format('ProcedimientoCargosOtros[{0}].UndOrgIdOtros', i));
                        $(tr).find('td input[name$="PzoPresentOtros"]').attr('name', sut.string.format('ProcedimientoCargosOtros[{0}].PzoPresentOtros', i));
                        $(tr).find('td input[name$="PzoResolOtros"]').attr('name', sut.string.format('ProcedimientoCargosOtros[{0}].PzoResolOtros', i));
                        $(tr).find('td input[name$="ordenotros"]').attr('name', sut.string.format('ProcedimientoCargosOtros[{0}].ordenotros', i));
                    });
                },

                /********************************************/
            },
            Modalidad : {
                edit: (indexReq, indexForm,TablaAsmeId,ProcedimientoId) => {
                    var model = {};


                    var tabla = "";

                    model['nuevo'] = indexForm == null ? 1 : 0;
                    model['indexForm'] = indexForm == null ? 0 : indexForm;
                    model['indexTablaAsmeId'] = TablaAsmeId;
                    model['indexProcedimientoId'] = ProcedimientoId;

                    $.ajax({
                        type: "GET",
                        //url: '/Simplificacion/Procedimiento/EditarFormulario',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/EditarTablaASMEReproduccion")',
                        data: model,
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {
                            $('#ventana-container').html(data);
                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                },

                editPlazoAtencion: (pantalla,PlazoAtencionId,ProcedimientoId) => {
                    var model = {};


                    var tabla = "";

                    //model['nuevo'] = indexForm == null ? 1 : 0;
                    //model['indexForm'] = indexForm == null ? 0 : indexForm;
                    model['indexTablaAsmeId'] = PlazoAtencionId;
                    model['indexProcedimientoId'] = ProcedimientoId;
                    model['pantalla'] = pantalla;



                    $.ajax({
                        type: "GET",
                        //url: '/Simplificacion/Procedimiento/EditarFormulario',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/EditarPlazoAtencion")',
                        data: model,
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {
                            $('#ventana-container').html(data);
                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                },

                EliminarPlazoAtencion: function (id) {

                    var model = {
                        PlazoAtencionId: id
                    }

                    $.ajax({
                        //url: "/Simplificacion/UnidadOrganica/Eliminar",
                        url: '@Url.Content("~/Simplificacion/Procedimiento/EliminarPlazoAtencion")',
                        type: "POST",
                        data: model,
                        dataType: "json",
                        beforeSend: function () {
                            sut.wait.appendOverlay('#boxLista');
                        },
                        success: function (data) {
                            sut.wait.removeOverlay('#boxLista');
                            window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = @Model.ProcedimientoId })' + '?tab=edit-info-basica';
                        },
                        error: function (data) {
                            sut.wait.removeOverlay('#boxLista');
                            sut.error.show('mensajes', data.responseText);
                        }
                    });
                },
                newFilaRecursos: (r) => {

                    var rows = sut.string.format('<tr id="formulario" data-index="{0}" class="formulario" >', r.indexForm);
                    rows += '<td></td>';
                    rows += '<td>';
                    rows += sut.string.format('<span>{0}</span>', r.indexForm + 1);
                    rows += '</td>';
                    rows += sut.string.format('<td>{0}</td>', r.Descripcion);
                    rows += sut.string.format('<td>{0}</td>', r.Costo);
                    rows += sut.string.format('<td>{0}</td>', r.Sustento);

                    rows += '<td class="text-center" ><div class="btn-group">';
                    if ("@user.rolmenu[0].Editar" == "True"){
                        rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.Modalidad.edit({0}, {1}, {2}, {3})" ><i class="fa fa-pencil" ></i></a>', r.indexReq, r.ReproduccionId, r.TablaAsmeId, @Model.ProcedimientoId);
                    }
                    if ("@user.rolmenu[0].Eliminar" == "True"){
                        rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.eliminar({0})" ><i class="fa fa-close" ></i></a>', r.ReproduccionId);
                    }
                    rows += '</div></td>';
                    rows += '</tr>';
                    return rows;
                },
                eliminar: function (id) {

                    var model = {
                        ReproduccionId: id
                    }

                    $.ajax({
                        //url: "/Simplificacion/UnidadOrganica/Eliminar",
                        url: '@Url.Content("~/Simplificacion/Procedimiento/EliminarTablaASMEReproduccion")',
                        type: "POST",
                        data: model,
                        dataType: "json",
                        beforeSend: function () {
                            sut.wait.appendOverlay('#boxLista');
                        },
                        success: function (data) {
                            sut.wait.removeOverlay('#boxLista');
                            window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = @Model.ProcedimientoId })' + '?tab=edit-modalidades';
                        },
                        error: function (data) {
                            sut.wait.removeOverlay('#boxLista');
                            sut.error.show('mensajes', data.responseText);
                        }
                    });
                },
                init: function () {
                    var lista = @Html.Raw(ViewBag.ListaModalidad != null ? ViewBag.ListaModalidad : "[]");
                    var listaobservaciones = @Html.Raw(ViewBag.ListaObservacion != null ? ViewBag.ListaObservacion : "[]");
                    var tabla = $('#tblModalidad tbody');
                    var num = 1;
                    if (lista.length > 0) {

                        debugger;
                        var data = [];
                        $.each(lista, function (i, r) {

                            num = i ;
                            var rows = '';

                            if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {

                                rows += sut.string.format('<tr data-index="{0}" >', num);
                                rows += '<td colspan="5">';
                                rows += '<div class="form-group">';
                                rows += '<div class="col-sm-10 col-xs-12">';

                                if (@obs.Count != 0) {
                                    for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {
                                        if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {
                                            if (listaobservaciones[Mi].CodValidacion == "2") {
                                                rows += sut.string.format('<a class="btn btn-warning btn-xs"  id="aSustentarObservarExpModalidad' + num + '"   data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExpModalidad({0});"><i class="fa fa-pencil-square-o"></i></a>',num);
                                                rows += sut.string.format('<a class="btn btn-primary btn-xs" style="display:none"  id="aGuardarSustentarExpModalidad' + num + '" data-placement="right" title="Guardar Sustento"   href="javascript:sut.editProcedimiento.guardarSustentarExpModalidad({0},{1},{2},{3});"><i class="fa fa-floppy-o"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                                rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none"  id="aCancelarSustentarExpModalidad' + num + '" data-placement="right" title="Quitar Sustento"    href="javascript:sut.editProcedimiento.CancelarSustentarExpModalidad({0},{1},{2},{3});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.TablaAsmeId);
                                            }
                                        }
                                    }
                                }


                                rows += '<label id="mensajeModalidad' + num + '" class="label-primary label" style="font-size: 100%;font-weight: normal;"></label>';
                                rows += '</div>';
                                rows += '</div>';
                                rows += '<table id="divModalidad0' + num + '" class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;">';
                                rows += '<tbody></tbody>';
                                rows += '</table>';
                                rows += '</td>';
                                rows += '</tr>';
                            }


                            rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].TablaAsmeId" value="{1}" />', i, r.TablaAsmeId);
                            rows += '</td>';
                            //rows += sut.string.format('<td><input type="text" name="TablaAsme[{0}].Codigo" value="{1}" class="form-control" readonly /></td>', i, r.Codigo);


                            rows += sut.string.format('<td>');
                            if(lista.length > 1){
                                var descr='';
                                if(r.Descripcion!=null && r.Descripcion!='null' ){
                                    descr=r.Descripcion;
                                }
                                rows += sut.string.format('<input type="text" name="TablaAsme[{0}].Descripcion" value="{1}" class="form-control" {2} />', i, descr, sut.editProcedimiento.esProcEstadar ? '' : '');
                            }


                            rows += sut.string.format('</td>');


                            rows += sut.string.format('<td><input type="checkbox" data-type="EsGratuito" name="TablaAsme[{0}].EsGratuito" id="'+r.TablaAsmeId+'" onclick="OcutarReproduccion('+r.TablaAsmeId+')" {1} {2} /></td>', i, r.EsGratuito ? 'checked' : '', sut.editProcedimiento.esProcEstadar ? 'readonly' : '');

                            debugger;

                            if (!sut.editProcedimiento.esCargaInicial) {
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].Prestaciones" value="{1}" />', i, r.Prestaciones);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].Personal" value="{1}" />', i, r.Personal);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].MaterialFungible" value="{1}" />', i, r.MaterialFungible);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].ServicioIdentificable" value="{1}" />', i, r.ServicioIdentificable);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].MaterialNoFungible" value="{1}" />', i, r.MaterialNoFungible);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].ServicioTerceros" value="{1}" />', i, r.ServicioTerceros);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].Depreciacion" value="{1}" />', i, r.Depreciacion);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].Fijos" value="{1}" />', i, r.Fijos);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].CostoUnitario" value="{1}" />', i, r.CostoUnitario);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].DerechoTramitacion" value="{1}" />', i, r.DerechoTramitacion);
                            }

                            if(sut.editProcedimiento.esTupaEstandar) {
                                //rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number"  /></td>', i, r.Prestaciones);
                            } else if (sut.editProcedimiento.esCargaInicial) {
                                if (!sut.editProcedimiento.esProcEstadar || !sut.editProcedimiento.esProcEstadarServicio) {
                                    rows += sut.string.format('<td><input name="TablaAsme[{0}].CostoUnitario" value="{1}" class="form-control" type="number" min="0" {2} /></td>', i, r.CostoUnitario, r.EsGratuito ? 'disabled="disabled"' : '');
                                } else {
                                    //rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number"  /></td>', i, r.Prestaciones);
                                }
                            } else {
                                //if (!sut.editProcedimiento.esProcEstadar) {
                                //rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" /></td>', i, r.Prestaciones);
                                //}
                            }
                             if (@Model.Calificaciones==1)
                             {
                                rows += '<td><div class="btn-group">';
                                    if (i > 0) {
                                    if ("@user.rolmenu[0].Eliminar" == "True"){
                                        rows += sut.string.format('{0}', sut.editProcedimiento.comboCalificaciones(i, r.Calificacion));
                                    }
                                }
                                rows += '</div></td>';

                             }





                            rows += '<td><div class="btn-group">';
                            if (i > 0) {
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', r.TablaAsmeId);
                                }
                            }
                            rows += '</div></td>';
                            rows += '</tr>';

                            /// agregar reproducción Inicio

                            //trabajarlo urgente
                            if (r.EsGratuito === true || r.EsGratuito === false) {
                                rows += sut.string.format('<tr><td colspan="4"><table data-formtable={0} class="table table-condensed table-bordered">',i);
                                rows += '<thead><tr><th style="width:50px;"></th><th style="width:40px;">';
                                if ("@user.rolmenu[0].Agregar" == "True"){
                                    rows += sut.string.format('<a href="javascript:sut.editProcedimiento.Modalidad.edit({0},null,{1},{2})" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>', i,r.TablaAsmeId,@Model.ProcedimientoId);
                                }
                                rows += '</th><th style="width:400px;">Descripcion</th><th style="width:60px;">Costo</th><th style="width:450px;">Sustento</th><th style="width:50px;"></th></tr></thead><tbody>';


                                $.each(r.TablaAsmeReproduccion, (k, f) => {
                                    f.indexForm = k;
                                    f.ReproduccionId = f.ReproduccionId;
                                    f.TablaAsmeId = f.TablaAsmeId;
                                    f.Descripcion = f.Descripcion;
                                    f.Costo = f.Costo;
                                    f.Sustento = f.Sustento;
                                    rows += sut.editProcedimiento.Modalidad.newFilaRecursos(f);
                                });
                                rows += '</tbody></table></tr>';
                            }
                            tabla.append(rows);



                            if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {
                                if (@obs.Count != 0) {
                                    var cont1 = 0;
                                    var texto1 = "";


                                    for (var Mi = 0; Mi < listaobservaciones.length; Mi += 1) {


                                        if (listaobservaciones[Mi].Pantalla == "Datos Generales" && listaobservaciones[Mi].NombreCampo == "NombredelaModalidad" + i) {

                                            if (listaobservaciones[Mi].CodValidacion == "1") {
                                                texto1 = listaobservaciones[Mi].Descripcion;
                                                cont1 = 1;
                                            }
                                            else if (listaobservaciones[Mi].CodValidacion == "4") {


                                                valiarbotonesModalidad('Modalidad', i);
                                                $("#mensajeModalidad" + i).show();
                                                document.querySelector("#mensajeModalidad" + i).innerText = 'Se valido con éxito';

                                            }
                                            else if (listaobservaciones[Mi].CodValidacion == "2") {
                                                sut.editProcedimiento.textoobservacionModalidad("" + texto1 + "", "" + listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i,lista.length);
                                            }

                                            else if (listaobservaciones[Mi].CodValidacion == "5") {

                                                canceladobotonesModalidad('Modalidad', i);

                                            }
                                            else if (listaobservaciones[Mi].CodValidacion == "3") {

                                                sustentobotonesModalidad('Modalidad', i);
                                                $("#mensajeModalidad" + i).show();
                                                document.querySelector("#mensajeModalidad" + i).innerText = 'Se refuto con éxito';
                                                sut.editProcedimiento.textosustentoModalidad(listaobservaciones[Mi].Descripcion + "", 4, "" + listaobservaciones[Mi].EstadoExpediente + "", i);

                                            }
                                        }
                                        else
                                        {
                                            //canceladobotonesModalidadsustento('Modalidad', i);
                                        }
                                    }

                                }

                            }


                        });
                        sut.editProcedimiento.Modalidad.update();

                    }
                },
                add: function () {

                    var tabla = $('#tblModalidad tbody').eq(0);



                    //var i = tabla.children('tr').size();
                    var i = $('#tblModalidad tbody').eq(0).children('tr.requisito').size();

                    var rows = '';
                    rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                    rows += '<td>';
                    rows += sut.string.format('<span>{0}</span>', i + 1);
                    rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].TablaAsmeId" value="{1}" />', i, 0);
                    rows += '</td>';
                    rows += sut.string.format('<td>');
                    rows += sut.string.format('<input type="text" name="TablaAsme[{0}].Descripcion" value="{1}" class="form-control" />', i, '');

                    rows += sut.string.format('</td>');



                    rows += sut.string.format('<td><input type="checkbox" data-type="EsGratuito" name="TablaAsme[{0}].EsGratuito" value="false" /></td>', i);

                    if (sut.editProcedimiento.esTupaEstandar) {
                        //rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number"   /></td>', i, 0);
                    } else if (sut.editProcedimiento.esCargaInicial) {
                        debugger
                        if (!sut.editProcedimiento.esProcEstadar || !sut.editProcedimiento.esProcEstadarServicio) {
                            rows += sut.string.format('<td><input name="TablaAsme[{0}].CostoUnitario" value="{1}" class="form-control" type="number" min="1" /></td>', i, 0);
                        }
                    } else {
                        //if (!sut.editProcedimiento.esProcEstadar) {
                        //rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" /></td>', i, 0);
                        //}
                    }

                    rows += '<td><div class="btn-group">';
                    if (i > 0) {
                        if ("@user.rolmenu[0].Eliminar" == "True"){
                            rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                        }
                    }
                    rows += '</div></td>';
                    rows += '</tr>';




                    tabla.append(rows);
                    sut.editProcedimiento.Modalidad.update();
                    sut.editProcedimiento.guardarmodalidad(true);

                },
                delete: function (id) {
                    //// trabajar
                    //
                    //    var tabla = "table#tblModalidad";
                    //    var req = $(tabla + ' tbody tr').eq(id);
                    //req.remove();

                    //    //var TipoRequisito = $(tabla +' tbody tr.requisito').eq(id).find('td input[name$="EsGratuito"]').che;


                    //    //var req = $(tabla + ' tbody tr.requisito').eq(index);
                    //    //if (Number(req.find('td input[name$="TablaAsmeId"]').val()) > 0) req.next().remove(); req.remove();

                    //    sut.editProcedimiento.Modalidad.update();



                    var model = {
                        TablaAsmeId: id
                    }

                    $.ajax({
                        //url: "/Simplificacion/UnidadOrganica/Eliminar",
                        url: '@Url.Content("~/Simplificacion/Procedimiento/EliminarTablaASME")',
                        type: "POST",
                        data: model,
                        dataType: "json",
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {
                            sut.wait.removeOverlay('#boxLista');
                            showNotification('top', 'right', 'Elimino con Éxito ', 1);
                            window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = @Model.ProcedimientoId })' + '?tab=edit-modalidades';
                        },
                        error: function (data) {

                            $('#modal-ventana').modal('hide');
                            //sut.wait.removeOverlay('#boxLista');
                            ////sut.error.show('mensajes', data.responseText);
                            //sut.error.show('mensajes',"Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ");
                            showNotification('top', 'right', 'Tienes Actividades Registradas que pertenecen a la Tablaasme favor de Eliminar ', 2);
                        }
                    });

                },
                update: function () {

                    var cont = 0;
                    $.each($('#tblModalidad tbody tr.requisito'), function (i, tr) {
                        $(tr).data('index', i);
                        $(tr).find('td span').html(i + 1);
                        $(tr).find('td input[name$="TablaAsmeId"]').attr('name', sut.string.format('TablaAsme[{0}].TablaAsmeId', i));
                        $(tr).find('td input[name$="Codigo"]').attr('name', sut.string.format('TablaAsme[{0}].Codigo', i));
                        $(tr).find('td input[name$="Descripcion"]').attr('name', sut.string.format('TablaAsme[{0}].Descripcion', i));
                        $(tr).find('td input[name$="EsGratuito"]').attr('name', sut.string.format('TablaAsme[{0}].EsGratuito', i)).attr("data-type","EsGratuito");
                        //$(tr).find('td input[name$="Prestaciones"]').attr('name', sut.string.format('TablaAsme[{0}].Prestaciones', i));
                        $(tr).find('td input[name$="CostoUnitario"]').attr('name', sut.string.format('TablaAsme[{0}].CostoUnitario', i));
                        //$(tr).find('td div a').attr('href', sut.string.format('javascript:sut.editProcedimiento.Modalidad.delete({0})', i));

                        //if($(tr).find('td input[name$="ReproduccionId"]').val() != '0') {
                        //    $.each($(tr).next().find('td table tbody tr.formulario'), (k, f) => {
                        //        $(f).data('index', k);
                        //        $(f).find('td span').html(k + 1);
                        //        $(f).find('td input[name$="TablaAsmeId"]').attr('name', sut.string.format('TablaAsme[{0}].TablaAsmeReproduccion[{1}].TablaAsmeId', cont, k));
                        //        $(f).find('td input[name$="ReproduccionId"]').attr('name', sut.string.format('TablaAsme[{0}].TablaAsmeReproduccion[{1}].ReproduccionId', cont, k));
                        //        $(f).find('td input[name$="Descripcion"]').attr('name', sut.string.format('TablaAsme[{0}].TablaAsmeReproduccion[{1}].Descripcion', cont, k));
                        //        $(f).find('td input[name$="Costo"]').attr('name', sut.string.format('TablaAsme[{0}].TablaAsmeReproduccion[{1}].Costo', cont, k));
                        //        $(f).find('td input[name$="Sustento"]').attr('name', sut.string.format('TablaAsme[{0}].TablaAsmeReproduccion[{1}].Sustento', cont, k));
                        //    });
                        //}

                        //cont++;

                    });
                }
            },
            Requisito: {
                indexReq: 0,
                TipoRequisito : 0,
                textCadenaTramite: (val, index) => {
                    rows = '';
                    rows += '<div class="input-group">';
                    rows += sut.string.format('<input type="text" name="Requisito[{0}].CadenaTramite" value="{1}" class="form-control input-sm" />', index, val || '');
                    rows += '<div class="input-group-btn">';
                    rows += sut.string.format('<a href="javascript:sut.editProcedimiento.Requisito.openCadenaTramite({0})" class="cadenaTramite btn btn-danger btn-sm"><i class="fa fa-ellipsis-h"></i></a>', index);
                    rows += '</div>';
                    rows += '</div>';
                    return rows;
                },
                setCadenaTramite: (data) => {
                    $('#modal-ventana').modal('hide');

                    var index = sut.editProcedimiento.Requisito.indexReq;
                    var tabla = "";

                    if (sut.editProcedimiento.Requisito.TipoRequisito === 1) {
                        tabla = "#tblRequisitoGeneral";
                    } else {
                        tabla = "#tblRequisitoEspecifico";
                    }

                    var req = $(tabla +' tbody tr.requisito').eq(index);
                    req.find('input[name$="CadenaTramite"]').val(data.Codigo);
                },
                openCadenaTramite: (index,TipoRequisito) => {
                    sut.editProcedimiento.Requisito.indexReq = index;
                    sut.editProcedimiento.Requisito.TipoRequisito = TipoRequisito;
                    $.ajax({
                        type: "GET",
                        //url: '/Simplificacion/Procedimiento/Select',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/Select")',
                        data: { tipo: 1, multi: false, fnAdd: 'sut.editProcedimiento.Requisito.setCadenaTramite' },
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {
                            $('#ventana-container').html(data);
                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                },
                init: function () {

                    $("#DenominacionAnterior").css("display", "none");
                    var lista = @Html.Raw(ViewBag.ListaRequisito != null ? ViewBag.ListaRequisito : "[]");
                    var listaObservacionRequisitos = @Html.Raw(ViewBag.ListaObservacionRequisitos != null ? ViewBag.ListaObservacionRequisitos : "[]");
                    var tablaRGeneral = $('#tblRequisitoGeneral tbody');
                    var tablaREspecifico = $('#tblRequisitoEspecifico tbody');
                    var counttablaRGeneral = 0;
                    var counttablaREspecifico = 0;


                    var num = 1;

                    if (lista.length > 0) {
                        var data = [];
                        $.each(lista, function (i, r) {
                            var rows = '';
                            //if (r.TipoRequisito === 1) {
                            //    i = counttablaRGeneral;
                            //} else {
                            //    i = counttablaREspecifico;
                            //}

                            i = counttablaRGeneral + counttablaREspecifico;
                            num = i ;

                            if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {

                                rows += sut.string.format('<tr data-index="{0}" >', num);
                                rows += '<td colspan="5">';
                                rows += '<div class="form-group">';
                                rows += '<div class="col-sm-10 col-xs-12">';
                                if (@obs.Count != 0) {
                                    for (var Mi = 0; Mi < listaObservacionRequisitos.length; Mi += 1) {
                                        if (listaObservacionRequisitos[Mi].Pantalla == "Datos Generales" && listaObservacionRequisitos[Mi].NombreCampo == "NombredelosRequisitos" + i) {
                                            if (listaObservacionRequisitos[Mi].CodValidacion == "2") {
                                                rows += sut.string.format('<a class="btn btn-warning btn-xs"  id="aSustentarObservarExpRequisitos' + num + '"     data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExpRequisitos({0});"><i class="fa fa-pencil-square-o"></i></a>',num);
                                                rows += sut.string.format('<a class="btn btn-primary btn-xs" style="display:none"  id="aGuardarSustentarExpRequisitos' + num + '" data-placement="right" title="Guardar Sustento"    href="javascript:sut.editProcedimiento.guardarSustentarExpRequisitos({0},{1},{2},{3});"><i class="fa fa-floppy-o"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.RequisitoId);
                                                rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none"  id="aCancelarSustentarExpRequisitos' + num + '" data-placement="right" title="Quitar Sustento"     href="javascript:sut.editProcedimiento.CancelarSustentarExpRequisitos({0},{1},{2},{3});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.RequisitoId);

                                            }
                                        }
                                    }
                                }
                                rows += '<label id="mensajeRequisitos' + num + '" class="label-primary label" style="font-size: 100%;font-weight: normal;"></label>';


                                rows += '</div>';
                                rows += '</div>';
                                rows += '<table id="divRequisitos0' + num + '" class="table table-condensed table-bordered table-striped"  style="margin-bottom: 0px;">';
                                rows += '<tbody></tbody>';
                                rows += '</table>';
                                rows += '</td>';
                                rows += '</tr>';
                            }


                            if(r.Titulo!="" &&  r.Titulo!=undefined || r.EditableTitulo== 1  ){
                                rows += sut.string.format('<tr data-index="{0}">', i);
                                rows += '<td colspan="3">';
                                //rows += '</td>';
                                //rows += '<td>';

                                if(r.EditableTitulo == 0)
                                {
                                    rows += sut.string.format('<textarea  style="scroll-behavior: smooth;resize:vertical;" class="form-control" data-val="true"  readonly style="border-color: transparent ;  font-weight: bold;background: transparent;"  name="Requisito[{0}].Titulo"   norequired="True"  type="text"  aria-required="true">{1}</textarea>', i, r.Titulo || '');
                                }else
                                {
                                    rows += sut.string.format('<textarea  class="form-control" data-val="true"  placeholder="Ingresar Titulo" style="font-weight: bold;background:transparent;scroll-behavior: smooth;resize:vertical;" name="Requisito[{0}].Titulo"    norequired="True"  type="text"  aria-required="true">{1}</textarea>', i, r.Titulo || '');
                                }

                                rows += '</td>';
                                rows += '</tr>';
                            }



                            rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                            rows += '<td colspan="2">';
                            //rows += sut.string.format('<span>{0}</span>', i + 1);
                            //rows += sut.string.format('<textarea style="scroll-behavior: smooth;resize:vertical" maxlength="10"  name="Requisito[{0}].RecNum" value="{1}" class="form-control" required pattern="[0-9]{1,2}" >{1}</textarea> ', i, r.RecNum || '');


                            if(r.TipoRequisito=="1"){
                                if(@Model.EditableG == 0)
                                {
                                    rows += sut.string.format('<input required="True" class="form-control" data-val="true" data-val-number="El campo debe ser un número." readonly style="width: 80px;height: 1px;border-color: transparent ;background: transparent;"   min="1"  name="Requisito[{0}].RecNum" value="{1}"  norequired="True"  type="number"  aria-required="true">', i, r.RecNum || '');
                                }else
                                {
                                    rows += sut.string.format('<input required="True" class="form-control" data-val="true" data-val-number="El campo debe ser un número."      min="1"  name="Requisito[{0}].RecNum" value="{1}"  norequired="True"  type="number"  aria-required="true">', i, r.RecNum || '');
                                }
                            }else{
                                if(@Model.EditableN == 0)
                                {
                                    rows += sut.string.format('<input required="True" class="form-control" data-val="true" data-val-number="El campo debe ser un número." readonly style="width: 80px;height: 1px;border-color: transparent ;background: transparent;"   min="1"  name="Requisito[{0}].RecNum" value="{1}"  norequired="True"  type="number"  aria-required="true">', i, r.RecNum || '');
                                }else
                                {
                                    rows += sut.string.format('<input required="True" class="form-control" data-val="true" data-val-number="El campo debe ser un número."      min="1"  name="Requisito[{0}].RecNum" value="{1}"  norequired="True"  type="number"  aria-required="true">', i, r.RecNum || '');
                                }
                            }

                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].UserCreacion" value="{1}" />', i, r.UserCreacion);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoId" value="{1}" />', i, r.RequisitoId);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].BaseLegalId" value="{1}" />', i, r.BaseLegalId);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].SustentoTecnico" value="{1}" />', i, r.SustentoTecnico || '');
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].TipoRequisito" value="{1}" />', i, r.TipoRequisito);


                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].EditableTitulo" value="{1}" />', i, r.EditableTitulo);

                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].BaseLegalTexto" value="{1}" />', i, r.BaseLegalTexto);
                            rows += sut.string.format('<input type="hidden" name="Requisito[{0}].Activar" value="{1}" />', i, r.Activar);
                            //rows += sut.string.format('<input type="hidden" name="Requisito[{0}].Descripcion" value="{1}" />', i, r.Nombre.substr(5, 990000));
                            //rows += sut.string.format('<input type="hidden" name="Requisito[{0}].Nombre" value="{1}" />', i, r.Nombre);
                            rows += '</td>';

                            if (sut.editProcedimiento.esTupaEstandar==true) {
                                //rows += sut.string.format('<td><input type="text" name="Requisito[{0}].Nombre" value="{1}" class="form-control" required /></td>', i, r.Nombre || '');
                                rows += sut.string.format('<td><textarea style="scroll-behavior: smooth;resize:vertical;" name="Requisito[{0}].Nombre" value="{1}" class="form-control"    required >{1}</textarea></td>', i, r.Nombre || '');
                                //rows += sut.string.format('<td><textarea name="Requisito[{0}].Descripcion" class="form-control" >{1}</textarea></td>', i, r.Descripcion || '');
                            }

                           else if (sut.editProcedimiento.esProcEstadar || sut.editProcedimiento.esProcEstadarServicio) {
                                //rows += sut.string.format('<td><input type="text" name="Requisito[{0}].Nombre" value="{1}" class="form-control" required /></td>', i, r.Nombre || '');
                                rows += sut.string.format('<td><textarea style="scroll-behavior: smooth;resize:vertical;" name="Requisito[{0}].Nombre" value="{1}" class="form-control"  readonly = "true" required >{1}</textarea></td>', i, r.Nombre || '');
                                //rows += sut.string.format('<td><textarea name="Requisito[{0}].Descripcion" class="form-control" >{1}</textarea></td>', i, r.Descripcion || '');
                            }else if (!sut.editProcedimiento.esTupaEstandar && (!sut.editProcedimiento.esProcEstadar || !sut.editProcedimiento.esProcEstadarServicio)) {
                                if (r.UserCreacion == 'ACR' || r.UserCreacion == 'ACRExante') {
                                    if(r.Activar==0){
                                        rows += sut.string.format('<td>');
                                        rows += sut.string.format('<tr>');
                                        rows += sut.string.format('<td></td> ');

                                        rows += sut.string.format('<td style="TEXT-ALIGN: -WEBKIT-RIGHT;"><textarea  style="width: 65px;height: 35px;"  maxlength="5" name="Requisito[{0}].Nombre" value="{1}" class="form-control" required >{1}</textarea> <textarea  style="width: 0px;height: 0px;visibility: collapse;"   name="Requisito[{0}].Descripcion" value="{2}" class="form-control" >{2}</textarea></td> ', i, r.Nombre.substr(0, 5), r.Nombre.substr(5, 90000) || '');

                                        //rows += sut.string.format('<td><textarea style="scroll-behavior: smooth;resize:vertical" disabled="disabled" name="Requisito[{0}].Descripcion" value="{1}" class="form-control" required >{1}</textarea>', i, r.Nombre.substr(5, 990000) || '');
                                        rows += sut.string.format('<td  >{1}</td> ', i, r.Nombre.substr(5, 990000) || '');

                                        rows += sut.string.format('</tr>');
                                        rows += sut.string.format('</td>');
                                    }else
                                    {
                                        rows += sut.string.format('<td><textarea style="scroll-behavior: smooth;resize:vertical;" name="Requisito[{0}].Nombre" value="{1}" class="form-control" required >{1}</textarea></td>', i, r.Nombre || '');
                                    }

                                } else {

                                    if(r.TipoRequisito=="2"){
                                        rows += sut.string.format('<td><textarea style="scroll-behavior: smooth;resize:vertical;" name="Requisito[{0}].Nombre" value="{1}"  class="form-control">{1}</textarea></td>', i, r.Nombre || '');
                                    }else{
                                        rows += sut.string.format('<td><textarea style="scroll-behavior: smooth;resize:vertical;" name="Requisito[{0}].Nombre" value="{1}" class="form-control" required >{1}</textarea></td>', i, r.Nombre || '');
                                    }

                                }
                                //rows += sut.string.format('<td><textarea name="Requisito[{0}].Descripcion" class="form-control" >{1}</textarea></td>', i, r.Descripcion || '');
                            }   else {
                                //rows += sut.string.format('<td><input type="text" name="Requisito[{0}].Nombre" value="{1}" class="form-control" readonly /></td>', i, r.Nombre || '');

                                rows += sut.string.format('<td><textarea style="scroll-behavior: smooth;resize:vertical;" name="Requisito[{0}].Nombre" value="{1}" class="form-control" readonly >{1}</textarea></td>', i, r.Nombre || '');
                                //rows += sut.string.format('<td><textarea name="Requisito[{0}].Descripcion" class="form-control" readonly >{1}</textarea></td>', i, r.Descripcion || '');
                            }

                            //rows += sut.string.format('<td>{0}</td>', sut.editProcedimiento.Requisito.textCadenaTramite(r.CadenaTramite, i));
                            rows += '<td class="text-center" ><div class="btn-group">';



                            if (!sut.editProcedimiento.esTupaEstandar && (!sut.editProcedimiento.esProcEstadar || !sut.editProcedimiento.esProcEstadarServicio) && @Model.CodigoACR==0) {
                                //if (r.UserCreacion == null) {
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="delRequisito btn btn-danger btn-xs" title="Eliminar Requisitos" href="javascript:sut.editProcedimiento.Requisito.deletefisico({0},{1})" ><i class="fa fa-close" ></i></a>', r.RequisitoId, r.TipoRequisito);
                                }
                            } else if (sut.editProcedimiento.esTupaEstandar && (sut.editProcedimiento.esProcEstadar || sut.editProcedimiento.esProcEstadarServicio)) {
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="delRequisito btn btn-danger btn-xs" title="Eliminar Requisitos" href="javascript:sut.editProcedimiento.Requisito.deletefisico({0},{1})" ><i class="fa fa-close" ></i></a>', r.RequisitoId, r.TipoRequisito);
                                }
                            }
                            else  if (r.TipoRequisito === 2) {
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="delRequisito btn btn-danger btn-xs" title="Eliminar Requisitos" href="javascript:sut.editProcedimiento.Requisito.deletefisico({0},{1})" ><i class="fa fa-close" ></i></a>', r.RequisitoId, r.TipoRequisito);
                                }
                            }
                            else if (r.UserCreacion == 'ACR' || r.UserCreacion == 'ACRExante') {

                                if(r.Activar==1){
                                    if ("@user.rolmenu[0].Eliminar" == "True"){
                                        rows += sut.string.format('<a class="delRequisito btn btn-danger btn-xs" title="Eliminar Requisitos" href="javascript:sut.editProcedimiento.Requisito.deletefisico({0},{1})" ><i class="fa fa-close" ></i></a>', r.RequisitoId, r.TipoRequisito);
                                    }
                                }
                            }
                            else if(@Model.Activar3==1){
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="delRequisito btn btn-danger btn-xs" title="Eliminar Requisitos" href="javascript:sut.editProcedimiento.Requisito.deletefisico({0},{1})" ><i class="fa fa-close" ></i></a>', r.RequisitoId, r.TipoRequisito);
                                }
                            }
                            /**titulo**/


                            if(r.EditableTitulo == 0)
                            {
                                rows += sut.string.format('<a href="javascript:sut.editProcedimiento.Requisito.editaridTitulo({0},1)" data-placement="right" title="Agregar Titulo"  class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Titulo</a>', r.RequisitoId);
                            }else
                            {
                                rows += sut.string.format('<a href="javascript:sut.editProcedimiento.Requisito.editaridTitulo({0},0)" data-placement="right" title="Quitar Titulo"  class="btn btn-xs btn-danger"><i class="fa fa-close"></i> Titulo</a>', r.RequisitoId);
                            }

                            rows += '</div></td>';
                            rows += '</tr>';
                            if (r.TipoRequisito === 1) {
                                rows += sut.string.format('<tr><td colspan="4"><table data-formtable={0} class="table table-condensed table-bordered" style="margin-bottom: 0px;">',i);
                                rows += '<thead><tr><th style="width:100px;"></th><th style="width:100px;">';
                                if ("@user.rolmenu[0].Agregar" == "True"){
                                    rows += sut.string.format('<a href="javascript:sut.editProcedimiento.Formulario.edit({0},null,{1},{2},0)" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> Agregar</a>', i, r.TipoRequisito,r.RequisitoId);
                                }
                                rows += '</th><th>Formulario</th><th style="width:60px;">Archivo</th><th style="width:100px;"></th></tr></thead><tbody>';
                            }

                            $.each(r.RequisitoFormulario, (k, f) => {
                                f.indexReq = r.TipoRequisito === 1 ? counttablaRGeneral : counttablaREspecifico;
                                f.indexForm = k;
                                f.TipoRequisito = r.TipoRequisito;
                                f.Url =  f.Url;
                                rows += sut.editProcedimiento.Formulario.newFila(f);
                            });
                            rows += '</tbody></table></td></tr>';

                            if (r.TipoRequisito === 1) {
                                tablaRGeneral.append(rows);
                                counttablaRGeneral++;
                            } else {
                                tablaREspecifico.append(rows);
                                counttablaREspecifico++;
                            }


                            if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {
                                if (@obs.Count != 0) {
                                    var cont1 = 0;
                                    var texto1 = "";
                                    for (var Mi = 0; Mi < listaObservacionRequisitos.length; Mi += 1) {


                                        if (listaObservacionRequisitos[Mi].Pantalla == "Datos Generales" && listaObservacionRequisitos[Mi].NombreCampo == "NombredelosRequisitos" + i) {

                                            if (listaObservacionRequisitos[Mi].CodValidacion == "1") {
                                                texto1 = listaObservacionRequisitos[Mi].Descripcion;
                                            }
                                            else if (listaObservacionRequisitos[Mi].CodValidacion == "4") {


                                                valiarbotonesModalidad('Requisitos', i);
                                                $("#mensajeRequisitos" + i).show();
                                                document.querySelector("#mensajeRequisitos" + i).innerText = 'Se valido con éxito';

                                            }
                                            else if (listaObservacionRequisitos[Mi].CodValidacion == "2") {
                                                sut.editProcedimiento.textoobservacionRequisitos("" + texto1 + "", "" + listaObservacionRequisitos[Mi].Descripcion + "", 4, "" + listaObservacionRequisitos[Mi].EstadoExpediente + "", i);
                                                //});
                                            }

                                            else if (listaObservacionRequisitos[Mi].CodValidacion == "5") {

                                                canceladobotonesModalidad('Requisitos', i);

                                            }
                                            else if (listaObservacionRequisitos[Mi].CodValidacion == "3") {

                                                sustentobotonesModalidad('Requisitos',i);
                                                $("#mensajeRequisitos" + i).show();
                                                document.querySelector("#mensajeRequisitos" + i).innerText = 'Se refuto con éxito';
                                                sut.editProcedimiento.textosustentoRequisitos( listaObservacionRequisitos[Mi].Descripcion + "", 4, "" + listaObservacionRequisitos[Mi].EstadoExpediente + "", i);

                                            }
                                        } else {
                                            //canceladobotonesModalidadsustento('Requisitos', i);
                                        }
                                    }

                                }
                            }





                        });

                        //sut.editProcedimiento.Requisito.update();
                    }
                } ,
                add: function (TipoRequisito) {


                    var tabla = null;

                    if (TipoRequisito === 1) {
                        tabla = $('#tblRequisitoGeneral tbody').eq(0);
                    } else {
                        tabla = $('#tblRequisitoEspecifico tbody').eq(0);
                    }


                    //var i = tabla.children('tr.requisito').size();
                    var i = $('#tblRequisitoGeneral tbody').eq(0).children('tr.requisito').size() +  $('#tblRequisitoEspecifico tbody').eq(0).children('tr.requisito').size();

                    var rows = '';
                    rows += sut.string.format('<tr data-index="{0}" class="requisito" >', i);
                    rows += '<td colspan="2">';
                    //rows += sut.string.format('<span>{0}</span>', i + 1);
                    //rows += sut.string.format('<span></span>');

                    if (TipoRequisito === 1) {

                        var g = $('#tblRequisitoGeneral tbody').eq(0).children('tr.requisito').size()

                        //rows += sut.string.format('<textarea style="scroll-behavior: smooth;resize:vertical" maxlength="10"  name="Requisito[{0}].RecNum" value="{1}" class="form-control"   pattern="[0-9]{1,2}" >{1}</textarea> ', i,g + 1);

                        rows += sut.string.format('<input required="True" class="form-control" data-val="true" data-val-number="El campo debe ser un número." readonly style="width: 70px;height: 1px;border-color: transparent ;background: transparent;"   readonly  min="1"  name="Requisito[{0}].RecNum" value="{1}"  norequired="True"  type="number"  aria-required="true">', i,g + 1);
                    } else {

                        var e =   $('#tblRequisitoEspecifico tbody').eq(0).children('tr.requisito').size();

                        //rows += sut.string.format('<textarea style="scroll-behavior: smooth;resize:vertical" maxlength="10"  name="Requisito[{0}].RecNum" value="{1}" class="form-control"   pattern="[0-9]{1,2}" >{1}</textarea> ', i,e + 1);
                        rows += sut.string.format('<input required="True" class="form-control" data-val="true" data-val-number="El campo debe ser un número." readonly style="width: 70px;height: 1px;border-color: transparent ;background: transparent;"    readonly  min="1"  name="Requisito[{0}].RecNum" value="{1}"  norequired="True"  type="number"  aria-required="true"> ', i,e  + 1);
                    }


                    rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RecNum" value="{0}" />', i, 0);
                    rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoId" value="{1}" />', i, 0);
                    rows += sut.string.format('<input type="hidden" name="Requisito[{0}].BaseLegalId" value="{1}" />', i, 0);
                    rows += sut.string.format('<input type="hidden" name="Requisito[{0}].SustentoTecnico" value="{1}" />', i, '');
                    rows += sut.string.format('<input type="hidden" name="Requisito[{0}].BaseLegalTexto" value="{1}" />', i, BaseLegalTexto);
                    rows += sut.string.format('<input type="hidden" name="Requisito[{0}].TipoRequisito" value="{1}" />', i, TipoRequisito);
                    rows += '</td>';
                    //rows += sut.string.format('<td><input type="text" name="Requisito[{0}].Codigo" value="{1}" class="form-control" readonly /></td>', i, '-');
                    //rows += sut.string.format('<td><textarea style="scroll-behavior: smooth;resize:vertical;" name="Requisito[{0}].Nombre" value="{1}" class="form-control" required /></td>', i, '');
                    if(TipoRequisito=="2"){
                        rows += sut.string.format('<td><textarea style="scroll-behavior: smooth;resize:vertical;" name="Requisito[{0}].Nombre" value="{1}" class="form-control" /></td>', i, '');
                    }else{
                        rows += sut.string.format('<td><textarea style="scroll-behavior: smooth;resize:vertical;" name="Requisito[{0}].Nombre" value="{1}" class="form-control" required /></td>', i, '');
                    }

                    //rows += sut.string.format('<td><textarea name="Requisito[{0}].Descripcion" class="form-control" >{1}</textarea></td>', i, '');
                    //rows += sut.string.format('<td>{0}</td>', sut.editProcedimiento.Requisito.textCadenaTramite('', i));
                    rows += '<td class="text-center" ><div class="btn-group">';
                    if ("@user.rolmenu[0].Eliminar" == "True"){
                        rows += sut.string.format('<a class="delRequisito btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Requisito.delete({0},{1})" ><i class="fa fa-close" ></i></a>', i, TipoRequisito);
                    }
                    rows += '</div></td>';
                    rows += '</tr>';

                    tabla.append(rows);
                    sut.editProcedimiento.Requisito.update();
                },
                deletefisico: function (pRequisitoId, pTipoRequisito) {

                    var model = {
                        RequisitoId: pRequisitoId,
                        TipoRequisito: pTipoRequisito,
                        estadoExpediente: '@exp.EstadoExpediente'
                    }
                    sut.msg.confirm("Que desea eliminar el Requisito", function () {
                        $.ajax({
                            //url: "/Simplificacion/UnidadOrganica/ExisteEnProcedimiento",
                            url: '@Url.Content("~/Simplificacion/Procedimiento/ExisteRequisitos")',
                            type: "POST",
                            data: model,
                            dataType: "json",
                            beforeSend: function () {
                                sut.wait.appendOverlay('#boxLista');
                            },
                            success: function (data) {
                                $('#modal-ventana').modal('hide');

                                if (data.Message == '0') {

                                    sut.msg.success("Se elimino el Requisito", function () {
                                        window.location = '@Url.Content("~/Simplificacion/Procedimiento/DatosGenerales/")@Model.ProcedimientoId?tab=edit-requisitos';
                                    });
                                } else
                                {
                                    var mensaje = data.Message;
                                    sut.msg.alerta(mensaje, function () {
                                        window.location = '@Url.Content("~/Simplificacion/Procedimiento/DatosGenerales/")@Model.ProcedimientoId?tab=edit-requisitos';
                                    });
                                }
                            },
                            error: function (data) {
                                sut.error.show('mensajes', data.responseText);
                            }
                        });
                    });

                },
                delete: function (index, pTipoRequisito) {
                    //sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {

                    var tabla = "";
                    if (pTipoRequisito === 1) {
                        tabla = "table#tblRequisitoGeneral";
                    } else {
                        tabla = "table#tblRequisitoEspecifico";
                    }

                    var TipoRequisito = $(tabla +' tbody tr.requisito').eq(index).find('td input[name$="TipoRequisito"]').attr('name');


                    if (pTipoRequisito === 1) {
                        var req = $(tabla + ' tbody tr.requisito').eq(index);
                        if (Number(req.find('td input[name$="RequisitoId"]').val()) > 0) req.next().remove(); req.remove();

                    } else {
                        var req = $(tabla + ' tbody tr.requisito').eq(index);
                        req.remove();
                    }




                    //$.each($('#tblRequisito tbody tr.requisito'), function (index, tr) {
                    //    var i = Number($(tr).data('index'));
                    //    if (i == id) $(tr).remove();
                    //});
                    sut.editProcedimiento.Requisito.update();
                    //});
                },
                update: function () {

                    var cont = 0;
                    var cont2 = 0;

                    $.each($('#tblRequisitoGeneral tbody tr.requisito'), function (i, tr) {
                        $(tr).data('index', i);
                        $(tr).find('td span').html(i + 1);
                        $(tr).find('td input[name$="RecNum"]').attr('name', sut.string.format('Requisito[{0}].RecNum', cont));
                        $(tr).find('td input[name$="RequisitoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoId', i));
                        $(tr).find('td input[name$="TipoRequisito"]').attr('name', sut.string.format('Requisito[{0}].TipoRequisito', cont));
                        $(tr).find('td input[name$="BaseLegalId"]').attr('name', sut.string.format('Requisito[{0}].BaseLegalId', cont));
                        $(tr).find('td input[name$="SustentoTecnico"]').attr('name', sut.string.format('Requisito[{0}].SustentoTecnico', cont));
                        $(tr).find('td textarea[name$="Nombre"]').attr('name', sut.string.format('Requisito[{0}].Nombre', cont));
                        $(tr).find('td input[name$="CadenaTramite"]').attr('name', sut.string.format('Requisito[{0}].CadenaTramite', cont));
                        $(tr).find('td input[name$="Descripcion"]').attr('name', sut.string.format('Requisito[{0}].Descripcion', cont));
                        $(tr).find('td div div a.cadenaTramite').attr('href', sut.string.format('javascript:sut.editProcedimiento.Requisito.openCadenaTramite({0},1)', cont));
                        $(tr).find('td div a.delRequisito').attr('href', sut.string.format('javascript:sut.editProcedimiento.Requisito.delete({0},1)', cont));

                        if($(tr).find('td input[name$="RequisitoId"]').val() != '0') {
                            $.each($(tr).next().find('td table tbody tr.formulario'), (k, f) => {
                                $(f).data('index', k);
                                $(f).find('td span').html(k + 1);
                                $(f).find('td input[name$="RequisitoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].RequisitoId', cont, k));
                                $(f).find('td input[name$="FormularioId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].FormularioId', cont, k));
                                $(f).find('td input[name$="Nombre"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].Nombre', cont, k));
                                $(f).find('td input[name$="Url"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].Url', cont, k));
                                $(f).find('td input[name$="ArchivoAdjuntoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].ArchivoAdjuntoId', cont, k));
                            });
                        }

                        cont++;
                    });


                    $.each($('#tblRequisitoEspecifico tbody tr.requisito'), function (i, tr) {
                        $(tr).data('index', i);
                        $(tr).find('td span').html(i + 1);
                        $(tr).find('td input[name$="RecNum"]').attr('name', sut.string.format('Requisito[{0}].RecNum', cont));
                        $(tr).find('td input[name$="RequisitoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoId', cont));
                        $(tr).find('td input[name$="TipoRequisito"]').attr('name', sut.string.format('Requisito[{0}].TipoRequisito', cont));
                        $(tr).find('td input[name$="BaseLegalId"]').attr('name', sut.string.format('Requisito[{0}].BaseLegalId', cont));
                        $(tr).find('td input[name$="SustentoTecnico"]').attr('name', sut.string.format('Requisito[{0}].SustentoTecnico', cont));
                        $(tr).find('td textarea[name$="Nombre"]').attr('name', sut.string.format('Requisito[{0}].Nombre', cont));
                        $(tr).find('td input[name$="CadenaTramite"]').attr('name', sut.string.format('Requisito[{0}].CadenaTramite', cont));
                        $(tr).find('td input[name$="Descripcion"]').attr('name', sut.string.format('Requisito[{0}].Descripcion', cont));
                        $(tr).find('td div div a.cadenaTramite').attr('href', sut.string.format('javascript:sut.editProcedimiento.Requisito.openCadenaTramite({0},2)', cont));
                        $(tr).find('td div a.delRequisito').attr('href', sut.string.format('javascript:sut.editProcedimiento.Requisito.delete({0},2)', cont2));

                        //if ($(tr).find('td input[name$="RequisitoId"]').val() != '0') {
                        //    $.each($(tr).next().find('td table tbody tr.formulario'), (k, f) => {
                        //        $(f).data('index', k);
                        //        $(f).find('td span').html(k + 1);
                        //        $(f).find('td input[name$="RequisitoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].RequisitoId', cont2, k));
                        //        $(f).find('td input[name$="FormularioId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].FormularioId', cont2, k));
                        //        $(f).find('td input[name$="Nombre"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].Nombre', cont2, k));
                        //        $(f).find('td input[name$="Url"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].Url', cont2, k));
                        //        $(f).find('td input[name$="ArchivoAdjuntoId"]').attr('name', sut.string.format('Requisito[{0}].RequisitoFormulario[{1}].ArchivoAdjuntoId', cont2, k));
                        //    });
                        //}

                        cont++;
                        cont2++;
                    });
                },
                editaridReqG : function(ProcedimientoId,tipo){

                    $.ajax({
                        type: "POST",
                        //url: '/Simplificacion/Expediente/EditarExpediente',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/Editarrequerimiento")',
                        data: { id: ProcedimientoId, tipo: tipo, num: 1},
                        cache: false,
                        //beforeSend: function () {
                        //    sut.wait.modal('ventana-container');
                        //    $('#modal-ventana').modal('show');
                        //},
                        success: function (data) {


                            if(data=="False")
                            {
                                showNotification('top', 'right', 'No Existe Información', 2);
                                return;
                            }

                            window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;

                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                },
                editaridTitulo : function(RequisitoId,tipo){

                    $.ajax({
                        type: "POST",
                        //url: '/Simplificacion/Expediente/EditarExpediente',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/Editartitulo")',
                        data: { id: RequisitoId, tipo: tipo, num: 1},
                        cache: false,
                        //beforeSend: function () {
                        //    sut.wait.modal('ventana-container');
                        //    $('#modal-ventana').modal('show');
                        //},
                        success: function (data) {


                            if(data=="False")
                            {
                                showNotification('top', 'right', 'No Existe Información', 2);
                                return;
                            }

                            window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;

                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                },

                guardaridReqG : function(ProcedimientoId,tipo){

                    $.ajax({
                        type: "POST",
                        //url: '/Simplificacion/Expediente/EditarExpediente',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/Editarrequerimiento")',
                        data: { id: ProcedimientoId, tipo: tipo, num: 0},
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            //$('#modal-ventana').modal('show');
                        },
                        success: function (data) {

                            sut.editProcedimiento.guardarrequisito(false,tipo);

                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                },
                cancelaridReqG : function(ProcedimientoId,tipo){

                    $.ajax({
                        type: "POST",
                        //url: '/Simplificacion/Expediente/EditarExpediente',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/Editarrequerimiento")',
                        data: { id: ProcedimientoId, tipo: tipo, num: 0},
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {

                            window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;

                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                },
            },
            Formulario: {
                newFila: (r) => {

                    var rows = sut.string.format('<tr data-index="{0}" class="formulario" >', r.indexForm);
                    rows += '<td></td>';
                    rows += '<td>';
                    rows += sut.string.format('<span>{0}</span>', r.indexForm + 1);
                    rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].RequisitoId" value="{2}" />', r.indexReq, r.indexForm, r.RequisitoId);
                    rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].FormularioId" value="{2}" />', r.indexReq, r.indexForm, r.Nuevo == 1 ? null: r.FormularioId);
                    rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].Nombre" value="{2}" />', r.indexReq, r.indexForm, r.Nombre);
                    rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].Url" value="{2}" />', r.indexReq, r.indexForm, r.Url || '');
                    rows += sut.string.format('<input type="hidden" name="Requisito[{0}].RequisitoFormulario[{1}].ArchivoAdjuntoId" value="{2}" />', r.indexReq, r.indexForm, r.ArchivoAdjuntoId);
                    rows += '</td>';
                    rows += sut.string.format('<td>{0}</td>', r.Nombre);
                    rows += '<td class="text-center" ><div class="btn-group">';
                    if (r.Url || '' != '') {
                        rows += sut.string.format('<a class="btn btn-default btn-xs" target="_blank" href="{0}" ><i class="fa fa-link" ></i></a>', r.Url);
                    }
                    //else {
                    if ("@user.rolmenu[0].Descargar" == "True") {

                        if (r.ArchivoAdjuntoId || '' != '') {
                           rows += sut.string.format('<a class="btn btn-primary btn-xs" href="@Url.Content("~/General/Adjunto/Descargar/"){0}" ><i class="fa fa-download" ></i></a>', r.ArchivoAdjuntoId);
                        }
                    }
                    //}
                    rows += '</div></td>';
                    rows += '<td class="text-center" ><div class="btn-group">';
                    if ("@user.rolmenu[0].Editar" == "True"){
                        rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.Formulario.edit({0}, {1}, {2}, {3}, {4})" ><i class="fa fa-pencil" ></i></a>', r.indexReq, r.indexForm, r.TipoRequisito,r.RequisitoId,r.FormularioId);
                    }
                    if ("@user.rolmenu[0].Eliminar" == "True"){
                        rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Formulario.delete({0}, {1}, {2}, {3}, {4})" ><i class="fa fa-close" ></i></a>', r.indexReq, r.indexForm, r.TipoRequisito,r.RequisitoId,r.FormularioId);
                    }
                    rows += '</div></td>';
                    rows += '</tr>';
                    return rows;
                },
                add: (r) => {
                    //
                    //$('#modal-ventana').modal('hide');

                    //var ntabla = "";
                    //if (r.TipoRequisito === 1) {
                    //    ntabla = "#tblRequisitoGeneral";
                    //} else {
                    //    ntabla = "#tblRequisitoEspecifico";
                    //}

                    ////var tabla = $('table' + ntabla + ' tbody tr.requisito').eq(r.indexReq).next().find('td[colspan="4"] table tbody');
                    //var tabla = $('table' + ntabla + ' tbody tr.requisito').next().find('td[colspan="4"] table tbody');

                    //var tabla = $('table[data-formtable ="' + r.indexReq + '"]');
                    //if (r.Nuevo == 1) {
                    //    //r.indexForm = tabla.find('tr.formulario').size();

                    //    r.indexForm = tabla.find('tr').size() - 1;

                    //    tabla.append(sut.editProcedimiento.Formulario.newFila(r));
                    //    //sut.editProcedimiento.guardarmodalidad(true);
                    //} else {
                    //    var tr = tabla.find('tr.formulario').eq(r.indexForm);
                    //    tr.find('td input[name$="RequisitoId"]').val(r.RequisitoId);
                    //    tr.find('td input[name$="FormularioId"]').val(r.FormularioId);
                    //    tr.find('td input[name$="Nombre"]').val(r.Nombre);
                    //    tr.find('td input[name$="Url"]').val(r.Url);
                    //    tr.find('td input[name$="ArchivoAdjuntoId"]').val(r.ArchivoAdjuntoId);
                    //    tr.find('td a').prop("href",r.Url);
                    //    tr.find('td').eq(2).html(r.Nombre);
                    //}
                    //sut.editProcedimiento.Requisito.update();
                    //sut.editProcedimiento.guardarmodalidad(true);
                    var archivo=0;
                    if(r.ArchivoAdjuntoId !=""){
                        archivo=r.ArchivoAdjuntoId;
                    }

                    debugger;
                    $.ajax({
                        type: 'POST',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/GurdarFormulario")',
                        data: {RequisitoId:r.RequisitoId,  FormularioId:r.FormularioId,  Url:r.Url,  Nombre:r.Nombre,  ArchivoAdjuntoId:archivo,tipo: r.Nuevo },
                        dataType: 'json',
                        beforeSend: function () {
                            $("#mensajes").hide();
                        },
                        complete: function () {

                        },
                        success: function (result) {

                            sut.msg.success(result.mensaje, function () {
                                window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;

                            });
                        },
                        error: function (result) {
                            sut.error.show('mensajes', result.responseText);
                        }
                    });


                },
                edit: (indexReq, indexForm,TipoRequisito,RequisitoId,FormularioId) => {
                    //edit: (RequisitoId, FormularioId) => {

                    var model = {};


                    var tabla = "";
                    if (TipoRequisito === 1) {
                        tabla = "#tblRequisitoGeneral";
                    } else {
                        tabla = "#tblRequisitoEspecifico";
                    }

                    if (indexForm != null) {
                        var r = $('table' + tabla + ' tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr.formulario').eq(indexForm);
                        model['model.RequisitoId'] = r.find('td input[name$="RequisitoId"]').val();
                        model['model.FormularioId'] = r.find('td input[name$="FormularioId"]').val();
                        model['model.Nombre'] = r.find('td input[name$="Nombre"]').val();
                        model['model.Url'] = r.find('td input[name$="Url"]').val();
                        model['model.ArchivoAdjuntoId'] = r.find('td input[name$="ArchivoAdjuntoId"]').val();
                    } else {

                        //model['model.RequisitoId'] = $('table' + tabla + ' tbody tr.requisito').find('td input[name$=RequisitoId]').val();
                        model['model.RequisitoId'] = $($('table' + tabla + ' tbody tr.requisito')[indexReq]).find('td input[name$=RequisitoId]').val();
                        model['model.FormularioId'] = $('table' + tabla + ' tbody tr.requisito').next().find('td[colspan="4"] table tbody tr.formulario').size() + 1;
                    }

                    model['nuevo'] = indexForm == null ? 1 : 0;
                    model['indexForm'] = indexForm == null ? 0 : indexForm;
                    model['indexReq'] = indexReq;
                    model['fnAdd'] = 'sut.editProcedimiento.Formulario.add';
                    model['TipoRequisito'] = TipoRequisito;

                    model['RequisitoId'] = RequisitoId;
                    model['FormularioId'] = FormularioId;


                    $.ajax({
                        type: "GET",
                        //url: '/Simplificacion/Procedimiento/EditarFormulario',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/EditarFormulario")',
                        data: model,
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {
                            $('#ventana-container').html(data);
                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                },
                //delete: (indexReq, indexForm, TipoRequisito) => {
                //
                //    var tabla = "";
                //    if (TipoRequisito === 1) {
                //        tabla = "#tblRequisitoGeneral";
                //    } else {
                //        tabla = "#tblRequisitoEspecifico";
                //    }

                //    //sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                //        var tr = $('table' + tabla + ' tbody tr.requisito').eq(indexReq).next().find('td[colspan="4"] table tbody tr').eq(indexForm);
                //        tr.remove();
                //        sut.editProcedimiento.Requisito.update();
                //    //});
                //}
                delete: (indexReq, indexForm,TipoRequisito,RequisitoId,FormularioId) => {



                    if(FormularioId==1){
                        sut.msg.confirm('!Si elimina el primer registro, eliminará todos los archivos agregados en este requisito!', function () {

                            $.ajax({
                                type: 'POST',
                                url: '@Url.Content("~/Simplificacion/Procedimiento/EliminarFormulario")',
                                data: {RequisitoId:RequisitoId,  FormularioId:FormularioId },
                                dataType: 'json',
                                beforeSend: function () {
                                    $("#mensajes").hide();
                                },
                                complete: function () {

                                },
                                success: function (result) {

                                    sut.msg.success(result.mensaje, function () {
                                        window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;

                                    });
                                },
                                error: function (result) {
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        });
                    }
                    else{

                        $.ajax({
                            type: 'POST',
                            url: '@Url.Content("~/Simplificacion/Procedimiento/EliminarFormulario")',
                            data: {RequisitoId:RequisitoId,  FormularioId:FormularioId },
                            dataType: 'json',
                            beforeSend: function () {
                                $("#mensajes").hide();
                            },
                            complete: function () {

                            },
                            success: function (result) {

                                sut.msg.success(result.mensaje, function () {
                                    window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;

                                });
                            },
                            error: function (result) {
                                sut.error.show('mensajes', result.responseText);
                            }
                        });

                    }
                }
            },
            BaseLegal: {
                data: @Html.Raw(ViewBag.ListaBaseLegal != null ? ViewBag.ListaBaseLegal : "[]") ,
                init: () => {
                    sut.editProcedimiento.BaseLegal.generar();


                    if (sut.editProcedimiento.BaseLegal.data.length == 0)
                    {
                        $('#mensaje2').hide();
                        $('#mensaje1').show();
                    }else
                    {
                        $('#mensaje2').show();
                        $('#mensaje1').hide();
                        sut.control.Actualizartexto();
                    }
                },
                edit: (index) => {

                    var model = {};
                    if (index != null) {
                        var r = sut.editProcedimiento.BaseLegal.data[index];
                        model['model.BaseLegalNormaId'] = r.BaseLegalNormaId;
                        model['model.TipoBaseLegal'] = r.TipoBaseLegal;
                        model['model.NormaId'] = r.NormaId;
                        model['model.Descripcion'] = r.Descripcion == 'null' ? '' : r.Descripcion;
                        model['model.TipoNormaId'] = r.TipoNormaId;
                        model['model.Numero'] = r.Numero;
                        var date = r.FechaPublicacion;
                        var fechaCorregida = date.split("/").reverse().join("/");
                        model['model.FechaPublicacion'] = fechaCorregida; //r.FechaPublicacion;
                        model['model.Articulo'] = r.Articulo;
                        model['model.Url'] = r.Url == 'null' ? '' : r.Url;
                        model['model.ArchivoAdjuntoId'] = r.ArchivoAdjuntoId;
                        model['model.EstadoACR'] = r.EstadoACR;
                        model['model.DescripcionACR'] = r.DescripcionACR;
                    }

                    model['nuevo'] = index == null ? 1 : 0;
                    model['index'] = index == null ? 0 : index;
                    model['fnAdd'] = 'sut.editProcedimiento.BaseLegal.add';
                    model['ProcedimientoId'] = @Model.ProcedimientoId;
                    model['CodigoACR'] = @Model.CodigoACR;
                    model['requisito'] = 0;
                    var base=sut.editProcedimiento.BaseLegal.data;
                    model['cantidad'] = base.length;


                    $.ajax({
                        type: "POST",
                        //url: '/General/BaseLegal/EditarDetalle',
                        url: '@Url.Content("~/General/BaseLegal/EditarDetalle")',
                        data: model,
                        cache: false,
                        beforeSend: function () {
                            sut.wait.modal('ventana-container');
                            $('#modal-ventana').modal('show');
                        },
                        success: function (data) {
                            $('#ventana-container').html(data);
                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                },
                generar: () => {
                    var tabla = $('#tblBaseLegal tbody');
                    $('#tblBaseLegal tbody tr').remove();


                    if (sut.editProcedimiento.BaseLegal.data.length > 0) {

                        var rows = '';
                        var listaObservacionBaseLegal = @Html.Raw(ViewBag.ListaObservacionBaseLegal != null ? ViewBag.ListaObservacionBaseLegal : "[]");


                        $.each(sut.editProcedimiento.BaseLegal.data, function (i, r) {
                            var num = i;

                            if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {
                                rows += sut.string.format('<tr data-index="{0}" >', num);
                                rows += '<td colspan="8">';
                                rows += '<div class="form-group">';
                                rows += '<div class="col-sm-10 col-xs-12">';

                                if (@obs.Count != 0) {
                                    var cont1 = 0;
                                    var texto1 = "";
                                    for (var Mi = 0; Mi < listaObservacionBaseLegal.length; Mi += 1) {
                                        if (listaObservacionBaseLegal[Mi].Pantalla == "Datos Generales" && listaObservacionBaseLegal[Mi].NombreCampo == "NombredelosBaseLegal" + i) {

                                            if (listaObservacionBaseLegal[Mi].CodValidacion == "2") {
                                                rows += sut.string.format('<a class="btn btn-warning btn-xs"  id="aSustentarObservarExpBaseLegal' + num + '"   data-placement="right" title="Refutar Observación" href="javascript:sut.editProcedimiento.sustentarObservarExpBaseLegal({0});"><i class="fa fa-pencil-square-o"></i></a>',num);
                                                rows += sut.string.format('<a class="btn btn-primary btn-xs" style="display:none"  id="aGuardarSustentarExpBaseLegal' + num + '" data-placement="right" title="Guardar Sustento"  href="javascript:sut.editProcedimiento.guardarSustentarExpBaseLegal({0},{1},{2},{3},{4});"><i class="fa fa-floppy-o"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.BaseLegalId,r.BaseLegalNormaId);
                                                rows += sut.string.format('<a class="btn btn-danger btn-xs" style="display:none"  id="aCancelarSustentarExpBaseLegal' + num + '" data-placement="right" title="Quitar Sustento"  href="javascript:sut.editProcedimiento.CancelarSustentarExpBaseLegal({0},{1},{2},{3},{4});"><i class="fa fa-power-off"></i></a>',@exp.ExpedienteId,@Model.ProcedimientoId,num,r.BaseLegalId,r.BaseLegalNormaId);
                                            }
                                        }
                                    }
                                }

                                rows += '<label id="mensajeBaseLegal' + num + '" style="font-size: 100%;font-weight: normal;" class="label-primary label"></label>';


                                rows += '</div>';
                                rows += '</div>';
                                rows += '<table id="divBaseLegal0' + num + '" class="table table-condensed table-bordered table-striped" style=" margin-bottom: 0px;visibility: collapse;">';
                                rows += '<thead>';
                                rows += '    <tr>';
                                //rows += '        <th style="width:100px;background: #f9f9f9;">';
                                //rows += '        </th>';
                                //rows += '        <th  style="color: white;width: 8%;background: #f9f9f9;"></th>';
                                //rows += '        <th  style="color: white;width: 34.5%;background: #f9f9f9;"></th>';
                                //rows += '        <th  style="color: white;width: 17%;background: #f9f9f9;"></th>';
                                //rows += '        <th  style="color: white;width: 13%;background: #f9f9f9;"></th>';
                                //rows += '        <th  style="color: white;width: 19%;background: #f9f9f9;"></th>';
                                //rows += '        <th style="width:60px;background: #f9f9f9;"></th>';
                                rows += '    </tr>';
                                rows += '</thead>';
                                rows += '<tbody></tbody>';
                                rows += '</table>';
                                rows += '</td>';
                                rows += '</tr>';
                            }







                            rows += sut.string.format('<tr data-index="{0}" >', i);
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].BaseLegalId" value="{1}" />', i, r.BaseLegalId);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].BaseLegalNormaId" value="{1}" />', i, r.BaseLegalNormaId);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].TipoBaseLegal" value="{1}" />', i, r.TipoBaseLegal);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].NormaId" value="{1}" />', i, r.NormaId);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].Descripcion" value="{1}" />', i, r.Descripcion);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].TipoNormaId" value="{1}" />', i, r.TipoNormaId);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].Numero" value="{1}" />', i, r.Numero);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].FechaPublicacion" value="{1}" />', i, r.FechaPublicacion);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].Articulo" value="{1}" />', i, r.Articulo);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].ArchivoAdjuntoId" value="{1}" />', i, r.ArchivoAdjuntoId);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].Url" value="{1}" />', i, r.Url);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].EstadoACR" value="{1}" />', i, r.EstadoACR);
                            rows += sut.string.format('<input type="hidden" name="BaseLegal.BaseLegalNorma[{0}].DescripcionACR" value="{1}" />', i, r.DescripcionACR);
                            rows += '</td>';
                            if (r.EstadoACR==2){
                                rows += sut.string.format('<td colspan="5">{0}</td>', r.DescripcionACR);
                                $('#idagregarbaselegal').hide();
                            }else{
                                rows += sut.string.format('<td>{0}</td>', r.Articulo);
                                rows += sut.string.format('<td>{0}</td>', r.Descripcion);
                                rows += sut.string.format('<td>{0}</td>', r.NormaTipo);
                                rows += sut.string.format('<td>{0}</td>', r.Numero);
                                rows += sut.string.format('<td><input type="text" data-type="ValidafechaP" id="BaseLegal.BaseLegalNorma[{0}].FechaPubliDetalle" name="BaseLegal.BaseLegalNorma[{0}].FechaPubliDetalle" value="{1}" style="background-color: transparent; border: 0px; outline: none; box-shadow: none; webkit-box-shadow: none; -moz-box-shadow: none; cursor:default;" readonly required /></td>',i, r.FechaPublicacion);
                                $('#idagregarbaselegal').show();
                            }



                            //rows += '<td class="text-center">';
                            //if (r.TipoBaseLegal == 3) {
                            //    rows += sut.string.format('<a href="{0}" class="btn btn-primary btn-xs" target="_blank" ><i class="fa fa-link"></i></a>', r.Url);
                            //} else {
                            //    rows += sut.string.format('<a href="{0}" class="btn btn-primary btn-xs" target="_blank" ><i class="fa fa-file"></i></a>', '');
                            //}
                            //rows += '</td>';

                            if (!sut.editProcedimiento.esTupaEstandar && (!sut.editProcedimiento.esProcEstadar || !sut.editProcedimiento.esProcEstadarServicio)) {
                                rows += '<td><div class="btn-group">';
                                if ("@user.rolmenu[0].Editar" == "True"){
                                    rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.BaseLegal.edit({0})" ><i class="fa fa-pencil" ></i></a>', i);
                                }
                                rows += '</div></td>';
                                rows += '<td><div class="btn-group">';
                                if (r.EstadoACR!=3){
                                    if ("@user.rolmenu[0].Eliminar" == "True"){
                                        rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.BaseLegal.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                    }
                                }
                                rows += '</div></td>';
                            } else if (!sut.editProcedimiento.esTupaEstandar && (!sut.editProcedimiento.esProcEstadar || !sut.editProcedimiento.esProcEstadarServicio)) {
                                rows += '<td><div class="btn-group">';
                                if ("@user.rolmenu[0].Editar" == "True"){
                                    //rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.BaseLegal.edit({0})" ><i class="fa fa-pencil" ></i></a>', i);
                                }
                                rows += '</div></td>';
                                rows += '<td><div class="btn-group">';
                                if (r.EstadoACR!=3){
                                    if ("@user.rolmenu[0].Eliminar" == "True"){
                                        //rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.BaseLegal.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                    }
                                }
                                rows += '</div></td>';
                            }else if (@ViewBag.User.Rol == 1) {
                                rows += '<td><div class="btn-group">';
                                if ("@user.rolmenu[0].Editar" == "True"){
                                    rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.BaseLegal.edit({0})" ><i class="fa fa-pencil" ></i></a>', i);
                                }
                                rows += '</div></td>';
                                rows += '<td><div class="btn-group">';
                                if (r.EstadoACR!=3){
                                    if ("@user.rolmenu[0].Eliminar" == "True"){
                                        rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.BaseLegal.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                    }
                                }
                                rows += '</div></td>';
                            }

                            //else {
                            //    rows += sut.string.format('<a class="btn btn-success btn-xs" href="javascript:sut.editProcedimiento.BaseLegal.edit({0})" ><i class="fa fa-pencil" ></i></a>', i);
                            //    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.BaseLegal.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                            //}

                            rows += '</tr>';
                        });
                        tabla.append(rows);

                        $.each(sut.editProcedimiento.BaseLegal.data, function (i, r) {
                            if ('@exp.EstadoExpediente' == '@EstadoExpediente.Observado') {
                                if (@obs.Count != 0) {
                                    var cont1 = 0;
                                    var texto1 = "";
                                    for (var Mi = 0; Mi < listaObservacionBaseLegal.length; Mi += 1) {


                                        if (listaObservacionBaseLegal[Mi].Pantalla == "Datos Generales" && listaObservacionBaseLegal[Mi].NombreCampo == "NombredelosBaseLegal" + i) {

                                            if (listaObservacionBaseLegal[Mi].CodValidacion == "1") {
                                                texto1 = listaObservacionBaseLegal[Mi].Descripcion;
                                            }
                                            else if (listaObservacionBaseLegal[Mi].CodValidacion == "4") {

                                                valiarbotonesModalidad('BaseLegal', i);
                                                $("#mensajeBaseLegal" + i).show();
                                                document.querySelector("#mensajeBaseLegal" + i).innerText = 'Se valido con éxito';

                                            }
                                            else if (listaObservacionBaseLegal[Mi].CodValidacion == "2") {
                                                sut.editProcedimiento.textoobservacionBaseLegal("" + texto1 + "", "" + listaObservacionBaseLegal[Mi].Descripcion + "", 4, "" + listaObservacionBaseLegal[Mi].EstadoExpediente + "", i);

                                            }

                                            else if (listaObservacionBaseLegal[Mi].CodValidacion == "5") {

                                                canceladobotonesModalidad('BaseLegal', i);

                                            }
                                            else if (listaObservacionBaseLegal[Mi].CodValidacion == "3") {

                                                sustentobotones('BaseLegal');
                                                $("#mensajeBaseLegal" + i).show();
                                                document.querySelector("#mensajeBaseLegal" + i).innerText = 'Se refuto con éxito';
                                                sut.editProcedimiento.textosustentoBaseLegal( listaObservacionBaseLegal[Mi].Descripcion + "", 4, "" + listaObservacionBaseLegal[Mi].EstadoExpediente + "", i);

                                            }
                                        }
                                        //else {
                                        //    canceladobotonesModalidadsustento('BaseLegal', i);
                                        //}
                                    }

                                }
                            }
                        });
                    }
                },
                add: (r) => {


                    $('#modal-ventana').modal('hide');
                    if (r.Nuevo == 1) {
                        sut.editProcedimiento.BaseLegal.data.push(r);
                    } else {
                        var arr = [];
                        $.each(sut.editProcedimiento.BaseLegal.data, function (i, d) {
                            if (i != r.Index) arr.push(d);
                            else arr.push(r);
                        });
                        sut.editProcedimiento.BaseLegal.data = arr;
                    }
                    sut.editProcedimiento.BaseLegal.generar();
                },
                delete: (index) => {

                    //sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                    var arr = [];

                    $.each(sut.editProcedimiento.BaseLegal.data, function (i, d) {

                        if(d.EstadoACR==2){
                            $('#idagregarbaselegal').show();
                        }
                        if (i != index) arr.push(d);

                    });
                    sut.editProcedimiento.BaseLegal.data = arr;
                    sut.editProcedimiento.BaseLegal.generar();
                    //});
                }
            },

            guardar: function (is_salir) {


                var valid = true;

                var deferred = $.Deferred();


                //if(valid) {
                //    valid = Number($('select[name="TipoAtencionId"]').find('option:selected').val()) > 0;
                //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe seleccionar el Tipo de Atención.');
                //}

                //if (valid) {
                //    valid = $('#tblRequisito tbody tr').size() > 0;
                //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un Requisito.');
                //}

                //if (valid) {
                //    valid = $('#tblBaseLegal tbody tr').size() > 0;
                //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un registro de Base Legal.');
                //}

                //if (valid) {
                //    var tablas = $('#tblModalidad tbody tr td input[name$="Prestaciones"]');
                //    $.each(tablas, (i, p) => {
                //        if (Number($(p).val()) == 0) valid = false;
                //    });
                //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe indicar la cantidad de prestaciones.');
                //}


                $.each($("#tblModalidad input[data-type='EsGratuito']"), function (i, v) {
                    if ($(this).is(':checked')) {
                        $(this).attr("value", true);
                    } else {
                        $(this).attr("value", false);
                    }
                });


                if ($('#form-editar').valid() && valid) {
                    var model = $('#form-editar').serialize();
                    model = model.replace(new RegExp('=on','gi'),'=true');
                    $.ajax({
                        type: 'POST',
                        //url: '/Simplificacion/Procedimiento/DatosGenerales',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/DatosGenerales")',
                        data: model,
                        dataType: 'json',
                        beforeSend: function () {
                            $("#mensajes").hide();
                        },
                        complete: function () {

                        },
                        success: function (result) {

                            sut.msg.success(result.mensaje, function () {
                                //window.location = '/Simplificacion/Procedimiento/DatosGenerales/@Model.ProcedimientoId';

                                //window.setTimeout
                                //showNotification('top', 'right', 'El Registro de Guardo Satisfactoriamente', 1);
                                //
                                //deferred.resolve('Ok'); // jleon 05022019
                                //if (!is_salir)
                                // setTimeout("reFresh()", 800);
                                debugger
                                deferred.resolve('Ok');
                                if (!is_salir)
                                    window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;

                            });
                        },
                        error: function (result) {
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                }

                return deferred.promise();
            },
            guardarmodalidad: function (is_salir) {



                var model = $('#form-editar').serialize();
                model = model.replace(new RegExp('=on','gi'),'=true');
                $.ajax({
                    type: 'POST',
                    url: '@Url.Content("~/Simplificacion/Procedimiento/DatosGeneralesModalidad")',
                    data: model,
                    dataType: 'json',
                    beforeSend: function () {
                        $("#mensajes").hide();
                    },
                    complete: function () {

                    },
                    success: function (result) {

                        sut.msg.success(result.mensaje, function () {
                            window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;

                        });
                    },
                    error: function (result) {
                        sut.error.show('mensajes', result.responseText);
                    }
                });

                return deferred.promise();
            },
            guardarrequisito: function (is_salir,tipo) {


                var valid = true;

                var deferred = $.Deferred();

                if(tipo==1){
                    $('#EditableG').val(0);
                } else
                {
                    $('#EditableN').val(0);
                }
                //if(valid) {
                //    valid = Number($('select[name="TipoAtencionId"]').find('option:selected').val()) > 0;
                //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe seleccionar el Tipo de Atención.');
                //}

                //if (valid) {
                //    valid = $('#tblRequisito tbody tr').size() > 0;
                //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un Requisito.');
                //}

                //if (valid) {
                //    valid = $('#tblBaseLegal tbody tr').size() > 0;
                //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un registro de Base Legal.');
                //}

                //if (valid) {
                //    var tablas = $('#tblModalidad tbody tr td input[name$="Prestaciones"]');
                //    $.each(tablas, (i, p) => {
                //        if (Number($(p).val()) == 0) valid = false;
                //    });
                //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe indicar la cantidad de prestaciones.');
                //}


                $.each($("#tblModalidad input[data-type='EsGratuito']"), function (i, v) {
                    if ($(this).is(':checked')) {
                        $(this).attr("value", true);
                    } else {
                        $(this).attr("value", false);
                    }
                });


                if ($('#form-editar').valid() && valid) {
                    var model = $('#form-editar').serialize();
                    model = model.replace(new RegExp('=on','gi'),'=true');
                    $.ajax({
                        type: 'POST',
                        //url: '/Simplificacion/Procedimiento/DatosGenerales',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/DatosGenerales")',
                        data: model,
                        dataType: 'json',
                        beforeSend: function () {
                            $("#mensajes").hide();
                        },
                        complete: function () {

                        },
                        success: function (result) {

                            sut.msg.success(result.mensaje, function () {
                                //window.location = '/Simplificacion/Procedimiento/DatosGenerales/@Model.ProcedimientoId';

                                //window.setTimeout
                                //showNotification('top', 'right', 'El Registro de Guardo Satisfactoriamente', 1);
                                //
                                //deferred.resolve('Ok'); // jleon 05022019
                                //if (!is_salir)
                                // setTimeout("reFresh()", 800);
                                deferred.resolve('Ok');
                                if (!is_salir)
                                    window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;

                            });
                        },
                        error: function (result) {
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                }

                return deferred.promise();
            },
            terminar: function () {
                var valid = true;

                //if (valid) {
                //    valid = $('#tblRequisito tbody tr').size() > 0;
                //    if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un Requisito.');
                //}



                if (valid) {
                    ////var tablas = $('#tblModalidad tbody tr td input[name$="Prestaciones"]');
                    ////$.each(tablas, (i, p) => {
                    ////    if (Number($(p).val()) == 0) valid = false;
                    ////});
                    //////if (!valid) sut.error.clientErrorShow('mensajes', 'Debe indicar la cantidad de prestaciones.');
                    ////if (!valid) showNotification('top', 'right', 'Debe indicar la cantidad de prestaciones.', 2);
                }

                if (valid && !sut.editProcedimiento.esTupaEstandar) {
                    valid = $('#tblSede tbody tr').size() > 0;
                    //if(!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos una Sede donde se atiende el trámite. Ingresarlo en la casilla de "Información al ciudadano" del procedimiento.');
                    if (!valid) showNotification('top', 'right', 'Debe agregar al menos una Sede donde se atiende el trámite. Ingresarlo en la casilla de "Información al ciudadano" del procedimiento.', 2);
                }

                if (valid) {
                    valid = $('#tblPasoSeguir tbody tr').size() > 0;
                    //if (!valid) sut.error.clientErrorShow('mensajes', 'Debe indicar los pasos a seguir para la realización del trámite. Ingresarlo en la casilla de "Información al ciudadano" del procedimiento.');

                    if (!valid) showNotification('top', 'right', 'Debe indicar los pasos a seguir para la realización del trámite. Ingresarlo en la casilla de "Información al ciudadano" del procedimiento.', 2);
                }

                if (valid) {
                    valid = $('#tblRequisitoGeneral tbody tr').size() + $('#tblRequisitoEspecifico tbody tr').size() > 0;
                    //if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un Requisito.');
                    if (!valid) showNotification('top', 'right', 'Debe agregar al menos un Requisito.', 2);

                }

                if (valid && '@exp.TipoExpediente' != '@TipoExpediente.CargaInicial' ) {
                    valid = $('#tblBaseLegal tbody tr').size() > 0;
                    //if (!valid) sut.error.clientErrorShow('mensajes', 'Debe agregar al menos un registro de Base Legal.');
                    if (!valid) showNotification('top', 'right', 'Debe agregar al menos un registro de Base Legal.', 2);
                }





                if (valid) {
                    sut.msg.confirm('Si finaliza el registro no podrá modificarlo nuevamente.', () => {
                        if ($('#form-editar').valid()) {
                            var model = $('#form-editar').serialize();
                            model = model.replace(new RegExp('=on','gi'),'=true');
                            $.ajax({
                                type: 'POST',
                                //url: '/Simplificacion/Procedimiento/DatosGenerales',
                                url: '@Url.Content("~/Simplificacion/Procedimiento/DatosGenerales")',
                                data: model,
                                dataType: 'json',
                                beforeSend: function () {
                                    $("#mensajes").hide();
                                },
                                complete: function () {

                                },
                                success: function (result) {

                                    $.ajax({
                                        type: 'POST',
                                        //url: '/Simplificacion/Procedimiento/TerminarSustento',
                                        url: '@Url.Content("~/Simplificacion/Procedimiento/TerminarSustento")',
                                        data: {tipo: 1, ProcedimientoId: @Model.ProcedimientoId, estadoExpediente: '@exp.EstadoExpediente', ExpedienteId: @exp.ExpedienteId},
                                        dataType: 'json',
                                        beforeSend: function () {
                                            $("#mensajes").hide();
                                        },
                                        complete: function () {

                                        },
                                        success: function (result) {
                                            sut.msg.success(result.mensaje, function () {
                                                //window.location = '/Simplificacion/Procedimiento/DatosGenerales/@Model.ProcedimientoId';
                                                window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;
                                            });

                                            //showNotification('top', 'right', 'El Registro se Termino Satisfactoriamente', 1);
                                            //    setTimeout("reFresh()", 800);
                                        },
                                        error: function (result) {

                                            sut.error.show('mensajes', result.responseText);
                                            showNotification('top', 'right', result.mensaje, 2);
                                        }
                                    });

                                },
                                error: function (result) {
                                    sut.error.show('mensajes', result.responseText);
                                }
                            });
                        }
                    });
                }

            },
            activar: function () {

                sut.msg.confirm('Si activa el registro podrá modificarlo nuevamente.', () => {
                    $.ajax({
                        type: 'POST',
                        //url: '/Simplificacion/Procedimiento/ActivarSustento',
                        url: '@Url.Content("~/Simplificacion/Procedimiento/ActivarSustento")',
                        data: {tipo: 1, ProcedimientoId: @Model.ProcedimientoId},
                        dataType: 'json',
                        beforeSend: function () {
                            $("#mensajes").hide();
                        },
                        complete: function () {

                        },
                        success: function (result) {
                            @*sut.msg.success(result.mensaje, function () {
                                //window.location = '/Simplificacion/Procedimiento/DatosGenerales/@Model.ProcedimientoId';
                                window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;
                            });*@

                            showNotification('top', 'right', 'El Registro se Activo Satisfactoriamente', 1);
                            setTimeout("reFresh()", 800);
                        },
                        error: function (result) {
                            sut.error.show('mensajes', result.responseText);
                        }
                    });
                });

            },
            ObservacionDinamico : {
                init: function () {
                    var lista = @Html.Raw(ViewBag.ListaInformacionBasica != null ? ViewBag.ListaInformacionBasica : "[]");
                    var tabla = $('#tblModalidad tbody');

                    if (lista.length > 0) {
                        var data = [];
                        $.each(lista, function (i, r) {
                            var rows = '';
                            rows += sut.string.format('<tr data-index="{0}" >', i);
                            rows += '<td>';
                            rows += sut.string.format('<span>{0}</span>', i + 1);
                            rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].TablaAsmeId" value="{1}" />', i, r.TablaAsmeId);
                            rows += '</td>';
                            //rows += sut.string.format('<td><input type="text" name="TablaAsme[{0}].Codigo" value="{1}" class="form-control" readonly /></td>', i, r.Codigo);
                            rows += sut.string.format('<td><input type="text" name="TablaAsmeProcedimientoIddimientoId.Descripcion" value="{1}" class="form-control" {2} /></td>', i, r.Descripcion, sut.editProcedimiento.esProcEstadar ? 'readonly' : '');
                            rows += sut.string.format('<td><input type="checkbox" data-type="EsGratuito" name="TablaAsme[{0}].EsGratuito"  {1} {2} /></td>', i, r.EsGratuito ? 'checked' : '', sut.editProcedimiento.esProcEstadar ? 'readonly' : '');

                            if (sut.editProcedimiento.esTupaEstandar ) {
                                //rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" /></td>', i, r.Prestaciones);
                            } else if (sut.editProcedimiento.esCargaInicial) {
                                if (!sut.editProcedimiento.esProcEstadar || !sut.editProcedimiento.esProcEstadarServicio)  {
                                    rows += sut.string.format('<td><input name="TablaAsme[{0}].CostoUnitario" value="{1}" class="form-control" type="number" min="0" {2} /></td>', i, r.CostoUnitario, r.EsGratuito ? 'disabled="disabled"' : '');
                                }
                            } else {
                                if (!sut.editProcedimiento.esProcEstadar || !sut.editProcedimiento.esProcEstadarServicio) {
                                    //rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" /></td>', i, r.Prestaciones);
                                }
                            }

                            rows += '<td><div class="btn-group">';
                            if (i > 0) {
                                if ("@user.rolmenu[0].Eliminar" == "True"){
                                    rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                                }
                            }
                            rows += '</div></td>';
                            rows += '</tr>';

                            tabla.append(rows);
                        });
                    }
                },
                add: function () {
                    var tabla = $('#tblModalidad tbody');

                    var i = tabla.children('tr').size();

                    var rows = '';
                    rows += sut.string.format('<tr data-index="{0}" >', i);
                    rows += '<td>';
                    rows += sut.string.format('<span>{0}</span>', i + 1);
                    rows += sut.string.format('<input type="hidden" name="TablaAsme[{0}].TablaAsmeId" value="{1}" />', i, 0);
                    rows += '</td>';
                    //rows += sut.string.format('<td><input type="text" name="TablaAsme[{0}].Codigo" value="{1}" class="form-control" readonly /></td>', i, '-');
                    rows += sut.string.format('<td><input type="text" name="TablaAsme[{0}].Descripcion" value="{1}" class="form-control" /></td>', i, '');
                    rows += sut.string.format('<td><input type="checkbox" data-type="EsGratuito" name="TablaAsme[{0}].EsGratuito" value="false" /></td>', i);

                    if (sut.editProcedimiento.esTupaEstandar) {
                        //rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" /></td>', i, 0);
                    } else if (sut.editProcedimiento.esCargaInicial) {
                        if (!sut.editProcedimiento.esProcEstadar || !sut.editProcedimiento.esProcEstadarServicio) {
                            rows += sut.string.format('<td><input name="TablaAsme[{0}].CostoUnitario" value="{1}" class="form-control" type="number" min="1" /></td>', i, 0);
                        }
                    } else {
                        if (!sut.editProcedimiento.esProcEstadar || !sut.editProcedimiento.esProcEstadarServicio) {
                            //rows += sut.string.format('<td><input name="TablaAsme[{0}].Prestaciones" value="{1}" class="form-control" type="number" min="1" /></td>', i, 0);
                        }
                    }

                    rows += '<td><div class="btn-group">';
                    if (i > 0) {
                        if ("@user.rolmenu[0].Eliminar" == "True"){
                            rows += sut.string.format('<a class="btn btn-danger btn-xs" href="javascript:sut.editProcedimiento.Modalidad.delete({0})" ><i class="fa fa-close" ></i></a>', i);
                        }
                    }
                    rows += '</div></td>';
                    rows += '</tr>';


                    tabla.append(rows);
                    sut.editProcedimiento.Modalidad.update();
                },
                delete: function (id) {

                    //sut.msg.confirm('!Se eliminará el dato seleccionado!', function () {
                    $.each($('#tblModalidad tbody tr'), function (index, tr) {
                        var i = Number($(tr).data('index'));
                        if (i == id) $(tr).remove();
                        sut.editProcedimiento.Modalidad.update();
                    });
                    //var tabla = "table#tblModalidad";
                    //var req = $(tabla + ' tbody tr').eq(id);
                    //if (Number(req.find('td input[name$="TablaAsmeId"]').val()) > 0) req.next().remove();
                    //req.remove();
                    //});



                },
                update: function () {
                    $.each($('#tblModalidad tbody tr'), function (i, tr) {
                        $(tr).data('index', i);
                        $(tr).find('td span').html(i + 1);
                        $(tr).find('td input[name$="TablaAsmeId"]').attr('name', sut.string.format('TablaAsme[{0}].TablaAsmeId', i));
                        $(tr).find('td input[name$="Codigo"]').attr('name', sut.string.format('TablaAsme[{0}].Codigo', i));
                        $(tr).find('td input[name$="Descripcion"]').attr('name', sut.string.format('TablaAsme[{0}].Descripcion', i));
                        $(tr).find('td input[name$="EsGratuito"]').attr('name', sut.string.format('TablaAsme[{0}].EsGratuito', i)).attr("data-type","EsGratuito");
                        //$(tr).find('td input[name$="Prestaciones"]').attr('name', sut.string.format('TablaAsme[{0}].Prestaciones', i));
                        $(tr).find('td input[name$="CostoUnitario"]').attr('name', sut.string.format('TablaAsme[{0}].CostoUnitario', i));

                        $(tr).find('td div a').attr('href', sut.string.format('javascript:sut.editProcedimiento.Modalidad.delete({0})', i));
                    });
                }
            },
            AsignarSustentarexp: {
                guardarSustentarExp: function (idExpediente,procedimientoId,Descripcion,NombreCampo,Pantalla) {

                    if ($('#' + Descripcion + '').val().trim() == "") {

                        showNotification('top', 'right', 'No puedes Guardar una justificación en blanco', 2);
                        return;
                    }
                    var model = {
                        'filtro.ExpedienteId': idExpediente,
                        'filtro.ProcedimientoId': procedimientoId,
                        'filtro.Descripcion': $('#'+Descripcion+'').val(),
                        'filtro.CodValidacion': '3',
                        'filtro.TipoEstado': '3',
                        'filtro.NombreCampo': NombreCampo,
                        'filtro.Pantalla': Pantalla,
                        'filtro.Estado': '1',
                    };
                    $.ajax({
                        type: "POST",
                        //url: '/Simplificacion/Expediente/AgregarObservacion',
                        url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                        data: model,
                        cache: false,
                        beforeSend: function () {
                            //sut.wait.modal('ventana-container');
                            //$('#modal-ventana').modal('show');
                        },
                        success: function (data) {

                            $('#modal-ventana').modal('hide');

                            $('#mensaje'+NombreCampo+'').show();
                            document.querySelector('#mensaje'+NombreCampo+'').innerText = 'Se refuto con éxito';

                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });

                    comentario = "";
                },
                comentario: "",
                CancelarSustentarExp: function (idExpediente,procedimientoId,Descripcion,NombreCampo,Pantalla,nombdivdetalle) {


                    var model = {
                        'filtro.ExpedienteId': idExpediente,
                        'filtro.ProcedimientoId': procedimientoId,
                        'filtro.Descripcion': $('#'+Descripcion+'').val(),
                        'filtro.CodValidacion': '3',
                        'filtro.TipoEstado': '3',
                        'filtro.NombreCampo': NombreCampo,
                        'filtro.Pantalla': Pantalla,
                        'filtro.Estado': '1',
                    };

                    $.ajax({
                        type: "POST",
                        //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                        url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                        data: model,
                        cache: false,
                        beforeSend: function () {
                            //sut.wait.modal('ventana-container');
                            //$('#modal-ventana').modal('show');
                        },
                        success: function (data) {

                            $('#modal-ventana').modal('hide');

                            $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "" });
                            $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "none" });
                            $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "none" });

                            $('#'+nombdivdetalle+'').remove();
                            if(nombdivdetalle=='divReconsideracionSustento'){
                                $('#divReconsideracionSustento').remove();
                            }else    if(nombdivdetalle=='divApelacionSustento'){
                                $('#divApelacionSustento').remove();
                            }


                            $('#mensaje'+NombreCampo+'').hide();
                            document.querySelector('#mensaje'+NombreCampo+'').innerText = '';


                        },
                        error: function (result) {
                            $('#modal-ventana').modal('hide');
                            sut.error.show('mensajes', result.responseText);
                        }
                    });

                    comentario = "";

                }
            },

            textoobservacion: function (Descripcion1,Descripcion2,nombdiv,nombdivdetalle,titulo,campo1,campo2,numcol,estado,nomcampo) {

                var rows = '';
                if(nombdivdetalle=="divobjetodetalle"){
                    rows += '<div id="'+nombdivdetalle+'" >';
                }else{rows += '<div id="'+nombdivdetalle+'" style="margin-bottom: 37px;">';}
                //rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">'+titulo+' </label>';
                //rows += '<div class="col-sm-'+numcol+' col-xs-12">';
                //rows += sut.string.format('<td><textarea name="'+campo1+'"  id="'+campo1+'" class="form-control" style="border-color:green;background:#00a65a36;" readonly >{0}</textarea></td>', Descripcion1 );
                //rows += '</div>';
                //rows += '<br/>';
                //rows += '<br/>';
                //rows += '<br/>';
                //rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">'+titulo+' </label>';
                rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo"> Observado </label>';
                rows += '<div class="col-sm-'+numcol+' col-xs-12">';
                //rows += sut.string.format('<td><textarea name="'+campo2+'" id="'+campo2+'" class="form-control" style="border-color:red;background:#ff00002e;" readonly>{0}</textarea></td>', Descripcion2);
                rows += sut.string.format('<td><label class="form-control" name="'+campo2+'"  id="'+campo2+'"  style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2 );
                rows += '</div>';
                rows += '</div>';
                $('#'+nombdiv+'').append(rows);

                if(estado== 'Presentado'){
                    $('#'+nomcampo+'').hide();
                    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                    //visible
                    $('#'+nomcampo+'label').hide();

                }else{
                    $('#'+nomcampo+'').show();
                    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                    //visible
                    $('#'+nomcampo+'label').show();
                }


            },
            sustentarObservarExp: function (Descripcion1,nombdiv,nombdivdetalle,NombreCampo,titulo,numcol) {
                var rows = '';
                rows += '<div id="'+nombdivdetalle+'">';
                //rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">'+titulo+'</label>';
                rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo">Refutar Observación:</label>';
                rows += '<div class=col-sm-'+numcol+' col-xs-12">';
                rows += sut.string.format('<td><textarea name="' + Descripcion1 + '"  id="' + Descripcion1 +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                rows += '</div>';
                rows += '</div>';
                $('#'+nombdiv+'').append(rows);

                $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "none" });
                $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "" });
                $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "" });

            },

            sustentarObservarExpReconsideracion: function (Descripcion1,nombdiv,nombdivdetalle,NombreCampo,titulo,numcol) {

                var rows = '';
                rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                rows += '<tbody>';
                rows += '<tr>';
                rows += '<div id="'+nombdivdetalle+'">';
                rows += '<td style="width: 120px;"><label class="control-label" for="Reconsideración">Refutar Observación:</label> </td>';
                rows += sut.string.format('<td colspan="4"><textarea name="' + NombreCampo + '"  id="' + NombreCampo +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;" >{0}</textarea></td>', '' );
                rows += '</div>';
                rows += '</div>';
                rows += '</tr>';
                rows += '</tbody>';
                rows += '</table>';

                $('#'+nombdiv+'').append(rows);

                $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "none" });
                $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "" });
                $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "" });

            },


            sustentarObservarExpModalidad: function (num) {


                var tabla = $('#divModalidad0' + num + ' tbody');

                //var Descripcion = $('#DesModalidad' + num).val() + ";:;" + $('#chekModalidad' + num).val() + ";:;" + $('#PreModalidad' + num).val() + ";:;" + $('#CostoModalidad' + num).val();
                var NombreCampo = 'Modalidad';
                var rows = '';

                rows += '<tr id="trdivsustentarModalidad0_' + num + '">'
                rows += sut.string.format('<td style="width:100px;"> Refutar Observación:</td>');
                rows += sut.string.format('<td colspan="3" ><textarea name="ModalidadSustento2' + num + '" id="ModalidadSustento2' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                //rows += sut.string.format('<td><textarea   id="Sustento' + num +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                rows += '</tr>';;

                tabla.append(rows);


                $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });

            },

            sustentarObservarExpRequisitos: function (num) {


                var tabla = $('#divRequisitos0' + num + ' tbody');

                //var Descripcion = $('#DesModalidad' + num).val() + ";:;" + $('#chekModalidad' + num).val() + ";:;" + $('#PreModalidad' + num).val() + ";:;" + $('#CostoModalidad' + num).val();
                var NombreCampo = 'Requisitos';
                var rows = '';


                rows += '<tr id="trdivsustentarRequisitos0_' + num + '">'
                rows += sut.string.format('<td style="width:100px;">Refutar Observación: </td>');
                rows += sut.string.format('<td colspan="3" ><textarea name="RequisitosSustento2' + num + '" id="RequisitosSustento2' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;">{0}</textarea></td>', '');
                //rows += sut.string.format('<td><textarea   id="Sustento' + num +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                rows += '</tr>';;

                tabla.append(rows);


                $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });

            },

            sustentarObservarExpBaseLegal: function (num) {


                var tabla = $('#divBaseLegal0' + num + ' tbody');

                //var Descripcion = $('#DesModalidad' + num).val() + ";:;" + $('#chekModalidad' + num).val() + ";:;" + $('#PreModalidad' + num).val() + ";:;" + $('#CostoModalidad' + num).val();
                var NombreCampo = 'BaseLegal';
                var rows = '';


                rows += '<tr id="trdivsustentarBaseLegal0_' + num + '">'
                rows += sut.string.format('<td style="width:100px;">Refutar Observación: </td>');
                rows += sut.string.format('<td colspan="12" ><textarea name="BaseLegal2' + num + '" id="BaseLegal2' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;">{0}</textarea></td>', '');
                //rows += sut.string.format('<td><textarea   id="Sustento' + num +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                rows += '</tr>';;

                tabla.append(rows);


                $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });

            },

            textosustentoModalidad: function (Descripcion2, estado, nomcampo, num) {


                var tabla = $('#divModalidad0' + num + ' tbody');

                //var Descripcion = $('#DesModalidad' + num).val() + ";:;" + $('#chekModalidad' + num).val() + ";:;" + $('#PreModalidad' + num).val() + ";:;" + $('#CostoModalidad' + num).val();
                var NombreCampo = 'Modalidad';
                var rows = '';


                rows += '<tr id="trdivsustentarModalidad0_' + num + '">'
                rows += sut.string.format('<td style="width:100px;"> Refutar Observación:</td>');
                rows += sut.string.format('<td colspan="3" ><textarea name="ModalidadSustento2' + num + '" id="ModalidadSustento2' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;">{0}</textarea></td>', Descripcion2);
                //rows += sut.string.format('<td><textarea   id="Sustento' + num +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                rows += '</tr>';;

                tabla.append(rows);


                $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
            },
            textosustentoRequisitos: function (Descripcion2, estado, nomcampo, num) {


                var tabla = $('#divRequisitos0' + num + ' tbody');

                //var Descripcion = $('#DesModalidad' + num).val() + ";:;" + $('#chekModalidad' + num).val() + ";:;" + $('#PreModalidad' + num).val() + ";:;" + $('#CostoModalidad' + num).val();
                var NombreCampo = 'Requisitos';
                var rows = '';


                rows += '<tr id="trdivsustentarRequisitos0_' + num + '">'
                rows += sut.string.format('<td style="width:100px;"> Refutar Observación:</td>');
                rows += sut.string.format('<td colspan="3" ><textarea name="RequisitosSustento2' + num + '" id="RequisitosSustento2' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;">{0}</textarea></td>', Descripcion2);
                //rows += sut.string.format('<td><textarea   id="Sustento' + num +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                rows += '</tr>';;

                tabla.append(rows);


                $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
            },
            textosustentoBaseLegal: function (Descripcion2, estado, nomcampo, num) {


                var tabla = $('#divBaseLegal0' + num + ' tbody');

                //var Descripcion = $('#DesModalidad' + num).val() + ";:;" + $('#chekModalidad' + num).val() + ";:;" + $('#PreModalidad' + num).val() + ";:;" + $('#CostoModalidad' + num).val();
                var NombreCampo = 'BaseLegal';
                var rows = '';


                rows += '<tr id="trdivsustentarBaseLegal0_' + num + '">'
                rows += sut.string.format('<td style="width:100px;">Refutar Observación: </td>');
                rows += sut.string.format('<td colspan="12" ><textarea name="BaseLegal2' + num + '" id="BaseLegal2' + num + '" class="form-control" style="border-color:#f39c12;background:#f39c1259;">{0}</textarea></td>', Descripcion2);
                //rows += sut.string.format('<td><textarea   id="Sustento' + num +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;"></textarea></td>');
                rows += '</tr>';;

                tabla.append(rows);


                $('#aSustentarObservarExp'+NombreCampo+num+'').css({ "display": "none" });
                $('#aGuardarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
                $('#aCancelarSustentarExp'+NombreCampo+num+'').css({ "display": "" });
            },




            guardarSustentarExpModalidad: function (idExpediente,procedimientoId,numero,TablaAsmeId) {



                if ($('#ModalidadSustento2'+ numero).val().trim() == "") {

                    showNotification('top', 'right', 'No puedes Guardar una justificación en blanco', 2);
                    return;
                }

                var NombreCampo = 'Modalidad';

                var model = {
                    'filtro.ExpedienteId': idExpediente,
                    'filtro.ProcedimientoId': procedimientoId,
                    'filtro.Descripcion': $('#ModalidadSustento2'+ numero).val() ,
                    'filtro.CodValidacion': '3',
                    'filtro.TipoEstado': '3',
                    'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                    'filtro.Pantalla': 'Datos Generales',
                    'filtro.Estado': '1',
                    'filtro.TablaAsmeId': TablaAsmeId,
                };
                $.ajax({
                    type: "POST",
                    //url: '/Simplificacion/Expediente/AgregarObservacion',
                    url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                    data: model,
                    cache: false,
                    beforeSend: function () {
                        //sut.wait.modal('ventana-container');
                        //$('#modal-ventana').modal('show');
                    },
                    success: function (data) {

                        $('#modal-ventana').modal('hide');

                        $('#mensaje'+NombreCampo+ numero+'').show();
                        document.querySelector('#mensaje'+NombreCampo+ numero+'').innerText = 'Se refuto con éxito';

                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });

                comentario = "";
            },
            guardarSustentarExpRequisitos: function (idExpediente,procedimientoId,numero,RequisitoId) {



                var NombreCampo = 'Requisitos';
                if ($('#RequisitosSustento2'+ numero).val().trim() == "") {

                    showNotification('top', 'right', 'No puedes Guardar una justificación en blanco', 2);
                    return;
                }
                var model = {
                    'filtro.ExpedienteId': idExpediente,
                    'filtro.ProcedimientoId': procedimientoId,
                    'filtro.Descripcion': $('#RequisitosSustento2'+ numero).val() ,
                    'filtro.CodValidacion': '3',
                    'filtro.TipoEstado': '3',
                    'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                    'filtro.Pantalla': 'Datos Generales',
                    'filtro.Estado': '1',
                    'filtro.RequisitoId': RequisitoId,
                };
                $.ajax({
                    type: "POST",
                    //url: '/Simplificacion/Expediente/AgregarObservacion',
                    url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                    data: model,
                    cache: false,
                    beforeSend: function () {
                        //sut.wait.modal('ventana-container');
                        //$('#modal-ventana').modal('show');
                    },
                    success: function (data) {

                        $('#modal-ventana').modal('hide');

                        $('#mensaje'+NombreCampo+ numero+'').show();
                        document.querySelector('#mensaje'+NombreCampo+ numero+'').innerText = 'Se refuto con éxito';

                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });

                comentario = "";
            },
            guardarSustentarExpBaseLegal: function (idExpediente,procedimientoId,numero,BaseLegalId,BaseLegalNormaId) {

                if ($('#BaseLegal2'+ numero).val().trim() == "") {

                    showNotification('top', 'right', 'No puedes Guardar una justificación en blanco', 2);
                    return;
                }
                var NombreCampo = 'BaseLegal';
                var model = {
                    'filtro.ExpedienteId': idExpediente,
                    'filtro.ProcedimientoId': procedimientoId,
                    'filtro.Descripcion': $('#BaseLegal2'+ numero).val() ,
                    'filtro.CodValidacion': '3',
                    'filtro.TipoEstado': '3',
                    'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                    'filtro.Pantalla': 'Datos Generales',
                    'filtro.Estado': '1',
                    'filtro.BaseLegalId': BaseLegalId,
                    'filtro.BaseLegalNormaId': BaseLegalNormaId,
                };
                $.ajax({
                    type: "POST",
                    //url: '/Simplificacion/Expediente/AgregarObservacion',
                    url: '@Url.Content("~/Simplificacion/Expediente/AgregarObservacion")',
                    data: model,
                    cache: false,
                    beforeSend: function () {
                        //sut.wait.modal('ventana-container');
                        //$('#modal-ventana').modal('show');
                    },
                    success: function (data) {

                        $('#modal-ventana').modal('hide');

                        $('#mensaje'+NombreCampo+ numero+'').show();
                        document.querySelector('#mensaje'+NombreCampo+ numero+'').innerText = 'Se refuto con éxito';

                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });

                comentario = "";
            },
            comentario: "",
            CancelarSustentarExpModalidad: function (idExpediente,procedimientoId,numero,TablaAsmeId) {
                var NombreCampo = 'Modalidad';
                var model = {
                    'filtro.ExpedienteId': idExpediente,
                    'filtro.ProcedimientoId': procedimientoId,
                    'filtro.Descripcion': $('#ModalidadSustento2'+ numero).val(),
                    'filtro.CodValidacion': '3',
                    'filtro.TipoEstado': '3',
                    'filtro.NombreCampo': 'NombredelaModalidad' + numero,
                    'filtro.Pantalla': 'Datos Generales',
                    'filtro.Estado': '1',
                    'filtro.TablaAsmeId': TablaAsmeId,
                };

                $.ajax({
                    type: "POST",
                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                    data: model,
                    cache: false,
                    beforeSend: function () {
                        //sut.wait.modal('ventana-container');
                        //$('#modal-ventana').modal('show');
                    },
                    success: function (data) {

                        $('#modal-ventana').modal('hide');

                        $('#aSustentarObservarExp'+NombreCampo+ numero+'').css({ "display": "" });
                        $('#aGuardarSustentarExp'+NombreCampo+ numero+'').css({ "display": "none" });
                        $('#aCancelarSustentarExp'+NombreCampo+ numero+'').css({ "display": "none" });

                        $('#trdivsustentarModalidad0_'+numero).remove();
                        $('#mensaje'+NombreCampo+numero+'').hide();
                        document.querySelector('#mensaje'+NombreCampo+numero+'').innerText = '';


                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });

                comentario = "";

            },

            comentario: "",
            CancelarSustentarExpRequisitos: function (idExpediente,procedimientoId,numero,RequisitoId) {
                var NombreCampo = 'Requisitos';
                var model = {
                    'filtro.ExpedienteId': idExpediente,
                    'filtro.ProcedimientoId': procedimientoId,
                    'filtro.Descripcion': $('#RequisitosSustento2'+ numero).val(),
                    'filtro.CodValidacion': '3',
                    'filtro.TipoEstado': '3',
                    'filtro.NombreCampo': 'NombredelosRequisitos' + numero,
                    'filtro.Pantalla': 'Datos Generales',
                    'filtro.Estado': '1',
                    'filtro.RequisitoId': RequisitoId,
                };

                $.ajax({
                    type: "POST",
                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                    data: model,
                    cache: false,
                    beforeSend: function () {
                        //sut.wait.modal('ventana-container');
                        //$('#modal-ventana').modal('show');
                    },
                    success: function (data) {

                        $('#modal-ventana').modal('hide');

                        $('#aSustentarObservarExp'+NombreCampo+ numero+'').css({ "display": "" });
                        $('#aGuardarSustentarExp'+NombreCampo+ numero+'').css({ "display": "none" });
                        $('#aCancelarSustentarExp'+NombreCampo+ numero+'').css({ "display": "none" });

                        $('#trdivsustentarRequisitos0_'+numero).remove();
                        $('#mensaje'+NombreCampo+numero+'').hide();
                        document.querySelector('#mensaje'+NombreCampo+numero+'').innerText = '';


                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });

                comentario = "";

            },

            comentario: "",
            CancelarSustentarExpBaseLegal: function (idExpediente,procedimientoId,numero,BaseLegalId,BaseLegalNormaId) {
                var NombreCampo = 'BaseLegal';
                var model = {
                    'filtro.ExpedienteId': idExpediente,
                    'filtro.ProcedimientoId': procedimientoId,
                    'filtro.Descripcion': $('#BaseLegal2'+ numero).val(),
                    'filtro.CodValidacion': '3',
                    'filtro.TipoEstado': '3',
                    'filtro.NombreCampo': 'NombredelosBaseLegal' + numero,
                    'filtro.Pantalla': 'Datos Generales',
                    'filtro.Estado': '1',
                    'filtro.BaseLegalId': BaseLegalId,
                    'filtro.BaseLegalNormaId': BaseLegalNormaId,
                };

                $.ajax({
                    type: "POST",
                    //url: '/Simplificacion/Expediente/CancelarDescripcion1',
                    url: '@Url.Content("~/Simplificacion/Expediente/CancelarDescripcion1")',
                    data: model,
                    cache: false,
                    beforeSend: function () {
                        //sut.wait.modal('ventana-container');
                        //$('#modal-ventana').modal('show');
                    },
                    success: function (data) {

                        $('#modal-ventana').modal('hide');

                        $('#aSustentarObservarExp'+NombreCampo+ numero+'').css({ "display": "" });
                        $('#aGuardarSustentarExp'+NombreCampo+ numero+'').css({ "display": "none" });
                        $('#aCancelarSustentarExp'+NombreCampo+ numero+'').css({ "display": "none" });

                        $('#trdivsustentarBaseLegal0_'+numero).remove();
                        $('#mensaje'+NombreCampo+numero+'').hide();
                        document.querySelector('#mensaje'+NombreCampo+numero+'').innerText = '';


                    },
                    error: function (result) {
                        $('#modal-ventana').modal('hide');
                        sut.error.show('mensajes', result.responseText);
                    }
                });

                comentario = "";

            },


            textosustento: function (Descripcion1,nombdiv,nombdivdetalle,titulo,campo,numcol) {


                var rows = '';
                rows += '<div id="'+nombdivdetalle+'">';
                rows += '<label class="col-sm-2 col-xs-12 control-label" for="Objetivo" ><label class="control-label" for="Reconsideración">Refutar Observación:</label></label>';
                rows += '<div class="col-sm-'+numcol+' col-xs-12">';
                rows += sut.string.format('<td><textarea name="' + campo + '"  id="' + campo +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;" >{0}</textarea></td>', Descripcion1 );
                rows += '</div>';
                rows += '</div>';
                $('#'+nombdiv+'').append(rows);
            },

            textosustentoReconsideracion: function (Descripcion1,nombdiv,nombdivdetalle,titulo,campo,numcol) {


                var rows = '';


                var rows = '';
                rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                rows += '<tbody>';
                rows += '<tr>';
                rows += '<div id="'+nombdivdetalle+'">';
                rows += '<td style="width: 120px;"><label class="control-label" for="Reconsideración">Refutar Observación:</label></td>';
                rows += sut.string.format('<td colspan="4"><textarea name="' + campo + '"  id="' + campo +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;" >{0}</textarea></td>', Descripcion1 );
                rows += '</div>';
                rows += '</div>';
                rows += '</tr>';
                rows += '</tbody>';
                rows += '</table>';
                $('#' + nombdiv + '').append(rows);

            },
            textosustentoApelacion: function (Descripcion1,nombdiv,nombdivdetalle,titulo,campo,numcol) {



                var rows = '';
                rows += '<table class="table table-condensed table-bordered table-striped"  style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                rows += '<tbody>';
                rows += '<tr>';
                rows += '<div id="'+nombdivdetalle+'">';
                rows += '<td style="width: 120px;"><label class="control-label" for="Reconsideración">Refutar Observación:</label></td>';
                rows += sut.string.format('<td colspan="4"><textarea name="'+campo+'"  id="'+campo+'" class="form-control" style="border-color:#f39c12;background:#f39c1259;" >{0}</textarea></td>', Descripcion1 );
                rows += '</div>';
                rows += '</div>';
                rows += '</tr>';
                rows += '</tbody>';
                rows += '</table>';
                $('#' + nombdiv + '').append(rows);


            },
            sustentarObservarExpApelacion: function (Descripcion1,nombdiv,nombdivdetalle,titulo,campo,numcol) {


                var NombreCampo='Apelacion';
                var rows = '';
                rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                rows += '<tbody>';
                rows += '<tr>';
                rows += '<div id="'+nombdivdetalle+'">';
                rows += '<td style="width: 120px;"><label class="control-label" for="Reconsideración">Refutar Observación:</label></td>';
                rows += sut.string.format('<td colspan="4"><textarea name="' + campo + '"  id="' + campo +'" class="form-control" style="border-color:#f39c12;background:#f39c1259;" >{0}</textarea></td>', '' );
                rows += '</div>';
                rows += '</div>';
                rows += '</tr>';
                rows += '</tbody>';
                rows += '</table>';
                $('#' + nombdiv + '').append(rows);
                $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "none" });
                $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "" });
                $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "" });

            },

            textoobservacionReconsideracion: function (Descripcion1, Descripcion2, nombdiv, nombdivdetalle, titulo, campo1, campo2, numcol, estado, nomcampo) {


                var Des = Descripcion1.split(";:;");
                var rows = '';
                rows += '<table class="table table-condensed table-bordered table-striped"  style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                rows += '<tbody>';
                rows += '<tr>';
                rows += '<td style="width: 120px;"><label class="control-label" for="Reconsideración"><label class="control-label" for="Reconsideración">Observado</label></label> </td>';
                //rows += sut.string.format('<td colspan="4" ><textarea name="Reconsideracion2" id="Reconsideracion2" class="form-control" style="border-color:red;background:#ff00002e;" readonly >{0}</textarea></td>', Descripcion2);
                rows += sut.string.format('<td><label class="form-control" name="Reconsideracion2" id="Reconsideracion2" style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2 );
                rows += '</tr>';
                rows += '</tbody>';
                rows += '</table>';
                $('#' + nombdiv + '').append(rows);

                if (estado == 'Presentado') {
                    $('#' + nomcampo + '').hide();
                    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                    //visible
                    $('#' + nomcampo + 'label').hide();

                } else {
                    $('#' + nomcampo + '').show();
                    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                    //visible
                    $('#' + nomcampo + 'label').show();
                }


            },
            textoobservacionApelacion: function (Descripcion1, Descripcion2, nombdiv, nombdivdetalle, titulo, campo1, campo2, numcol, estado, nomcampo) {


                var Des = Descripcion1.split(";:;");
                var asdasd = Des[0];

                var rows = '';
                rows += '<table class="table table-condensed table-bordered table-striped" style="margin-bottom: 0px;" id="' + nombdivdetalle + '">';
                rows += '<tbody>';
                rows += '<tr>';
                rows += '<td style="width: 120px;"><label class="control-label" for="Reconsideración"><label class="control-label" for="Reconsideración">Observado</label></label></td>';
                //rows += sut.string.format('<td colspan="4" ><textarea name="Apelacion2" id="Apelacion2" class="form-control" style="border-color:red;background:#ff00002e;" readonly>{0}</textarea></td>', Descripcion2);
                rows += sut.string.format('<td><label class="form-control" name="Apelacion2" id="Apelacion2" style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2 );
                rows += '</tr>';

                rows += '</tbody>';
                rows += '</table>';
                $('#' + nombdiv + '').append(rows);


                if (estado == 'Presentado') {
                    $('#' + nomcampo + '').hide();
                    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                    //visible
                    $('#' + nomcampo + 'label').hide();

                } else {
                    $('#' + nomcampo + '').show();
                    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                    //visible
                    $('#' + nomcampo + 'label').show();
                }


            },
            textoobservacionModalidad: function (Descripcion, Descripcion2, estado, nomcampo, num,numeromod) {


                var Des = Descripcion.split(";:;");
                var tabla = $('#divModalidad0' + num + ' tbody');

                //var Descripcion = $('#DesModalidad' + num).val() + ";:;" + $('#chekModalidad' + num).val() + ";:;" + $('#PreModalidad' + num).val() + ";:;" + $('#CostoModalidad' + num).val();
                var NombreCampo = 'Modalidad';
                var rows = '';


                rows += '<tr id="trdivModalidad0_' + num + '">'
                rows += sut.string.format('<td style="width:100px;"> Observado:</td>');
                //rows += sut.string.format('<td colspan="3" ><textarea name="Modalidad2' + num + '" id="Modalidad2' + num + '" class="form-control" style="border-color:red;background:#ff00002e;" readonly>{0}</textarea></td>', Descripcion2);
                rows += sut.string.format('<td colspan="3" ><label class="form-control" name="Modalidad2' + num + '" id="Modalidad2' + num + '"  style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2);
                rows += '</tr>';;

                tabla.append(rows);

                $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                //$('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });








                //if (estado == 'Presentado') {
                //    $('#' + nomcampo + '').hide();
                //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                //    //visible
                //    $('#' + nomcampo + 'label').hide();

                //} else {
                //    $('#' + nomcampo + '').show();
                //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                //    //visible
                //    $('#' + nomcampo + 'label').show();
                //}


            },

            textoobservacionRequisitos: function (Descripcion, Descripcion2, estado, nomcampo, num) {



                var tabla = $('#divRequisitos0' + num + ' tbody');

                //var Descripcion = $('#DesRequisitos' + num).val() + ";:;" + $('#chekRequisitos' + num).val() + ";:;" + $('#PreRequisitos' + num).val() + ";:;" + $('#CostoRequisitos' + num).val();
                var NombreCampo = 'Requisitos';
                var rows = '';

                rows += '<tr id="trdivRequisitos0_' + num + '">'
                rows += sut.string.format('<td style="width:100px;">Observado: </td>');
                //rows += sut.string.format('<td colspan="3" ><textarea name="Requisitos2' + num + '" id="Requisitos2' + num + '" class="form-control" style="border-color:red;background:#ff00002e;" readonly>{0}</textarea></td>', Descripcion2);
                rows += sut.string.format('<td colspan="3" ><label class="form-control"  name="Requisitos2' + num + '" id="Requisitos2' + num + '"  style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2);

                rows += '</tr>';;

                tabla.append(rows);


                $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                //$('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });




                //if (estado == 'Presentado') {
                //    $('#' + nomcampo + '').hide();
                //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                //    //visible
                //    $('#' + nomcampo + 'label').hide();

                //} else {
                //    $('#' + nomcampo + '').show();
                //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                //    //visible
                //    $('#' + nomcampo + 'label').show();
                //}


            },
            textoobservacionBaseLegal: function (Descripcion, Descripcion2, estado, nomcampo, num) {

                document.getElementById('divBaseLegal0'+num+'').style.visibility = "initial";

                var Des = Descripcion.split(";:;");
                var tabla = $('#divBaseLegal0' + num + ' tbody');

                var NombreCampo = 'BaseLegal';
                var rows = '';

                rows += '<tr id="trdivBaseLegal0_' + num + '">'
                rows += sut.string.format('<td style="width:100px;">Observado: </td>');
                //rows += sut.string.format('<td colspan="6" ><textarea name="BaseLegal2' + num + '" id="BaseLegal2' + num + '" class="form-control" style="border-color:red;background:#ff00002e;" readonly>{0}</textarea></td>', Descripcion2);
                rows += sut.string.format('<td colspan="6" ><label class="form-control" name="BaseLegal2obs' + num + '" id="BaseLegal2obs' + num + '"  style="border-color:red;background:#ff00002e;font-weight: 600;height: 100%;" >{0}</label></td>', Descripcion2);
                rows += '</tr>';;

                tabla.append(rows);

                $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
                $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "" });

                //$('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
                $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "none");
                $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
                $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });



                //if (estado == 'Presentado') {
                //    $('#' + nomcampo + '').hide();
                //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                //    //visible
                //    $('#' + nomcampo + 'label').hide();

                //} else {
                //    $('#' + nomcampo + '').show();
                //    //document.getElementById('#'+dato+'').style.visibility = "hidden";
                //    //visible
                //    $('#' + nomcampo + 'label').show();
                //}


            },

            Scroll: {
                pos : 0,
                init: () => {
                    //$('.menu-compensador').css('height', $('#divBotones').height());
                    //sut.editProcedimiento.Scroll.pos = $('#divBotones').offset().top;
                    //window.onscroll = sut.editProcedimiento.Scroll.ejecutar;
                    //sut.editProcedimiento.Scroll.ejecutar();
                },
                ejecutar: () => {
                    var sc = window.pageYOffset;
                    var menu = $('#divBotones');
                    //var mot = menu.offset().top;
                    if (sc > sut.editProcedimiento.Scroll.pos) {
                        if (!menu.hasClass('fixed')) {
                            menu.addClass('fixed');
                            menu.appendTo($('.menu-fijo'));
                            $('.menu-compensador').show();
                        }
                    } else if (menu.hasClass('fixed')) {
                        menu.removeClass('fixed');
                        menu.appendTo($('.menu-movil'));
                        $('.menu-compensador').hide();
                    }
                },
                getScrollOffsets: () => {
                    /* Esto funciona para todos los navegadores excepto para IE8 y anteriores */
                    if (window.pageXOffset != null) {
                        return {
                            x: window.pageXOffset,
                            y: window.pageYOffset
                        };
                    }

                    /* Funciona para navegadores standards */
                    var doc = window.document;
                    if (document.compatMode === "CSS1Compat") {
                        return {
                            x: doc.documentElement.scrollLeft,
                            y: doc.documentElement.scrollTop
                        };
                    }

                    /* Funciona para navegadores con compatibilidad con navegadores antiguos */
                    return {
                        x: doc.body.scrollLeft,
                        y: doc.body.scrollTop
                    };
                }
            }
        };

        $(function () {
            sut.editProcedimiento.Scroll.init();

            $('a[href|="#edit"]').on('click', (e) => {
                var href = $(e.target).attr('href');
                sut.editProcedimiento.tab = href.substr(1, href.length - 1);
            });

            if (sut.editProcedimiento.tab == '') {
                $('#edit-info-basica').addClass('active');
                //$('#edit-info-basica').parent().addClass('active');
                $('a[href="#edit-info-basica"]').parent().addClass('active');
            } else {
                $('#' + sut.editProcedimiento.tab).addClass('active');
                $('a[href="#' + sut.editProcedimiento.tab + '"]').parent().addClass('active');
            }

            sut.editProcedimiento.Sede.init();
            sut.editProcedimiento.Nota.init();
            sut.editProcedimiento.PasoSeguir.init();
            sut.editProcedimiento.Modalidad.init();
            sut.editProcedimiento.Requisito.init();
            sut.editProcedimiento.BaseLegal.init();
            sut.editProcedimiento.Cargos.init();
            sut.editProcedimiento.Cargos.initApelacion();


             if('@Model.revision' == 1)
            {
            sut.editProcedimiento.Cargos.initOtros();
            }


            //generar orden
            $("#GuardarReqG").css({ "display": "none" });
            $("#CancelarReqG").css({ "display": "none" });



            $("#GuardarReqN").css({ "display": "none" });
            $("#CancelarReqN").css({ "display": "none" });

            //fin


            if('@Model.EditableG' == 1)
            {

                $("#idReqG").css({ "display": "none" });
                $("#AgregarReqG").css({ "display": "none" });

                $("#GuardarReqG").css({ "display": "" });
                $("#CancelarReqG").css({ "display": "" });
            }

            if('@Model.EditableN' == 1)
            {

                $("#idReqN").css({ "display": "none" });
                $("#AgregarReqN").css({ "display": "none" })

                $("#GuardarReqN").css({ "display": "" });
                $("#CancelarReqN").css({ "display": "" }); ;
            }




            @{
                var t = (int)Model.Calificacion;
                var j = (int)Model.TipoPlazo;
            }

            $("#Calificacion").val(@t.ToString());
            $("#TipoPlazo").val(@j.ToString());



            $.each($('#tblCanales input[type="checkbox"], #tblFormasPago input[type="checkbox"]'), (i, r) => {
                var chk = $(r);
                if(!chk.is(':checked')) {
                    chk.parent().next().next().find('input[type="text"]').attr('disabled', 'disabled').val('');

                }

                chk.attr("original", "1");
            });

            $('#tblCanales input[type="checkbox"], #tblFormasPago input[type="checkbox"]').on('change', (e) => {
                var chk = $(e.target);
                if(!chk.is(':checked')) {
                    chk.parent().next().next().find('input[type="text"]').attr('disabled', 'disabled').val('');
                } else {
                    chk.parent().next().next().find('input[type="text"]').removeAttr('disabled');
                }

                chk.attr("original", "0");
            });

            $('#tblModalidad').on('change', 'tbody tr td input[name$="EsGratuito"]', null, (e) => {
                var chk = $(e.target);
                //var txtPrestaciones = chk.parent().parent().find('input[name$="Prestaciones"]');
                var txtCostoUnitario = chk.parent().parent().find('input[name$="CostoUnitario"]');
                if (sut.editProcedimiento.esCargaInicial) {
                    if (chk.is(':checked')) {
                        txtCostoUnitario.val(0).attr('min', 0).attr('disabled', 'disabled');
                    } else {
                        txtCostoUnitario.val(0).attr('min', 0).removeAttr('disabled');
                    }
                }
            });

            $.validator.addMethod("selTipoPlazo", $.validator.methods.min,
            $.validator.format("Debe seleccionar tipo plazo"));


            $('#form-editar').validate({
                errorPlacement: function (error, element) {
                    if (element.parent('div.input-group').length > 0) {
                        error.insertAfter(element.parent('div.input-group'));
                    } else {
                        error.insertAfter(element);
                    }
                },
                rules: {
                    PlazoAtencion : 'integer',
                    PzoReconPresent: 'integer',
                    PzoReconResol: 'integer',
                    //PzoApelPresent: 'integer',
                    //PzoApelResol: 'integer',
                    TipoPlazo: {
                        selTipoPlazo: 1
                    },
                    Correo: {
                        email: true
                    },
                    Telefono: 'digits',
                    Anexo: 'digits' ,
                    Denominacion: {
                        required: true,
                        //maxlength: 500
                    },
                },
                messages: {

                }
            });
            var tempValue = $("#PlazoAtencion").val();
            //if (tempValue>30){
            //    $("#idplazoantencion").css("display", "block");
            //}else{
            //    $("#idplazoantencion").css("display", "none");
            //}






            /*desarrollo de la ayuda*/
            /*minimizar un modal*/

            var $content, $modal, $apnData, $modalCon;

            $content = $(".min");


            //To fire modal
            $(".mdlFire").click(function (e) {

                e.preventDefault();

                var $id = $(this).attr("data-target");

                $($id).modal({ backdrop: false, keyboard: false });

            });



            if(@user.Ayuda==1){
                $('#edit-fase-preparatoria').addClass('active');
                $('a[href="#edit-fase-preparatoria"]').parent().addClass('active');


                $('#tituloocultar').hide();


                $('#modalAyudaAvatar1').modal({backdrop: 'static', keyboard: false})
                $modal = "#modalAyudaAvatar1"
                $($modal).toggleClass("min");
                $modal = "#modalAyudaAvatar1";
                $(".modal-backdrop").addClass("display-none");
                $(".minmaxConayuda").append($apnData);
                $(".modal").css({
                    backgroundColor: "transparent"
                });

            }



            /*fin*/

            $(".modalMinimize").on("click", function(){

                $modalCon = $(this).closest(".mymodal").attr("id");
                $apnData = $(this).closest(".mymodal");
                $modal = "#" + $modalCon;
                $(".modal-backdrop").addClass("display-none");

                $($modal).toggleClass("min2");
                if ( $($modal).hasClass("min2") ){
                    $('#tituloocultar').show();
                    $(".minmaxCon").append($apnData);
                    //$(this).find("i").toggleClass( 'fa-minus fa-2x').toggleClass( 'fa-clone fa-2x');
                    $(".modal").css({
                        backgroundColor: "transparent"
                    });
                }
                else {
                    $('#tituloocultar').hide();
                    $(".minmaxConayuda").append($apnData);
                    //$(this).find("i").toggleClass( 'fa-clone fa-2x').toggleClass( 'fa-minus fa-2x');
                    $(".modal").css({
                        backgroundColor: "transparent"
                    });
                };
            });
        });

        function OcutarReproduccion(id) {
            var divElement = $('#Div' + id);
            if ($('#' + id).is(':checked') === false) {
                divElement.show();
            }
            else {
                divElement.hide();
            }
            sut.editProcedimiento.camposNoRequerido();
        }

        function reFresh() {
            window.location = '@Url.Action("DatosGenerales", "Procedimiento", new { @area = "Simplificacion", @id = Model.ProcedimientoId })' + '?tab=' + sut.editProcedimiento.tab;
        }

        function observarbotones(NombreCampo) {
            $('#aAsignarGuardarObservarExp'+NombreCampo+'').css({ "display": "" });
            $('#aAsignarCancelarObservarExp'+NombreCampo+'').css({ "display": "" });

            //$('#aValidarObservarExp'+NombreCampo+'').css("display","none");
            $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "none");
            $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "none" });
            $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "" });
        }
        function valiarbotones(NombreCampo) {
            //$('#aValidarObservarExp'+NombreCampo+'').css("display","");
            $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "");
            $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "none" });
            $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "none" });
        }
        function sustentobotones(NombreCampo) {


            $('#aSustentarObservarExp'+NombreCampo+'').css({ "display": "none" });
            $('#aGuardarSustentarExp'+NombreCampo+'').css({ "display": "" });
            $('#aCancelarSustentarExp'+NombreCampo+'').css({ "display": "" });

        }
        function canceladobotones(NombreCampo) {
            $('#aAsignarGuardarObservarExp'+NombreCampo+'').css({ "display": "none" });
            $('#aAsignarCancelarObservarExp'+NombreCampo+'').css({ "display": "none" });
            //$('#aValidarObservarExp'+NombreCampo+'').css("display","");
            $('#aCancelarGeneralExp'+NombreCampo+'').css("display", "none");
            $('#aObservarEditarExp'+NombreCampo+'').css({ "display": "" });
            $('#aMasivoObservarExp'+NombreCampo+'').css({ "display": "none" });
        }


        function observarbotonesModalidad(NombreCampo,num) {
            $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "" });
            $('#aAsignarCancelarObservarExp' + NombreCampo + num +  '').css({ "display": "" });

            //$('#aValidarObservarExp' + NombreCampo + num + '').css("display", "none");
            $('#aCancelarGeneralExp' + NombreCampo +  num +'').css("display", "none");
            $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
            $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "" });
        }
        function valiarbotonesModalidad(NombreCampo, num) {
            //$('#aValidarObservarExp' + NombreCampo + num +  '').css("display", "");
            $('#aCancelarGeneralExp' + NombreCampo + num + '').css("display", "");
            //$('#aSustentarObservarExp' + NombreCampo + num + '').css("display", "none");
            $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "none" });
            $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "none" });
        }
        function canceladobotonesModalidad(NombreCampo, num) {
            $('#aAsignarGuardarObservarExp' + NombreCampo + num + '').css({ "display": "none" });
            $('#aAsignarCancelarObservarExp' + NombreCampo + num + '').css({ "display": "none" });
            //$('#aValidarObservarExp' + NombreCampo + num + '').css("display", "");
            $('#aCancelarGeneralExp' + NombreCampo + num +  '').css("display", "none");
            $('#aObservarEditarExp' + NombreCampo + num + '').css({ "display": "" });
            $('#aMasivoObservarExp' + NombreCampo + num + '').css({ "display": "none" });
        }

        function sustentobotonesModalidad(NombreCampo,num) {


            $('#aSustentarObservarExp'+NombreCampo+ num +'').css({ "display": "none" });
            $('#aGuardarSustentarExp'+NombreCampo+ num +'').css({ "display": "" });
            $('#aCancelarSustentarExp'+NombreCampo+ num +'').css({ "display": "" });

        }

        function canceladobotonessustento(NombreCampo) {
            $('#aSustentarObservarExp' + NombreCampo + '').css({ "display": "none" });
        }

        function canceladobotonesModalidadsustento(NombreCampo, num) {
            $('#aSustentarObservarExp' + NombreCampo + num + '').css({ "display": "none" });
        }

        //Agregando envento al boton para subir el excel


       //Requisitos

        document.getElementById('inputreqnotas').addEventListener('change', function () {
            var file = this.files[0];
            if (file) {
                document.getElementById('btnimportarreqnotas').disabled = false;
            } else {
                document.getElementById('btnimportarreqnotas').disabled = true;
            }
        });


        document.getElementById('btnimportarreqnotas').addEventListener('click',async function () {

            //var output = document.getElementById('output');
            var file = document.getElementById('inputreqnotas').files[0];
            if (file) {
                let result = await sut.subirExcel(file, ['Requisitos', 'Notas']);


                let arrayRequisitos = [];
                let arrayNotas = [];

                result.forEach(objeto => {
                    if (objeto.Requisitos) { // Si "Requisitos" no está vacío ni es nulo
                        arrayRequisitos.push(objeto.Requisitos);
                    }
                    if (objeto.Notas) { // Si "Notas" no está vacío ni es nulo
                        arrayNotas.push(objeto.Notas);
                    }
                });

                for (let i = 0; i < arrayRequisitos.length; i++) {
                    sut.editProcedimiento.Requisito.add(1)
                    document.getElementsByName(`Requisito[${i}].Nombre`)[0].value = arrayRequisitos[i];

                }
                for (let j = 0; j < arrayNotas.length; j++) {
                    sut.editProcedimiento.Requisito.add(2)
                    document.getElementsByName(`Requisito[${arrayRequisitos.length+j}].Nombre`)[0].value = arrayNotas[j];

                }
                console.log(result)
            } else {
                showNotification('top', 'right', "No se seleccionó ningún archivo", 3);
            }
        });

        // Base legal

        //Numero de excel a fecha.
        function convertirNumeroExcelAFecha(numero) {
            var excelEpoch = new Date(Date.UTC(1899, 11, 31)); // Fecha de inicio en Excel (31 de diciembre de 1899)
            var millisecondsPerDay = 24 * 60 * 60 * 1000; // Milisegundos en un día

            var fecha = new Date(excelEpoch.getTime() + numero * millisecondsPerDay);

            var day = fecha.getDate();
            var month = fecha.getMonth() + 1;
            var year = fecha.getFullYear();

            // Formatear la fecha en formato dd/mm/yyyy
            var formattedDate = (day < 10 ? '0' : '') + day + '/' + (month < 10 ? '0' : '') + month + '/' + year;

            return formattedDate;
        }

        document.getElementById('inputbaselegal').addEventListener('change', function () {
            var file = this.files[0];
            if (file) {
                document.getElementById('btnimportarbaselegal').disabled = false;
            } else {
                document.getElementById('btnimportarbaselegal').disabled = true;
            }
        });


        document.getElementById('btnimportarbaselegal').addEventListener('click', async function () {

            //var output = document.getElementById('output');
            var file = document.getElementById('inputbaselegal').files[0];
            if (file) {
                let result = await sut.subirExcel(file, /*['Articulo', 'Denominacion', 'Tipo_Norma', 'Numero','Fecha_de_Publicacion']*/)


                result.forEach(objeto => {

                    var bl = {};
                    bl.Index = 0;
                    bl.Nuevo = 1;
                    bl.BaseLegalNormaId = '0'; // $('#form-bl-detalle input[name="BaseLegalNormaId"]').val();
                    bl.TipoBaseLegal = '2';// $('#form-bl-detalle select[name="TipoBaseLegal"]').val();

                    //Informacion de excel
                    bl.Descripcion = objeto['Denominacion'];
                    bl.TipoNormaId = objeto['TipoNormaId']; //$('#form-bl-detalle select[name="TipoNormaId"]').val();
                    bl.NormaTipo = objeto['Tipo_Norma']; // $('#form-bl-detalle select[name="TipoNormaId"] option:selected').text();
                    bl.Numero = objeto['Numero']; // $('#form-bl-detalle input[name="Numero"]').val();
                    bl.FechaPublicacion = convertirNumeroExcelAFecha(objeto['Fecha_de_Publicacion']); // $('#form-bl-detalle input[name="FechaPublicacion"]').val();
                    bl.Articulo = objeto['Articulo']; // $('#form-bl-detalle textarea[name="Articulo"]').val();


                    bl.Url = ''; $('#form-bl-detalle input[name="Url"]').val();
                    bl.NormaId = '';// $('#form-bl-detalle input[name="NormaId"]').val();

                    if (0 != "0") {
                        bl.DescripcionACR = $("#txtaObservarExp").val();
                        if (0 != 3) {
                            if ($('#radio1').is(':checked') == true) {
                                bl.EstadoACR = 1;
                            } else {
                                bl.EstadoACR = 2;
                            }
                        } else {
                            bl.EstadoACR = 3;
                        }
                    }
                    else {
                        if (0 == 3) {
                            bl.EstadoACR = 3;
                        } else {
                            bl.EstadoACR = 1;
                        }

                        bl.DescripcionACR = '';

                    }


                    console.log(bl)
                    //bl.ArchivoAdjuntoId = $('#form-bl-detalle-adjunto input[name="ArchivoAdjuntoId"]').val();

                    //sut.BaseLegal.fnAdd(bl);
                    sut.editProcedimiento.BaseLegal.add(bl)
                   // sut.editProcedimiento.BaseLegal.add(r)
                });


                console.log(result)
            } else {
                showNotification('top', 'right', "No se seleccionó ningún archivo", 3);
            }
        });


        setTimeout(function (e) {
            $('#' + localStorage.getItem('lastTab')).click();
        }, 200)
       
        // Seleccionamos todos los elementos con la clase 'tabdata'
        $(".tabdata").click(function () {
            // Cuando haces clic en un tab, guardamos su id en el localStorage.
            var tabId = $(this).attr('id');
            localStorage.setItem('lastTab', tabId);
            console.log(tabId)
        });




    </script>
}